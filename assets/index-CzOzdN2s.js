(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function r(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(o){if(o.ep)return;o.ep=!0;const u=r(o);fetch(o.href,u)}})();function Uc(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var fc={exports:{}},Al={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fp;function Wv(){if(fp)return Al;fp=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(l,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:a,type:l,key:f,ref:o!==void 0?o:null,props:u}}return Al.Fragment=t,Al.jsx=r,Al.jsxs=r,Al}var dp;function Jv(){return dp||(dp=1,fc.exports=Wv()),fc.exports}var g=Jv(),dc={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp;function $v(){if(hp)return je;hp=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.iterator;function b(T){return T===null||typeof T!="object"?null:(T=x&&T[x]||T["@@iterator"],typeof T=="function"?T:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,w={};function B(T,G,re){this.props=T,this.context=G,this.refs=w,this.updater=re||E}B.prototype.isReactComponent={},B.prototype.setState=function(T,G){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,G,"setState")},B.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function N(){}N.prototype=B.prototype;function q(T,G,re){this.props=T,this.context=G,this.refs=w,this.updater=re||E}var _=q.prototype=new N;_.constructor=q,C(_,B.prototype),_.isPureReactComponent=!0;var Y=Array.isArray,K={H:null,A:null,T:null,S:null,V:null},ce=Object.prototype.hasOwnProperty;function xe(T,G,re,le,Te,Ie){return re=Ie.ref,{$$typeof:a,type:T,key:G,ref:re!==void 0?re:null,props:Ie}}function Se(T,G){return xe(T.type,G,void 0,void 0,void 0,T.props)}function $(T){return typeof T=="object"&&T!==null&&T.$$typeof===a}function ae(T){var G={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(re){return G[re]})}var ne=/\/+/g;function oe(T,G){return typeof T=="object"&&T!==null&&T.key!=null?ae(""+T.key):G.toString(36)}function he(){}function ve(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(he,he):(T.status="pending",T.then(function(G){T.status==="pending"&&(T.status="fulfilled",T.value=G)},function(G){T.status==="pending"&&(T.status="rejected",T.reason=G)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function X(T,G,re,le,Te){var Ie=typeof T;(Ie==="undefined"||Ie==="boolean")&&(T=null);var Ae=!1;if(T===null)Ae=!0;else switch(Ie){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(T.$$typeof){case a:case t:Ae=!0;break;case v:return Ae=T._init,X(Ae(T._payload),G,re,le,Te)}}if(Ae)return Te=Te(T),Ae=le===""?"."+oe(T,0):le,Y(Te)?(re="",Ae!=null&&(re=Ae.replace(ne,"$&/")+"/"),X(Te,G,re,"",function(it){return it})):Te!=null&&($(Te)&&(Te=Se(Te,re+(Te.key==null||T&&T.key===Te.key?"":(""+Te.key).replace(ne,"$&/")+"/")+Ae)),G.push(Te)),1;Ae=0;var dt=le===""?".":le+":";if(Y(T))for(var ze=0;ze<T.length;ze++)le=T[ze],Ie=dt+oe(le,ze),Ae+=X(le,G,re,Ie,Te);else if(ze=b(T),typeof ze=="function")for(T=ze.call(T),ze=0;!(le=T.next()).done;)le=le.value,Ie=dt+oe(le,ze++),Ae+=X(le,G,re,Ie,Te);else if(Ie==="object"){if(typeof T.then=="function")return X(ve(T),G,re,le,Te);throw G=String(T),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function R(T,G,re){if(T==null)return T;var le=[],Te=0;return X(T,le,"","",function(Ie){return G.call(re,Ie,Te++)}),le}function z(T){if(T._status===-1){var G=T._result;G=G(),G.then(function(re){(T._status===0||T._status===-1)&&(T._status=1,T._result=re)},function(re){(T._status===0||T._status===-1)&&(T._status=2,T._result=re)}),T._status===-1&&(T._status=0,T._result=G)}if(T._status===1)return T._result.default;throw T._result}var L=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function ue(){}return je.Children={map:R,forEach:function(T,G,re){R(T,function(){G.apply(this,arguments)},re)},count:function(T){var G=0;return R(T,function(){G++}),G},toArray:function(T){return R(T,function(G){return G})||[]},only:function(T){if(!$(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},je.Component=B,je.Fragment=r,je.Profiler=o,je.PureComponent=q,je.StrictMode=l,je.Suspense=h,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,je.__COMPILER_RUNTIME={__proto__:null,c:function(T){return K.H.useMemoCache(T)}},je.cache=function(T){return function(){return T.apply(null,arguments)}},je.cloneElement=function(T,G,re){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var le=C({},T.props),Te=T.key,Ie=void 0;if(G!=null)for(Ae in G.ref!==void 0&&(Ie=void 0),G.key!==void 0&&(Te=""+G.key),G)!ce.call(G,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&G.ref===void 0||(le[Ae]=G[Ae]);var Ae=arguments.length-2;if(Ae===1)le.children=re;else if(1<Ae){for(var dt=Array(Ae),ze=0;ze<Ae;ze++)dt[ze]=arguments[ze+2];le.children=dt}return xe(T.type,Te,void 0,void 0,Ie,le)},je.createContext=function(T){return T={$$typeof:f,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:u,_context:T},T},je.createElement=function(T,G,re){var le,Te={},Ie=null;if(G!=null)for(le in G.key!==void 0&&(Ie=""+G.key),G)ce.call(G,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(Te[le]=G[le]);var Ae=arguments.length-2;if(Ae===1)Te.children=re;else if(1<Ae){for(var dt=Array(Ae),ze=0;ze<Ae;ze++)dt[ze]=arguments[ze+2];Te.children=dt}if(T&&T.defaultProps)for(le in Ae=T.defaultProps,Ae)Te[le]===void 0&&(Te[le]=Ae[le]);return xe(T,Ie,void 0,void 0,null,Te)},je.createRef=function(){return{current:null}},je.forwardRef=function(T){return{$$typeof:p,render:T}},je.isValidElement=$,je.lazy=function(T){return{$$typeof:v,_payload:{_status:-1,_result:T},_init:z}},je.memo=function(T,G){return{$$typeof:m,type:T,compare:G===void 0?null:G}},je.startTransition=function(T){var G=K.T,re={};K.T=re;try{var le=T(),Te=K.S;Te!==null&&Te(re,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(ue,L)}catch(Ie){L(Ie)}finally{K.T=G}},je.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},je.use=function(T){return K.H.use(T)},je.useActionState=function(T,G,re){return K.H.useActionState(T,G,re)},je.useCallback=function(T,G){return K.H.useCallback(T,G)},je.useContext=function(T){return K.H.useContext(T)},je.useDebugValue=function(){},je.useDeferredValue=function(T,G){return K.H.useDeferredValue(T,G)},je.useEffect=function(T,G,re){var le=K.H;if(typeof re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(T,G)},je.useId=function(){return K.H.useId()},je.useImperativeHandle=function(T,G,re){return K.H.useImperativeHandle(T,G,re)},je.useInsertionEffect=function(T,G){return K.H.useInsertionEffect(T,G)},je.useLayoutEffect=function(T,G){return K.H.useLayoutEffect(T,G)},je.useMemo=function(T,G){return K.H.useMemo(T,G)},je.useOptimistic=function(T,G){return K.H.useOptimistic(T,G)},je.useReducer=function(T,G,re){return K.H.useReducer(T,G,re)},je.useRef=function(T){return K.H.useRef(T)},je.useState=function(T){return K.H.useState(T)},je.useSyncExternalStore=function(T,G,re){return K.H.useSyncExternalStore(T,G,re)},je.useTransition=function(){return K.H.useTransition()},je.version="19.1.1",je}var pp;function Lc(){return pp||(pp=1,dc.exports=$v()),dc.exports}var D=Lc();const lr=Uc(D);var hc={exports:{}},Cl={},pc={exports:{}},mc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp;function eg(){return mp||(mp=1,(function(a){function t(R,z){var L=R.length;R.push(z);e:for(;0<L;){var ue=L-1>>>1,T=R[ue];if(0<o(T,z))R[ue]=z,R[L]=T,L=ue;else break e}}function r(R){return R.length===0?null:R[0]}function l(R){if(R.length===0)return null;var z=R[0],L=R.pop();if(L!==z){R[0]=L;e:for(var ue=0,T=R.length,G=T>>>1;ue<G;){var re=2*(ue+1)-1,le=R[re],Te=re+1,Ie=R[Te];if(0>o(le,L))Te<T&&0>o(Ie,le)?(R[ue]=Ie,R[Te]=L,ue=Te):(R[ue]=le,R[re]=L,ue=re);else if(Te<T&&0>o(Ie,L))R[ue]=Ie,R[Te]=L,ue=Te;else break e}}return z}function o(R,z){var L=R.sortIndex-z.sortIndex;return L!==0?L:R.id-z.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();a.unstable_now=function(){return f.now()-p}}var h=[],m=[],v=1,x=null,b=3,E=!1,C=!1,w=!1,B=!1,N=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function Y(R){for(var z=r(m);z!==null;){if(z.callback===null)l(m);else if(z.startTime<=R)l(m),z.sortIndex=z.expirationTime,t(h,z);else break;z=r(m)}}function K(R){if(w=!1,Y(R),!C)if(r(h)!==null)C=!0,ce||(ce=!0,oe());else{var z=r(m);z!==null&&X(K,z.startTime-R)}}var ce=!1,xe=-1,Se=5,$=-1;function ae(){return B?!0:!(a.unstable_now()-$<Se)}function ne(){if(B=!1,ce){var R=a.unstable_now();$=R;var z=!0;try{e:{C=!1,w&&(w=!1,q(xe),xe=-1),E=!0;var L=b;try{t:{for(Y(R),x=r(h);x!==null&&!(x.expirationTime>R&&ae());){var ue=x.callback;if(typeof ue=="function"){x.callback=null,b=x.priorityLevel;var T=ue(x.expirationTime<=R);if(R=a.unstable_now(),typeof T=="function"){x.callback=T,Y(R),z=!0;break t}x===r(h)&&l(h),Y(R)}else l(h);x=r(h)}if(x!==null)z=!0;else{var G=r(m);G!==null&&X(K,G.startTime-R),z=!1}}break e}finally{x=null,b=L,E=!1}z=void 0}}finally{z?oe():ce=!1}}}var oe;if(typeof _=="function")oe=function(){_(ne)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,ve=he.port2;he.port1.onmessage=ne,oe=function(){ve.postMessage(null)}}else oe=function(){N(ne,0)};function X(R,z){xe=N(function(){R(a.unstable_now())},z)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(R){R.callback=null},a.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<R?Math.floor(1e3/R):5},a.unstable_getCurrentPriorityLevel=function(){return b},a.unstable_next=function(R){switch(b){case 1:case 2:case 3:var z=3;break;default:z=b}var L=b;b=z;try{return R()}finally{b=L}},a.unstable_requestPaint=function(){B=!0},a.unstable_runWithPriority=function(R,z){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var L=b;b=R;try{return z()}finally{b=L}},a.unstable_scheduleCallback=function(R,z,L){var ue=a.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?ue+L:ue):L=ue,R){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=L+T,R={id:v++,callback:z,priorityLevel:R,startTime:L,expirationTime:T,sortIndex:-1},L>ue?(R.sortIndex=L,t(m,R),r(h)===null&&R===r(m)&&(w?(q(xe),xe=-1):w=!0,X(K,L-ue))):(R.sortIndex=T,t(h,R),C||E||(C=!0,ce||(ce=!0,oe()))),R},a.unstable_shouldYield=ae,a.unstable_wrapCallback=function(R){var z=b;return function(){var L=b;b=z;try{return R.apply(this,arguments)}finally{b=L}}}})(mc)),mc}var vp;function tg(){return vp||(vp=1,pc.exports=eg()),pc.exports}var vc={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gp;function ng(){if(gp)return rn;gp=1;var a=Lc();function t(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var l={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(h,m,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:h,containerInfo:m,implementation:v}}var f=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,rn.createPortal=function(h,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return u(h,m,null,v)},rn.flushSync=function(h){var m=f.T,v=l.p;try{if(f.T=null,l.p=2,h)return h()}finally{f.T=m,l.p=v,l.d.f()}},rn.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,l.d.C(h,m))},rn.prefetchDNS=function(h){typeof h=="string"&&l.d.D(h)},rn.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var v=m.as,x=p(v,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,E=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?l.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:E}):v==="script"&&l.d.X(h,{crossOrigin:x,integrity:b,fetchPriority:E,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},rn.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=p(m.as,m.crossOrigin);l.d.M(h,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&l.d.M(h)},rn.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,x=p(v,m.crossOrigin);l.d.L(h,v,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},rn.preloadModule=function(h,m){if(typeof h=="string")if(m){var v=p(m.as,m.crossOrigin);l.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else l.d.m(h)},rn.requestFormReset=function(h){l.d.r(h)},rn.unstable_batchedUpdates=function(h,m){return h(m)},rn.useFormState=function(h,m,v){return f.H.useFormState(h,m,v)},rn.useFormStatus=function(){return f.H.useHostTransitionStatus()},rn.version="19.1.1",rn}var yp;function om(){if(yp)return vc.exports;yp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),vc.exports=ng(),vc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp;function ag(){if(bp)return Cl;bp=1;var a=tg(),t=Lc(),r=om();function l(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(l(188))}function h(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(l(188));return n!==e?null:e}for(var i=e,s=n;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(s=c.return,s!==null){i=s;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return p(c),e;if(d===s)return p(c),n;d=d.sibling}throw Error(l(188))}if(i.return!==s.return)i=c,s=d;else{for(var y=!1,S=c.child;S;){if(S===i){y=!0,i=c,s=d;break}if(S===s){y=!0,s=c,i=d;break}S=S.sibling}if(!y){for(S=d.child;S;){if(S===i){y=!0,i=d,s=c;break}if(S===s){y=!0,s=d,i=c;break}S=S.sibling}if(!y)throw Error(l(189))}}if(i.alternate!==s)throw Error(l(190))}if(i.tag!==3)throw Error(l(188));return i.stateNode.current===i?e:n}function m(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=m(e),n!==null)return n;e=e.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),_=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),$=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),ne=Symbol.iterator;function oe(e){return e===null||typeof e!="object"?null:(e=ne&&e[ne]||e["@@iterator"],typeof e=="function"?e:null)}var he=Symbol.for("react.client.reference");function ve(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===he?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case B:return"Profiler";case w:return"StrictMode";case K:return"Suspense";case ce:return"SuspenseList";case $:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case _:return(e.displayName||"Context")+".Provider";case q:return(e._context.displayName||"Context")+".Consumer";case Y:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xe:return n=e.displayName||null,n!==null?n:ve(e.type)||"Memo";case Se:n=e._payload,e=e._init;try{return ve(e(n))}catch{}}return null}var X=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},ue=[],T=-1;function G(e){return{current:e}}function re(e){0>T||(e.current=ue[T],ue[T]=null,T--)}function le(e,n){T++,ue[T]=e.current,e.current=n}var Te=G(null),Ie=G(null),Ae=G(null),dt=G(null);function ze(e,n){switch(le(Ae,n),le(Ie,e),le(Te,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Gh(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Gh(n),e=jh(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}re(Te),le(Te,e)}function it(){re(Te),re(Ie),re(Ae)}function ln(e){e.memoizedState!==null&&le(dt,e);var n=Te.current,i=jh(n,e.type);n!==i&&(le(Ie,e),le(Te,i))}function Je(e){Ie.current===e&&(re(Te),re(Ie)),dt.current===e&&(re(dt),bl._currentValue=L)}var Ze=Object.prototype.hasOwnProperty,ur=a.unstable_scheduleCallback,jn=a.unstable_cancelCallback,Ei=a.unstable_shouldYield,Pc=a.unstable_requestPaint,Bt=a.unstable_now,Ti=a.unstable_getCurrentPriorityLevel,Ai=a.unstable_ImmediatePriority,Ci=a.unstable_UserBlockingPriority,cr=a.unstable_NormalPriority,fr=a.unstable_LowPriority,Ni=a.unstable_IdlePriority,Bl=a.log,un=a.unstable_setDisableYieldValue,tn=null,Ut=null;function oa(e){if(typeof Bl=="function"&&un(e),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(tn,e)}catch{}}var cn=Math.clz32?Math.clz32:ua,Mi=Math.log,Lr=Math.LN2;function ua(e){return e>>>=0,e===0?32:31-(Mi(e)/Lr|0)|0}var Cn=256,dr=4194304;function Kn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function hr(e,n,i){var s=e.pendingLanes;if(s===0)return 0;var c=0,d=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var S=s&134217727;return S!==0?(s=S&~d,s!==0?c=Kn(s):(y&=S,y!==0?c=Kn(y):i||(i=S&~e,i!==0&&(c=Kn(i))))):(S=s&~d,S!==0?c=Kn(S):y!==0?c=Kn(y):i||(i=s&~e,i!==0&&(c=Kn(i)))),c===0?0:n!==0&&n!==c&&(n&d)===0&&(d=c&-c,i=n&-n,d>=i||d===32&&(i&4194048)!==0)?n:c}function Oa(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function wi(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ri(){var e=Cn;return Cn<<=1,(Cn&4194048)===0&&(Cn=256),e}function kr(){var e=dr;return dr<<=1,(dr&62914560)===0&&(dr=4194304),e}function Ir(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function ca(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Da(e,n,i,s,c,d){var y=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var S=e.entanglements,A=e.expirationTimes,F=e.hiddenUpdates;for(i=y&~i;0<i;){var Z=31-cn(i),ee=1<<Z;S[Z]=0,A[Z]=-1;var H=F[Z];if(H!==null)for(F[Z]=null,Z=0;Z<H.length;Z++){var P=H[Z];P!==null&&(P.lane&=-536870913)}i&=~ee}s!==0&&pr(e,s,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(y&~n))}function pr(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var s=31-cn(n);e.entangledLanes|=n,e.entanglements[s]=e.entanglements[s]|1073741824|i&4194090}function fa(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var s=31-cn(i),c=1<<s;c&n|e[s]&n&&(e[s]|=n),i&=~c}}function Br(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Oi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Di(){var e=z.p;return e!==0?e:(e=window.event,e===void 0?32:ip(e.type))}function co(e,n){var i=z.p;try{return z.p=e,n()}finally{z.p=i}}var Wn=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Wn,Yt="__reactProps$"+Wn,sn="__reactContainer$"+Wn,Fr="__reactEvents$"+Wn,fo="__reactListeners$"+Wn,ho="__reactHandles$"+Wn,Fl="__reactResources$"+Wn,zn="__reactMarker$"+Wn;function Nn(e){delete e[Ft],delete e[Yt],delete e[Fr],delete e[fo],delete e[ho]}function Jn(e){var n=e[Ft];if(n)return n;for(var i=e.parentNode;i;){if(n=i[sn]||i[Ft]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=Yh(e);e!==null;){if(i=e[Ft])return i;e=Yh(e)}return n}e=i,i=e.parentNode}return null}function $n(e){if(e=e[Ft]||e[sn]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function da(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(l(33))}function ea(e){var n=e[Fl];return n||(n=e[Fl]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function bt(e){e[zn]=!0}var Gl=new Set,jl={};function Mn(e,n){_a(e,n),_a(e+"Capture",n)}function _a(e,n){for(jl[e]=n,e=0;e<n.length;e++)Gl.add(n[e])}var po=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gr={},zl={};function mo(e){return Ze.call(zl,e)?!0:Ze.call(Gr,e)?!1:po.test(e)?zl[e]=!0:(Gr[e]=!0,!1)}function jr(e,n,i){if(mo(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var s=n.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function mr(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function wn(e,n,i,s){if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+s)}}var Hl,ha;function Ua(e){if(Hl===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Hl=n&&n[1]||"",ha=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hl+e+ha}var _i=!1;function Ui(e,n){if(!e||_i)return"";_i=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(n){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(P){var H=P}Reflect.construct(e,[],ee)}else{try{ee.call()}catch(P){H=P}e.call(ee.prototype)}}else{try{throw Error()}catch(P){H=P}(ee=e())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(P){if(P&&H&&typeof P.stack=="string")return[P.stack,H.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=s.DetermineComponentFrameRoot(),y=d[0],S=d[1];if(y&&S){var A=y.split(`
`),F=S.split(`
`);for(c=s=0;s<A.length&&!A[s].includes("DetermineComponentFrameRoot");)s++;for(;c<F.length&&!F[c].includes("DetermineComponentFrameRoot");)c++;if(s===A.length||c===F.length)for(s=A.length-1,c=F.length-1;1<=s&&0<=c&&A[s]!==F[c];)c--;for(;1<=s&&0<=c;s--,c--)if(A[s]!==F[c]){if(s!==1||c!==1)do if(s--,c--,0>c||A[s]!==F[c]){var Z=`
`+A[s].replace(" at new "," at ");return e.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",e.displayName)),Z}while(1<=s&&0<=c);break}}}finally{_i=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?Ua(i):""}function Pl(e){switch(e.tag){case 26:case 27:case 5:return Ua(e.type);case 16:return Ua("Lazy");case 13:return Ua("Suspense");case 19:return Ua("SuspenseList");case 0:case 15:return Ui(e.type,!1);case 11:return Ui(e.type.render,!1);case 1:return Ui(e.type,!0);case 31:return Ua("Activity");default:return""}}function k(e){try{var n="";do n+=Pl(e),e=e.return;while(e);return n}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function O(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Q(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function j(e){var n=Q(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),s=""+e[n];if(!e.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,d=i.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(y){s=""+y,d.call(this,y)}}),Object.defineProperty(e,n,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(y){s=""+y},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function te(e){e._valueTracker||(e._valueTracker=j(e))}function me(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),s="";return e&&(s=Q(e)?e.checked?"true":"false":e.value),e=s,e!==i?(n.setValue(e),!0):!1}function fe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var He=/[\n"\\]/g;function Ue(e){return e.replace(He,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function De(e,n,i,s,c,d,y,S){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),n!=null?y==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+O(n)):e.value!==""+O(n)&&(e.value=""+O(n)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),n!=null?Gt(e,y,O(n)):i!=null?Gt(e,y,O(i)):s!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+O(S):e.removeAttribute("name")}function Le(e,n,i,s,c,d,y,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||i!=null){if(!(d!=="submit"&&d!=="reset"||n!=null))return;i=i!=null?""+O(i):"",n=n!=null?""+O(n):i,S||n===e.value||(e.value=n),e.defaultValue=n}s=s??c,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=S?e.checked:!!s,e.defaultChecked=!!s,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y)}function Gt(e,n,i){n==="number"&&fe(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function yt(e,n,i,s){if(e=e.options,n){n={};for(var c=0;c<i.length;c++)n["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=n.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&s&&(e[i].defaultSelected=!0)}else{for(i=""+O(i),n=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function Lt(e,n,i){if(n!=null&&(n=""+O(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+O(i):""}function Rn(e,n,i,s){if(n==null){if(s!=null){if(i!=null)throw Error(l(92));if(X(s)){if(1<s.length)throw Error(l(93));s=s[0]}i=s}i==null&&(i=""),n=i}i=O(n),e.defaultValue=i,s=e.textContent,s===i&&s!==""&&s!==null&&(e.value=s)}function Ce(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pe(e,n,i){var s=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?s?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":s?e.setProperty(n,i):typeof i!="number"||i===0||et.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function Ve(e,n,i){if(n!=null&&typeof n!="object")throw Error(l(62));if(e=e.style,i!=null){for(var s in i)!i.hasOwnProperty(s)||n!=null&&n.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var c in n)s=n[c],n.hasOwnProperty(c)&&i[c]!==s&&pe(e,c,s)}else for(var d in n)n.hasOwnProperty(d)&&pe(e,d,n[d])}function Pe(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fe=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ge=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Me(e){return Ge.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ye=null;function at(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Re=null,lt=null;function St(e){var n=$n(e);if(n&&(e=n.stateNode)){var i=e[Yt]||null;e:switch(e=n.stateNode,n.type){case"input":if(De(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Ue(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var s=i[n];if(s!==e&&s.form===e.form){var c=s[Yt]||null;if(!c)throw Error(l(90));De(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<i.length;n++)s=i[n],s.form===e.form&&me(s)}break e;case"textarea":Lt(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&yt(e,!!i.multiple,n,!1)}}}var Qt=!1;function On(e,n,i){if(Qt)return e(n,i);Qt=!0;try{var s=e(n);return s}finally{if(Qt=!1,(Re!==null||lt!==null)&&(Cs(),Re&&(n=Re,e=lt,lt=Re=null,St(n),e)))for(n=0;n<e.length;n++)St(e[n])}}function jt(e,n){var i=e.stateNode;if(i===null)return null;var s=i[Yt]||null;if(s===null)return null;i=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(l(231,n,typeof i));return i}var At=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nn=!1;if(At)try{var $e={};Object.defineProperty($e,"passive",{get:function(){nn=!0}}),window.addEventListener("test",$e,$e),window.removeEventListener("test",$e,$e)}catch{nn=!1}var xt=null,mt=null,Qe=null;function pn(){if(Qe)return Qe;var e,n=mt,i=n.length,s,c="value"in xt?xt.value:xt.textContent,d=c.length;for(e=0;e<i&&n[e]===c[e];e++);var y=i-e;for(s=1;s<=y&&n[i-s]===c[d-s];s++);return Qe=c.slice(e,1<s?1-s:void 0)}function mn(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Nt(){return!0}function Kt(){return!1}function ht(e){function n(i,s,c,d,y){this._reactName=i,this._targetInst=c,this.type=s,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(i=e[S],this[S]=i?i(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Nt:Kt,this.isPropagationStopped=Kt,this}return v(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Nt)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Nt)},persist:function(){},isPersistent:Nt}),n}var Mt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yl=ht(Mt),Li=v({},Mt,{view:0,detail:0}),Wm=ht(Li),vo,go,ki,ql=v({},Li,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ki&&(ki&&e.type==="mousemove"?(vo=e.screenX-ki.screenX,go=e.screenY-ki.screenY):go=vo=0,ki=e),vo)},movementY:function(e){return"movementY"in e?e.movementY:go}}),Yc=ht(ql),Jm=v({},ql,{dataTransfer:0}),$m=ht(Jm),e0=v({},Li,{relatedTarget:0}),yo=ht(e0),t0=v({},Mt,{animationName:0,elapsedTime:0,pseudoElement:0}),n0=ht(t0),a0=v({},Mt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),r0=ht(a0),i0=v({},Mt,{data:0}),qc=ht(i0),l0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=o0[e])?!!n[e]:!1}function bo(){return u0}var c0=v({},Li,{key:function(e){if(e.key){var n=l0[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=mn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?s0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bo,charCode:function(e){return e.type==="keypress"?mn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),f0=ht(c0),d0=v({},ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vc=ht(d0),h0=v({},Li,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bo}),p0=ht(h0),m0=v({},Mt,{propertyName:0,elapsedTime:0,pseudoElement:0}),v0=ht(m0),g0=v({},ql,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),y0=ht(g0),b0=v({},Mt,{newState:0,oldState:0}),S0=ht(b0),x0=[9,13,27,32],So=At&&"CompositionEvent"in window,Ii=null;At&&"documentMode"in document&&(Ii=document.documentMode);var E0=At&&"TextEvent"in window&&!Ii,Xc=At&&(!So||Ii&&8<Ii&&11>=Ii),Zc=" ",Qc=!1;function Kc(e,n){switch(e){case"keyup":return x0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zr=!1;function T0(e,n){switch(e){case"compositionend":return Wc(n);case"keypress":return n.which!==32?null:(Qc=!0,Zc);case"textInput":return e=n.data,e===Zc&&Qc?null:e;default:return null}}function A0(e,n){if(zr)return e==="compositionend"||!So&&Kc(e,n)?(e=pn(),Qe=mt=xt=null,zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Xc&&n.locale!=="ko"?null:n.data;default:return null}}var C0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!C0[e.type]:n==="textarea"}function $c(e,n,i,s){Re?lt?lt.push(s):lt=[s]:Re=s,n=Ds(n,"onChange"),0<n.length&&(i=new Yl("onChange","change",null,i,s),e.push({event:i,listeners:n}))}var Bi=null,Fi=null;function N0(e){Lh(e,0)}function Vl(e){var n=da(e);if(me(n))return e}function ef(e,n){if(e==="change")return n}var tf=!1;if(At){var xo;if(At){var Eo="oninput"in document;if(!Eo){var nf=document.createElement("div");nf.setAttribute("oninput","return;"),Eo=typeof nf.oninput=="function"}xo=Eo}else xo=!1;tf=xo&&(!document.documentMode||9<document.documentMode)}function af(){Bi&&(Bi.detachEvent("onpropertychange",rf),Fi=Bi=null)}function rf(e){if(e.propertyName==="value"&&Vl(Fi)){var n=[];$c(n,Fi,e,at(e)),On(N0,n)}}function M0(e,n,i){e==="focusin"?(af(),Bi=n,Fi=i,Bi.attachEvent("onpropertychange",rf)):e==="focusout"&&af()}function w0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vl(Fi)}function R0(e,n){if(e==="click")return Vl(n)}function O0(e,n){if(e==="input"||e==="change")return Vl(n)}function D0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var vn=typeof Object.is=="function"?Object.is:D0;function Gi(e,n){if(vn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),s=Object.keys(n);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var c=i[s];if(!Ze.call(n,c)||!vn(e[c],n[c]))return!1}return!0}function lf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sf(e,n){var i=lf(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=n&&s>=n)return{node:i,offset:n-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=lf(i)}}function of(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?of(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function uf(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=fe(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=fe(e.document)}return n}function To(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var _0=At&&"documentMode"in document&&11>=document.documentMode,Hr=null,Ao=null,ji=null,Co=!1;function cf(e,n,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Co||Hr==null||Hr!==fe(s)||(s=Hr,"selectionStart"in s&&To(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ji&&Gi(ji,s)||(ji=s,s=Ds(Ao,"onSelect"),0<s.length&&(n=new Yl("onSelect","select",null,n,i),e.push({event:n,listeners:s}),n.target=Hr)))}function vr(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var Pr={animationend:vr("Animation","AnimationEnd"),animationiteration:vr("Animation","AnimationIteration"),animationstart:vr("Animation","AnimationStart"),transitionrun:vr("Transition","TransitionRun"),transitionstart:vr("Transition","TransitionStart"),transitioncancel:vr("Transition","TransitionCancel"),transitionend:vr("Transition","TransitionEnd")},No={},ff={};At&&(ff=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function gr(e){if(No[e])return No[e];if(!Pr[e])return e;var n=Pr[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in ff)return No[e]=n[i];return e}var df=gr("animationend"),hf=gr("animationiteration"),pf=gr("animationstart"),U0=gr("transitionrun"),L0=gr("transitionstart"),k0=gr("transitioncancel"),mf=gr("transitionend"),vf=new Map,Mo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mo.push("scrollEnd");function Hn(e,n){vf.set(e,n),Mn(n,[e])}var gf=new WeakMap;function Dn(e,n){if(typeof e=="object"&&e!==null){var i=gf.get(e);return i!==void 0?i:(n={value:e,source:n,stack:k(n)},gf.set(e,n),n)}return{value:e,source:n,stack:k(n)}}var _n=[],Yr=0,wo=0;function Xl(){for(var e=Yr,n=wo=Yr=0;n<e;){var i=_n[n];_n[n++]=null;var s=_n[n];_n[n++]=null;var c=_n[n];_n[n++]=null;var d=_n[n];if(_n[n++]=null,s!==null&&c!==null){var y=s.pending;y===null?c.next=c:(c.next=y.next,y.next=c),s.pending=c}d!==0&&yf(i,c,d)}}function Zl(e,n,i,s){_n[Yr++]=e,_n[Yr++]=n,_n[Yr++]=i,_n[Yr++]=s,wo|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Ro(e,n,i,s){return Zl(e,n,i,s),Ql(e)}function qr(e,n){return Zl(e,null,null,n),Ql(e)}function yf(e,n,i){e.lanes|=i;var s=e.alternate;s!==null&&(s.lanes|=i);for(var c=!1,d=e.return;d!==null;)d.childLanes|=i,s=d.alternate,s!==null&&(s.childLanes|=i),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&n!==null&&(c=31-cn(i),e=d.hiddenUpdates,s=e[c],s===null?e[c]=[n]:s.push(n),n.lane=i|536870912),d):null}function Ql(e){if(50<fl)throw fl=0,ku=null,Error(l(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Vr={};function I0(e,n,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(e,n,i,s){return new I0(e,n,i,s)}function Oo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pa(e,n){var i=e.alternate;return i===null?(i=gn(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function bf(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Kl(e,n,i,s,c,d){var y=0;if(s=e,typeof e=="function")Oo(e)&&(y=1);else if(typeof e=="string")y=Fv(e,i,Te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case $:return e=gn(31,i,n,c),e.elementType=$,e.lanes=d,e;case C:return yr(i.children,c,d,n);case w:y=8,c|=24;break;case B:return e=gn(12,i,n,c|2),e.elementType=B,e.lanes=d,e;case K:return e=gn(13,i,n,c),e.elementType=K,e.lanes=d,e;case ce:return e=gn(19,i,n,c),e.elementType=ce,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:case _:y=10;break e;case q:y=9;break e;case Y:y=11;break e;case xe:y=14;break e;case Se:y=16,s=null;break e}y=29,i=Error(l(130,e===null?"null":typeof e,"")),s=null}return n=gn(y,i,n,c),n.elementType=e,n.type=s,n.lanes=d,n}function yr(e,n,i,s){return e=gn(7,e,s,n),e.lanes=i,e}function Do(e,n,i){return e=gn(6,e,null,n),e.lanes=i,e}function _o(e,n,i){return n=gn(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Xr=[],Zr=0,Wl=null,Jl=0,Un=[],Ln=0,br=null,ma=1,va="";function Sr(e,n){Xr[Zr++]=Jl,Xr[Zr++]=Wl,Wl=e,Jl=n}function Sf(e,n,i){Un[Ln++]=ma,Un[Ln++]=va,Un[Ln++]=br,br=e;var s=ma;e=va;var c=32-cn(s)-1;s&=~(1<<c),i+=1;var d=32-cn(n)+c;if(30<d){var y=c-c%5;d=(s&(1<<y)-1).toString(32),s>>=y,c-=y,ma=1<<32-cn(n)+c|i<<c|s,va=d+e}else ma=1<<d|i<<c|s,va=e}function Uo(e){e.return!==null&&(Sr(e,1),Sf(e,1,0))}function Lo(e){for(;e===Wl;)Wl=Xr[--Zr],Xr[Zr]=null,Jl=Xr[--Zr],Xr[Zr]=null;for(;e===br;)br=Un[--Ln],Un[Ln]=null,va=Un[--Ln],Un[Ln]=null,ma=Un[--Ln],Un[Ln]=null}var on=null,wt=null,rt=!1,xr=null,ta=!1,ko=Error(l(519));function Er(e){var n=Error(l(418,""));throw Pi(Dn(n,e)),ko}function xf(e){var n=e.stateNode,i=e.type,s=e.memoizedProps;switch(n[Ft]=e,n[Yt]=s,i){case"dialog":We("cancel",n),We("close",n);break;case"iframe":case"object":case"embed":We("load",n);break;case"video":case"audio":for(i=0;i<hl.length;i++)We(hl[i],n);break;case"source":We("error",n);break;case"img":case"image":case"link":We("error",n),We("load",n);break;case"details":We("toggle",n);break;case"input":We("invalid",n),Le(n,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),te(n);break;case"select":We("invalid",n);break;case"textarea":We("invalid",n),Rn(n,s.value,s.defaultValue,s.children),te(n)}i=s.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||s.suppressHydrationWarning===!0||Fh(n.textContent,i)?(s.popover!=null&&(We("beforetoggle",n),We("toggle",n)),s.onScroll!=null&&We("scroll",n),s.onScrollEnd!=null&&We("scrollend",n),s.onClick!=null&&(n.onclick=_s),n=!0):n=!1,n||Er(e)}function Ef(e){for(on=e.return;on;)switch(on.tag){case 5:case 13:ta=!1;return;case 27:case 3:ta=!0;return;default:on=on.return}}function zi(e){if(e!==on)return!1;if(!rt)return Ef(e),rt=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Wu(e.type,e.memoizedProps)),i=!i),i&&wt&&Er(e),Ef(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(n===0){wt=Yn(e.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++;e=e.nextSibling}wt=null}}else n===27?(n=wt,Qa(e.type)?(e=tc,tc=null,wt=e):wt=n):wt=on?Yn(e.stateNode.nextSibling):null;return!0}function Hi(){wt=on=null,rt=!1}function Tf(){var e=xr;return e!==null&&(hn===null?hn=e:hn.push.apply(hn,e),xr=null),e}function Pi(e){xr===null?xr=[e]:xr.push(e)}var Io=G(null),Tr=null,ga=null;function La(e,n,i){le(Io,n._currentValue),n._currentValue=i}function ya(e){e._currentValue=Io.current,re(Io)}function Bo(e,n,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),e===i)break;e=e.return}}function Fo(e,n,i,s){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var y=c.child;d=d.firstContext;e:for(;d!==null;){var S=d;d=c;for(var A=0;A<n.length;A++)if(S.context===n[A]){d.lanes|=i,S=d.alternate,S!==null&&(S.lanes|=i),Bo(d.return,i,e),s||(y=null);break e}d=S.next}}else if(c.tag===18){if(y=c.return,y===null)throw Error(l(341));y.lanes|=i,d=y.alternate,d!==null&&(d.lanes|=i),Bo(y,i,e),y=null}else y=c.child;if(y!==null)y.return=c;else for(y=c;y!==null;){if(y===e){y=null;break}if(c=y.sibling,c!==null){c.return=y.return,y=c;break}y=y.return}c=y}}function Yi(e,n,i,s){e=null;for(var c=n,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var y=c.alternate;if(y===null)throw Error(l(387));if(y=y.memoizedProps,y!==null){var S=c.type;vn(c.pendingProps.value,y.value)||(e!==null?e.push(S):e=[S])}}else if(c===dt.current){if(y=c.alternate,y===null)throw Error(l(387));y.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(bl):e=[bl])}c=c.return}e!==null&&Fo(n,e,i,s),n.flags|=262144}function $l(e){for(e=e.firstContext;e!==null;){if(!vn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ar(e){Tr=e,ga=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function an(e){return Af(Tr,e)}function es(e,n){return Tr===null&&Ar(e),Af(e,n)}function Af(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},ga===null){if(e===null)throw Error(l(308));ga=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else ga=ga.next=n;return i}var B0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,s){e.push(s)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},F0=a.unstable_scheduleCallback,G0=a.unstable_NormalPriority,zt={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Go(){return{controller:new B0,data:new Map,refCount:0}}function qi(e){e.refCount--,e.refCount===0&&F0(G0,function(){e.controller.abort()})}var Vi=null,jo=0,Qr=0,Kr=null;function j0(e,n){if(Vi===null){var i=Vi=[];jo=0,Qr=Hu(),Kr={status:"pending",value:void 0,then:function(s){i.push(s)}}}return jo++,n.then(Cf,Cf),n}function Cf(){if(--jo===0&&Vi!==null){Kr!==null&&(Kr.status="fulfilled");var e=Vi;Vi=null,Qr=0,Kr=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function z0(e,n){var i=[],s={status:"pending",value:null,reason:null,then:function(c){i.push(c)}};return e.then(function(){s.status="fulfilled",s.value=n;for(var c=0;c<i.length;c++)(0,i[c])(n)},function(c){for(s.status="rejected",s.reason=c,c=0;c<i.length;c++)(0,i[c])(void 0)}),s}var Nf=R.S;R.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&j0(e,n),Nf!==null&&Nf(e,n)};var Cr=G(null);function zo(){var e=Cr.current;return e!==null?e:vt.pooledCache}function ts(e,n){n===null?le(Cr,Cr.current):le(Cr,n.pool)}function Mf(){var e=zo();return e===null?null:{parent:zt._currentValue,pool:e}}var Xi=Error(l(460)),wf=Error(l(474)),ns=Error(l(542)),Ho={then:function(){}};function Rf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function as(){}function Of(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(as,as),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,_f(e),e;default:if(typeof n.status=="string")n.then(as,as);else{if(e=vt,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=n,e.status="pending",e.then(function(s){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=s}},function(s){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=s}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,_f(e),e}throw Zi=n,Xi}}var Zi=null;function Df(){if(Zi===null)throw Error(l(459));var e=Zi;return Zi=null,e}function _f(e){if(e===Xi||e===ns)throw Error(l(483))}var ka=!1;function Po(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yo(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ia(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ba(e,n,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(st&2)!==0){var c=s.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),s.pending=n,n=Ql(e),yf(e,null,i),n}return Zl(e,s,n,i),Ql(e)}function Qi(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var s=n.lanes;s&=e.pendingLanes,i|=s,n.lanes=i,fa(e,i)}}function qo(e,n){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var y={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};d===null?c=d=y:d=d.next=y,i=i.next}while(i!==null);d===null?c=d=n:d=d.next=n}else c=d=n;i={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:s.shared,callbacks:s.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Vo=!1;function Ki(){if(Vo){var e=Kr;if(e!==null)throw e}}function Wi(e,n,i,s){Vo=!1;var c=e.updateQueue;ka=!1;var d=c.firstBaseUpdate,y=c.lastBaseUpdate,S=c.shared.pending;if(S!==null){c.shared.pending=null;var A=S,F=A.next;A.next=null,y===null?d=F:y.next=F,y=A;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,S=Z.lastBaseUpdate,S!==y&&(S===null?Z.firstBaseUpdate=F:S.next=F,Z.lastBaseUpdate=A))}if(d!==null){var ee=c.baseState;y=0,Z=F=A=null,S=d;do{var H=S.lane&-536870913,P=H!==S.lane;if(P?(tt&H)===H:(s&H)===H){H!==0&&H===Qr&&(Vo=!0),Z!==null&&(Z=Z.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Oe=e,Ne=S;H=n;var ft=i;switch(Ne.tag){case 1:if(Oe=Ne.payload,typeof Oe=="function"){ee=Oe.call(ft,ee,H);break e}ee=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ne.payload,H=typeof Oe=="function"?Oe.call(ft,ee,H):Oe,H==null)break e;ee=v({},ee,H);break e;case 2:ka=!0}}H=S.callback,H!==null&&(e.flags|=64,P&&(e.flags|=8192),P=c.callbacks,P===null?c.callbacks=[H]:P.push(H))}else P={lane:H,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Z===null?(F=Z=P,A=ee):Z=Z.next=P,y|=H;if(S=S.next,S===null){if(S=c.shared.pending,S===null)break;P=S,S=P.next,P.next=null,c.lastBaseUpdate=P,c.shared.pending=null}}while(!0);Z===null&&(A=ee),c.baseState=A,c.firstBaseUpdate=F,c.lastBaseUpdate=Z,d===null&&(c.shared.lanes=0),qa|=y,e.lanes=y,e.memoizedState=ee}}function Uf(e,n){if(typeof e!="function")throw Error(l(191,e));e.call(n)}function Lf(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Uf(i[e],n)}var Wr=G(null),rs=G(0);function kf(e,n){e=Ca,le(rs,e),le(Wr,n),Ca=e|n.baseLanes}function Xo(){le(rs,Ca),le(Wr,Wr.current)}function Zo(){Ca=rs.current,re(Wr),re(rs)}var Fa=0,qe=null,ut=null,kt=null,is=!1,Jr=!1,Nr=!1,ls=0,Ji=0,$r=null,H0=0;function Dt(){throw Error(l(321))}function Qo(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!vn(e[i],n[i]))return!1;return!0}function Ko(e,n,i,s,c,d){return Fa=d,qe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,R.H=e===null||e.memoizedState===null?yd:bd,Nr=!1,d=i(s,c),Nr=!1,Jr&&(d=Bf(n,i,s,c)),If(e),d}function If(e){R.H=ds;var n=ut!==null&&ut.next!==null;if(Fa=0,kt=ut=qe=null,is=!1,Ji=0,$r=null,n)throw Error(l(300));e===null||qt||(e=e.dependencies,e!==null&&$l(e)&&(qt=!0))}function Bf(e,n,i,s){qe=e;var c=0;do{if(Jr&&($r=null),Ji=0,Jr=!1,25<=c)throw Error(l(301));if(c+=1,kt=ut=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}R.H=Q0,d=n(i,s)}while(Jr);return d}function P0(){var e=R.H,n=e.useState()[0];return n=typeof n.then=="function"?$i(n):n,e=e.useState()[0],(ut!==null?ut.memoizedState:null)!==e&&(qe.flags|=1024),n}function Wo(){var e=ls!==0;return ls=0,e}function Jo(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function $o(e){if(is){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}is=!1}Fa=0,kt=ut=qe=null,Jr=!1,Ji=ls=0,$r=null}function fn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?qe.memoizedState=kt=e:kt=kt.next=e,kt}function It(){if(ut===null){var e=qe.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var n=kt===null?qe.memoizedState:kt.next;if(n!==null)kt=n,ut=e;else{if(e===null)throw qe.alternate===null?Error(l(467)):Error(l(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},kt===null?qe.memoizedState=kt=e:kt=kt.next=e}return kt}function eu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $i(e){var n=Ji;return Ji+=1,$r===null&&($r=[]),e=Of($r,e,n),n=qe,(kt===null?n.memoizedState:kt.next)===null&&(n=n.alternate,R.H=n===null||n.memoizedState===null?yd:bd),e}function ss(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return $i(e);if(e.$$typeof===_)return an(e)}throw Error(l(438,String(e)))}function tu(e){var n=null,i=qe.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var s=qe.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(n={data:s.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=eu(),qe.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),s=0;s<e;s++)i[s]=ae;return n.index++,i}function ba(e,n){return typeof n=="function"?n(e):n}function os(e){var n=It();return nu(n,ut,e)}function nu(e,n,i){var s=e.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=i;var c=e.baseQueue,d=s.pending;if(d!==null){if(c!==null){var y=c.next;c.next=d.next,d.next=y}n.baseQueue=c=d,s.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{n=c.next;var S=y=null,A=null,F=n,Z=!1;do{var ee=F.lane&-536870913;if(ee!==F.lane?(tt&ee)===ee:(Fa&ee)===ee){var H=F.revertLane;if(H===0)A!==null&&(A=A.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ee===Qr&&(Z=!0);else if((Fa&H)===H){F=F.next,H===Qr&&(Z=!0);continue}else ee={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},A===null?(S=A=ee,y=d):A=A.next=ee,qe.lanes|=H,qa|=H;ee=F.action,Nr&&i(d,ee),d=F.hasEagerState?F.eagerState:i(d,ee)}else H={lane:ee,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},A===null?(S=A=H,y=d):A=A.next=H,qe.lanes|=ee,qa|=ee;F=F.next}while(F!==null&&F!==n);if(A===null?y=d:A.next=S,!vn(d,e.memoizedState)&&(qt=!0,Z&&(i=Kr,i!==null)))throw i;e.memoizedState=d,e.baseState=y,e.baseQueue=A,s.lastRenderedState=d}return c===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function au(e){var n=It(),i=n.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=e;var s=i.dispatch,c=i.pending,d=n.memoizedState;if(c!==null){i.pending=null;var y=c=c.next;do d=e(d,y.action),y=y.next;while(y!==c);vn(d,n.memoizedState)||(qt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),i.lastRenderedState=d}return[d,s]}function Ff(e,n,i){var s=qe,c=It(),d=rt;if(d){if(i===void 0)throw Error(l(407));i=i()}else i=n();var y=!vn((ut||c).memoizedState,i);y&&(c.memoizedState=i,qt=!0),c=c.queue;var S=zf.bind(null,s,c,e);if(el(2048,8,S,[e]),c.getSnapshot!==n||y||kt!==null&&kt.memoizedState.tag&1){if(s.flags|=2048,ei(9,us(),jf.bind(null,s,c,i,n),null),vt===null)throw Error(l(349));d||(Fa&124)!==0||Gf(s,n,i)}return i}function Gf(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=qe.updateQueue,n===null?(n=eu(),qe.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function jf(e,n,i,s){n.value=i,n.getSnapshot=s,Hf(n)&&Pf(e)}function zf(e,n,i){return i(function(){Hf(n)&&Pf(e)})}function Hf(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!vn(e,i)}catch{return!0}}function Pf(e){var n=qr(e,2);n!==null&&En(n,e,2)}function ru(e){var n=fn();if(typeof e=="function"){var i=e;if(e=i(),Nr){oa(!0);try{i()}finally{oa(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},n}function Yf(e,n,i,s){return e.baseState=i,nu(e,ut,typeof s=="function"?s:ba)}function Y0(e,n,i,s,c){if(fs(e))throw Error(l(485));if(e=n.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};R.T!==null?i(!0):d.isTransition=!1,s(d),i=n.pending,i===null?(d.next=n.pending=d,qf(n,d)):(d.next=i.next,n.pending=i.next=d)}}function qf(e,n){var i=n.action,s=n.payload,c=e.state;if(n.isTransition){var d=R.T,y={};R.T=y;try{var S=i(c,s),A=R.S;A!==null&&A(y,S),Vf(e,n,S)}catch(F){iu(e,n,F)}finally{R.T=d}}else try{d=i(c,s),Vf(e,n,d)}catch(F){iu(e,n,F)}}function Vf(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(s){Xf(e,n,s)},function(s){return iu(e,n,s)}):Xf(e,n,i)}function Xf(e,n,i){n.status="fulfilled",n.value=i,Zf(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,qf(e,i)))}function iu(e,n,i){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do n.status="rejected",n.reason=i,Zf(n),n=n.next;while(n!==s)}e.action=null}function Zf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Qf(e,n){return n}function Kf(e,n){if(rt){var i=vt.formState;if(i!==null){e:{var s=qe;if(rt){if(wt){t:{for(var c=wt,d=ta;c.nodeType!==8;){if(!d){c=null;break t}if(c=Yn(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){wt=Yn(c.nextSibling),s=c.data==="F!";break e}}Er(s)}s=!1}s&&(n=i[0])}}return i=fn(),i.memoizedState=i.baseState=n,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qf,lastRenderedState:n},i.queue=s,i=md.bind(null,qe,s),s.dispatch=i,s=ru(!1),d=cu.bind(null,qe,!1,s.queue),s=fn(),c={state:n,dispatch:null,action:e,pending:null},s.queue=c,i=Y0.bind(null,qe,c,d,i),c.dispatch=i,s.memoizedState=e,[n,i,!1]}function Wf(e){var n=It();return Jf(n,ut,e)}function Jf(e,n,i){if(n=nu(e,n,Qf)[0],e=os(ba)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var s=$i(n)}catch(y){throw y===Xi?ns:y}else s=n;n=It();var c=n.queue,d=c.dispatch;return i!==n.memoizedState&&(qe.flags|=2048,ei(9,us(),q0.bind(null,c,i),null)),[s,d,e]}function q0(e,n){e.action=n}function $f(e){var n=It(),i=ut;if(i!==null)return Jf(n,i,e);It(),n=n.memoizedState,i=It();var s=i.queue.dispatch;return i.memoizedState=e,[n,s,!1]}function ei(e,n,i,s){return e={tag:e,create:i,deps:s,inst:n,next:null},n=qe.updateQueue,n===null&&(n=eu(),qe.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,n.lastEffect=e),e}function us(){return{destroy:void 0,resource:void 0}}function ed(){return It().memoizedState}function cs(e,n,i,s){var c=fn();s=s===void 0?null:s,qe.flags|=e,c.memoizedState=ei(1|n,us(),i,s)}function el(e,n,i,s){var c=It();s=s===void 0?null:s;var d=c.memoizedState.inst;ut!==null&&s!==null&&Qo(s,ut.memoizedState.deps)?c.memoizedState=ei(n,d,i,s):(qe.flags|=e,c.memoizedState=ei(1|n,d,i,s))}function td(e,n){cs(8390656,8,e,n)}function nd(e,n){el(2048,8,e,n)}function ad(e,n){return el(4,2,e,n)}function rd(e,n){return el(4,4,e,n)}function id(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function ld(e,n,i){i=i!=null?i.concat([e]):null,el(4,4,id.bind(null,n,e),i)}function lu(){}function sd(e,n){var i=It();n=n===void 0?null:n;var s=i.memoizedState;return n!==null&&Qo(n,s[1])?s[0]:(i.memoizedState=[e,n],e)}function od(e,n){var i=It();n=n===void 0?null:n;var s=i.memoizedState;if(n!==null&&Qo(n,s[1]))return s[0];if(s=e(),Nr){oa(!0);try{e()}finally{oa(!1)}}return i.memoizedState=[s,n],s}function su(e,n,i){return i===void 0||(Fa&1073741824)!==0?e.memoizedState=n:(e.memoizedState=i,e=fh(),qe.lanes|=e,qa|=e,i)}function ud(e,n,i,s){return vn(i,n)?i:Wr.current!==null?(e=su(e,i,s),vn(e,n)||(qt=!0),e):(Fa&42)===0?(qt=!0,e.memoizedState=i):(e=fh(),qe.lanes|=e,qa|=e,n)}function cd(e,n,i,s,c){var d=z.p;z.p=d!==0&&8>d?d:8;var y=R.T,S={};R.T=S,cu(e,!1,n,i);try{var A=c(),F=R.S;if(F!==null&&F(S,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var Z=z0(A,s);tl(e,n,Z,xn(e))}else tl(e,n,s,xn(e))}catch(ee){tl(e,n,{then:function(){},status:"rejected",reason:ee},xn())}finally{z.p=d,R.T=y}}function V0(){}function ou(e,n,i,s){if(e.tag!==5)throw Error(l(476));var c=fd(e).queue;cd(e,c,n,L,i===null?V0:function(){return dd(e),i(s)})}function fd(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:L},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function dd(e){var n=fd(e).next.queue;tl(e,n,{},xn())}function uu(){return an(bl)}function hd(){return It().memoizedState}function pd(){return It().memoizedState}function X0(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=xn();e=Ia(i);var s=Ba(n,e,i);s!==null&&(En(s,n,i),Qi(s,n,i)),n={cache:Go()},e.payload=n;return}n=n.return}}function Z0(e,n,i){var s=xn();i={lane:s,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},fs(e)?vd(n,i):(i=Ro(e,n,i,s),i!==null&&(En(i,e,s),gd(i,n,s)))}function md(e,n,i){var s=xn();tl(e,n,i,s)}function tl(e,n,i,s){var c={lane:s,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(fs(e))vd(n,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var y=n.lastRenderedState,S=d(y,i);if(c.hasEagerState=!0,c.eagerState=S,vn(S,y))return Zl(e,n,c,0),vt===null&&Xl(),!1}catch{}finally{}if(i=Ro(e,n,c,s),i!==null)return En(i,e,s),gd(i,n,s),!0}return!1}function cu(e,n,i,s){if(s={lane:2,revertLane:Hu(),action:s,hasEagerState:!1,eagerState:null,next:null},fs(e)){if(n)throw Error(l(479))}else n=Ro(e,i,s,2),n!==null&&En(n,e,2)}function fs(e){var n=e.alternate;return e===qe||n!==null&&n===qe}function vd(e,n){Jr=is=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function gd(e,n,i){if((i&4194048)!==0){var s=n.lanes;s&=e.pendingLanes,i|=s,n.lanes=i,fa(e,i)}}var ds={readContext:an,use:ss,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt},yd={readContext:an,use:ss,useCallback:function(e,n){return fn().memoizedState=[e,n===void 0?null:n],e},useContext:an,useEffect:td,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,cs(4194308,4,id.bind(null,n,e),i)},useLayoutEffect:function(e,n){return cs(4194308,4,e,n)},useInsertionEffect:function(e,n){cs(4,2,e,n)},useMemo:function(e,n){var i=fn();n=n===void 0?null:n;var s=e();if(Nr){oa(!0);try{e()}finally{oa(!1)}}return i.memoizedState=[s,n],s},useReducer:function(e,n,i){var s=fn();if(i!==void 0){var c=i(n);if(Nr){oa(!0);try{i(n)}finally{oa(!1)}}}else c=n;return s.memoizedState=s.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},s.queue=e,e=e.dispatch=Z0.bind(null,qe,e),[s.memoizedState,e]},useRef:function(e){var n=fn();return e={current:e},n.memoizedState=e},useState:function(e){e=ru(e);var n=e.queue,i=md.bind(null,qe,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:lu,useDeferredValue:function(e,n){var i=fn();return su(i,e,n)},useTransition:function(){var e=ru(!1);return e=cd.bind(null,qe,e.queue,!0,!1),fn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var s=qe,c=fn();if(rt){if(i===void 0)throw Error(l(407));i=i()}else{if(i=n(),vt===null)throw Error(l(349));(tt&124)!==0||Gf(s,n,i)}c.memoizedState=i;var d={value:i,getSnapshot:n};return c.queue=d,td(zf.bind(null,s,d,e),[e]),s.flags|=2048,ei(9,us(),jf.bind(null,s,d,i,n),null),i},useId:function(){var e=fn(),n=vt.identifierPrefix;if(rt){var i=va,s=ma;i=(s&~(1<<32-cn(s)-1)).toString(32)+i,n=""+n+"R"+i,i=ls++,0<i&&(n+="H"+i.toString(32)),n+=""}else i=H0++,n=""+n+"r"+i.toString(32)+"";return e.memoizedState=n},useHostTransitionStatus:uu,useFormState:Kf,useActionState:Kf,useOptimistic:function(e){var n=fn();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=cu.bind(null,qe,!0,i),i.dispatch=n,[e,n]},useMemoCache:tu,useCacheRefresh:function(){return fn().memoizedState=X0.bind(null,qe)}},bd={readContext:an,use:ss,useCallback:sd,useContext:an,useEffect:nd,useImperativeHandle:ld,useInsertionEffect:ad,useLayoutEffect:rd,useMemo:od,useReducer:os,useRef:ed,useState:function(){return os(ba)},useDebugValue:lu,useDeferredValue:function(e,n){var i=It();return ud(i,ut.memoizedState,e,n)},useTransition:function(){var e=os(ba)[0],n=It().memoizedState;return[typeof e=="boolean"?e:$i(e),n]},useSyncExternalStore:Ff,useId:hd,useHostTransitionStatus:uu,useFormState:Wf,useActionState:Wf,useOptimistic:function(e,n){var i=It();return Yf(i,ut,e,n)},useMemoCache:tu,useCacheRefresh:pd},Q0={readContext:an,use:ss,useCallback:sd,useContext:an,useEffect:nd,useImperativeHandle:ld,useInsertionEffect:ad,useLayoutEffect:rd,useMemo:od,useReducer:au,useRef:ed,useState:function(){return au(ba)},useDebugValue:lu,useDeferredValue:function(e,n){var i=It();return ut===null?su(i,e,n):ud(i,ut.memoizedState,e,n)},useTransition:function(){var e=au(ba)[0],n=It().memoizedState;return[typeof e=="boolean"?e:$i(e),n]},useSyncExternalStore:Ff,useId:hd,useHostTransitionStatus:uu,useFormState:$f,useActionState:$f,useOptimistic:function(e,n){var i=It();return ut!==null?Yf(i,ut,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:tu,useCacheRefresh:pd},ti=null,nl=0;function hs(e){var n=nl;return nl+=1,ti===null&&(ti=[]),Of(ti,e,n)}function al(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function ps(e,n){throw n.$$typeof===x?Error(l(525)):(e=Object.prototype.toString.call(n),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Sd(e){var n=e._init;return n(e._payload)}function xd(e){function n(U,M){if(e){var I=U.deletions;I===null?(U.deletions=[M],U.flags|=16):I.push(M)}}function i(U,M){if(!e)return null;for(;M!==null;)n(U,M),M=M.sibling;return null}function s(U){for(var M=new Map;U!==null;)U.key!==null?M.set(U.key,U):M.set(U.index,U),U=U.sibling;return M}function c(U,M){return U=pa(U,M),U.index=0,U.sibling=null,U}function d(U,M,I){return U.index=I,e?(I=U.alternate,I!==null?(I=I.index,I<M?(U.flags|=67108866,M):I):(U.flags|=67108866,M)):(U.flags|=1048576,M)}function y(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function S(U,M,I,W){return M===null||M.tag!==6?(M=Do(I,U.mode,W),M.return=U,M):(M=c(M,I),M.return=U,M)}function A(U,M,I,W){var ge=I.type;return ge===C?Z(U,M,I.props.children,W,I.key):M!==null&&(M.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Se&&Sd(ge)===M.type)?(M=c(M,I.props),al(M,I),M.return=U,M):(M=Kl(I.type,I.key,I.props,null,U.mode,W),al(M,I),M.return=U,M)}function F(U,M,I,W){return M===null||M.tag!==4||M.stateNode.containerInfo!==I.containerInfo||M.stateNode.implementation!==I.implementation?(M=_o(I,U.mode,W),M.return=U,M):(M=c(M,I.children||[]),M.return=U,M)}function Z(U,M,I,W,ge){return M===null||M.tag!==7?(M=yr(I,U.mode,W,ge),M.return=U,M):(M=c(M,I),M.return=U,M)}function ee(U,M,I){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Do(""+M,U.mode,I),M.return=U,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case b:return I=Kl(M.type,M.key,M.props,null,U.mode,I),al(I,M),I.return=U,I;case E:return M=_o(M,U.mode,I),M.return=U,M;case Se:var W=M._init;return M=W(M._payload),ee(U,M,I)}if(X(M)||oe(M))return M=yr(M,U.mode,I,null),M.return=U,M;if(typeof M.then=="function")return ee(U,hs(M),I);if(M.$$typeof===_)return ee(U,es(U,M),I);ps(U,M)}return null}function H(U,M,I,W){var ge=M!==null?M.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return ge!==null?null:S(U,M,""+I,W);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case b:return I.key===ge?A(U,M,I,W):null;case E:return I.key===ge?F(U,M,I,W):null;case Se:return ge=I._init,I=ge(I._payload),H(U,M,I,W)}if(X(I)||oe(I))return ge!==null?null:Z(U,M,I,W,null);if(typeof I.then=="function")return H(U,M,hs(I),W);if(I.$$typeof===_)return H(U,M,es(U,I),W);ps(U,I)}return null}function P(U,M,I,W,ge){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return U=U.get(I)||null,S(M,U,""+W,ge);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return U=U.get(W.key===null?I:W.key)||null,A(M,U,W,ge);case E:return U=U.get(W.key===null?I:W.key)||null,F(M,U,W,ge);case Se:var Xe=W._init;return W=Xe(W._payload),P(U,M,I,W,ge)}if(X(W)||oe(W))return U=U.get(I)||null,Z(M,U,W,ge,null);if(typeof W.then=="function")return P(U,M,I,hs(W),ge);if(W.$$typeof===_)return P(U,M,I,es(M,W),ge);ps(M,W)}return null}function Oe(U,M,I,W){for(var ge=null,Xe=null,Ee=M,we=M=0,Xt=null;Ee!==null&&we<I.length;we++){Ee.index>we?(Xt=Ee,Ee=null):Xt=Ee.sibling;var nt=H(U,Ee,I[we],W);if(nt===null){Ee===null&&(Ee=Xt);break}e&&Ee&&nt.alternate===null&&n(U,Ee),M=d(nt,M,we),Xe===null?ge=nt:Xe.sibling=nt,Xe=nt,Ee=Xt}if(we===I.length)return i(U,Ee),rt&&Sr(U,we),ge;if(Ee===null){for(;we<I.length;we++)Ee=ee(U,I[we],W),Ee!==null&&(M=d(Ee,M,we),Xe===null?ge=Ee:Xe.sibling=Ee,Xe=Ee);return rt&&Sr(U,we),ge}for(Ee=s(Ee);we<I.length;we++)Xt=P(Ee,U,we,I[we],W),Xt!==null&&(e&&Xt.alternate!==null&&Ee.delete(Xt.key===null?we:Xt.key),M=d(Xt,M,we),Xe===null?ge=Xt:Xe.sibling=Xt,Xe=Xt);return e&&Ee.forEach(function(er){return n(U,er)}),rt&&Sr(U,we),ge}function Ne(U,M,I,W){if(I==null)throw Error(l(151));for(var ge=null,Xe=null,Ee=M,we=M=0,Xt=null,nt=I.next();Ee!==null&&!nt.done;we++,nt=I.next()){Ee.index>we?(Xt=Ee,Ee=null):Xt=Ee.sibling;var er=H(U,Ee,nt.value,W);if(er===null){Ee===null&&(Ee=Xt);break}e&&Ee&&er.alternate===null&&n(U,Ee),M=d(er,M,we),Xe===null?ge=er:Xe.sibling=er,Xe=er,Ee=Xt}if(nt.done)return i(U,Ee),rt&&Sr(U,we),ge;if(Ee===null){for(;!nt.done;we++,nt=I.next())nt=ee(U,nt.value,W),nt!==null&&(M=d(nt,M,we),Xe===null?ge=nt:Xe.sibling=nt,Xe=nt);return rt&&Sr(U,we),ge}for(Ee=s(Ee);!nt.done;we++,nt=I.next())nt=P(Ee,U,we,nt.value,W),nt!==null&&(e&&nt.alternate!==null&&Ee.delete(nt.key===null?we:nt.key),M=d(nt,M,we),Xe===null?ge=nt:Xe.sibling=nt,Xe=nt);return e&&Ee.forEach(function(Kv){return n(U,Kv)}),rt&&Sr(U,we),ge}function ft(U,M,I,W){if(typeof I=="object"&&I!==null&&I.type===C&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case b:e:{for(var ge=I.key;M!==null;){if(M.key===ge){if(ge=I.type,ge===C){if(M.tag===7){i(U,M.sibling),W=c(M,I.props.children),W.return=U,U=W;break e}}else if(M.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Se&&Sd(ge)===M.type){i(U,M.sibling),W=c(M,I.props),al(W,I),W.return=U,U=W;break e}i(U,M);break}else n(U,M);M=M.sibling}I.type===C?(W=yr(I.props.children,U.mode,W,I.key),W.return=U,U=W):(W=Kl(I.type,I.key,I.props,null,U.mode,W),al(W,I),W.return=U,U=W)}return y(U);case E:e:{for(ge=I.key;M!==null;){if(M.key===ge)if(M.tag===4&&M.stateNode.containerInfo===I.containerInfo&&M.stateNode.implementation===I.implementation){i(U,M.sibling),W=c(M,I.children||[]),W.return=U,U=W;break e}else{i(U,M);break}else n(U,M);M=M.sibling}W=_o(I,U.mode,W),W.return=U,U=W}return y(U);case Se:return ge=I._init,I=ge(I._payload),ft(U,M,I,W)}if(X(I))return Oe(U,M,I,W);if(oe(I)){if(ge=oe(I),typeof ge!="function")throw Error(l(150));return I=ge.call(I),Ne(U,M,I,W)}if(typeof I.then=="function")return ft(U,M,hs(I),W);if(I.$$typeof===_)return ft(U,M,es(U,I),W);ps(U,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,M!==null&&M.tag===6?(i(U,M.sibling),W=c(M,I),W.return=U,U=W):(i(U,M),W=Do(I,U.mode,W),W.return=U,U=W),y(U)):i(U,M)}return function(U,M,I,W){try{nl=0;var ge=ft(U,M,I,W);return ti=null,ge}catch(Ee){if(Ee===Xi||Ee===ns)throw Ee;var Xe=gn(29,Ee,null,U.mode);return Xe.lanes=W,Xe.return=U,Xe}finally{}}}var ni=xd(!0),Ed=xd(!1),kn=G(null),na=null;function Ga(e){var n=e.alternate;le(Ht,Ht.current&1),le(kn,e),na===null&&(n===null||Wr.current!==null||n.memoizedState!==null)&&(na=e)}function Td(e){if(e.tag===22){if(le(Ht,Ht.current),le(kn,e),na===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(na=e)}}else ja()}function ja(){le(Ht,Ht.current),le(kn,kn.current)}function Sa(e){re(kn),na===e&&(na=null),re(Ht)}var Ht=G(0);function ms(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||ec(i)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function fu(e,n,i,s){n=e.memoizedState,i=i(s,n),i=i==null?n:v({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var du={enqueueSetState:function(e,n,i){e=e._reactInternals;var s=xn(),c=Ia(s);c.payload=n,i!=null&&(c.callback=i),n=Ba(e,c,s),n!==null&&(En(n,e,s),Qi(n,e,s))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var s=xn(),c=Ia(s);c.tag=1,c.payload=n,i!=null&&(c.callback=i),n=Ba(e,c,s),n!==null&&(En(n,e,s),Qi(n,e,s))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=xn(),s=Ia(i);s.tag=2,n!=null&&(s.callback=n),n=Ba(e,s,i),n!==null&&(En(n,e,i),Qi(n,e,i))}};function Ad(e,n,i,s,c,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,y):n.prototype&&n.prototype.isPureReactComponent?!Gi(i,s)||!Gi(c,d):!0}function Cd(e,n,i,s){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,s),n.state!==e&&du.enqueueReplaceState(n,n.state,null)}function Mr(e,n){var i=n;if("ref"in n){i={};for(var s in n)s!=="ref"&&(i[s]=n[s])}if(e=e.defaultProps){i===n&&(i=v({},i));for(var c in e)i[c]===void 0&&(i[c]=e[c])}return i}var vs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Nd(e){vs(e)}function Md(e){console.error(e)}function wd(e){vs(e)}function gs(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(s){setTimeout(function(){throw s})}}function Rd(e,n,i){try{var s=e.onCaughtError;s(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function hu(e,n,i){return i=Ia(i),i.tag=3,i.payload={element:null},i.callback=function(){gs(e,n)},i}function Od(e){return e=Ia(e),e.tag=3,e}function Dd(e,n,i,s){var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;e.payload=function(){return c(d)},e.callback=function(){Rd(n,i,s)}}var y=i.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Rd(n,i,s),typeof c!="function"&&(Va===null?Va=new Set([this]):Va.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})})}function K0(e,n,i,s,c){if(i.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(n=i.alternate,n!==null&&Yi(n,i,c,!0),i=kn.current,i!==null){switch(i.tag){case 13:return na===null?Bu():i.alternate===null&&Rt===0&&(Rt=3),i.flags&=-257,i.flags|=65536,i.lanes=c,s===Ho?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([s]):n.add(s),Gu(e,s,c)),!1;case 22:return i.flags|=65536,s===Ho?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([s]):i.add(s)),Gu(e,s,c)),!1}throw Error(l(435,i.tag))}return Gu(e,s,c),Bu(),!1}if(rt)return n=kn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,s!==ko&&(e=Error(l(422),{cause:s}),Pi(Dn(e,i)))):(s!==ko&&(n=Error(l(423),{cause:s}),Pi(Dn(n,i))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,s=Dn(s,i),c=hu(e.stateNode,s,c),qo(e,c),Rt!==4&&(Rt=2)),!1;var d=Error(l(520),{cause:s});if(d=Dn(d,i),cl===null?cl=[d]:cl.push(d),Rt!==4&&(Rt=2),n===null)return!0;s=Dn(s,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=c&-c,i.lanes|=e,e=hu(i.stateNode,s,e),qo(i,e),!1;case 1:if(n=i.type,d=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Va===null||!Va.has(d))))return i.flags|=65536,c&=-c,i.lanes|=c,c=Od(c),Dd(c,e,i,s),qo(i,c),!1}i=i.return}while(i!==null);return!1}var _d=Error(l(461)),qt=!1;function Wt(e,n,i,s){n.child=e===null?Ed(n,null,i,s):ni(n,e.child,i,s)}function Ud(e,n,i,s,c){i=i.render;var d=n.ref;if("ref"in s){var y={};for(var S in s)S!=="ref"&&(y[S]=s[S])}else y=s;return Ar(n),s=Ko(e,n,i,y,d,c),S=Wo(),e!==null&&!qt?(Jo(e,n,c),xa(e,n,c)):(rt&&S&&Uo(n),n.flags|=1,Wt(e,n,s,c),n.child)}function Ld(e,n,i,s,c){if(e===null){var d=i.type;return typeof d=="function"&&!Oo(d)&&d.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=d,kd(e,n,d,s,c)):(e=Kl(i.type,null,s,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!xu(e,c)){var y=d.memoizedProps;if(i=i.compare,i=i!==null?i:Gi,i(y,s)&&e.ref===n.ref)return xa(e,n,c)}return n.flags|=1,e=pa(d,s),e.ref=n.ref,e.return=n,n.child=e}function kd(e,n,i,s,c){if(e!==null){var d=e.memoizedProps;if(Gi(d,s)&&e.ref===n.ref)if(qt=!1,n.pendingProps=s=d,xu(e,c))(e.flags&131072)!==0&&(qt=!0);else return n.lanes=e.lanes,xa(e,n,c)}return pu(e,n,i,s,c)}function Id(e,n,i){var s=n.pendingProps,c=s.children,d=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if((n.flags&128)!==0){if(s=d!==null?d.baseLanes|i:i,e!==null){for(c=n.child=e.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;n.childLanes=d&~s}else n.childLanes=0,n.child=null;return Bd(e,n,s,i)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&ts(n,d!==null?d.cachePool:null),d!==null?kf(n,d):Xo(),Td(n);else return n.lanes=n.childLanes=536870912,Bd(e,n,d!==null?d.baseLanes|i:i,i)}else d!==null?(ts(n,d.cachePool),kf(n,d),ja(),n.memoizedState=null):(e!==null&&ts(n,null),Xo(),ja());return Wt(e,n,c,i),n.child}function Bd(e,n,i,s){var c=zo();return c=c===null?null:{parent:zt._currentValue,pool:c},n.memoizedState={baseLanes:i,cachePool:c},e!==null&&ts(n,null),Xo(),Td(n),e!==null&&Yi(e,n,s,!0),null}function ys(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(l(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function pu(e,n,i,s,c){return Ar(n),i=Ko(e,n,i,s,void 0,c),s=Wo(),e!==null&&!qt?(Jo(e,n,c),xa(e,n,c)):(rt&&s&&Uo(n),n.flags|=1,Wt(e,n,i,c),n.child)}function Fd(e,n,i,s,c,d){return Ar(n),n.updateQueue=null,i=Bf(n,s,i,c),If(e),s=Wo(),e!==null&&!qt?(Jo(e,n,d),xa(e,n,d)):(rt&&s&&Uo(n),n.flags|=1,Wt(e,n,i,d),n.child)}function Gd(e,n,i,s,c){if(Ar(n),n.stateNode===null){var d=Vr,y=i.contextType;typeof y=="object"&&y!==null&&(d=an(y)),d=new i(s,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=du,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=s,d.state=n.memoizedState,d.refs={},Po(n),y=i.contextType,d.context=typeof y=="object"&&y!==null?an(y):Vr,d.state=n.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(fu(n,i,y,s),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&du.enqueueReplaceState(d,d.state,null),Wi(n,s,d,c),Ki(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),s=!0}else if(e===null){d=n.stateNode;var S=n.memoizedProps,A=Mr(i,S);d.props=A;var F=d.context,Z=i.contextType;y=Vr,typeof Z=="object"&&Z!==null&&(y=an(Z));var ee=i.getDerivedStateFromProps;Z=typeof ee=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=n.pendingProps!==S,Z||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||F!==y)&&Cd(n,d,s,y),ka=!1;var H=n.memoizedState;d.state=H,Wi(n,s,d,c),Ki(),F=n.memoizedState,S||H!==F||ka?(typeof ee=="function"&&(fu(n,i,ee,s),F=n.memoizedState),(A=ka||Ad(n,i,A,s,H,F,y))?(Z||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=F),d.props=s,d.state=F,d.context=y,s=A):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{d=n.stateNode,Yo(e,n),y=n.memoizedProps,Z=Mr(i,y),d.props=Z,ee=n.pendingProps,H=d.context,F=i.contextType,A=Vr,typeof F=="object"&&F!==null&&(A=an(F)),S=i.getDerivedStateFromProps,(F=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==ee||H!==A)&&Cd(n,d,s,A),ka=!1,H=n.memoizedState,d.state=H,Wi(n,s,d,c),Ki();var P=n.memoizedState;y!==ee||H!==P||ka||e!==null&&e.dependencies!==null&&$l(e.dependencies)?(typeof S=="function"&&(fu(n,i,S,s),P=n.memoizedState),(Z=ka||Ad(n,i,Z,s,H,P,A)||e!==null&&e.dependencies!==null&&$l(e.dependencies))?(F||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(s,P,A),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(s,P,A)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=P),d.props=s,d.state=P,d.context=A,s=Z):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&H===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&H===e.memoizedState||(n.flags|=1024),s=!1)}return d=s,ys(e,n),s=(n.flags&128)!==0,d||s?(d=n.stateNode,i=s&&typeof i.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&s?(n.child=ni(n,e.child,null,c),n.child=ni(n,null,i,c)):Wt(e,n,i,c),n.memoizedState=d.state,e=n.child):e=xa(e,n,c),e}function jd(e,n,i,s){return Hi(),n.flags|=256,Wt(e,n,i,s),n.child}var mu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vu(e){return{baseLanes:e,cachePool:Mf()}}function gu(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=In),e}function zd(e,n,i){var s=n.pendingProps,c=!1,d=(n.flags&128)!==0,y;if((y=d)||(y=e!==null&&e.memoizedState===null?!1:(Ht.current&2)!==0),y&&(c=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,e===null){if(rt){if(c?Ga(n):ja(),rt){var S=wt,A;if(A=S){e:{for(A=S,S=ta;A.nodeType!==8;){if(!S){S=null;break e}if(A=Yn(A.nextSibling),A===null){S=null;break e}}S=A}S!==null?(n.memoizedState={dehydrated:S,treeContext:br!==null?{id:ma,overflow:va}:null,retryLane:536870912,hydrationErrors:null},A=gn(18,null,null,0),A.stateNode=S,A.return=n,n.child=A,on=n,wt=null,A=!0):A=!1}A||Er(n)}if(S=n.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return ec(S)?n.lanes=32:n.lanes=536870912,null;Sa(n)}return S=s.children,s=s.fallback,c?(ja(),c=n.mode,S=bs({mode:"hidden",children:S},c),s=yr(s,c,i,null),S.return=n,s.return=n,S.sibling=s,n.child=S,c=n.child,c.memoizedState=vu(i),c.childLanes=gu(e,y,i),n.memoizedState=mu,s):(Ga(n),yu(n,S))}if(A=e.memoizedState,A!==null&&(S=A.dehydrated,S!==null)){if(d)n.flags&256?(Ga(n),n.flags&=-257,n=bu(e,n,i)):n.memoizedState!==null?(ja(),n.child=e.child,n.flags|=128,n=null):(ja(),c=s.fallback,S=n.mode,s=bs({mode:"visible",children:s.children},S),c=yr(c,S,i,null),c.flags|=2,s.return=n,c.return=n,s.sibling=c,n.child=s,ni(n,e.child,null,i),s=n.child,s.memoizedState=vu(i),s.childLanes=gu(e,y,i),n.memoizedState=mu,n=c);else if(Ga(n),ec(S)){if(y=S.nextSibling&&S.nextSibling.dataset,y)var F=y.dgst;y=F,s=Error(l(419)),s.stack="",s.digest=y,Pi({value:s,source:null,stack:null}),n=bu(e,n,i)}else if(qt||Yi(e,n,i,!1),y=(i&e.childLanes)!==0,qt||y){if(y=vt,y!==null&&(s=i&-i,s=(s&42)!==0?1:Br(s),s=(s&(y.suspendedLanes|i))!==0?0:s,s!==0&&s!==A.retryLane))throw A.retryLane=s,qr(e,s),En(y,e,s),_d;S.data==="$?"||Bu(),n=bu(e,n,i)}else S.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=A.treeContext,wt=Yn(S.nextSibling),on=n,rt=!0,xr=null,ta=!1,e!==null&&(Un[Ln++]=ma,Un[Ln++]=va,Un[Ln++]=br,ma=e.id,va=e.overflow,br=n),n=yu(n,s.children),n.flags|=4096);return n}return c?(ja(),c=s.fallback,S=n.mode,A=e.child,F=A.sibling,s=pa(A,{mode:"hidden",children:s.children}),s.subtreeFlags=A.subtreeFlags&65011712,F!==null?c=pa(F,c):(c=yr(c,S,i,null),c.flags|=2),c.return=n,s.return=n,s.sibling=c,n.child=s,s=c,c=n.child,S=e.child.memoizedState,S===null?S=vu(i):(A=S.cachePool,A!==null?(F=zt._currentValue,A=A.parent!==F?{parent:F,pool:F}:A):A=Mf(),S={baseLanes:S.baseLanes|i,cachePool:A}),c.memoizedState=S,c.childLanes=gu(e,y,i),n.memoizedState=mu,s):(Ga(n),i=e.child,e=i.sibling,i=pa(i,{mode:"visible",children:s.children}),i.return=n,i.sibling=null,e!==null&&(y=n.deletions,y===null?(n.deletions=[e],n.flags|=16):y.push(e)),n.child=i,n.memoizedState=null,i)}function yu(e,n){return n=bs({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function bs(e,n){return e=gn(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function bu(e,n,i){return ni(n,e.child,null,i),e=yu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Hd(e,n,i){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n),Bo(e.return,n,i)}function Su(e,n,i,s,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:c}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=i,d.tailMode=c)}function Pd(e,n,i){var s=n.pendingProps,c=s.revealOrder,d=s.tail;if(Wt(e,n,s.children,i),s=Ht.current,(s&2)!==0)s=s&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hd(e,i,n);else if(e.tag===19)Hd(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(le(Ht,s),c){case"forwards":for(i=n.child,c=null;i!==null;)e=i.alternate,e!==null&&ms(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=n.child,n.child=null):(c=i.sibling,i.sibling=null),Su(n,!1,c,i,d);break;case"backwards":for(i=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&ms(e)===null){n.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}Su(n,!0,i,null,d);break;case"together":Su(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function xa(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),qa|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(Yi(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(l(153));if(n.child!==null){for(e=n.child,i=pa(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=pa(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function xu(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&$l(e)))}function W0(e,n,i){switch(n.tag){case 3:ze(n,n.stateNode.containerInfo),La(n,zt,e.memoizedState.cache),Hi();break;case 27:case 5:ln(n);break;case 4:ze(n,n.stateNode.containerInfo);break;case 10:La(n,n.type,n.memoizedProps.value);break;case 13:var s=n.memoizedState;if(s!==null)return s.dehydrated!==null?(Ga(n),n.flags|=128,null):(i&n.child.childLanes)!==0?zd(e,n,i):(Ga(n),e=xa(e,n,i),e!==null?e.sibling:null);Ga(n);break;case 19:var c=(e.flags&128)!==0;if(s=(i&n.childLanes)!==0,s||(Yi(e,n,i,!1),s=(i&n.childLanes)!==0),c){if(s)return Pd(e,n,i);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),le(Ht,Ht.current),s)break;return null;case 22:case 23:return n.lanes=0,Id(e,n,i);case 24:La(n,zt,e.memoizedState.cache)}return xa(e,n,i)}function Yd(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)qt=!0;else{if(!xu(e,i)&&(n.flags&128)===0)return qt=!1,W0(e,n,i);qt=(e.flags&131072)!==0}else qt=!1,rt&&(n.flags&1048576)!==0&&Sf(n,Jl,n.index);switch(n.lanes=0,n.tag){case 16:e:{e=n.pendingProps;var s=n.elementType,c=s._init;if(s=c(s._payload),n.type=s,typeof s=="function")Oo(s)?(e=Mr(s,e),n.tag=1,n=Gd(null,n,s,e,i)):(n.tag=0,n=pu(null,n,s,e,i));else{if(s!=null){if(c=s.$$typeof,c===Y){n.tag=11,n=Ud(null,n,s,e,i);break e}else if(c===xe){n.tag=14,n=Ld(null,n,s,e,i);break e}}throw n=ve(s)||s,Error(l(306,n,""))}}return n;case 0:return pu(e,n,n.type,n.pendingProps,i);case 1:return s=n.type,c=Mr(s,n.pendingProps),Gd(e,n,s,c,i);case 3:e:{if(ze(n,n.stateNode.containerInfo),e===null)throw Error(l(387));s=n.pendingProps;var d=n.memoizedState;c=d.element,Yo(e,n),Wi(n,s,null,i);var y=n.memoizedState;if(s=y.cache,La(n,zt,s),s!==d.cache&&Fo(n,[zt],i,!0),Ki(),s=y.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=jd(e,n,s,i);break e}else if(s!==c){c=Dn(Error(l(424)),n),Pi(c),n=jd(e,n,s,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(wt=Yn(e.firstChild),on=n,rt=!0,xr=null,ta=!0,i=Ed(n,null,s,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Hi(),s===c){n=xa(e,n,i);break e}Wt(e,n,s,i)}n=n.child}return n;case 26:return ys(e,n),e===null?(i=Zh(n.type,null,n.pendingProps,null))?n.memoizedState=i:rt||(i=n.type,e=n.pendingProps,s=Us(Ae.current).createElement(i),s[Ft]=n,s[Yt]=e,$t(s,i,e),bt(s),n.stateNode=s):n.memoizedState=Zh(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return ln(n),e===null&&rt&&(s=n.stateNode=qh(n.type,n.pendingProps,Ae.current),on=n,ta=!0,c=wt,Qa(n.type)?(tc=c,wt=Yn(s.firstChild)):wt=c),Wt(e,n,n.pendingProps.children,i),ys(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&rt&&((c=s=wt)&&(s=Cv(s,n.type,n.pendingProps,ta),s!==null?(n.stateNode=s,on=n,wt=Yn(s.firstChild),ta=!1,c=!0):c=!1),c||Er(n)),ln(n),c=n.type,d=n.pendingProps,y=e!==null?e.memoizedProps:null,s=d.children,Wu(c,d)?s=null:y!==null&&Wu(c,y)&&(n.flags|=32),n.memoizedState!==null&&(c=Ko(e,n,P0,null,null,i),bl._currentValue=c),ys(e,n),Wt(e,n,s,i),n.child;case 6:return e===null&&rt&&((e=i=wt)&&(i=Nv(i,n.pendingProps,ta),i!==null?(n.stateNode=i,on=n,wt=null,e=!0):e=!1),e||Er(n)),null;case 13:return zd(e,n,i);case 4:return ze(n,n.stateNode.containerInfo),s=n.pendingProps,e===null?n.child=ni(n,null,s,i):Wt(e,n,s,i),n.child;case 11:return Ud(e,n,n.type,n.pendingProps,i);case 7:return Wt(e,n,n.pendingProps,i),n.child;case 8:return Wt(e,n,n.pendingProps.children,i),n.child;case 12:return Wt(e,n,n.pendingProps.children,i),n.child;case 10:return s=n.pendingProps,La(n,n.type,s.value),Wt(e,n,s.children,i),n.child;case 9:return c=n.type._context,s=n.pendingProps.children,Ar(n),c=an(c),s=s(c),n.flags|=1,Wt(e,n,s,i),n.child;case 14:return Ld(e,n,n.type,n.pendingProps,i);case 15:return kd(e,n,n.type,n.pendingProps,i);case 19:return Pd(e,n,i);case 31:return s=n.pendingProps,i=n.mode,s={mode:s.mode,children:s.children},e===null?(i=bs(s,i),i.ref=n.ref,n.child=i,i.return=n,n=i):(i=pa(e.child,s),i.ref=n.ref,n.child=i,i.return=n,n=i),n;case 22:return Id(e,n,i);case 24:return Ar(n),s=an(zt),e===null?(c=zo(),c===null&&(c=vt,d=Go(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=i),c=d),n.memoizedState={parent:s,cache:c},Po(n),La(n,zt,c)):((e.lanes&i)!==0&&(Yo(e,n),Wi(n,null,null,i),Ki()),c=e.memoizedState,d=n.memoizedState,c.parent!==s?(c={parent:s,cache:s},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),La(n,zt,s)):(s=d.cache,La(n,zt,s),s!==c.cache&&Fo(n,[zt],i,!0))),Wt(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(l(156,n.tag))}function Ea(e){e.flags|=4}function qd(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!$h(n)){if(n=kn.current,n!==null&&((tt&4194048)===tt?na!==null:(tt&62914560)!==tt&&(tt&536870912)===0||n!==na))throw Zi=Ho,wf;e.flags|=8192}}function Ss(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?kr():536870912,e.lanes|=n,li|=n)}function rl(e,n){if(!rt)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ct(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(n)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags&65011712,s|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=i,n}function J0(e,n,i){var s=n.pendingProps;switch(Lo(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(n),null;case 1:return Ct(n),null;case 3:return i=n.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),ya(zt),it(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(zi(n)?Ea(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Tf())),Ct(n),null;case 26:return i=n.memoizedState,e===null?(Ea(n),i!==null?(Ct(n),qd(n,i)):(Ct(n),n.flags&=-16777217)):i?i!==e.memoizedState?(Ea(n),Ct(n),qd(n,i)):(Ct(n),n.flags&=-16777217):(e.memoizedProps!==s&&Ea(n),Ct(n),n.flags&=-16777217),null;case 27:Je(n),i=Ae.current;var c=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==s&&Ea(n);else{if(!s){if(n.stateNode===null)throw Error(l(166));return Ct(n),null}e=Te.current,zi(n)?xf(n):(e=qh(c,s,i),n.stateNode=e,Ea(n))}return Ct(n),null;case 5:if(Je(n),i=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==s&&Ea(n);else{if(!s){if(n.stateNode===null)throw Error(l(166));return Ct(n),null}if(e=Te.current,zi(n))xf(n);else{switch(c=Us(Ae.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?c.createElement("select",{is:s.is}):c.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?c.createElement(i,{is:s.is}):c.createElement(i)}}e[Ft]=n,e[Yt]=s;e:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break e;for(;c.sibling===null;){if(c.return===null||c.return===n)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=e;e:switch($t(e,i,s),i){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ea(n)}}return Ct(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==s&&Ea(n);else{if(typeof s!="string"&&n.stateNode===null)throw Error(l(166));if(e=Ae.current,zi(n)){if(e=n.stateNode,i=n.memoizedProps,s=null,c=on,c!==null)switch(c.tag){case 27:case 5:s=c.memoizedProps}e[Ft]=n,e=!!(e.nodeValue===i||s!==null&&s.suppressHydrationWarning===!0||Fh(e.nodeValue,i)),e||Er(n)}else e=Us(e).createTextNode(s),e[Ft]=n,n.stateNode=e}return Ct(n),null;case 13:if(s=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=zi(n),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));c[Ft]=n}else Hi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ct(n),c=!1}else c=Tf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(Sa(n),n):(Sa(n),null)}if(Sa(n),(n.flags&128)!==0)return n.lanes=i,n;if(i=s!==null,e=e!==null&&e.memoizedState!==null,i){s=n.child,c=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(c=s.alternate.memoizedState.cachePool.pool);var d=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==c&&(s.flags|=2048)}return i!==e&&i&&(n.child.flags|=8192),Ss(n,n.updateQueue),Ct(n),null;case 4:return it(),e===null&&Vu(n.stateNode.containerInfo),Ct(n),null;case 10:return ya(n.type),Ct(n),null;case 19:if(re(Ht),c=n.memoizedState,c===null)return Ct(n),null;if(s=(n.flags&128)!==0,d=c.rendering,d===null)if(s)rl(c,!1);else{if(Rt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=ms(e),d!==null){for(n.flags|=128,rl(c,!1),e=d.updateQueue,n.updateQueue=e,Ss(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)bf(i,e),i=i.sibling;return le(Ht,Ht.current&1|2),n.child}e=e.sibling}c.tail!==null&&Bt()>Ts&&(n.flags|=128,s=!0,rl(c,!1),n.lanes=4194304)}else{if(!s)if(e=ms(d),e!==null){if(n.flags|=128,s=!0,e=e.updateQueue,n.updateQueue=e,Ss(n,e),rl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!rt)return Ct(n),null}else 2*Bt()-c.renderingStartTime>Ts&&i!==536870912&&(n.flags|=128,s=!0,rl(c,!1),n.lanes=4194304);c.isBackwards?(d.sibling=n.child,n.child=d):(e=c.last,e!==null?e.sibling=d:n.child=d,c.last=d)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Bt(),n.sibling=null,e=Ht.current,le(Ht,s?e&1|2:e&1),n):(Ct(n),null);case 22:case 23:return Sa(n),Zo(),s=n.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(n.flags|=8192):s&&(n.flags|=8192),s?(i&536870912)!==0&&(n.flags&128)===0&&(Ct(n),n.subtreeFlags&6&&(n.flags|=8192)):Ct(n),i=n.updateQueue,i!==null&&Ss(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==i&&(n.flags|=2048),e!==null&&re(Cr),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),ya(zt),Ct(n),null;case 25:return null;case 30:return null}throw Error(l(156,n.tag))}function $0(e,n){switch(Lo(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return ya(zt),it(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Je(n),null;case 13:if(Sa(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(l(340));Hi()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return re(Ht),null;case 4:return it(),null;case 10:return ya(n.type),null;case 22:case 23:return Sa(n),Zo(),e!==null&&re(Cr),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return ya(zt),null;case 25:return null;default:return null}}function Vd(e,n){switch(Lo(n),n.tag){case 3:ya(zt),it();break;case 26:case 27:case 5:Je(n);break;case 4:it();break;case 13:Sa(n);break;case 19:re(Ht);break;case 10:ya(n.type);break;case 22:case 23:Sa(n),Zo(),e!==null&&re(Cr);break;case 24:ya(zt)}}function il(e,n){try{var i=n.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var c=s.next;i=c;do{if((i.tag&e)===e){s=void 0;var d=i.create,y=i.inst;s=d(),y.destroy=s}i=i.next}while(i!==c)}}catch(S){pt(n,n.return,S)}}function za(e,n,i){try{var s=n.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var d=c.next;s=d;do{if((s.tag&e)===e){var y=s.inst,S=y.destroy;if(S!==void 0){y.destroy=void 0,c=n;var A=i,F=S;try{F()}catch(Z){pt(c,A,Z)}}}s=s.next}while(s!==d)}}catch(Z){pt(n,n.return,Z)}}function Xd(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{Lf(n,i)}catch(s){pt(e,e.return,s)}}}function Zd(e,n,i){i.props=Mr(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(s){pt(e,n,s)}}function ll(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof i=="function"?e.refCleanup=i(s):i.current=s}}catch(c){pt(e,n,c)}}function aa(e,n){var i=e.ref,s=e.refCleanup;if(i!==null)if(typeof s=="function")try{s()}catch(c){pt(e,n,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(c){pt(e,n,c)}else i.current=null}function Qd(e){var n=e.type,i=e.memoizedProps,s=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break e;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(c){pt(e,e.return,c)}}function Eu(e,n,i){try{var s=e.stateNode;Sv(s,e.type,i,n),s[Yt]=n}catch(c){pt(e,e.return,c)}}function Kd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Qa(e.type)||e.tag===4}function Tu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Kd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Qa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Au(e,n,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=_s));else if(s!==4&&(s===27&&Qa(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(Au(e,n,i),e=e.sibling;e!==null;)Au(e,n,i),e=e.sibling}function xs(e,n,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(s!==4&&(s===27&&Qa(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(xs(e,n,i),e=e.sibling;e!==null;)xs(e,n,i),e=e.sibling}function Wd(e){var n=e.stateNode,i=e.memoizedProps;try{for(var s=e.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);$t(n,s,i),n[Ft]=e,n[Yt]=i}catch(d){pt(e,e.return,d)}}var Ta=!1,_t=!1,Cu=!1,Jd=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function ev(e,n){if(e=e.containerInfo,Qu=Gs,e=uf(e),To(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var c=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var y=0,S=-1,A=-1,F=0,Z=0,ee=e,H=null;t:for(;;){for(var P;ee!==i||c!==0&&ee.nodeType!==3||(S=y+c),ee!==d||s!==0&&ee.nodeType!==3||(A=y+s),ee.nodeType===3&&(y+=ee.nodeValue.length),(P=ee.firstChild)!==null;)H=ee,ee=P;for(;;){if(ee===e)break t;if(H===i&&++F===c&&(S=y),H===d&&++Z===s&&(A=y),(P=ee.nextSibling)!==null)break;ee=H,H=ee.parentNode}ee=P}i=S===-1||A===-1?null:{start:S,end:A}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ku={focusedElem:e,selectionRange:i},Gs=!1,Vt=n;Vt!==null;)if(n=Vt,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,Vt=e;else for(;Vt!==null;){switch(n=Vt,d=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,i=n,c=d.memoizedProps,d=d.memoizedState,s=i.stateNode;try{var Oe=Mr(i.type,c,i.elementType===i.type);e=s.getSnapshotBeforeUpdate(Oe,d),s.__reactInternalSnapshotBeforeUpdate=e}catch(Ne){pt(i,i.return,Ne)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)$u(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":$u(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=n.sibling,e!==null){e.return=n.return,Vt=e;break}Vt=n.return}}function $d(e,n,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:Ha(e,i),s&4&&il(5,i);break;case 1:if(Ha(e,i),s&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(y){pt(i,i.return,y)}else{var c=Mr(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(c,n,e.__reactInternalSnapshotBeforeUpdate)}catch(y){pt(i,i.return,y)}}s&64&&Xd(i),s&512&&ll(i,i.return);break;case 3:if(Ha(e,i),s&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Lf(e,n)}catch(y){pt(i,i.return,y)}}break;case 27:n===null&&s&4&&Wd(i);case 26:case 5:Ha(e,i),n===null&&s&4&&Qd(i),s&512&&ll(i,i.return);break;case 12:Ha(e,i);break;case 13:Ha(e,i),s&4&&nh(e,i),s&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=uv.bind(null,i),Mv(e,i))));break;case 22:if(s=i.memoizedState!==null||Ta,!s){n=n!==null&&n.memoizedState!==null||_t,c=Ta;var d=_t;Ta=s,(_t=n)&&!d?Pa(e,i,(i.subtreeFlags&8772)!==0):Ha(e,i),Ta=c,_t=d}break;case 30:break;default:Ha(e,i)}}function eh(e){var n=e.alternate;n!==null&&(e.alternate=null,eh(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Nn(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Et=null,dn=!1;function Aa(e,n,i){for(i=i.child;i!==null;)th(e,n,i),i=i.sibling}function th(e,n,i){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(tn,i)}catch{}switch(i.tag){case 26:_t||aa(i,n),Aa(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:_t||aa(i,n);var s=Et,c=dn;Qa(i.type)&&(Et=i.stateNode,dn=!1),Aa(e,n,i),ml(i.stateNode),Et=s,dn=c;break;case 5:_t||aa(i,n);case 6:if(s=Et,c=dn,Et=null,Aa(e,n,i),Et=s,dn=c,Et!==null)if(dn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(i.stateNode)}catch(d){pt(i,n,d)}else try{Et.removeChild(i.stateNode)}catch(d){pt(i,n,d)}break;case 18:Et!==null&&(dn?(e=Et,Ph(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),Tl(e)):Ph(Et,i.stateNode));break;case 4:s=Et,c=dn,Et=i.stateNode.containerInfo,dn=!0,Aa(e,n,i),Et=s,dn=c;break;case 0:case 11:case 14:case 15:_t||za(2,i,n),_t||za(4,i,n),Aa(e,n,i);break;case 1:_t||(aa(i,n),s=i.stateNode,typeof s.componentWillUnmount=="function"&&Zd(i,n,s)),Aa(e,n,i);break;case 21:Aa(e,n,i);break;case 22:_t=(s=_t)||i.memoizedState!==null,Aa(e,n,i),_t=s;break;default:Aa(e,n,i)}}function nh(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Tl(e)}catch(i){pt(n,n.return,i)}}function tv(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Jd),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Jd),n;default:throw Error(l(435,e.tag))}}function Nu(e,n){var i=tv(e);n.forEach(function(s){var c=cv.bind(null,e,s);i.has(s)||(i.add(s),s.then(c,c))})}function yn(e,n){var i=n.deletions;if(i!==null)for(var s=0;s<i.length;s++){var c=i[s],d=e,y=n,S=y;e:for(;S!==null;){switch(S.tag){case 27:if(Qa(S.type)){Et=S.stateNode,dn=!1;break e}break;case 5:Et=S.stateNode,dn=!1;break e;case 3:case 4:Et=S.stateNode.containerInfo,dn=!0;break e}S=S.return}if(Et===null)throw Error(l(160));th(d,y,c),Et=null,dn=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)ah(n,e),n=n.sibling}var Pn=null;function ah(e,n){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:yn(n,e),bn(e),s&4&&(za(3,e,e.return),il(3,e),za(5,e,e.return));break;case 1:yn(n,e),bn(e),s&512&&(_t||i===null||aa(i,i.return)),s&64&&Ta&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?s:i.concat(s))));break;case 26:var c=Pn;if(yn(n,e),bn(e),s&512&&(_t||i===null||aa(i,i.return)),s&4){var d=i!==null?i.memoizedState:null;if(s=e.memoizedState,i===null)if(s===null)if(e.stateNode===null){e:{s=e.type,i=e.memoizedProps,c=c.ownerDocument||c;t:switch(s){case"title":d=c.getElementsByTagName("title")[0],(!d||d[zn]||d[Ft]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(s),c.head.insertBefore(d,c.querySelector("head > title"))),$t(d,s,i),d[Ft]=e,bt(d),s=d;break e;case"link":var y=Wh("link","href",c).get(s+(i.href||""));if(y){for(var S=0;S<y.length;S++)if(d=y[S],d.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&d.getAttribute("rel")===(i.rel==null?null:i.rel)&&d.getAttribute("title")===(i.title==null?null:i.title)&&d.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){y.splice(S,1);break t}}d=c.createElement(s),$t(d,s,i),c.head.appendChild(d);break;case"meta":if(y=Wh("meta","content",c).get(s+(i.content||""))){for(S=0;S<y.length;S++)if(d=y[S],d.getAttribute("content")===(i.content==null?null:""+i.content)&&d.getAttribute("name")===(i.name==null?null:i.name)&&d.getAttribute("property")===(i.property==null?null:i.property)&&d.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&d.getAttribute("charset")===(i.charSet==null?null:i.charSet)){y.splice(S,1);break t}}d=c.createElement(s),$t(d,s,i),c.head.appendChild(d);break;default:throw Error(l(468,s))}d[Ft]=e,bt(d),s=d}e.stateNode=s}else Jh(c,e.type,e.stateNode);else e.stateNode=Kh(c,s,e.memoizedProps);else d!==s?(d===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):d.count--,s===null?Jh(c,e.type,e.stateNode):Kh(c,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Eu(e,e.memoizedProps,i.memoizedProps)}break;case 27:yn(n,e),bn(e),s&512&&(_t||i===null||aa(i,i.return)),i!==null&&s&4&&Eu(e,e.memoizedProps,i.memoizedProps);break;case 5:if(yn(n,e),bn(e),s&512&&(_t||i===null||aa(i,i.return)),e.flags&32){c=e.stateNode;try{Ce(c,"")}catch(P){pt(e,e.return,P)}}s&4&&e.stateNode!=null&&(c=e.memoizedProps,Eu(e,c,i!==null?i.memoizedProps:c)),s&1024&&(Cu=!0);break;case 6:if(yn(n,e),bn(e),s&4){if(e.stateNode===null)throw Error(l(162));s=e.memoizedProps,i=e.stateNode;try{i.nodeValue=s}catch(P){pt(e,e.return,P)}}break;case 3:if(Is=null,c=Pn,Pn=Ls(n.containerInfo),yn(n,e),Pn=c,bn(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{Tl(n.containerInfo)}catch(P){pt(e,e.return,P)}Cu&&(Cu=!1,rh(e));break;case 4:s=Pn,Pn=Ls(e.stateNode.containerInfo),yn(n,e),bn(e),Pn=s;break;case 12:yn(n,e),bn(e);break;case 13:yn(n,e),bn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(_u=Bt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Nu(e,s)));break;case 22:c=e.memoizedState!==null;var A=i!==null&&i.memoizedState!==null,F=Ta,Z=_t;if(Ta=F||c,_t=Z||A,yn(n,e),_t=Z,Ta=F,bn(e),s&8192)e:for(n=e.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(i===null||A||Ta||_t||wr(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){A=i=n;try{if(d=A.stateNode,c)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{S=A.stateNode;var ee=A.memoizedProps.style,H=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;S.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(P){pt(A,A.return,P)}}}else if(n.tag===6){if(i===null){A=n;try{A.stateNode.nodeValue=c?"":A.memoizedProps}catch(P){pt(A,A.return,P)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}s&4&&(s=e.updateQueue,s!==null&&(i=s.retryQueue,i!==null&&(s.retryQueue=null,Nu(e,i))));break;case 19:yn(n,e),bn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Nu(e,s)));break;case 30:break;case 21:break;default:yn(n,e),bn(e)}}function bn(e){var n=e.flags;if(n&2){try{for(var i,s=e.return;s!==null;){if(Kd(s)){i=s;break}s=s.return}if(i==null)throw Error(l(160));switch(i.tag){case 27:var c=i.stateNode,d=Tu(e);xs(e,d,c);break;case 5:var y=i.stateNode;i.flags&32&&(Ce(y,""),i.flags&=-33);var S=Tu(e);xs(e,S,y);break;case 3:case 4:var A=i.stateNode.containerInfo,F=Tu(e);Au(e,F,A);break;default:throw Error(l(161))}}catch(Z){pt(e,e.return,Z)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function rh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;rh(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Ha(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)$d(e,n.alternate,n),n=n.sibling}function wr(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:za(4,n,n.return),wr(n);break;case 1:aa(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&Zd(n,n.return,i),wr(n);break;case 27:ml(n.stateNode);case 26:case 5:aa(n,n.return),wr(n);break;case 22:n.memoizedState===null&&wr(n);break;case 30:wr(n);break;default:wr(n)}e=e.sibling}}function Pa(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var s=n.alternate,c=e,d=n,y=d.flags;switch(d.tag){case 0:case 11:case 15:Pa(c,d,i),il(4,d);break;case 1:if(Pa(c,d,i),s=d,c=s.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(F){pt(s,s.return,F)}if(s=d,c=s.updateQueue,c!==null){var S=s.stateNode;try{var A=c.shared.hiddenCallbacks;if(A!==null)for(c.shared.hiddenCallbacks=null,c=0;c<A.length;c++)Uf(A[c],S)}catch(F){pt(s,s.return,F)}}i&&y&64&&Xd(d),ll(d,d.return);break;case 27:Wd(d);case 26:case 5:Pa(c,d,i),i&&s===null&&y&4&&Qd(d),ll(d,d.return);break;case 12:Pa(c,d,i);break;case 13:Pa(c,d,i),i&&y&4&&nh(c,d);break;case 22:d.memoizedState===null&&Pa(c,d,i),ll(d,d.return);break;case 30:break;default:Pa(c,d,i)}n=n.sibling}}function Mu(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&qi(i))}function wu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&qi(e))}function ra(e,n,i,s){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ih(e,n,i,s),n=n.sibling}function ih(e,n,i,s){var c=n.flags;switch(n.tag){case 0:case 11:case 15:ra(e,n,i,s),c&2048&&il(9,n);break;case 1:ra(e,n,i,s);break;case 3:ra(e,n,i,s),c&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&qi(e)));break;case 12:if(c&2048){ra(e,n,i,s),e=n.stateNode;try{var d=n.memoizedProps,y=d.id,S=d.onPostCommit;typeof S=="function"&&S(y,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){pt(n,n.return,A)}}else ra(e,n,i,s);break;case 13:ra(e,n,i,s);break;case 23:break;case 22:d=n.stateNode,y=n.alternate,n.memoizedState!==null?d._visibility&2?ra(e,n,i,s):sl(e,n):d._visibility&2?ra(e,n,i,s):(d._visibility|=2,ai(e,n,i,s,(n.subtreeFlags&10256)!==0)),c&2048&&Mu(y,n);break;case 24:ra(e,n,i,s),c&2048&&wu(n.alternate,n);break;default:ra(e,n,i,s)}}function ai(e,n,i,s,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var d=e,y=n,S=i,A=s,F=y.flags;switch(y.tag){case 0:case 11:case 15:ai(d,y,S,A,c),il(8,y);break;case 23:break;case 22:var Z=y.stateNode;y.memoizedState!==null?Z._visibility&2?ai(d,y,S,A,c):sl(d,y):(Z._visibility|=2,ai(d,y,S,A,c)),c&&F&2048&&Mu(y.alternate,y);break;case 24:ai(d,y,S,A,c),c&&F&2048&&wu(y.alternate,y);break;default:ai(d,y,S,A,c)}n=n.sibling}}function sl(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,s=n,c=s.flags;switch(s.tag){case 22:sl(i,s),c&2048&&Mu(s.alternate,s);break;case 24:sl(i,s),c&2048&&wu(s.alternate,s);break;default:sl(i,s)}n=n.sibling}}var ol=8192;function ri(e){if(e.subtreeFlags&ol)for(e=e.child;e!==null;)lh(e),e=e.sibling}function lh(e){switch(e.tag){case 26:ri(e),e.flags&ol&&e.memoizedState!==null&&jv(Pn,e.memoizedState,e.memoizedProps);break;case 5:ri(e);break;case 3:case 4:var n=Pn;Pn=Ls(e.stateNode.containerInfo),ri(e),Pn=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=ol,ol=16777216,ri(e),ol=n):ri(e));break;default:ri(e)}}function sh(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function ul(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];Vt=s,uh(s,e)}sh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)oh(e),e=e.sibling}function oh(e){switch(e.tag){case 0:case 11:case 15:ul(e),e.flags&2048&&za(9,e,e.return);break;case 3:ul(e);break;case 12:ul(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Es(e)):ul(e);break;default:ul(e)}}function Es(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];Vt=s,uh(s,e)}sh(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:za(8,n,n.return),Es(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Es(n));break;default:Es(n)}e=e.sibling}}function uh(e,n){for(;Vt!==null;){var i=Vt;switch(i.tag){case 0:case 11:case 15:za(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var s=i.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:qi(i.memoizedState.cache)}if(s=i.child,s!==null)s.return=i,Vt=s;else e:for(i=e;Vt!==null;){s=Vt;var c=s.sibling,d=s.return;if(eh(s),s===i){Vt=null;break e}if(c!==null){c.return=d,Vt=c;break e}Vt=d}}}var nv={getCacheForType:function(e){var n=an(zt),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i}},av=typeof WeakMap=="function"?WeakMap:Map,st=0,vt=null,Ke=null,tt=0,ot=0,Sn=null,Ya=!1,ii=!1,Ru=!1,Ca=0,Rt=0,qa=0,Rr=0,Ou=0,In=0,li=0,cl=null,hn=null,Du=!1,_u=0,Ts=1/0,As=null,Va=null,Jt=0,Xa=null,si=null,oi=0,Uu=0,Lu=null,ch=null,fl=0,ku=null;function xn(){if((st&2)!==0&&tt!==0)return tt&-tt;if(R.T!==null){var e=Qr;return e!==0?e:Hu()}return Di()}function fh(){In===0&&(In=(tt&536870912)===0||rt?Ri():536870912);var e=kn.current;return e!==null&&(e.flags|=32),In}function En(e,n,i){(e===vt&&(ot===2||ot===9)||e.cancelPendingCommit!==null)&&(ui(e,0),Za(e,tt,In,!1)),ca(e,i),((st&2)===0||e!==vt)&&(e===vt&&((st&2)===0&&(Rr|=i),Rt===4&&Za(e,tt,In,!1)),ia(e))}function dh(e,n,i){if((st&6)!==0)throw Error(l(327));var s=!i&&(n&124)===0&&(n&e.expiredLanes)===0||Oa(e,n),c=s?lv(e,n):Fu(e,n,!0),d=s;do{if(c===0){ii&&!s&&Za(e,n,0,!1);break}else{if(i=e.current.alternate,d&&!rv(i)){c=Fu(e,n,!1),d=!1;continue}if(c===2){if(d=n,e.errorRecoveryDisabledLanes&d)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var S=e;c=cl;var A=S.current.memoizedState.isDehydrated;if(A&&(ui(S,y).flags|=256),y=Fu(S,y,!1),y!==2){if(Ru&&!A){S.errorRecoveryDisabledLanes|=d,Rr|=d,c=4;break e}d=hn,hn=c,d!==null&&(hn===null?hn=d:hn.push.apply(hn,d))}c=y}if(d=!1,c!==2)continue}}if(c===1){ui(e,0),Za(e,n,0,!0);break}e:{switch(s=e,d=c,d){case 0:case 1:throw Error(l(345));case 4:if((n&4194048)!==n)break;case 6:Za(s,n,In,!Ya);break e;case 2:hn=null;break;case 3:case 5:break;default:throw Error(l(329))}if((n&62914560)===n&&(c=_u+300-Bt(),10<c)){if(Za(s,n,In,!Ya),hr(s,0,!0)!==0)break e;s.timeoutHandle=zh(hh.bind(null,s,i,hn,As,Du,n,In,Rr,li,Ya,d,2,-0,0),c);break e}hh(s,i,hn,As,Du,n,In,Rr,li,Ya,d,0,-0,0)}}break}while(!0);ia(e)}function hh(e,n,i,s,c,d,y,S,A,F,Z,ee,H,P){if(e.timeoutHandle=-1,ee=n.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(yl={stylesheets:null,count:0,unsuspend:Gv},lh(n),ee=zv(),ee!==null)){e.cancelPendingCommit=ee(Sh.bind(null,e,n,d,i,s,c,y,S,A,Z,1,H,P)),Za(e,d,y,!F);return}Sh(e,n,d,i,s,c,y,S,A)}function rv(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var s=0;s<i.length;s++){var c=i[s],d=c.getSnapshot;c=c.value;try{if(!vn(d(),c))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Za(e,n,i,s){n&=~Ou,n&=~Rr,e.suspendedLanes|=n,e.pingedLanes&=~n,s&&(e.warmLanes|=n),s=e.expirationTimes;for(var c=n;0<c;){var d=31-cn(c),y=1<<d;s[d]=-1,c&=~y}i!==0&&pr(e,i,n)}function Cs(){return(st&6)===0?(dl(0),!1):!0}function Iu(){if(Ke!==null){if(ot===0)var e=Ke.return;else e=Ke,ga=Tr=null,$o(e),ti=null,nl=0,e=Ke;for(;e!==null;)Vd(e.alternate,e),e=e.return;Ke=null}}function ui(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Ev(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Iu(),vt=e,Ke=i=pa(e.current,null),tt=n,ot=0,Sn=null,Ya=!1,ii=Oa(e,n),Ru=!1,li=In=Ou=Rr=qa=Rt=0,hn=cl=null,Du=!1,(n&8)!==0&&(n|=n&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=n;0<s;){var c=31-cn(s),d=1<<c;n|=e[c],s&=~d}return Ca=n,Xl(),i}function ph(e,n){qe=null,R.H=ds,n===Xi||n===ns?(n=Df(),ot=3):n===wf?(n=Df(),ot=4):ot=n===_d?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Sn=n,Ke===null&&(Rt=1,gs(e,Dn(n,e.current)))}function mh(){var e=R.H;return R.H=ds,e===null?ds:e}function vh(){var e=R.A;return R.A=nv,e}function Bu(){Rt=4,Ya||(tt&4194048)!==tt&&kn.current!==null||(ii=!0),(qa&134217727)===0&&(Rr&134217727)===0||vt===null||Za(vt,tt,In,!1)}function Fu(e,n,i){var s=st;st|=2;var c=mh(),d=vh();(vt!==e||tt!==n)&&(As=null,ui(e,n)),n=!1;var y=Rt;e:do try{if(ot!==0&&Ke!==null){var S=Ke,A=Sn;switch(ot){case 8:Iu(),y=6;break e;case 3:case 2:case 9:case 6:kn.current===null&&(n=!0);var F=ot;if(ot=0,Sn=null,ci(e,S,A,F),i&&ii){y=0;break e}break;default:F=ot,ot=0,Sn=null,ci(e,S,A,F)}}iv(),y=Rt;break}catch(Z){ph(e,Z)}while(!0);return n&&e.shellSuspendCounter++,ga=Tr=null,st=s,R.H=c,R.A=d,Ke===null&&(vt=null,tt=0,Xl()),y}function iv(){for(;Ke!==null;)gh(Ke)}function lv(e,n){var i=st;st|=2;var s=mh(),c=vh();vt!==e||tt!==n?(As=null,Ts=Bt()+500,ui(e,n)):ii=Oa(e,n);e:do try{if(ot!==0&&Ke!==null){n=Ke;var d=Sn;t:switch(ot){case 1:ot=0,Sn=null,ci(e,n,d,1);break;case 2:case 9:if(Rf(d)){ot=0,Sn=null,yh(n);break}n=function(){ot!==2&&ot!==9||vt!==e||(ot=7),ia(e)},d.then(n,n);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:Rf(d)?(ot=0,Sn=null,yh(n)):(ot=0,Sn=null,ci(e,n,d,7));break;case 5:var y=null;switch(Ke.tag){case 26:y=Ke.memoizedState;case 5:case 27:var S=Ke;if(!y||$h(y)){ot=0,Sn=null;var A=S.sibling;if(A!==null)Ke=A;else{var F=S.return;F!==null?(Ke=F,Ns(F)):Ke=null}break t}}ot=0,Sn=null,ci(e,n,d,5);break;case 6:ot=0,Sn=null,ci(e,n,d,6);break;case 8:Iu(),Rt=6;break e;default:throw Error(l(462))}}sv();break}catch(Z){ph(e,Z)}while(!0);return ga=Tr=null,R.H=s,R.A=c,st=i,Ke!==null?0:(vt=null,tt=0,Xl(),Rt)}function sv(){for(;Ke!==null&&!Ei();)gh(Ke)}function gh(e){var n=Yd(e.alternate,e,Ca);e.memoizedProps=e.pendingProps,n===null?Ns(e):Ke=n}function yh(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=Fd(i,n,n.pendingProps,n.type,void 0,tt);break;case 11:n=Fd(i,n,n.pendingProps,n.type.render,n.ref,tt);break;case 5:$o(n);default:Vd(i,n),n=Ke=bf(n,Ca),n=Yd(i,n,Ca)}e.memoizedProps=e.pendingProps,n===null?Ns(e):Ke=n}function ci(e,n,i,s){ga=Tr=null,$o(n),ti=null,nl=0;var c=n.return;try{if(K0(e,c,n,i,tt)){Rt=1,gs(e,Dn(i,e.current)),Ke=null;return}}catch(d){if(c!==null)throw Ke=c,d;Rt=1,gs(e,Dn(i,e.current)),Ke=null;return}n.flags&32768?(rt||s===1?e=!0:ii||(tt&536870912)!==0?e=!1:(Ya=e=!0,(s===2||s===9||s===3||s===6)&&(s=kn.current,s!==null&&s.tag===13&&(s.flags|=16384))),bh(n,e)):Ns(n)}function Ns(e){var n=e;do{if((n.flags&32768)!==0){bh(n,Ya);return}e=n.return;var i=J0(n.alternate,n,Ca);if(i!==null){Ke=i;return}if(n=n.sibling,n!==null){Ke=n;return}Ke=n=e}while(n!==null);Rt===0&&(Rt=5)}function bh(e,n){do{var i=$0(e.alternate,e);if(i!==null){i.flags&=32767,Ke=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){Ke=e;return}Ke=e=i}while(e!==null);Rt=6,Ke=null}function Sh(e,n,i,s,c,d,y,S,A){e.cancelPendingCommit=null;do Ms();while(Jt!==0);if((st&6)!==0)throw Error(l(327));if(n!==null){if(n===e.current)throw Error(l(177));if(d=n.lanes|n.childLanes,d|=wo,Da(e,i,d,y,S,A),e===vt&&(Ke=vt=null,tt=0),si=n,Xa=e,oi=i,Uu=d,Lu=c,ch=s,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,fv(cr,function(){return Ch(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||s){s=R.T,R.T=null,c=z.p,z.p=2,y=st,st|=4;try{ev(e,n,i)}finally{st=y,z.p=c,R.T=s}}Jt=1,xh(),Eh(),Th()}}function xh(){if(Jt===1){Jt=0;var e=Xa,n=si,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=R.T,R.T=null;var s=z.p;z.p=2;var c=st;st|=4;try{ah(n,e);var d=Ku,y=uf(e.containerInfo),S=d.focusedElem,A=d.selectionRange;if(y!==S&&S&&S.ownerDocument&&of(S.ownerDocument.documentElement,S)){if(A!==null&&To(S)){var F=A.start,Z=A.end;if(Z===void 0&&(Z=F),"selectionStart"in S)S.selectionStart=F,S.selectionEnd=Math.min(Z,S.value.length);else{var ee=S.ownerDocument||document,H=ee&&ee.defaultView||window;if(H.getSelection){var P=H.getSelection(),Oe=S.textContent.length,Ne=Math.min(A.start,Oe),ft=A.end===void 0?Ne:Math.min(A.end,Oe);!P.extend&&Ne>ft&&(y=ft,ft=Ne,Ne=y);var U=sf(S,Ne),M=sf(S,ft);if(U&&M&&(P.rangeCount!==1||P.anchorNode!==U.node||P.anchorOffset!==U.offset||P.focusNode!==M.node||P.focusOffset!==M.offset)){var I=ee.createRange();I.setStart(U.node,U.offset),P.removeAllRanges(),Ne>ft?(P.addRange(I),P.extend(M.node,M.offset)):(I.setEnd(M.node,M.offset),P.addRange(I))}}}}for(ee=[],P=S;P=P.parentNode;)P.nodeType===1&&ee.push({element:P,left:P.scrollLeft,top:P.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ee.length;S++){var W=ee[S];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Gs=!!Qu,Ku=Qu=null}finally{st=c,z.p=s,R.T=i}}e.current=n,Jt=2}}function Eh(){if(Jt===2){Jt=0;var e=Xa,n=si,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=R.T,R.T=null;var s=z.p;z.p=2;var c=st;st|=4;try{$d(e,n.alternate,n)}finally{st=c,z.p=s,R.T=i}}Jt=3}}function Th(){if(Jt===4||Jt===3){Jt=0,Pc();var e=Xa,n=si,i=oi,s=ch;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Jt=5:(Jt=0,si=Xa=null,Ah(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Va=null),Oi(i),n=n.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(tn,n,void 0,(n.current.flags&128)===128)}catch{}if(s!==null){n=R.T,c=z.p,z.p=2,R.T=null;try{for(var d=e.onRecoverableError,y=0;y<s.length;y++){var S=s[y];d(S.value,{componentStack:S.stack})}}finally{R.T=n,z.p=c}}(oi&3)!==0&&Ms(),ia(e),c=e.pendingLanes,(i&4194090)!==0&&(c&42)!==0?e===ku?fl++:(fl=0,ku=e):fl=0,dl(0)}}function Ah(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,qi(n)))}function Ms(e){return xh(),Eh(),Th(),Ch()}function Ch(){if(Jt!==5)return!1;var e=Xa,n=Uu;Uu=0;var i=Oi(oi),s=R.T,c=z.p;try{z.p=32>i?32:i,R.T=null,i=Lu,Lu=null;var d=Xa,y=oi;if(Jt=0,si=Xa=null,oi=0,(st&6)!==0)throw Error(l(331));var S=st;if(st|=4,oh(d.current),ih(d,d.current,y,i),st=S,dl(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(tn,d)}catch{}return!0}finally{z.p=c,R.T=s,Ah(e,n)}}function Nh(e,n,i){n=Dn(i,n),n=hu(e.stateNode,n,2),e=Ba(e,n,2),e!==null&&(ca(e,2),ia(e))}function pt(e,n,i){if(e.tag===3)Nh(e,e,i);else for(;n!==null;){if(n.tag===3){Nh(n,e,i);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Va===null||!Va.has(s))){e=Dn(i,e),i=Od(2),s=Ba(n,i,2),s!==null&&(Dd(i,s,n,e),ca(s,2),ia(s));break}}n=n.return}}function Gu(e,n,i){var s=e.pingCache;if(s===null){s=e.pingCache=new av;var c=new Set;s.set(n,c)}else c=s.get(n),c===void 0&&(c=new Set,s.set(n,c));c.has(i)||(Ru=!0,c.add(i),e=ov.bind(null,e,n,i),n.then(e,e))}function ov(e,n,i){var s=e.pingCache;s!==null&&s.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,vt===e&&(tt&i)===i&&(Rt===4||Rt===3&&(tt&62914560)===tt&&300>Bt()-_u?(st&2)===0&&ui(e,0):Ou|=i,li===tt&&(li=0)),ia(e)}function Mh(e,n){n===0&&(n=kr()),e=qr(e,n),e!==null&&(ca(e,n),ia(e))}function uv(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Mh(e,i)}function cv(e,n){var i=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(l(314))}s!==null&&s.delete(n),Mh(e,i)}function fv(e,n){return ur(e,n)}var ws=null,fi=null,ju=!1,Rs=!1,zu=!1,Or=0;function ia(e){e!==fi&&e.next===null&&(fi===null?ws=fi=e:fi=fi.next=e),Rs=!0,ju||(ju=!0,hv())}function dl(e,n){if(!zu&&Rs){zu=!0;do for(var i=!1,s=ws;s!==null;){if(e!==0){var c=s.pendingLanes;if(c===0)var d=0;else{var y=s.suspendedLanes,S=s.pingedLanes;d=(1<<31-cn(42|e)+1)-1,d&=c&~(y&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(i=!0,Dh(s,d))}else d=tt,d=hr(s,s===vt?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(d&3)===0||Oa(s,d)||(i=!0,Dh(s,d));s=s.next}while(i);zu=!1}}function dv(){wh()}function wh(){Rs=ju=!1;var e=0;Or!==0&&(xv()&&(e=Or),Or=0);for(var n=Bt(),i=null,s=ws;s!==null;){var c=s.next,d=Rh(s,n);d===0?(s.next=null,i===null?ws=c:i.next=c,c===null&&(fi=i)):(i=s,(e!==0||(d&3)!==0)&&(Rs=!0)),s=c}dl(e)}function Rh(e,n){for(var i=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var y=31-cn(d),S=1<<y,A=c[y];A===-1?((S&i)===0||(S&s)!==0)&&(c[y]=wi(S,n)):A<=n&&(e.expiredLanes|=S),d&=~S}if(n=vt,i=tt,i=hr(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,i===0||e===n&&(ot===2||ot===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&jn(s),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Oa(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(s!==null&&jn(s),Oi(i)){case 2:case 8:i=Ci;break;case 32:i=cr;break;case 268435456:i=Ni;break;default:i=cr}return s=Oh.bind(null,e),i=ur(i,s),e.callbackPriority=n,e.callbackNode=i,n}return s!==null&&s!==null&&jn(s),e.callbackPriority=2,e.callbackNode=null,2}function Oh(e,n){if(Jt!==0&&Jt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Ms()&&e.callbackNode!==i)return null;var s=tt;return s=hr(e,e===vt?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(dh(e,s,n),Rh(e,Bt()),e.callbackNode!=null&&e.callbackNode===i?Oh.bind(null,e):null)}function Dh(e,n){if(Ms())return null;dh(e,n,!0)}function hv(){Tv(function(){(st&6)!==0?ur(Ai,dv):wh()})}function Hu(){return Or===0&&(Or=Ri()),Or}function _h(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Me(""+e)}function Uh(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function pv(e,n,i,s,c){if(n==="submit"&&i&&i.stateNode===c){var d=_h((c[Yt]||null).action),y=s.submitter;y&&(n=(n=y[Yt]||null)?_h(n.formAction):y.getAttribute("formAction"),n!==null&&(d=n,y=null));var S=new Yl("action","action",null,s,c);e.push({event:S,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Or!==0){var A=y?Uh(c,y):new FormData(c);ou(i,{pending:!0,data:A,method:c.method,action:d},null,A)}}else typeof d=="function"&&(S.preventDefault(),A=y?Uh(c,y):new FormData(c),ou(i,{pending:!0,data:A,method:c.method,action:d},d,A))},currentTarget:c}]})}}for(var Pu=0;Pu<Mo.length;Pu++){var Yu=Mo[Pu],mv=Yu.toLowerCase(),vv=Yu[0].toUpperCase()+Yu.slice(1);Hn(mv,"on"+vv)}Hn(df,"onAnimationEnd"),Hn(hf,"onAnimationIteration"),Hn(pf,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(U0,"onTransitionRun"),Hn(L0,"onTransitionStart"),Hn(k0,"onTransitionCancel"),Hn(mf,"onTransitionEnd"),_a("onMouseEnter",["mouseout","mouseover"]),_a("onMouseLeave",["mouseout","mouseover"]),_a("onPointerEnter",["pointerout","pointerover"]),_a("onPointerLeave",["pointerout","pointerover"]),Mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hl));function Lh(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],c=s.event;s=s.listeners;e:{var d=void 0;if(n)for(var y=s.length-1;0<=y;y--){var S=s[y],A=S.instance,F=S.currentTarget;if(S=S.listener,A!==d&&c.isPropagationStopped())break e;d=S,c.currentTarget=F;try{d(c)}catch(Z){vs(Z)}c.currentTarget=null,d=A}else for(y=0;y<s.length;y++){if(S=s[y],A=S.instance,F=S.currentTarget,S=S.listener,A!==d&&c.isPropagationStopped())break e;d=S,c.currentTarget=F;try{d(c)}catch(Z){vs(Z)}c.currentTarget=null,d=A}}}}function We(e,n){var i=n[Fr];i===void 0&&(i=n[Fr]=new Set);var s=e+"__bubble";i.has(s)||(kh(n,e,2,!1),i.add(s))}function qu(e,n,i){var s=0;n&&(s|=4),kh(i,e,s,n)}var Os="_reactListening"+Math.random().toString(36).slice(2);function Vu(e){if(!e[Os]){e[Os]=!0,Gl.forEach(function(i){i!=="selectionchange"&&(gv.has(i)||qu(i,!1,e),qu(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Os]||(n[Os]=!0,qu("selectionchange",!1,n))}}function kh(e,n,i,s){switch(ip(n)){case 2:var c=Yv;break;case 8:c=qv;break;default:c=lc}i=c.bind(null,n,i,e),c=void 0,!nn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(n,i,{capture:!0,passive:c}):e.addEventListener(n,i,!0):c!==void 0?e.addEventListener(n,i,{passive:c}):e.addEventListener(n,i,!1)}function Xu(e,n,i,s,c){var d=s;if((n&1)===0&&(n&2)===0&&s!==null)e:for(;;){if(s===null)return;var y=s.tag;if(y===3||y===4){var S=s.stateNode.containerInfo;if(S===c)break;if(y===4)for(y=s.return;y!==null;){var A=y.tag;if((A===3||A===4)&&y.stateNode.containerInfo===c)return;y=y.return}for(;S!==null;){if(y=Jn(S),y===null)return;if(A=y.tag,A===5||A===6||A===26||A===27){s=d=y;continue e}S=S.parentNode}}s=s.return}On(function(){var F=d,Z=at(i),ee=[];e:{var H=vf.get(e);if(H!==void 0){var P=Yl,Oe=e;switch(e){case"keypress":if(mn(i)===0)break e;case"keydown":case"keyup":P=f0;break;case"focusin":Oe="focus",P=yo;break;case"focusout":Oe="blur",P=yo;break;case"beforeblur":case"afterblur":P=yo;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=Yc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=$m;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=p0;break;case df:case hf:case pf:P=n0;break;case mf:P=v0;break;case"scroll":case"scrollend":P=Wm;break;case"wheel":P=y0;break;case"copy":case"cut":case"paste":P=r0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=Vc;break;case"toggle":case"beforetoggle":P=S0}var Ne=(n&4)!==0,ft=!Ne&&(e==="scroll"||e==="scrollend"),U=Ne?H!==null?H+"Capture":null:H;Ne=[];for(var M=F,I;M!==null;){var W=M;if(I=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||I===null||U===null||(W=jt(M,U),W!=null&&Ne.push(pl(M,W,I))),ft)break;M=M.return}0<Ne.length&&(H=new P(H,Oe,null,i,Z),ee.push({event:H,listeners:Ne}))}}if((n&7)===0){e:{if(H=e==="mouseover"||e==="pointerover",P=e==="mouseout"||e==="pointerout",H&&i!==Ye&&(Oe=i.relatedTarget||i.fromElement)&&(Jn(Oe)||Oe[sn]))break e;if((P||H)&&(H=Z.window===Z?Z:(H=Z.ownerDocument)?H.defaultView||H.parentWindow:window,P?(Oe=i.relatedTarget||i.toElement,P=F,Oe=Oe?Jn(Oe):null,Oe!==null&&(ft=u(Oe),Ne=Oe.tag,Oe!==ft||Ne!==5&&Ne!==27&&Ne!==6)&&(Oe=null)):(P=null,Oe=F),P!==Oe)){if(Ne=Yc,W="onMouseLeave",U="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(Ne=Vc,W="onPointerLeave",U="onPointerEnter",M="pointer"),ft=P==null?H:da(P),I=Oe==null?H:da(Oe),H=new Ne(W,M+"leave",P,i,Z),H.target=ft,H.relatedTarget=I,W=null,Jn(Z)===F&&(Ne=new Ne(U,M+"enter",Oe,i,Z),Ne.target=I,Ne.relatedTarget=ft,W=Ne),ft=W,P&&Oe)t:{for(Ne=P,U=Oe,M=0,I=Ne;I;I=di(I))M++;for(I=0,W=U;W;W=di(W))I++;for(;0<M-I;)Ne=di(Ne),M--;for(;0<I-M;)U=di(U),I--;for(;M--;){if(Ne===U||U!==null&&Ne===U.alternate)break t;Ne=di(Ne),U=di(U)}Ne=null}else Ne=null;P!==null&&Ih(ee,H,P,Ne,!1),Oe!==null&&ft!==null&&Ih(ee,ft,Oe,Ne,!0)}}e:{if(H=F?da(F):window,P=H.nodeName&&H.nodeName.toLowerCase(),P==="select"||P==="input"&&H.type==="file")var ge=ef;else if(Jc(H))if(tf)ge=O0;else{ge=w0;var Xe=M0}else P=H.nodeName,!P||P.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?F&&Pe(F.elementType)&&(ge=ef):ge=R0;if(ge&&(ge=ge(e,F))){$c(ee,ge,i,Z);break e}Xe&&Xe(e,H,F),e==="focusout"&&F&&H.type==="number"&&F.memoizedProps.value!=null&&Gt(H,"number",H.value)}switch(Xe=F?da(F):window,e){case"focusin":(Jc(Xe)||Xe.contentEditable==="true")&&(Hr=Xe,Ao=F,ji=null);break;case"focusout":ji=Ao=Hr=null;break;case"mousedown":Co=!0;break;case"contextmenu":case"mouseup":case"dragend":Co=!1,cf(ee,i,Z);break;case"selectionchange":if(_0)break;case"keydown":case"keyup":cf(ee,i,Z)}var Ee;if(So)e:{switch(e){case"compositionstart":var we="onCompositionStart";break e;case"compositionend":we="onCompositionEnd";break e;case"compositionupdate":we="onCompositionUpdate";break e}we=void 0}else zr?Kc(e,i)&&(we="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(we="onCompositionStart");we&&(Xc&&i.locale!=="ko"&&(zr||we!=="onCompositionStart"?we==="onCompositionEnd"&&zr&&(Ee=pn()):(xt=Z,mt="value"in xt?xt.value:xt.textContent,zr=!0)),Xe=Ds(F,we),0<Xe.length&&(we=new qc(we,e,null,i,Z),ee.push({event:we,listeners:Xe}),Ee?we.data=Ee:(Ee=Wc(i),Ee!==null&&(we.data=Ee)))),(Ee=E0?T0(e,i):A0(e,i))&&(we=Ds(F,"onBeforeInput"),0<we.length&&(Xe=new qc("onBeforeInput","beforeinput",null,i,Z),ee.push({event:Xe,listeners:we}),Xe.data=Ee)),pv(ee,e,F,i,Z)}Lh(ee,n)})}function pl(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Ds(e,n){for(var i=n+"Capture",s=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=jt(e,i),c!=null&&s.unshift(pl(e,c,d)),c=jt(e,n),c!=null&&s.push(pl(e,c,d))),e.tag===3)return s;e=e.return}return[]}function di(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ih(e,n,i,s,c){for(var d=n._reactName,y=[];i!==null&&i!==s;){var S=i,A=S.alternate,F=S.stateNode;if(S=S.tag,A!==null&&A===s)break;S!==5&&S!==26&&S!==27||F===null||(A=F,c?(F=jt(i,d),F!=null&&y.unshift(pl(i,F,A))):c||(F=jt(i,d),F!=null&&y.push(pl(i,F,A)))),i=i.return}y.length!==0&&e.push({event:n,listeners:y})}var yv=/\r\n?/g,bv=/\u0000|\uFFFD/g;function Bh(e){return(typeof e=="string"?e:""+e).replace(yv,`
`).replace(bv,"")}function Fh(e,n){return n=Bh(n),Bh(e)===n}function _s(){}function ct(e,n,i,s,c,d){switch(i){case"children":typeof s=="string"?n==="body"||n==="textarea"&&s===""||Ce(e,s):(typeof s=="number"||typeof s=="bigint")&&n!=="body"&&Ce(e,""+s);break;case"className":mr(e,"class",s);break;case"tabIndex":mr(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":mr(e,i,s);break;case"style":Ve(e,s,d);break;case"data":if(n!=="object"){mr(e,"data",s);break}case"src":case"href":if(s===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Me(""+s),e.setAttribute(i,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(i==="formAction"?(n!=="input"&&ct(e,n,"name",c.name,c,null),ct(e,n,"formEncType",c.formEncType,c,null),ct(e,n,"formMethod",c.formMethod,c,null),ct(e,n,"formTarget",c.formTarget,c,null)):(ct(e,n,"encType",c.encType,c,null),ct(e,n,"method",c.method,c,null),ct(e,n,"target",c.target,c,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Me(""+s),e.setAttribute(i,s);break;case"onClick":s!=null&&(e.onclick=_s);break;case"onScroll":s!=null&&We("scroll",e);break;case"onScrollEnd":s!=null&&We("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(l(61));if(i=s.__html,i!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=i}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}i=Me(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""+s):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":s===!0?e.setAttribute(i,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,s):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(i,s):e.removeAttribute(i);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(i):e.setAttribute(i,s);break;case"popover":We("beforetoggle",e),We("toggle",e),jr(e,"popover",s);break;case"xlinkActuate":wn(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":wn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":wn(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":wn(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":wn(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":wn(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":wn(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":wn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":wn(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":jr(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Fe.get(i)||i,jr(e,i,s))}}function Zu(e,n,i,s,c,d){switch(i){case"style":Ve(e,s,d);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(l(61));if(i=s.__html,i!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=i}}break;case"children":typeof s=="string"?Ce(e,s):(typeof s=="number"||typeof s=="bigint")&&Ce(e,""+s);break;case"onScroll":s!=null&&We("scroll",e);break;case"onScrollEnd":s!=null&&We("scrollend",e);break;case"onClick":s!=null&&(e.onclick=_s);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!jl.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(c=i.endsWith("Capture"),n=i.slice(2,c?i.length-7:void 0),d=e[Yt]||null,d=d!=null?d[i]:null,typeof d=="function"&&e.removeEventListener(n,d,c),typeof s=="function")){typeof d!="function"&&d!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,s,c);break e}i in e?e[i]=s:s===!0?e.setAttribute(i,""):jr(e,i,s)}}}function $t(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",e),We("load",e);var s=!1,c=!1,d;for(d in i)if(i.hasOwnProperty(d)){var y=i[d];if(y!=null)switch(d){case"src":s=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:ct(e,n,d,y,i,null)}}c&&ct(e,n,"srcSet",i.srcSet,i,null),s&&ct(e,n,"src",i.src,i,null);return;case"input":We("invalid",e);var S=d=y=c=null,A=null,F=null;for(s in i)if(i.hasOwnProperty(s)){var Z=i[s];if(Z!=null)switch(s){case"name":c=Z;break;case"type":y=Z;break;case"checked":A=Z;break;case"defaultChecked":F=Z;break;case"value":d=Z;break;case"defaultValue":S=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(l(137,n));break;default:ct(e,n,s,Z,i,null)}}Le(e,d,S,A,F,y,c,!1),te(e);return;case"select":We("invalid",e),s=y=d=null;for(c in i)if(i.hasOwnProperty(c)&&(S=i[c],S!=null))switch(c){case"value":d=S;break;case"defaultValue":y=S;break;case"multiple":s=S;default:ct(e,n,c,S,i,null)}n=d,i=y,e.multiple=!!s,n!=null?yt(e,!!s,n,!1):i!=null&&yt(e,!!s,i,!0);return;case"textarea":We("invalid",e),d=c=s=null;for(y in i)if(i.hasOwnProperty(y)&&(S=i[y],S!=null))switch(y){case"value":s=S;break;case"defaultValue":c=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(l(91));break;default:ct(e,n,y,S,i,null)}Rn(e,s,c,d),te(e);return;case"option":for(A in i)if(i.hasOwnProperty(A)&&(s=i[A],s!=null))switch(A){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:ct(e,n,A,s,i,null)}return;case"dialog":We("beforetoggle",e),We("toggle",e),We("cancel",e),We("close",e);break;case"iframe":case"object":We("load",e);break;case"video":case"audio":for(s=0;s<hl.length;s++)We(hl[s],e);break;case"image":We("error",e),We("load",e);break;case"details":We("toggle",e);break;case"embed":case"source":case"link":We("error",e),We("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in i)if(i.hasOwnProperty(F)&&(s=i[F],s!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:ct(e,n,F,s,i,null)}return;default:if(Pe(n)){for(Z in i)i.hasOwnProperty(Z)&&(s=i[Z],s!==void 0&&Zu(e,n,Z,s,i,void 0));return}}for(S in i)i.hasOwnProperty(S)&&(s=i[S],s!=null&&ct(e,n,S,s,i,null))}function Sv(e,n,i,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,y=null,S=null,A=null,F=null,Z=null;for(P in i){var ee=i[P];if(i.hasOwnProperty(P)&&ee!=null)switch(P){case"checked":break;case"value":break;case"defaultValue":A=ee;default:s.hasOwnProperty(P)||ct(e,n,P,null,s,ee)}}for(var H in s){var P=s[H];if(ee=i[H],s.hasOwnProperty(H)&&(P!=null||ee!=null))switch(H){case"type":d=P;break;case"name":c=P;break;case"checked":F=P;break;case"defaultChecked":Z=P;break;case"value":y=P;break;case"defaultValue":S=P;break;case"children":case"dangerouslySetInnerHTML":if(P!=null)throw Error(l(137,n));break;default:P!==ee&&ct(e,n,H,P,s,ee)}}De(e,y,S,A,F,Z,d,c);return;case"select":P=y=S=H=null;for(d in i)if(A=i[d],i.hasOwnProperty(d)&&A!=null)switch(d){case"value":break;case"multiple":P=A;default:s.hasOwnProperty(d)||ct(e,n,d,null,s,A)}for(c in s)if(d=s[c],A=i[c],s.hasOwnProperty(c)&&(d!=null||A!=null))switch(c){case"value":H=d;break;case"defaultValue":S=d;break;case"multiple":y=d;default:d!==A&&ct(e,n,c,d,s,A)}n=S,i=y,s=P,H!=null?yt(e,!!i,H,!1):!!s!=!!i&&(n!=null?yt(e,!!i,n,!0):yt(e,!!i,i?[]:"",!1));return;case"textarea":P=H=null;for(S in i)if(c=i[S],i.hasOwnProperty(S)&&c!=null&&!s.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ct(e,n,S,null,s,c)}for(y in s)if(c=s[y],d=i[y],s.hasOwnProperty(y)&&(c!=null||d!=null))switch(y){case"value":H=c;break;case"defaultValue":P=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(l(91));break;default:c!==d&&ct(e,n,y,c,s,d)}Lt(e,H,P);return;case"option":for(var Oe in i)if(H=i[Oe],i.hasOwnProperty(Oe)&&H!=null&&!s.hasOwnProperty(Oe))switch(Oe){case"selected":e.selected=!1;break;default:ct(e,n,Oe,null,s,H)}for(A in s)if(H=s[A],P=i[A],s.hasOwnProperty(A)&&H!==P&&(H!=null||P!=null))switch(A){case"selected":e.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:ct(e,n,A,H,s,P)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in i)H=i[Ne],i.hasOwnProperty(Ne)&&H!=null&&!s.hasOwnProperty(Ne)&&ct(e,n,Ne,null,s,H);for(F in s)if(H=s[F],P=i[F],s.hasOwnProperty(F)&&H!==P&&(H!=null||P!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(l(137,n));break;default:ct(e,n,F,H,s,P)}return;default:if(Pe(n)){for(var ft in i)H=i[ft],i.hasOwnProperty(ft)&&H!==void 0&&!s.hasOwnProperty(ft)&&Zu(e,n,ft,void 0,s,H);for(Z in s)H=s[Z],P=i[Z],!s.hasOwnProperty(Z)||H===P||H===void 0&&P===void 0||Zu(e,n,Z,H,s,P);return}}for(var U in i)H=i[U],i.hasOwnProperty(U)&&H!=null&&!s.hasOwnProperty(U)&&ct(e,n,U,null,s,H);for(ee in s)H=s[ee],P=i[ee],!s.hasOwnProperty(ee)||H===P||H==null&&P==null||ct(e,n,ee,H,s,P)}var Qu=null,Ku=null;function Us(e){return e.nodeType===9?e:e.ownerDocument}function Gh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jh(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Wu(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Ju=null;function xv(){var e=window.event;return e&&e.type==="popstate"?e===Ju?!1:(Ju=e,!0):(Ju=null,!1)}var zh=typeof setTimeout=="function"?setTimeout:void 0,Ev=typeof clearTimeout=="function"?clearTimeout:void 0,Hh=typeof Promise=="function"?Promise:void 0,Tv=typeof queueMicrotask=="function"?queueMicrotask:typeof Hh<"u"?function(e){return Hh.resolve(null).then(e).catch(Av)}:zh;function Av(e){setTimeout(function(){throw e})}function Qa(e){return e==="head"}function Ph(e,n){var i=n,s=0,c=0;do{var d=i.nextSibling;if(e.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"){if(0<s&&8>s){i=s;var y=e.ownerDocument;if(i&1&&ml(y.documentElement),i&2&&ml(y.body),i&4)for(i=y.head,ml(i),y=i.firstChild;y;){var S=y.nextSibling,A=y.nodeName;y[zn]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&y.rel.toLowerCase()==="stylesheet"||i.removeChild(y),y=S}}if(c===0){e.removeChild(d),Tl(n);return}c--}else i==="$"||i==="$?"||i==="$!"?c++:s=i.charCodeAt(0)-48;else s=0;i=d}while(i);Tl(n)}function $u(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":$u(i),Nn(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Cv(e,n,i,s){for(;e.nodeType===1;){var c=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[zn])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Yn(e.nextSibling),e===null)break}return null}function Nv(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Yn(e.nextSibling),e===null))return null;return e}function ec(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Mv(e,n){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")n();else{var s=function(){n(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Yn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var tc=null;function Yh(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return e;n--}else i==="/$"&&n++}e=e.previousSibling}return null}function qh(e,n,i){switch(n=Us(i),e){case"html":if(e=n.documentElement,!e)throw Error(l(452));return e;case"head":if(e=n.head,!e)throw Error(l(453));return e;case"body":if(e=n.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function ml(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Nn(e)}var Bn=new Map,Vh=new Set;function Ls(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Na=z.d;z.d={f:wv,r:Rv,D:Ov,C:Dv,L:_v,m:Uv,X:kv,S:Lv,M:Iv};function wv(){var e=Na.f(),n=Cs();return e||n}function Rv(e){var n=$n(e);n!==null&&n.tag===5&&n.type==="form"?dd(n):Na.r(e)}var hi=typeof document>"u"?null:document;function Xh(e,n,i){var s=hi;if(s&&typeof n=="string"&&n){var c=Ue(n);c='link[rel="'+e+'"][href="'+c+'"]',typeof i=="string"&&(c+='[crossorigin="'+i+'"]'),Vh.has(c)||(Vh.add(c),e={rel:e,crossOrigin:i,href:n},s.querySelector(c)===null&&(n=s.createElement("link"),$t(n,"link",e),bt(n),s.head.appendChild(n)))}}function Ov(e){Na.D(e),Xh("dns-prefetch",e,null)}function Dv(e,n){Na.C(e,n),Xh("preconnect",e,n)}function _v(e,n,i){Na.L(e,n,i);var s=hi;if(s&&e&&n){var c='link[rel="preload"][as="'+Ue(n)+'"]';n==="image"&&i&&i.imageSrcSet?(c+='[imagesrcset="'+Ue(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(c+='[imagesizes="'+Ue(i.imageSizes)+'"]')):c+='[href="'+Ue(e)+'"]';var d=c;switch(n){case"style":d=pi(e);break;case"script":d=mi(e)}Bn.has(d)||(e=v({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Bn.set(d,e),s.querySelector(c)!==null||n==="style"&&s.querySelector(vl(d))||n==="script"&&s.querySelector(gl(d))||(n=s.createElement("link"),$t(n,"link",e),bt(n),s.head.appendChild(n)))}}function Uv(e,n){Na.m(e,n);var i=hi;if(i&&e){var s=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+Ue(s)+'"][href="'+Ue(e)+'"]',d=c;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=mi(e)}if(!Bn.has(d)&&(e=v({rel:"modulepreload",href:e},n),Bn.set(d,e),i.querySelector(c)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(gl(d)))return}s=i.createElement("link"),$t(s,"link",e),bt(s),i.head.appendChild(s)}}}function Lv(e,n,i){Na.S(e,n,i);var s=hi;if(s&&e){var c=ea(s).hoistableStyles,d=pi(e);n=n||"default";var y=c.get(d);if(!y){var S={loading:0,preload:null};if(y=s.querySelector(vl(d)))S.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Bn.get(d))&&nc(e,i);var A=y=s.createElement("link");bt(A),$t(A,"link",e),A._p=new Promise(function(F,Z){A.onload=F,A.onerror=Z}),A.addEventListener("load",function(){S.loading|=1}),A.addEventListener("error",function(){S.loading|=2}),S.loading|=4,ks(y,n,s)}y={type:"stylesheet",instance:y,count:1,state:S},c.set(d,y)}}}function kv(e,n){Na.X(e,n);var i=hi;if(i&&e){var s=ea(i).hoistableScripts,c=mi(e),d=s.get(c);d||(d=i.querySelector(gl(c)),d||(e=v({src:e,async:!0},n),(n=Bn.get(c))&&ac(e,n),d=i.createElement("script"),bt(d),$t(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(c,d))}}function Iv(e,n){Na.M(e,n);var i=hi;if(i&&e){var s=ea(i).hoistableScripts,c=mi(e),d=s.get(c);d||(d=i.querySelector(gl(c)),d||(e=v({src:e,async:!0,type:"module"},n),(n=Bn.get(c))&&ac(e,n),d=i.createElement("script"),bt(d),$t(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(c,d))}}function Zh(e,n,i,s){var c=(c=Ae.current)?Ls(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=pi(i.href),i=ea(c).hoistableStyles,s=i.get(n),s||(s={type:"style",instance:null,count:0,state:null},i.set(n,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=pi(i.href);var d=ea(c).hoistableStyles,y=d.get(e);if(y||(c=c.ownerDocument||c,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,y),(d=c.querySelector(vl(e)))&&!d._p&&(y.instance=d,y.state.loading=5),Bn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Bn.set(e,i),d||Bv(c,e,i,y.state))),n&&s===null)throw Error(l(528,""));return y}if(n&&s!==null)throw Error(l(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=mi(i),i=ea(c).hoistableScripts,s=i.get(n),s||(s={type:"script",instance:null,count:0,state:null},i.set(n,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function pi(e){return'href="'+Ue(e)+'"'}function vl(e){return'link[rel="stylesheet"]['+e+"]"}function Qh(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Bv(e,n,i,s){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?s.loading=1:(n=e.createElement("link"),s.preload=n,n.addEventListener("load",function(){return s.loading|=1}),n.addEventListener("error",function(){return s.loading|=2}),$t(n,"link",i),bt(n),e.head.appendChild(n))}function mi(e){return'[src="'+Ue(e)+'"]'}function gl(e){return"script[async]"+e}function Kh(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var s=e.querySelector('style[data-href~="'+Ue(i.href)+'"]');if(s)return n.instance=s,bt(s),s;var c=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),bt(s),$t(s,"style",c),ks(s,i.precedence,e),n.instance=s;case"stylesheet":c=pi(i.href);var d=e.querySelector(vl(c));if(d)return n.state.loading|=4,n.instance=d,bt(d),d;s=Qh(i),(c=Bn.get(c))&&nc(s,c),d=(e.ownerDocument||e).createElement("link"),bt(d);var y=d;return y._p=new Promise(function(S,A){y.onload=S,y.onerror=A}),$t(d,"link",s),n.state.loading|=4,ks(d,i.precedence,e),n.instance=d;case"script":return d=mi(i.src),(c=e.querySelector(gl(d)))?(n.instance=c,bt(c),c):(s=i,(c=Bn.get(d))&&(s=v({},i),ac(s,c)),e=e.ownerDocument||e,c=e.createElement("script"),bt(c),$t(c,"link",s),e.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(l(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(s=n.instance,n.state.loading|=4,ks(s,i.precedence,e));return n.instance}function ks(e,n,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=s.length?s[s.length-1]:null,d=c,y=0;y<s.length;y++){var S=s[y];if(S.dataset.precedence===n)d=S;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function nc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function ac(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Is=null;function Wh(e,n,i){if(Is===null){var s=new Map,c=Is=new Map;c.set(i,s)}else c=Is,s=c.get(i),s||(s=new Map,c.set(i,s));if(s.has(e))return s;for(s.set(e,null),i=i.getElementsByTagName(e),c=0;c<i.length;c++){var d=i[c];if(!(d[zn]||d[Ft]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(n)||"";y=e+y;var S=s.get(y);S?S.push(d):s.set(y,[d])}}return s}function Jh(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function Fv(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function $h(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var yl=null;function Gv(){}function jv(e,n,i){if(yl===null)throw Error(l(475));var s=yl;if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=pi(i.href),d=e.querySelector(vl(c));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=Bs.bind(s),e.then(s,s)),n.state.loading|=4,n.instance=d,bt(d);return}d=e.ownerDocument||e,i=Qh(i),(c=Bn.get(c))&&nc(i,c),d=d.createElement("link"),bt(d);var y=d;y._p=new Promise(function(S,A){y.onload=S,y.onerror=A}),$t(d,"link",i),n.instance=d}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(s.count++,n=Bs.bind(s),e.addEventListener("load",n),e.addEventListener("error",n))}}function zv(){if(yl===null)throw Error(l(475));var e=yl;return e.stylesheets&&e.count===0&&rc(e,e.stylesheets),0<e.count?function(n){var i=setTimeout(function(){if(e.stylesheets&&rc(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i)}}:null}function Bs(){if(this.count--,this.count===0){if(this.stylesheets)rc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fs=null;function rc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fs=new Map,n.forEach(Hv,e),Fs=null,Bs.call(e))}function Hv(e,n){if(!(n.state.loading&4)){var i=Fs.get(e);if(i)var s=i.get(null);else{i=new Map,Fs.set(e,i);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var y=c[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(i.set(y.dataset.precedence,y),s=y)}s&&i.set(null,s)}c=n.instance,y=c.getAttribute("data-precedence"),d=i.get(y)||s,d===s&&i.set(null,c),i.set(y,c),this.count++,s=Bs.bind(this),c.addEventListener("load",s),c.addEventListener("error",s),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),n.state.loading|=4}}var bl={$$typeof:_,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function Pv(e,n,i,s,c,d,y,S){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ir(0),this.hiddenUpdates=Ir(null),this.identifierPrefix=s,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function ep(e,n,i,s,c,d,y,S,A,F,Z,ee){return e=new Pv(e,n,i,y,S,A,F,ee),n=1,d===!0&&(n|=24),d=gn(3,null,null,n),e.current=d,d.stateNode=e,n=Go(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:s,isDehydrated:i,cache:n},Po(d),e}function tp(e){return e?(e=Vr,e):Vr}function np(e,n,i,s,c,d){c=tp(c),s.context===null?s.context=c:s.pendingContext=c,s=Ia(n),s.payload={element:i},d=d===void 0?null:d,d!==null&&(s.callback=d),i=Ba(e,s,n),i!==null&&(En(i,e,n),Qi(i,e,n))}function ap(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function ic(e,n){ap(e,n),(e=e.alternate)&&ap(e,n)}function rp(e){if(e.tag===13){var n=qr(e,67108864);n!==null&&En(n,e,67108864),ic(e,67108864)}}var Gs=!0;function Yv(e,n,i,s){var c=R.T;R.T=null;var d=z.p;try{z.p=2,lc(e,n,i,s)}finally{z.p=d,R.T=c}}function qv(e,n,i,s){var c=R.T;R.T=null;var d=z.p;try{z.p=8,lc(e,n,i,s)}finally{z.p=d,R.T=c}}function lc(e,n,i,s){if(Gs){var c=sc(s);if(c===null)Xu(e,n,s,js,i),lp(e,s);else if(Xv(c,e,n,i,s))s.stopPropagation();else if(lp(e,s),n&4&&-1<Vv.indexOf(e)){for(;c!==null;){var d=$n(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=Kn(d.pendingLanes);if(y!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;y;){var A=1<<31-cn(y);S.entanglements[1]|=A,y&=~A}ia(d),(st&6)===0&&(Ts=Bt()+500,dl(0))}}break;case 13:S=qr(d,2),S!==null&&En(S,d,2),Cs(),ic(d,2)}if(d=sc(s),d===null&&Xu(e,n,s,js,i),d===c)break;c=d}c!==null&&s.stopPropagation()}else Xu(e,n,s,null,i)}}function sc(e){return e=at(e),oc(e)}var js=null;function oc(e){if(js=null,e=Jn(e),e!==null){var n=u(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=f(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return js=e,null}function ip(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ti()){case Ai:return 2;case Ci:return 8;case cr:case fr:return 32;case Ni:return 268435456;default:return 32}default:return 32}}var uc=!1,Ka=null,Wa=null,Ja=null,Sl=new Map,xl=new Map,$a=[],Vv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lp(e,n){switch(e){case"focusin":case"focusout":Ka=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":Ja=null;break;case"pointerover":case"pointerout":Sl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(n.pointerId)}}function El(e,n,i,s,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:i,eventSystemFlags:s,nativeEvent:d,targetContainers:[c]},n!==null&&(n=$n(n),n!==null&&rp(n)),e):(e.eventSystemFlags|=s,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function Xv(e,n,i,s,c){switch(n){case"focusin":return Ka=El(Ka,e,n,i,s,c),!0;case"dragenter":return Wa=El(Wa,e,n,i,s,c),!0;case"mouseover":return Ja=El(Ja,e,n,i,s,c),!0;case"pointerover":var d=c.pointerId;return Sl.set(d,El(Sl.get(d)||null,e,n,i,s,c)),!0;case"gotpointercapture":return d=c.pointerId,xl.set(d,El(xl.get(d)||null,e,n,i,s,c)),!0}return!1}function sp(e){var n=Jn(e.target);if(n!==null){var i=u(n);if(i!==null){if(n=i.tag,n===13){if(n=f(i),n!==null){e.blockedOn=n,co(e.priority,function(){if(i.tag===13){var s=xn();s=Br(s);var c=qr(i,s);c!==null&&En(c,i,s),ic(i,s)}});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zs(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=sc(e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);Ye=s,i.target.dispatchEvent(s),Ye=null}else return n=$n(i),n!==null&&rp(n),e.blockedOn=i,!1;n.shift()}return!0}function op(e,n,i){zs(e)&&i.delete(n)}function Zv(){uc=!1,Ka!==null&&zs(Ka)&&(Ka=null),Wa!==null&&zs(Wa)&&(Wa=null),Ja!==null&&zs(Ja)&&(Ja=null),Sl.forEach(op),xl.forEach(op)}function Hs(e,n){e.blockedOn===n&&(e.blockedOn=null,uc||(uc=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Zv)))}var Ps=null;function up(e){Ps!==e&&(Ps=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Ps===e&&(Ps=null);for(var n=0;n<e.length;n+=3){var i=e[n],s=e[n+1],c=e[n+2];if(typeof s!="function"){if(oc(s||i)===null)continue;break}var d=$n(i);d!==null&&(e.splice(n,3),n-=3,ou(d,{pending:!0,data:c,method:i.method,action:s},s,c))}}))}function Tl(e){function n(A){return Hs(A,e)}Ka!==null&&Hs(Ka,e),Wa!==null&&Hs(Wa,e),Ja!==null&&Hs(Ja,e),Sl.forEach(n),xl.forEach(n);for(var i=0;i<$a.length;i++){var s=$a[i];s.blockedOn===e&&(s.blockedOn=null)}for(;0<$a.length&&(i=$a[0],i.blockedOn===null);)sp(i),i.blockedOn===null&&$a.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(s=0;s<i.length;s+=3){var c=i[s],d=i[s+1],y=c[Yt]||null;if(typeof d=="function")y||up(i);else if(y){var S=null;if(d&&d.hasAttribute("formAction")){if(c=d,y=d[Yt]||null)S=y.formAction;else if(oc(c)!==null)continue}else S=y.action;typeof S=="function"?i[s+1]=S:(i.splice(s,3),s-=3),up(i)}}}function cc(e){this._internalRoot=e}Ys.prototype.render=cc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(l(409));var i=n.current,s=xn();np(i,s,e,n,null,null)},Ys.prototype.unmount=cc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;np(e.current,2,null,e,null,null),Cs(),n[sn]=null}};function Ys(e){this._internalRoot=e}Ys.prototype.unstable_scheduleHydration=function(e){if(e){var n=Di();e={blockedOn:null,target:e,priority:n};for(var i=0;i<$a.length&&n!==0&&n<$a[i].priority;i++);$a.splice(i,0,e),i===0&&sp(e)}};var cp=t.version;if(cp!=="19.1.1")throw Error(l(527,cp,"19.1.1"));z.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=h(n),e=e!==null?m(e):null,e=e===null?null:e.stateNode,e};var Qv={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qs.isDisabled&&qs.supportsFiber)try{tn=qs.inject(Qv),Ut=qs}catch{}}return Cl.createRoot=function(e,n){if(!o(e))throw Error(l(299));var i=!1,s="",c=Nd,d=Md,y=wd,S=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(S=n.unstable_transitionCallbacks)),n=ep(e,1,!1,null,null,i,s,c,d,y,S,null),e[sn]=n.current,Vu(e),new cc(n)},Cl.hydrateRoot=function(e,n,i){if(!o(e))throw Error(l(299));var s=!1,c="",d=Nd,y=Md,S=wd,A=null,F=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks),i.formState!==void 0&&(F=i.formState)),n=ep(e,1,!0,n,i??null,s,c,d,y,S,A,F),n.context=tp(null),i=n.current,s=xn(),s=Br(s),c=Ia(s),c.callback=null,Ba(i,c,s),i=s,n.current.lanes=i,ca(n,i),ia(n),e[sn]=n.current,Vu(e),new Ys(n)},Cl.version="19.1.1",Cl}var Sp;function rg(){if(Sp)return hc.exports;Sp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),hc.exports=ag(),hc.exports}var ig=rg();const lg=Uc(ig);class qn{constructor(t=!1){this.eventMap={},this.eventsSuspended=t==!0}addListener(t,r,l={}){if(typeof t=="string"&&t.length<1||t instanceof String&&t.length<1||typeof t!="string"&&!(t instanceof String)&&t!==qn.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof r!="function")throw new TypeError("The callback must be a function.");const o=new xp(t,this,r,l);return this.eventMap[t]||(this.eventMap[t]=[]),l.prepend?this.eventMap[t].unshift(o):this.eventMap[t].push(o),o}addOneTimeListener(t,r,l={}){l.remaining=1,this.addListener(t,r,l)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(t,r){return t===void 0?this.eventMap[qn.ANY_EVENT]&&this.eventMap[qn.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,l])=>l.length>0):this.eventMap[t]&&this.eventMap[t].length>0?r instanceof xp?this.eventMap[t].filter(o=>o===r).length>0:typeof r=="function"?this.eventMap[t].filter(o=>o.callback===r).length>0:r==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(t){return this.eventMap[t]||[]}suspendEvent(t){this.getListeners(t).forEach(r=>{r.suspended=!0})}unsuspendEvent(t){this.getListeners(t).forEach(r=>{r.suspended=!1})}getListenerCount(t){return this.getListeners(t).length}emit(t,...r){if(typeof t!="string"&&!(t instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let l=[],o=this.eventMap[qn.ANY_EVENT]||[];return this.eventMap[t]&&(o=o.concat(this.eventMap[t])),o.forEach(u=>{if(u.suspended)return;let f=[...r];Array.isArray(u.arguments)&&(f=f.concat(u.arguments)),u.remaining>0&&(l.push(u.callback.apply(u.context,f)),u.count++),--u.remaining<1&&u.remove()}),l}removeListener(t,r,l={}){if(t===void 0){this.eventMap={};return}else if(!this.eventMap[t])return;let o=this.eventMap[t].filter(u=>r&&u.callback!==r||l.remaining&&l.remaining!==u.remaining||l.context&&l.context!==u.context);o.length?this.eventMap[t]=o:delete this.eventMap[t]}async waitFor(t,r={}){return r.duration=parseInt(r.duration),(isNaN(r.duration)||r.duration<=0)&&(r.duration=1/0),new Promise((l,o)=>{let u,f=this.addListener(t,()=>{clearTimeout(u),l()},{remaining:1});r.duration!==1/0&&(u=setTimeout(()=>{f.remove(),o("The duration expired before the event was emitted.")},r.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class xp{constructor(t,r,l,o={}){if(typeof t!="string"&&!(t instanceof String)&&t!==qn.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!r)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof l!="function")throw new TypeError("The 'callback' must be a function.");o.arguments!==void 0&&!Array.isArray(o.arguments)&&(o.arguments=[o.arguments]),o=Object.assign({context:r,remaining:1/0,arguments:void 0,duration:1/0},o),o.duration!==1/0&&setTimeout(()=>this.remove(),o.duration),this.arguments=o.arguments,this.callback=l,this.context=o.context,this.count=0,this.event=t,this.remaining=parseInt(o.remaining)>=1?parseInt(o.remaining):1/0,this.suspended=!1,this.target=r}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class J{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),J.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),J.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),J.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),J.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class gi{constructor(t,r={}){this.duration=ie.defaults.note.duration,this.attack=ie.defaults.note.attack,this.release=ie.defaults.note.release,r.duration!=null&&(this.duration=r.duration),r.attack!=null&&(this.attack=r.attack),r.rawAttack!=null&&(this.attack=se.from7bitToFloat(r.rawAttack)),r.release!=null&&(this.release=r.release),r.rawRelease!=null&&(this.release=se.from7bitToFloat(r.rawRelease)),Number.isInteger(t)?this.identifier=se.toNoteIdentifier(t):this.identifier=t}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(t){const r=se.getNoteDetails(t);if(ie.validation&&!t)throw new Error("Invalid note identifier");this._name=r.name,this._accidental=r.accidental,this._octave=r.octave}get name(){return this._name}set name(t){if(ie.validation&&(t=t.toUpperCase(),!["C","D","E","F","G","A","B"].includes(t)))throw new Error("Invalid name value");this._name=t}get accidental(){return this._accidental}set accidental(t){if(ie.validation&&(t=t.toLowerCase(),!["#","##","b","bb"].includes(t)))throw new Error("Invalid accidental value");this._accidental=t}get octave(){return this._octave}set octave(t){if(ie.validation&&(t=parseInt(t),isNaN(t)))throw new Error("Invalid octave value");this._octave=t}get duration(){return this._duration}set duration(t){if(ie.validation&&(t=parseFloat(t),isNaN(t)||t===null||t<0))throw new RangeError("Invalid duration value.");this._duration=t}get attack(){return this._attack}set attack(t){if(ie.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid attack value.");this._attack=t}get release(){return this._release}set release(t){if(ie.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid release value.");this._release=t}get rawAttack(){return se.fromFloatTo7Bit(this._attack)}set rawAttack(t){this._attack=se.from7bitToFloat(t)}get rawRelease(){return se.fromFloatTo7Bit(this._release)}set rawRelease(t){this._release=se.from7bitToFloat(t)}get number(){return se.toNoteNumber(this.identifier)}getOffsetNumber(t=0,r=0){return ie.validation&&(t=parseInt(t)||0,r=parseInt(r)||0),Math.min(Math.max(this.number+t*12+r,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class se{static toNoteNumber(t,r=0){if(r=r==null?0:parseInt(r),isNaN(r))throw new RangeError("Invalid 'octaveOffset' value");typeof t!="string"&&(t="");const l=this.getNoteDetails(t);if(!l)throw new TypeError("Invalid note identifier");const o={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let u=(l.octave+1+r)*12;if(u+=o[l.name],l.accidental&&(l.accidental.startsWith("b")?u-=l.accidental.length:u+=l.accidental.length),u<0||u>127)throw new RangeError("Invalid octaveOffset value");return u}static getNoteDetails(t){Number.isInteger(t)&&(t=this.toNoteIdentifier(t));const r=t.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!r)throw new TypeError("Invalid note identifier");const l=r[1].toUpperCase(),o=parseInt(r[3]);let u=r[2].toLowerCase();return u=u===""?void 0:u,{accidental:u,identifier:l+(u||"")+o,name:l,octave:o}}static sanitizeChannels(t){let r;if(ie.validation){if(t==="all")r=["all"];else if(t==="none")return[]}return Array.isArray(t)?r=t:r=[t],r.indexOf("all")>-1&&(r=J.MIDI_CHANNEL_NUMBERS),r.map(function(l){return parseInt(l)}).filter(function(l){return l>=1&&l<=16})}static toTimestamp(t){let r=!1;const l=parseFloat(t);return isNaN(l)?!1:(typeof t=="string"&&t.substring(0,1)==="+"?l>=0&&(r=ie.time+l):l>=0&&(r=l),r)}static guessNoteNumber(t,r){r=parseInt(r)||0;let l=!1;if(Number.isInteger(t)&&t>=0&&t<=127)l=parseInt(t);else if(parseInt(t)>=0&&parseInt(t)<=127)l=parseInt(t);else if(typeof t=="string"||t instanceof String)try{l=this.toNoteNumber(t.trim(),r)}catch{return!1}return l}static toNoteIdentifier(t,r){if(t=parseInt(t),isNaN(t)||t<0||t>127)throw new RangeError("Invalid note number");if(r=r==null?0:parseInt(r),isNaN(r))throw new RangeError("Invalid octaveOffset value");const l=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],o=Math.floor(t/12-1)+r;return l[t%12]+o.toString()}static buildNote(t,r={}){if(r.octaveOffset=parseInt(r.octaveOffset)||0,t instanceof gi)return t;let l=this.guessNoteNumber(t,r.octaveOffset);if(l===!1)throw new TypeError(`The input could not be parsed as a note (${t})`);return r.octaveOffset=void 0,new gi(l,r)}static buildNoteArray(t,r={}){let l=[];return Array.isArray(t)||(t=[t]),t.forEach(o=>{l.push(this.buildNote(o,r))}),l}static from7bitToFloat(t){return t===1/0&&(t=127),t=parseInt(t)||0,Math.min(Math.max(t/127,0),1)}static fromFloatTo7Bit(t){return t===1/0&&(t=1),t=parseFloat(t)||0,Math.min(Math.max(Math.round(t*127),0),127)}static fromMsbLsbToFloat(t,r=0){ie.validation&&(t=Math.min(Math.max(parseInt(t)||0,0),127),r=Math.min(Math.max(parseInt(r)||0,0),127));const l=((t<<7)+r)/16383;return Math.min(Math.max(l,0),1)}static fromFloatToMsbLsb(t){ie.validation&&(t=Math.min(Math.max(parseFloat(t)||0,0),1));const r=Math.round(t*16383);return{msb:r>>7,lsb:r&127}}static offsetNumber(t,r=0,l=0){if(ie.validation){if(t=parseInt(t),isNaN(t))throw new Error("Invalid note number");r=parseInt(r)||0,l=parseInt(l)||0}return Math.min(Math.max(t+r*12+l,0),127)}static getPropertyByValue(t,r){return Object.keys(t).find(l=>t[l]===r)}static getCcNameByNumber(t){if(!(ie.validation&&(t=parseInt(t),!(t>=0&&t<=127))))return J.CONTROL_CHANGE_MESSAGES[t].name}static getCcNumberByName(t){let r=J.CONTROL_CHANGE_MESSAGES.find(l=>l.name===t);return r?r.number:J.MIDI_CONTROL_CHANGE_MESSAGES[t]}static getChannelModeByNumber(t){if(!(t>=120&&t<=127))return!1;for(let r in J.CHANNEL_MODE_MESSAGES)if(J.CHANNEL_MODE_MESSAGES.hasOwnProperty(r)&&t===J.CHANNEL_MODE_MESSAGES[r])return r;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class sg extends qn{constructor(t,r){super(),this._output=t,this._number=r,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(t,r={time:0}){return this.output.send(t,r),this}sendKeyAftertouch(t,r,l={}){if(ie.validation){if(l.useRawValue&&(l.rawValue=l.useRawValue),isNaN(parseFloat(r)))throw new RangeError("Invalid key aftertouch value.");if(l.rawValue){if(!(r>=0&&r<=127&&Number.isInteger(r)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(r>=0&&r<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}l.rawValue||(r=se.fromFloatTo7Bit(r));const o=ie.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(t)||(t=[t]),se.buildNoteArray(t).forEach(u=>{this.send([(J.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),u.getOffsetNumber(o),r],{time:se.toTimestamp(l.time)})}),this}sendControlChange(t,r,l={}){if(typeof t=="string"&&(t=se.getCcNumberByName(t)),Array.isArray(r)||(r=[r]),ie.validation){if(t===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(r=r.map(o=>{const u=Math.min(Math.max(parseInt(o),0),127);if(isNaN(u))throw new TypeError("Values must be integers between 0 and 127");return u}),r.length===2&&t>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return r.forEach((o,u)=>{this.send([(J.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t+u*32,r[u]],{time:se.toTimestamp(l.time)})}),this}_selectNonRegisteredParameter(t,r={}){return this.sendControlChange(99,t[0],r),this.sendControlChange(98,t[1],r),this}_deselectRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_deselectNonRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_selectRegisteredParameter(t,r={}){return this.sendControlChange(101,t[0],r),this.sendControlChange(100,t[1],r),this}_setCurrentParameter(t,r={}){return t=[].concat(t),this.sendControlChange(6,t[0],r),t.length<2?this:(this.sendControlChange(38,t[1],r),this)}sendRpnDecrement(t,r={}){if(Array.isArray(t)||(t=J.REGISTERED_PARAMETERS[t]),ie.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let l=!1;if(Object.getOwnPropertyNames(J.REGISTERED_PARAMETERS).forEach(o=>{J.REGISTERED_PARAMETERS[o][0]===t[0]&&J.REGISTERED_PARAMETERS[o][1]===t[1]&&(l=!0)}),!l)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,r),this.sendControlChange(97,0,r),this._deselectRegisteredParameter(r),this}sendRpnIncrement(t,r={}){if(Array.isArray(t)||(t=J.REGISTERED_PARAMETERS[t]),ie.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let l=!1;if(Object.getOwnPropertyNames(J.REGISTERED_PARAMETERS).forEach(o=>{J.REGISTERED_PARAMETERS[o][0]===t[0]&&J.REGISTERED_PARAMETERS[o][1]===t[1]&&(l=!0)}),!l)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,r),this.sendControlChange(96,0,r),this._deselectRegisteredParameter(r),this}playNote(t,r={}){this.sendNoteOn(t,r);const l=Array.isArray(t)?t:[t];for(let o of l)if(parseInt(o.duration)>0){const u={time:(se.toTimestamp(r.time)||ie.time)+parseInt(o.duration),release:o.release,rawRelease:o.rawRelease};this.sendNoteOff(o,u)}else if(parseInt(r.duration)>0){const u={time:(se.toTimestamp(r.time)||ie.time)+parseInt(r.duration),release:r.release,rawRelease:r.rawRelease};this.sendNoteOff(o,u)}return this}sendNoteOff(t,r={}){if(ie.validation){if(r.rawRelease!=null&&!(r.rawRelease>=0&&r.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(r.release!=null&&!(r.release>=0&&r.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");r.rawVelocity&&(r.rawRelease=r.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),r.velocity&&(r.release=r.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let l=64;r.rawRelease!=null?l=r.rawRelease:isNaN(r.release)||(l=Math.round(r.release*127));const o=ie.octaveOffset+this.output.octaveOffset+this.octaveOffset;return se.buildNoteArray(t,{rawRelease:parseInt(l)}).forEach(u=>{this.send([(J.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),u.getOffsetNumber(o),u.rawRelease],{time:se.toTimestamp(r.time)})}),this}stopNote(t,r={}){return this.sendNoteOff(t,r)}sendNoteOn(t,r={}){if(ie.validation){if(r.rawAttack!=null&&!(r.rawAttack>=0&&r.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(r.attack!=null&&!(r.attack>=0&&r.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");r.rawVelocity&&(r.rawAttack=r.velocity,r.rawRelease=r.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),r.velocity&&(r.attack=r.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let l=64;r.rawAttack!=null?l=r.rawAttack:isNaN(r.attack)||(l=Math.round(r.attack*127));const o=ie.octaveOffset+this.output.octaveOffset+this.octaveOffset;return se.buildNoteArray(t,{rawAttack:l}).forEach(u=>{this.send([(J.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),u.getOffsetNumber(o),u.rawAttack],{time:se.toTimestamp(r.time)})}),this}sendChannelMode(t,r=0,l={}){if(typeof t=="string"&&(t=J.CHANNEL_MODE_MESSAGES[t]),ie.validation){if(t===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(t)||!(t>=120&&t<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(r))||r<0||r>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(J.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t,r],{time:se.toTimestamp(l.time)}),this}sendOmniMode(t,r={}){return t===void 0||t?this.sendChannelMode("omnimodeon",0,r):this.sendChannelMode("omnimodeoff",0,r),this}sendChannelAftertouch(t,r={}){if(ie.validation){if(isNaN(parseFloat(t)))throw new RangeError("Invalid channel aftertouch value.");if(r.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return r.rawValue||(t=se.fromFloatTo7Bit(t)),this.send([(J.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(t)],{time:se.toTimestamp(r.time)}),this}sendMasterTuning(t,r={}){if(t=parseFloat(t)||0,ie.validation&&!(t>-65&&t<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let l=Math.floor(t)+64,o=t-Math.floor(t);o=Math.round((o+1)/2*16383);let u=o>>7&127,f=o&127;return this.sendRpnValue("channelcoarsetuning",l,r),this.sendRpnValue("channelfinetuning",[u,f],r),this}sendModulationRange(t,r,l={}){if(ie.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(r!=null&&(!Number.isInteger(r)||!(r>=0&&r<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return r>=0&&r<=127||(r=0),this.sendRpnValue("modulationrange",[t,r],l),this}sendNrpnValue(t,r,l={}){if(r=[].concat(r),ie.validation){if(!Array.isArray(t)||!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");r.forEach(o=>{if(!(o>=0&&o<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(t,l),this._setCurrentParameter(r,l),this._deselectNonRegisteredParameter(l),this}sendPitchBend(t,r={}){if(ie.validation)if(r.rawValue&&Array.isArray(t)){if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(r.rawValue&&!Array.isArray(t)){if(!(t>=0&&t<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(t)||t===null)throw new RangeError("Invalid pitch bend value.");if(!(t>=-1&&t<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let l=0,o=0;if(r.rawValue&&Array.isArray(t))l=t[0],o=t[1];else if(r.rawValue&&!Array.isArray(t))l=t;else{const u=se.fromFloatToMsbLsb((t+1)/2);l=u.msb,o=u.lsb}return this.send([(J.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),o,l],{time:se.toTimestamp(r.time)}),this}sendPitchBendRange(t,r,l={}){if(ie.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(r)||!(r>=0&&r<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[t,r],l),this}sendProgramChange(t,r={}){if(t=parseInt(t)||0,ie.validation&&!(t>=0&&t<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(J.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),t],{time:se.toTimestamp(r.time)}),this}sendRpnValue(t,r,l={}){if(Array.isArray(t)||(t=J.REGISTERED_PARAMETERS[t]),ie.validation){if(!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(r).forEach(o=>{if(!(o>=0&&o<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(t,l),this._setCurrentParameter(r,l),this._deselectRegisteredParameter(l),this}sendTuningBank(t,r={}){if(ie.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",t,r),this}sendTuningProgram(t,r={}){if(ie.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",t,r),this}sendLocalControl(t,r={}){return t?this.sendChannelMode("localcontrol",127,r):this.sendChannelMode("localcontrol",0,r)}sendAllNotesOff(t={}){return this.sendChannelMode("allnotesoff",0,t)}sendAllSoundOff(t={}){return this.sendChannelMode("allsoundoff",0,t)}sendResetAllControllers(t={}){return this.sendChannelMode("resetallcontrollers",0,t)}sendPolyphonicMode(t,r={}){return t==="mono"?this.sendChannelMode("monomodeon",0,r):this.sendChannelMode("polymodeon",0,r)}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Cc extends qn{constructor(t){super(),this._midiOutput=t,this._octaveOffset=0,this.channels=[];for(let r=1;r<=16;r++)this.channels[r]=new sg(this,r);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(t){let r={timestamp:ie.time};t.port.connection==="open"?(r.type="opened",r.target=this,r.port=r.target,this.emit("opened",r)):t.port.connection==="closed"&&t.port.state==="connected"?(r.type="closed",r.target=this,r.port=r.target,this.emit("closed",r)):t.port.connection==="closed"&&t.port.state==="disconnected"?(r.type="disconnected",r.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",r)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught:",t.port.connection,t.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(t){return Promise.reject(t)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(t,r={time:0},l=0){if(t instanceof um&&(t=se.isNode?t.data:t.rawData),t instanceof Uint8Array&&se.isNode&&(t=Array.from(t)),ie.validation){if(!Array.isArray(t)&&!(t instanceof Uint8Array)&&(t=[t],Array.isArray(r)&&(t=t.concat(r)),r=isNaN(l)?{time:0}:{time:l}),!(parseInt(t[0])>=128&&parseInt(t[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");t.slice(1).forEach(o=>{if(o=parseInt(o),!(o>=0&&o<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),r||(r={time:0})}return this._midiOutput.send(t,se.toTimestamp(r.time)),this}sendSysex(t,r=[],l={}){if(t=[].concat(t),r instanceof Uint8Array){const o=new Uint8Array(1+t.length+r.length+1);o[0]=J.SYSTEM_MESSAGES.sysex,o.set(Uint8Array.from(t),1),o.set(r,1+t.length),o[o.length-1]=J.SYSTEM_MESSAGES.sysexend,this.send(o,{time:l.time})}else{const o=t.concat(r,J.SYSTEM_MESSAGES.sysexend);this.send([J.SYSTEM_MESSAGES.sysex].concat(o),{time:l.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():ie.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(t,r={}){if(ie.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([J.SYSTEM_MESSAGES.timecode,t],{time:r.time}),this}sendSongPosition(t=0,r={}){t=Math.floor(t)||0;var l=t>>7&127,o=t&127;return this.send([J.SYSTEM_MESSAGES.songposition,l,o],{time:r.time}),this}sendSongSelect(t=0,r={}){if(ie.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([J.SYSTEM_MESSAGES.songselect,t],{time:r.time}),this}sendTuneRequest(t={}){return this.send([J.SYSTEM_MESSAGES.tunerequest],{time:t.time}),this}sendClock(t={}){return this.send([J.SYSTEM_MESSAGES.clock],{time:t.time}),this}sendStart(t={}){return this.send([J.SYSTEM_MESSAGES.start],{time:t.time}),this}sendContinue(t={}){return this.send([J.SYSTEM_MESSAGES.continue],{time:t.time}),this}sendStop(t={}){return this.send([J.SYSTEM_MESSAGES.stop],{time:t.time}),this}sendActiveSensing(t={}){return this.send([J.SYSTEM_MESSAGES.activesensing],{time:t.time}),this}sendReset(t={}){return this.send([J.SYSTEM_MESSAGES.reset],{time:t.time}),this}sendTuningRequest(t={}){return ie.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(t)}sendKeyAftertouch(t,r,l={}){return l.channels==null&&(l.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(l.channels).forEach(o=>{this.channels[o].sendKeyAftertouch(t,r,l)}),this}sendControlChange(t,r,l={},o={}){if(ie.validation&&(Array.isArray(l)||Number.isInteger(l)||l==="all")){const u=l;l=o,l.channels=u,l.channels==="all"&&(l.channels=J.MIDI_CHANNEL_NUMBERS)}return l.channels==null&&(l.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(l.channels).forEach(u=>{this.channels[u].sendControlChange(t,r,l)}),this}sendPitchBendRange(t=0,r=0,l={}){return l.channels==null&&(l.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(l.channels).forEach(o=>{this.channels[o].sendPitchBendRange(t,r,l)}),this}setPitchBendRange(t=0,r=0,l="all",o={}){return ie.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),o.channels=l,o.channels==="all"&&(o.channels=J.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(t,r,o)}sendRpnValue(t,r,l={}){return l.channels==null&&(l.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(l.channels).forEach(o=>{this.channels[o].sendRpnValue(t,r,l)}),this}setRegisteredParameter(t,r=[],l="all",o={}){return ie.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),o.channels=l,o.channels==="all"&&(o.channels=J.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(t,r,o)}sendChannelAftertouch(t,r={},l={}){if(ie.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=J.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendChannelAftertouch(t,r)}),this}sendPitchBend(t,r={},l={}){if(ie.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=J.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendPitchBend(t,r)}),this}sendProgramChange(t=0,r={},l={}){if(ie.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=J.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendProgramChange(t,r)}),this}sendModulationRange(t,r,l={}){return l.channels==null&&(l.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(l.channels).forEach(o=>{this.channels[o].sendModulationRange(t,r,l)}),this}setModulationRange(t=0,r=0,l="all",o={}){return ie.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),o.channels=l,o.channels==="all"&&(o.channels=J.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(t,r,o)}sendMasterTuning(t,r={}){return r.channels==null&&(r.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(r.channels).forEach(l=>{this.channels[l].sendMasterTuning(t,r)}),this}setMasterTuning(t,r={},l={}){return ie.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),l.channels=r,l.channels==="all"&&(l.channels=J.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(t,l)}sendTuningProgram(t,r={}){return r.channels==null&&(r.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(r.channels).forEach(l=>{this.channels[l].sendTuningProgram(t,r)}),this}setTuningProgram(t,r="all",l={}){return ie.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),l.channels=r,l.channels==="all"&&(l.channels=J.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(t,l)}sendTuningBank(t=0,r={}){return r.channels==null&&(r.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(r.channels).forEach(l=>{this.channels[l].sendTuningBank(t,r)}),this}setTuningBank(t,r="all",l={}){return ie.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),l.channels=r,l.channels==="all"&&(l.channels=J.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(t,l)}sendChannelMode(t,r=0,l={},o={}){if(ie.validation&&(Array.isArray(l)||Number.isInteger(l)||l==="all")){const u=l;l=o,l.channels=u,l.channels==="all"&&(l.channels=J.MIDI_CHANNEL_NUMBERS)}return l.channels==null&&(l.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(l.channels).forEach(u=>{this.channels[u].sendChannelMode(t,r,l)}),this}sendAllSoundOff(t={}){return t.channels==null&&(t.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendAllSoundOff(t)}),this}sendAllNotesOff(t={}){return t.channels==null&&(t.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendAllNotesOff(t)}),this}sendResetAllControllers(t={},r={}){if(ie.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const l=t;t=r,t.channels=l,t.channels==="all"&&(t.channels=J.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(t.channels).forEach(l=>{this.channels[l].sendResetAllControllers(t)}),this}sendPolyphonicMode(t,r={},l={}){if(ie.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=J.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendPolyphonicMode(t,r)}),this}sendLocalControl(t,r={},l={}){if(ie.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=J.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendLocalControl(t,r)}),this}sendOmniMode(t,r={},l={}){if(ie.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=J.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendOmniMode(t,r)}),this}sendNrpnValue(t,r,l={}){return l.channels==null&&(l.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(l.channels).forEach(o=>{this.channels[o].sendNrpnValue(t,r,l)}),this}setNonRegisteredParameter(t,r=[],l="all",o={}){return ie.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),o.channels=l,o.channels==="all"&&(o.channels=J.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(t,r,o)}sendRpnIncrement(t,r={}){return r.channels==null&&(r.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(r.channels).forEach(l=>{this.channels[l].sendRpnIncrement(t,r)}),this}incrementRegisteredParameter(t,r="all",l={}){return ie.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),l.channels=r,l.channels==="all"&&(l.channels=J.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(t,l)}sendRpnDecrement(t,r={}){return r.channels==null&&(r.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(r.channels).forEach(l=>{this.channels[l].sendRpnDecrement(t,r)}),this}decrementRegisteredParameter(t,r="all",l={}){return ie.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),l.channels=r,l.channels==="all"&&(l.channels=J.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(t,l)}sendNoteOff(t,r={},l={}){if(ie.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=J.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendNoteOff(t,r)}),this}stopNote(t,r){return this.sendNoteOff(t,r)}playNote(t,r={},l={}){if(ie.validation&&(r.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),r.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=J.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].playNote(t,r)}),this}sendNoteOn(t,r={},l={}){if(ie.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=J.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendNoteOn(t,r)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Ep{constructor(t=[],r={}){this.destinations=[],this.types=[...Object.keys(J.SYSTEM_MESSAGES),...Object.keys(J.CHANNEL_MESSAGES)],this.channels=J.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(t)||(t=[t]),r.types&&!Array.isArray(r.types)&&(r.types=[r.types]),r.channels&&!Array.isArray(r.channels)&&(r.channels=[r.channels]),ie.validation&&(t.forEach(l=>{if(!(l instanceof Cc))throw new TypeError("Destinations must be of type 'Output'.")}),r.types!==void 0&&r.types.forEach(l=>{if(!J.SYSTEM_MESSAGES.hasOwnProperty(l)&&!J.CHANNEL_MESSAGES.hasOwnProperty(l))throw new TypeError("Type must be a valid message type.")}),r.channels!==void 0&&r.channels.forEach(l=>{if(!J.MIDI_CHANNEL_NUMBERS.includes(l))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=t,r.types&&(this.types=r.types),r.channels&&(this.channels=r.channels)}forward(t){this.suspended||this.types.includes(t.type)&&(t.channel&&!this.channels.includes(t.channel)||this.destinations.forEach(r=>{ie.validation&&!(r instanceof Cc)||r.send(t)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class og extends qn{constructor(t,r){super(),this._input=t,this._number=r,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(t){const r=Object.assign({},t);r.port=this.input,r.target=this,r.type="midimessage",this.emit(r.type,r),this._parseEventForStandardMessages(r)}_parseEventForStandardMessages(t){const r=Object.assign({},t);r.type=r.message.type||"unknownmessage";const l=t.message.dataBytes[0],o=t.message.dataBytes[1];if(r.type==="noteoff"||r.type==="noteon"&&o===0)this.notesState[l]=!1,r.type="noteoff",r.note=new gi(se.offsetNumber(l,this.octaveOffset+this.input.octaveOffset+ie.octaveOffset),{rawAttack:0,rawRelease:o}),r.value=se.from7bitToFloat(o),r.rawValue=o,r.velocity=r.note.release,r.rawVelocity=r.note.rawRelease;else if(r.type==="noteon")this.notesState[l]=!0,r.note=new gi(se.offsetNumber(l,this.octaveOffset+this.input.octaveOffset+ie.octaveOffset),{rawAttack:o}),r.value=se.from7bitToFloat(o),r.rawValue=o,r.velocity=r.note.attack,r.rawVelocity=r.note.rawAttack;else if(r.type==="keyaftertouch")r.note=new gi(se.offsetNumber(l,this.octaveOffset+this.input.octaveOffset+ie.octaveOffset)),r.value=se.from7bitToFloat(o),r.rawValue=o,r.identifier=r.note.identifier,r.key=r.note.number,r.rawKey=l;else if(r.type==="controlchange"){r.controller={number:l,name:J.CONTROL_CHANGE_MESSAGES[l].name,description:J.CONTROL_CHANGE_MESSAGES[l].description,position:J.CONTROL_CHANGE_MESSAGES[l].position},r.subtype=r.controller.name||"controller"+l,r.value=se.from7bitToFloat(o),r.rawValue=o;const u=Object.assign({},r);u.type=`${r.type}-controller${l}`,delete u.subtype,this.emit(u.type,u);const f=Object.assign({},r);f.type=`${r.type}-`+J.CONTROL_CHANGE_MESSAGES[l].name,delete f.subtype,f.type.indexOf("controller")!==0&&this.emit(f.type,f),r.message.dataBytes[0]>=120&&this._parseChannelModeMessage(r),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(r.message.dataBytes[0])&&this._parseEventForParameterNumber(r)}else r.type==="programchange"?(r.value=l,r.rawValue=r.value):r.type==="channelaftertouch"?(r.value=se.from7bitToFloat(l),r.rawValue=l):r.type==="pitchbend"?(r.value=((o<<7)+l-8192)/8192,r.rawValue=(o<<7)+l):r.type="unknownmessage";this.emit(r.type,r)}_parseChannelModeMessage(t){const r=Object.assign({},t);r.type=r.controller.name,r.type==="localcontrol"&&(r.value=r.message.data[2]===127,r.rawValue=r.message.data[2]),r.type==="omnimodeon"?(r.type="omnimode",r.value=!0,r.rawValue=r.message.data[2]):r.type==="omnimodeoff"&&(r.type="omnimode",r.value=!1,r.rawValue=r.message.data[2]),r.type==="monomodeon"?(r.type="monomode",r.value=!0,r.rawValue=r.message.data[2]):r.type==="polymodeon"&&(r.type="monomode",r.value=!1,r.rawValue=r.message.data[2]),this.emit(r.type,r)}_parseEventForParameterNumber(t){const r=t.message.dataBytes[0],l=t.message.dataBytes[1];r===99||r===101?(this._nrpnBuffer=[],this._rpnBuffer=[],r===99?this._nrpnBuffer=[t.message]:l!==127&&(this._rpnBuffer=[t.message])):r===98||r===100?r===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(t.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&l!==127?this._rpnBuffer.push(t.message):this._rpnBuffer=[]):(r===6||r===38||r===96||r===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],t):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],t):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(t){return t===6||t===38||t===96||t===97||t===98||t===99||t===100||t===101}_dispatchParameterNumberEvent(t,r,l,o){t=t==="nrpn"?"nrpn":"rpn";const u={target:o.target,timestamp:o.timestamp,message:o.message,parameterMsb:r,parameterLsb:l,value:se.from7bitToFloat(o.message.dataBytes[1]),rawValue:o.message.dataBytes[1]};t==="rpn"?u.parameter=Object.keys(J.REGISTERED_PARAMETERS).find(h=>J.REGISTERED_PARAMETERS[h][0]===r&&J.REGISTERED_PARAMETERS[h][1]===l):u.parameter=(r<<7)+l;const f=J.CONTROL_CHANGE_MESSAGES[o.message.dataBytes[0]].name;u.type=`${t}-${f}`,this.emit(u.type,u);const p=Object.assign({},u);p.type==="nrpn-dataincrement"?p.type="nrpn-databuttonincrement":p.type==="nrpn-datadecrement"?p.type="nrpn-databuttondecrement":p.type==="rpn-dataincrement"?p.type="rpn-databuttonincrement":p.type==="rpn-datadecrement"&&(p.type="rpn-databuttondecrement"),this.emit(p.type,p),u.type=t,u.subtype=f,this.emit(u.type,u)}getChannelModeByNumber(t){return ie.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),t=Math.floor(t)),se.getChannelModeByNumber(t)}getCcNameByNumber(t){if(ie.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),t=parseInt(t),!(t>=0&&t<=127)))throw new RangeError("Invalid control change number.");return se.getCcNameByNumber(t)}getNoteState(t){t instanceof gi&&(t=t.identifier);const r=se.guessNoteNumber(t,ie.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[r]}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(t){this.validation&&(t=!!t),this.parameterNumberEventsEnabled=t}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class um{constructor(t){this.rawData=t,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=se.getPropertyByValue(J.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=se.getPropertyByValue(J.SYSTEM_MESSAGES,this.command)),this.statusByte===J.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class ug extends qn{constructor(t){super(),this._midiInput=t,this._octaveOffset=0,this.channels=[];for(let r=1;r<=16;r++)this.channels[r]=new og(this,r);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(t){let r={timestamp:ie.time,target:this,port:this};t.port.connection==="open"?(r.type="opened",this.emit("opened",r)):t.port.connection==="closed"&&t.port.state==="connected"?(r.type="closed",this.emit("closed",r)):t.port.connection==="closed"&&t.port.state==="disconnected"?(r.type="disconnected",r.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",r)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught: ",t.port.connection,t.port.state)}_onMidiMessage(t){const r=new um(t.data),l={port:this,target:this,message:r,timestamp:t.timeStamp,type:"midimessage",data:r.data,rawData:r.data,statusByte:r.data[0],dataBytes:r.dataBytes};this.emit("midimessage",l),r.isSystemMessage?this._parseEvent(l):r.isChannelMessage&&this.channels[r.channel]._processMidiMessageEvent(l),this._forwarders.forEach(o=>o.forward(r))}_parseEvent(t){const r=Object.assign({},t);r.type=r.message.type||"unknownmidimessage",r.type==="songselect"&&(r.song=t.data[1]+1,r.value=t.data[1],r.rawValue=r.value),this.emit(r.type,r)}async open(){try{await this._midiInput.open()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}getChannelModeByNumber(){ie.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(t,r,l={}){if(ie.validation&&typeof l=="function"){let o=r!=null?[].concat(r):void 0;r=l,l={channels:o}}if(J.CHANNEL_EVENTS.includes(t)){l.channels===void 0&&(l.channels=J.MIDI_CHANNEL_NUMBERS);let o=[];return se.sanitizeChannels(l.channels).forEach(u=>{o.push(this.channels[u].addListener(t,r,l))}),o}else return super.addListener(t,r,l)}addOneTimeListener(t,r,l={}){return l.remaining=1,this.addListener(t,r,l)}on(t,r,l,o){return this.addListener(t,r,l,o)}hasListener(t,r,l={}){if(ie.validation&&typeof l=="function"){let o=[].concat(r);r=l,l={channels:o}}return J.CHANNEL_EVENTS.includes(t)?(l.channels===void 0&&(l.channels=J.MIDI_CHANNEL_NUMBERS),se.sanitizeChannels(l.channels).every(o=>this.channels[o].hasListener(t,r))):super.hasListener(t,r)}removeListener(t,r,l={}){if(ie.validation&&typeof l=="function"){let o=[].concat(r);r=l,l={channels:o}}if(l.channels===void 0&&(l.channels=J.MIDI_CHANNEL_NUMBERS),t==null)return se.sanitizeChannels(l.channels).forEach(o=>{this.channels[o]&&this.channels[o].removeListener()}),super.removeListener();J.CHANNEL_EVENTS.includes(t)?se.sanitizeChannels(l.channels).forEach(o=>{this.channels[o].removeListener(t,r,l)}):super.removeListener(t,r,l)}addForwarder(t,r={}){let l;return t instanceof Ep?l=t:l=new Ep(t,r),this._forwarders.push(l),l}removeForwarder(t){this._forwarders=this._forwarders.filter(r=>r!==t)}hasForwarder(t){return this._forwarders.includes(t)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return ie.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class cg extends qn{constructor(){super(),this.defaults={note:{attack:se.from7bitToFloat(64),release:se.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(t={},r=!1){if(se.isNode)try{window.navigator}catch{let p=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,p)}if(this.validation=t.validation!==!1,this.validation&&(typeof t=="function"&&(t={callback:t,sysex:r}),r&&(t.sysex=!0)),this.enabled)return typeof t.callback=="function"&&t.callback(),Promise.resolve();const l={timestamp:this.time,target:this,type:"error",error:void 0},o={timestamp:this.time,target:this,type:"midiaccessgranted"},u={timestamp:this.time,target:this,type:"enabled"};try{typeof t.requestMIDIAccessFunction=="function"?this.interface=await t.requestMIDIAccessFunction({sysex:t.sysex,software:t.software}):this.interface=await navigator.requestMIDIAccess({sysex:t.sysex,software:t.software})}catch(f){return l.error=f,this.emit("error",l),typeof t.callback=="function"&&t.callback(f),Promise.reject(f)}this.emit("midiaccessgranted",o),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(f){return l.error=f,this.emit("error",l),typeof t.callback=="function"&&t.callback(f),Promise.reject(f)}return this.emit("enabled",u),typeof t.callback=="function"&&t.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let t={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",t),this.removeListener()})}getInputById(t,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(r.disconnected){for(let l=0;l<this._disconnectedInputs.length;l++)if(this._disconnectedInputs[l]._midiInput&&this._disconnectedInputs[l].id===t.toString())return this._disconnectedInputs[l]}else for(let l=0;l<this.inputs.length;l++)if(this.inputs[l]._midiInput&&this.inputs[l].id===t.toString())return this.inputs[l]}getInputByName(t,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(r.disconnected){for(let l=0;l<this._disconnectedInputs.length;l++)if(~this._disconnectedInputs[l].name.indexOf(t))return this._disconnectedInputs[l]}else for(let l=0;l<this.inputs.length;l++)if(~this.inputs[l].name.indexOf(t))return this.inputs[l]}getOutputByName(t,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(r.disconnected){for(let l=0;l<this._disconnectedOutputs.length;l++)if(~this._disconnectedOutputs[l].name.indexOf(t))return this._disconnectedOutputs[l]}else for(let l=0;l<this.outputs.length;l++)if(~this.outputs[l].name.indexOf(t))return this.outputs[l]}getOutputById(t,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(r.disconnected){for(let l=0;l<this._disconnectedOutputs.length;l++)if(this._disconnectedOutputs[l]._midiOutput&&this._disconnectedOutputs[l].id===t.toString())return this._disconnectedOutputs[l]}else for(let l=0;l<this.outputs.length;l++)if(this.outputs[l]._midiOutput&&this.outputs[l].id===t.toString())return this.outputs[l]}noteNameToNumber(t){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),se.toNoteNumber(t,this.octaveOffset)}getOctave(t){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),t=parseInt(t)),!isNaN(t)&&t>=0&&t<=127?se.getNoteDetails(se.offsetNumber(t,this.octaveOffset)).octave:!1}sanitizeChannels(t){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),se.sanitizeChannels(t)}toMIDIChannels(t){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),se.sanitizeChannels(t)}guessNoteNumber(t){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),se.guessNoteNumber(t,this.octaveOffset)}getValidNoteArray(t,r={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),se.buildNoteArray(t,r)}convertToTimestamp(t){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),se.toTimestamp(t)}async _destroyInputsAndOutputs(){let t=[];return this.inputs.forEach(r=>t.push(r.destroy())),this.outputs.forEach(r=>t.push(r.destroy())),Promise.all(t).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(t){this._updateInputsAndOutputs();let r={timestamp:t.timeStamp,type:t.port.state,target:this};if(t.port.state==="connected"&&t.port.connection==="open"){t.port.type==="output"?r.port=this.getOutputById(t.port.id):t.port.type==="input"&&(r.port=this.getInputById(t.port.id)),this.emit(t.port.state,r);const l=Object.assign({},r);l.type="portschanged",this.emit(l.type,l)}else if(t.port.state==="disconnected"&&t.port.connection==="pending"){t.port.type==="input"?r.port=this.getInputById(t.port.id,{disconnected:!0}):t.port.type==="output"&&(r.port=this.getOutputById(t.port.id,{disconnected:!0})),this.emit(t.port.state,r);const l=Object.assign({},r);l.type="portschanged",this.emit(l.type,l)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let r=this._inputs.length-1;r>=0;r--){const l=this._inputs[r];Array.from(this.interface.inputs.values()).find(u=>u===l._midiInput)||(this._disconnectedInputs.push(l),this._inputs.splice(r,1))}let t=[];return this.interface.inputs.forEach(r=>{if(!this._inputs.find(l=>l._midiInput===r)){let l=this._disconnectedInputs.find(o=>o._midiInput===r);l||(l=new ug(r)),this._inputs.push(l),t.push(l.open())}}),Promise.all(t)}async _updateOutputs(){if(!this.interface)return;for(let r=this._outputs.length-1;r>=0;r--){const l=this._outputs[r];Array.from(this.interface.outputs.values()).find(u=>u===l._midiOutput)||(this._disconnectedOutputs.push(l),this._outputs.splice(r,1))}let t=[];return this.interface.outputs.forEach(r=>{if(!this._outputs.find(l=>l._midiOutput===r)){let l=this._disconnectedOutputs.find(o=>o._midiOutput===r);l||(l=new Cc(r)),this._outputs.push(l),t.push(l.open())}}),Promise.all(t)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),se.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),se.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.14"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),J.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),J.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),J.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),J.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),J.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const ie=new cg;ie.constructor=null;const fg=async()=>{if(ie.enabled)return ie;try{return await ie.enable({sysex:!0}),console.log("WebMidi is enabled with SysEx support!"),ie}catch(a){throw console.error("WebMidi could not be enabled.",a),a}},dg=()=>ie.enabled?ie.inputs.map(a=>({id:a.id,name:a.name})):[],hg=(a,t)=>{if(ie.enabled){const r=ie.getInputById(a);if(r){const l=f=>{t({type:"noteon",note:f.note.identifier,velocity:f.velocity,controller:null,channel:f.message.channel})},o=f=>{t({type:"noteoff",note:f.note.identifier,velocity:0,controller:null,channel:f.message.channel})},u=f=>{t({type:"controlchange",controller:f.controller.number,value:f.rawValue,note:null,channel:f.message.channel})};return r.addListener("noteon",l),r.addListener("noteoff",o),r.addListener("controlchange",u),()=>{r.removeListener("noteon",l),r.removeListener("noteoff",o),r.removeListener("controlchange",u)}}}return()=>{}},pg=(a,t)=>{if(ie.enabled){const r=ie.getInputById(a);if(r){const l=ie.outputs.find(o=>o.name===r.name);l?(l.sendSysex(71,t),console.log(`Sent SysEx to ${l.name}`)):console.warn("Could not find matching MIDI Output for SysEx")}}},Js=(a,t,r,l)=>{if(ie.enabled){const o=ie.getInputById(a);if(o){const u=ie.outputs.find(f=>f.name===o.name);u&&u.sendNoteOn(t,{attack:r/127,channels:l})}}},cm=D.createContext(null),so=()=>D.useContext(cm),mg=({children:a,onMidiCommand:t})=>{const[r,l]=D.useState(!1),[o,u]=D.useState([]),[f,p]=D.useState(""),[h,m]=D.useState(!1),[v,x]=D.useState(null),[b,E]=D.useState({}),[C,w]=D.useState(null),[B,N]=D.useState(!1),q=D.useRef(!1),_=D.useRef(t);D.useEffect(()=>{_.current=t},[t]),D.useEffect(()=>{(async()=>{try{await fg(),l(!0);const R=dg();if(u(R),window.electronAPI&&window.electronAPI.getSelectedMidiInput){const z=await window.electronAPI.getSelectedMidiInput();z&&R.some(L=>L.id===z)?p(z):R.length>0&&(f||p(R[0].id))}else R.length>0&&(f||p(R[0].id));if(window.electronAPI&&window.electronAPI.getMidiMappings){const z=await window.electronAPI.getMidiMappings();z&&(console.log("Loaded saved MIDI mappings:",z),E(z))}}catch(R){console.error("MIDI Init Failed:",R)}})()},[]);const Y=async()=>{window.electronAPI&&window.electronAPI.saveMidiMappings&&(await window.electronAPI.saveMidiMappings(b),console.log("MIDI mappings saved to default."))},K=async()=>{window.electronAPI&&window.electronAPI.exportMappings&&await window.electronAPI.exportMappings(b,"midi")},ce=async()=>{if(window.electronAPI&&window.electronAPI.importMappings){const X=await window.electronAPI.importMappings("midi");X.success&&X.mappings&&(E(X.mappings),console.log("MIDI mappings imported."))}},xe=X=>{const R=o.find(z=>z.id===X);R&&R.name.toLowerCase().includes("apc40")&&(console.log("Detected APC40, sending initialization SysEx..."),pg(X,[127,41,96,0,4,65,1,1,1]))};D.useEffect(()=>{f&&window.electronAPI&&window.electronAPI.saveSelectedMidiInput&&window.electronAPI.saveSelectedMidiInput(f),f&&r&&xe(f)},[f,r,o]);const Se=D.useCallback((X,R,z=null)=>{if(!f||!r)return;const L=b[X];if(L&&L.type==="note"){let ue=0;typeof R=="number"?ue=R:ue=R?127:0;const T=z!==null?z:L.channel;Js(f,L.address,ue,T)}},[f,r,b]);D.useEffect(()=>{let X=()=>{};return f&&(X=hg(f,R=>{$.current&&w(R),ae(R)})),X},[f,h,v,b]);const $=D.useRef(h);D.useEffect(()=>{$.current=h},[h]);const ae=X=>{if(X.channel===1&&X.note==="D7"){const z=X.type==="noteon";N(z),q.current=z,console.log(`Shift ${z?"Down":"Up"}`);return}if(h&&v){if(X.type==="noteoff")return;const z=X.note||X.controller,L=q.current,ue={type:X.type==="noteon"||X.type==="noteoff"?"note":"cc",channel:X.channel,address:z,requiresShift:L,label:`${L?"":""}CH${X.channel}:${z}`};console.log(`Mapped ${v} to:`,ue),E(T=>({...T,[v]:ue})),x(null);return}Object.entries(b).forEach(([z,L])=>{const ue=(X.type==="noteon"||X.type==="noteoff")&&L.type==="note"&&X.note===L.address&&X.channel===L.channel,T=X.type==="controlchange"&&L.type==="cc"&&X.controller===L.address&&X.channel===L.channel,G=L.type==="cc"||!!L.requiresShift===q.current;if((ue||T)&&G&&_.current){const re=X.type==="controlchange"?X.value??0:X.velocity??0;_.current(z,re,127,X.type)}})},ve={midiInitialized:r,midiInputs:o,selectedMidiInputId:f,setSelectedMidiInputId:p,isMapping:h,startMapping:()=>m(!0),stopMapping:()=>{m(!1),x(null)},learningId:v,setLearningId:x,mappings:b,setMappings:E,removeMapping:X=>{E(R=>{const z={...R};return delete z[X],z})},saveMappings:Y,exportMappings:K,importMappings:ce,initializeApc40:xe,sendFeedback:Se,lastMidiEvent:C,isShiftDown:B};return g.jsx(cm.Provider,{value:ve,children:a})},fm=D.createContext(null),kc=()=>D.useContext(fm),vg=({children:a,onArtnetCommand:t})=>{const[r,l]=D.useState(!1),[o,u]=D.useState(!1),[f,p]=D.useState(null),[h,m]=D.useState({}),[v,x]=D.useState(null),b=D.useRef(t);D.useEffect(()=>{b.current=t},[t]),D.useEffect(()=>{(async()=>{try{if(window.electronAPI&&window.electronAPI.initializeArtnet&&(await window.electronAPI.initializeArtnet()).success&&(l(!0),console.log("Art-Net initialized for mapping")),window.electronAPI&&window.electronAPI.getArtnetMappings){const ce=await window.electronAPI.getArtnetMappings();ce&&(console.log("Loaded saved Art-Net mappings:",ce),m(ce))}}catch(ce){console.error("Art-Net Init Failed:",ce)}})()},[]);const E=async()=>{window.electronAPI&&window.electronAPI.saveArtnetMappings&&(await window.electronAPI.saveArtnetMappings(h),console.log("Art-Net mappings saved."))},C=async()=>{window.electronAPI&&window.electronAPI.exportMappings&&await window.electronAPI.exportMappings(h,"artnet")},w=async()=>{if(window.electronAPI&&window.electronAPI.importMappings){const K=await window.electronAPI.importMappings("artnet");K.success&&K.mappings&&(m(K.mappings),console.log("Art-Net mappings imported."))}};D.useEffect(()=>{if(window.electronAPI&&window.electronAPI.onArtnetDataReceived)return window.electronAPI.onArtnetDataReceived(ce=>{B.current&&x(ce),N(ce)})},[o,f,h]);const B=D.useRef(o);D.useEffect(()=>{B.current=o},[o]);const N=K=>{const{universe:ce,channel:xe,value:Se}=K;if(o&&f){if(Se===0)return;const $={universe:ce,channel:xe,label:`U${ce}:CH${xe+1}`};console.log(`Mapped ${f} to Art-Net:`,$),m(ae=>({...ae,[f]:$})),p(null);return}Object.entries(h).forEach(([$,ae])=>{ae.universe===ce&&ae.channel===xe&&b.current&&b.current($,Se)})},Y={artnetInitialized:r,isMapping:o,startMapping:()=>u(!0),stopMapping:()=>{u(!1),p(null)},learningId:f,setLearningId:p,mappings:h,setMappings:m,saveMappings:E,exportMappings:C,importMappings:w,lastDmxEvent:v};return g.jsx(fm.Provider,{value:Y,children:a})},Tt=({id:a,children:t})=>{const{isMapping:r,setLearningId:l,removeMapping:o}=so(),{isMapping:u,setLearningId:f}=kc()||{},p=r||u,h=x=>{p&&(x.preventDefault(),x.stopPropagation(),r&&l(a),u&&f(a))},m=x=>{p&&r&&(x.preventDefault(),x.stopPropagation(),o(a))},v=lr.Children.only(t);return lr.cloneElement(v,{"data-mappable-id":a,onClickCapture:p?h:v.props.onClickCapture,onContextMenu:p?m:v.props.onContextMenu,className:`${v.props.className||""} ${p?"mappable-target":""}`.trim()})},gg=({masterIntensity:a,onMasterIntensityChange:t})=>g.jsx("div",{className:"master-intensity-slider",children:g.jsx(Tt,{id:"master_intensity",children:g.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:a,className:"slider_hor",id:"masterIntensityRange",onChange:r=>t(parseFloat(r.target.value))})})}),yg=({masterIntensity:a,onMasterIntensityChange:t,onClearAllActive:r,isGlobalBlackout:l,onToggleGlobalBlackout:o})=>g.jsxs("div",{className:"composition-controls",children:[g.jsx("span",{className:"layer-control-button",children:"Comp"}),g.jsx(Tt,{id:"comp_clear",children:g.jsx("span",{className:"layer-control-button",onClick:r,style:{cursor:"pointer"},children:"X"})}),g.jsx(Tt,{id:"comp_blackout",style:{width:"100%",display:"flex"},children:g.jsx("span",{className:"layer-control-button",onClick:o,style:{cursor:"pointer",backgroundColor:l?"red":""},children:"B"})}),g.jsx(gg,{masterIntensity:a,onMasterIntensityChange:t})]}),bg=({name:a,index:t,onTrigger:r,onShowColumnHeaderContextMenu:l})=>{const o=f=>{f.preventDefault(),l&&l(t)},u=f=>{f.button===0&&r&&r()};return g.jsx(Tt,{id:`column_${t}`,children:g.jsx("div",{className:"column-header trigger-button",onClick:u,onContextMenu:o,style:{cursor:"pointer"},children:a})})},dm=({frame:a})=>{const t=D.useRef(null);return D.useEffect(()=>{if(!t.current||!a||!a.points||a.points.length===0)return;const r=t.current,l=r.getContext("2d"),{width:o,height:u}=r;l.fillStyle="black",l.fillRect(0,0,o,u),l.lineWidth=1.5;const f=o/2,p=u/2,h=o/2,m=u/2,v=a.points,x=v instanceof Float32Array||a.isTypedArray,b=x?v.length/8:v.length,E=C=>{if(x){const w=C*8;return{x:v[w],y:v[w+1],r:v[w+3],g:v[w+4],b:v[w+5],blanking:v[w+6]===1}}else return v[C]};for(let C=0;C<b;C++){const w=E(C),B=C>0?E(C-1):null;if(w.blanking)continue;const N=Math.abs(w.x)<=1&&Math.abs(w.y)<=1,q=(N?w.x:w.x/32767)*f+h,_=(N?-w.y:-w.y/32767)*p+m,Y=`rgb(${w.r}, ${w.g}, ${w.b})`;let K,ce;if(B&&!B.blanking){const xe=Math.abs(B.x)<=1&&Math.abs(B.y)<=1;K=(xe?B.x:B.x/32767)*f+h,ce=(xe?-B.y:-B.y/32767)*p+m,l.beginPath(),l.moveTo(K,ce),l.lineTo(q,_),l.strokeStyle=Y,l.stroke()}else l.beginPath(),l.moveTo(q,_),l.lineTo(q+1,_+1),l.strokeStyle=Y,l.stroke()}},[a]),g.jsx("canvas",{ref:t,width:"100",height:"100",style:{backgroundColor:"black"}})},Sg=({layerName:a,index:t,onDropEffect:r,layerEffects:l,activeClipData:o,onDeactivateLayerClips:u,onShowLayerFullContextMenu:f,thumbnailRenderMode:p,intensity:h,onIntensityChange:m,liveFrame:v,isBlackout:x,isSolo:b,onToggleBlackout:E,onToggleSolo:C})=>{const[w,B]=D.useState(l||[]);D.useEffect(()=>{B(l||[])},[l]);const N=Y=>{Y.preventDefault(),console.log(`Right-clicked LayerControls at index: ${t}`),f&&f(t)},q=Y=>{Y.preventDefault(),Y.dataTransfer.dropEffect="copy"},_=Y=>{Y.preventDefault();const K=Y.dataTransfer.getData("text/plain");if(K.startsWith("effect_")){const ce=K.replace("effect_","");r&&r(ce)}};return g.jsxs("div",{className:"layer-controls",onContextMenu:N,onDragOver:q,onDrop:_,children:[g.jsxs("div",{className:"grid-layer",children:[g.jsx(Tt,{id:`layer_${t}_clear`,children:g.jsx("span",{className:"layer-control-button full-height",onClick:()=>u(t),children:"X"})}),g.jsxs("div",{className:"layer-control-group",children:[g.jsx(Tt,{id:`layer_${t}_blackout`,children:g.jsx("span",{className:"layer-control-button half-height",onClick:E,style:{backgroundColor:x?"red":""},children:"B"})}),g.jsx(Tt,{id:`layer_${t}_solo`,children:g.jsx("span",{className:"layer-control-button half-height",onClick:C,style:{backgroundColor:b?"var(--theme-color)":"",color:b?"black":""},children:"S"})})]}),g.jsxs("select",{className:"layer-blend-dropdown",children:[g.jsx("option",{children:"Normal"}),g.jsx("option",{children:"Add"}),g.jsx("option",{children:"Subtract"})]})]}),g.jsx("div",{className:"layer-control-row",children:g.jsx(Tt,{id:`layer_${t}_intensity`,children:g.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:h,className:"slider_ver",id:"layer-intensity-slider",onChange:Y=>m(parseFloat(Y.target.value))})})}),g.jsx("div",{className:"layer-preview-thumbnail",children:o?g.jsx(dm,{frame:p==="still"?o.stillFrame:v}):w.length>0&&g.jsx("div",{className:"applied-effects",children:w.map(Y=>g.jsx("span",{className:"effect-tag",children:Y.substring(0,3).toUpperCase()},Y))})}),g.jsx("span",{className:"layer-name-label",children:a})]})},en=[{id:"rotate",name:"Rotate",type:"transform",description:"Rotates the shape around its center.",defaultParams:{angle:0,speed:0,direction:"CW"},paramControls:[{id:"angle",label:"Angle",type:"range",min:0,max:360,step:1},{id:"speed",label:"Speed",type:"range",min:0,max:10,step:.1},{id:"direction",label:"Direction",type:"select",options:["CW","CCW"]}]},{id:"scale",name:"Scale",type:"transform",description:"Scales the shape.",defaultParams:{scaleX:1,scaleY:1},paramControls:[{id:"scaleX",label:"Scale X",type:"range",min:.01,max:5,step:.01},{id:"scaleY",label:"Scale Y",type:"range",min:.01,max:5,step:.01}]},{id:"translate",name:"Translate",type:"transform",description:"Moves the shape.",defaultParams:{translateX:0,translateY:0},paramControls:[{id:"translateX",label:"Translate X",type:"range",min:-1,max:1,step:.01},{id:"translateY",label:"Translate Y",type:"range",min:-1,max:1,step:.01}]},{id:"color",name:"Color",type:"color",description:"Changes the color of the shape with solid or rainbow modes.",defaultParams:{mode:"solid",r:255,g:255,b:255,cycleSpeed:0,rainbowSpread:1,rainbowOffset:0},paramControls:[{id:"mode",label:"Mode",type:"select",options:["solid","rainbow"]},{id:"r",label:"Red",type:"range",min:0,max:255,step:1,showIf:{mode:"solid"}},{id:"g",label:"Green",type:"range",min:0,max:255,step:1,showIf:{mode:"solid"}},{id:"b",label:"Blue",type:"range",min:0,max:255,step:1,showIf:{mode:"solid"}},{id:"cycleSpeed",label:"Cycle Speed",type:"range",min:0,max:10,step:.1},{id:"rainbowSpread",label:"Rainbow Spread",type:"range",min:.1,max:10,step:.1,showIf:{mode:"rainbow"}},{id:"rainbowOffset",label:"Rainbow Offset",type:"range",min:0,max:360,step:1,showIf:{mode:"rainbow"}},{id:"rainbowPalette",label:"Palette",type:"select",options:["rainbow","fire","ice","cyber"],showIf:{mode:"rainbow"}}]},{id:"wave",name:"Wave",type:"animation",description:"Applies a wave distortion to the shape.",defaultParams:{amplitude:.1,frequency:10,speed:1,direction:"x"},paramControls:[{id:"amplitude",label:"Amplitude",type:"range",min:.01,max:1,step:.01},{id:"frequency",label:"Frequency",type:"range",min:1,max:50,step:1},{id:"speed",label:"Speed",type:"range",min:.1,max:10,step:.1},{id:"direction",label:"Direction",type:"select",options:["x","y"]}]},{id:"warp",name:"Warp",type:"animation",description:"Symmetrical chaotic wave distortion.",defaultParams:{amount:.1,chaos:.5,speed:1},paramControls:[{id:"amount",label:"Amount",type:"range",min:0,max:1,step:.01},{id:"chaos",label:"Chaos",type:"range",min:0,max:1,step:.01},{id:"speed",label:"Speed",type:"range",min:.1,max:10,step:.1}]},{id:"distortion",name:"Distortion",type:"transform",description:"Distorts the point data.",defaultParams:{amount:.1,scale:10,speed:.5},paramControls:[{id:"amount",label:"Amount",type:"range",min:0,max:1,step:.01},{id:"scale",label:"Scale",type:"range",min:1,max:50,step:1},{id:"speed",label:"Speed",type:"range",min:0,max:5,step:.1}]},{id:"move",name:"Move (Bounce)",type:"transform",description:"Moves points and bounces them off the borders.",defaultParams:{speedX:.1,speedY:.1},paramControls:[{id:"speedX",label:"Speed X",type:"range",min:0,max:2,step:.01},{id:"speedY",label:"Speed Y",type:"range",min:0,max:2,step:.01}]},{id:"delay",name:"Delay / Chase",type:"effect",description:"Creates a trailing chaser effect.",defaultParams:{delayAmount:5,decay:.8,mode:"linear",target:"intensity",direction:"out"},paramControls:[{id:"delayAmount",label:"Delay",type:"range",min:1,max:60,step:1},{id:"decay",label:"Decay",type:"range",min:0,max:1,step:.01},{id:"mode",label:"Mode",type:"select",options:["linear","symmetric"]},{id:"target",label:"Target",type:"select",options:["intensity","color","effect"]},{id:"direction",label:"Direction",type:"select",options:["out","in"]}]},{id:"blanking",name:"Blanking",type:"animation",description:"Controls the blanking of the laser output.",defaultParams:{blankingInterval:0},paramControls:[{id:"blankingInterval",label:"Blanking Interval",type:"range",min:0,max:10,step:1}]},{id:"strobe",name:"Strobe",type:"animation",description:"Applies a strobe effect to the laser output.",defaultParams:{strobeSpeed:100,strobeAmount:.5},paramControls:[{id:"strobeSpeed",label:"Strobe Speed (ms)",type:"range",min:10,max:1e3,step:10},{id:"strobeAmount",label:"Strobe Amount (0-1)",type:"range",min:0,max:1,step:.01}]},{id:"mirror",name:"Mirror",type:"transform",description:"Mirrors the shape from the center.",defaultParams:{mode:"none"},paramControls:[{id:"mode",label:"Mirror Mode",type:"select",options:["none","x+","x-","y+","y-"]}]}],Fn=(a,t)=>({...t,...a});function hm(a,t,r={}){const{progress:l=0,time:o=performance.now(),effectStates:u}=r;if(!t||t.length===0)return a;let f;if(Array.isArray(a.points)){f=new Float32Array(a.points.length*8);for(let m=0;m<a.points.length;m++){const v=a.points[m],x=m*8;f[x]=v.x,f[x+1]=v.y,f[x+2]=v.z||0,f[x+3]=v.r,f[x+4]=v.g,f[x+5]=v.b,f[x+6]=v.blanking?1:0,f[x+7]=v.lastPoint?1:0}}else f=new Float32Array(a.points);let p=f;const h=()=>p.length/8;for(const m of t)if(en.find(x=>x.id===m.id))switch(m.id){case"rotate":xg(p,h(),m.params,l,o);break;case"scale":Eg(p,h(),m.params);break;case"translate":Tg(p,h(),m.params);break;case"color":Ag(p,h(),m.params,o);break;case"wave":Ng(p,h(),m.params,o);break;case"blanking":Mg(p,h(),m.params);break;case"strobe":wg(p,h(),m.params,o);break;case"mirror":Rg(p,h(),m.params);break;case"warp":Og(p,h(),m.params,o);break;case"distortion":Dg(p,h(),m.params,o);break;case"move":_g(p,h(),m.params,o);break;case"delay":u&&m.instanceId&&(p=Ug(p,h(),m.params,u,m.instanceId));break}return{...a,points:p,isTypedArray:!0}}function xg(a,t,r,l,o){const{angle:u,speed:f,direction:p}=Fn(r,en.find(E=>E.id==="rotate").defaultParams),h=p==="CCW"?-1:1,m=o*.001*f*h,v=u*Math.PI/180+m,x=Math.sin(v),b=Math.cos(v);for(let E=0;E<t;E++){const C=E*8,w=a[C],B=a[C+1];a[C]=w*b-B*x,a[C+1]=w*x+B*b}}function Eg(a,t,r){const{scaleX:l,scaleY:o}=Fn(r,en.find(u=>u.id==="scale").defaultParams);for(let u=0;u<t;u++){const f=u*8;a[f]*=l,a[f+1]*=o}}function Tg(a,t,r){const{translateX:l,translateY:o}=Fn(r,en.find(u=>u.id==="translate").defaultParams);for(let u=0;u<t;u++){const f=u*8;a[f]+=l,a[f+1]+=o}}function Ag(a,t,r,l){const{mode:o,r:u,g:f,b:p,cycleSpeed:h,rainbowSpread:m,rainbowOffset:v,rainbowPalette:x}=Fn(r,en.find(E=>E.id==="color").defaultParams),b=l*.001*h;if(o==="rainbow"){const E=x||"rainbow";for(let C=0;C<t;C++){const w=C*8,B=(C/t*m+b*.5+v/360)%1;let N,q,_;E==="rainbow"?[N,q,_]=Tp(B,1,.5):[N,q,_]=Cg(E,B),a[w+3]=N,a[w+4]=q,a[w+5]=_}}else if(h>0){const E=b*50%360,[C,w,B]=Tp(E/360,1,.5);for(let N=0;N<t;N++){const q=N*8;a[q+3]=C,a[q+4]=w,a[q+5]=B}}else for(let E=0;E<t;E++){const C=E*8;a[C+3]=u,a[C+4]=f,a[C+5]=p}}function Cg(a,t){const r={fire:[{r:255,g:0,b:0},{r:255,g:128,b:0},{r:255,g:255,b:0},{r:255,g:0,b:0}],ice:[{r:0,g:0,b:255},{r:0,g:255,b:255},{r:255,g:255,b:255},{r:0,g:0,b:255}],cyber:[{r:255,g:0,b:255},{r:0,g:255,b:255},{r:0,g:0,b:255},{r:255,g:0,b:255}]},l=r[a]||r.fire,o=t*(l.length-1),u=Math.floor(o),f=o-u,p=l[u],h=l[u+1]||l[u];return[Math.round(p.r+(h.r-p.r)*f),Math.round(p.g+(h.g-p.g)*f),Math.round(p.b+(h.b-p.b)*f)]}function Tp(a,t,r){let l,o,u;{const f=(m,v,x)=>(x<0&&(x+=1),x>1&&(x-=1),x<.16666666666666666?m+(v-m)*6*x:x<.5?v:x<.6666666666666666?m+(v-m)*(.6666666666666666-x)*6:m),p=r+t-r*t,h=2*r-p;l=f(h,p,a+1/3),o=f(h,p,a),u=f(h,p,a-1/3)}return[Math.round(l*255),Math.round(o*255),Math.round(u*255)]}function Ng(a,t,r,l){const{amplitude:o,frequency:u,speed:f,direction:p}=Fn(r,en.find(m=>m.id==="wave").defaultParams),h=l*.001*f;for(let m=0;m<t;m++){const v=m*8;p==="x"?a[v+1]+=o*Math.sin(a[v]*u+h):p==="y"&&(a[v]+=o*Math.sin(a[v+1]*u+h))}}function Mg(a,t,r){const{blankingInterval:l}=Fn(r,en.find(o=>o.id==="blanking").defaultParams);if(!(l<=0))for(let o=0;o<t;o++)o%(l+1)===l&&(a[o*8+6]=1)}function wg(a,t,r,l){const{strobeSpeed:o,strobeAmount:u}=Fn(r,en.find(p=>p.id==="strobe").defaultParams);if(l%o/o<u)for(let p=0;p<t;p++)a[p*8+6]=1}function Rg(a,t,r){const{mode:l}=Fn(r,en.find(o=>o.id==="mirror").defaultParams);if(l!=="none")for(let o=0;o<t;o++){const u=o*8,f=a[u],p=a[u+1];l==="x+"?a[u]=Math.abs(f):l==="x-"?a[u]=-Math.abs(f):l==="y+"?a[u+1]=Math.abs(p):l==="y-"&&(a[u+1]=-Math.abs(p))}}function Og(a,t,r,l){const{amount:o,chaos:u,speed:f}=Fn(r,en.find(h=>h.id==="warp").defaultParams),p=l*.001*f;for(let h=0;h<t;h++){const m=h*8,v=a[m],x=a[m+1],b=Math.abs(x);a[m]+=Math.sin(b*10*(1+u)+p)*o*Math.cos(p*u),a[m+1]+=Math.cos(Math.abs(v)*10*(1+u)+p)*o*Math.sin(p*u)}}function Dg(a,t,r,l){const{amount:o,scale:u,speed:f}=Fn(r,en.find(h=>h.id==="distortion").defaultParams),p=l*.001*f;for(let h=0;h<t;h++){const m=h*8,v=Math.sin(a[m]*u+p)*Math.cos(a[m+1]*u-p),x=Math.cos(a[m]*u-p)*Math.sin(a[m+1]*u+p);a[m]+=v*o,a[m+1]+=x*o}}function _g(a,t,r,l){const{speedX:o,speedY:u}=Fn(r,en.find(v=>v.id==="move").defaultParams),f=l*.001,p=f*o,h=f*u,m=4;for(let v=0;v<t;v++){const x=v*8;let b=a[x]+p,E=a[x+1]+h,C=(b+1)%m;C<0&&(C+=m),C>2&&(C=4-C),b=C-1;let w=(E+1)%m;w<0&&(w+=m),w>2&&(w=4-w),E=w-1,a[x]=b,a[x+1]=E}}function Ug(a,t,r,l,o){const{delayAmount:u,decay:f}=Fn(r,en.find(C=>C.id==="delay").defaultParams);l.has(o)||l.set(o,[]);const p=l.get(o),h=new Float32Array(a);p.unshift(h);const m=u*4+1;p.length>m&&(p.length=m);const v=[];for(let C=1;C<=4;C++){const w=C*u;if(w<p.length){const B=p[w];B.length===a.length&&v.push({points:B,factor:Math.pow(f,C)})}}if(v.length===0)return a;const x=t+v.reduce((C,w)=>C+w.points.length/8,0),b=new Float32Array(x*8);b.set(a,0);let E=a.length;for(const C of v){const w=C.points,B=w.length/8,N=C.factor;for(let q=0;q<B;q++){const _=q*8,Y=E+q*8;b[Y]=w[_],b[Y+1]=w[_+1],b[Y+2]=w[_+2],b[Y+3]=w[_+3]*N,b[Y+4]=w[_+4]*N,b[Y+5]=w[_+5]*N,b[Y+6]=w[_+6],b[Y+7]=w[_+7]}E+=w.length}return b}const Lg=({clipName:a,layerIndex:t,colIndex:r,onDropGenerator:l,onDropEffect:o,clipContent:u,thumbnailFrameIndex:f,onUnsupportedFile:p,onActivateClick:h,onLabelClick:m,isSelected:v,isActive:x,ildaParserWorker:b,onDropDac:E,thumbnailRenderMode:C,liveFrame:w,stillFrame:B})=>{const[N,q]=D.useState(!1),_=a,Y=C==="active"?w:B,K=D.useMemo(()=>Y&&u&&u.effects&&u.effects.length>0?hm(Y,u.effects):Y,[Y,u]),ce=he=>{he.preventDefault(),he.stopPropagation(),q(!0),he.dataTransfer.dropEffect="copy"},xe=he=>{he.preventDefault(),he.stopPropagation(),he.currentTarget.contains(he.relatedTarget)||q(!1)},Se=async he=>{const ve=he.name;if(!b){p("ILDA parser not available.");return}if(ve.toLowerCase().endsWith(".ild"))try{const X=await he.arrayBuffer();console.log(`[Clip.jsx] ArrayBuffer byteLength before posting to worker (handleFileDrop): ${X.byteLength}`),b.postMessage({type:"parse-ilda",arrayBuffer:X,fileName:ve,filePath:he.path,layerIndex:t,colIndex:r},[X])}catch(X){console.error("[Clip.jsx] handleFileDrop - Error reading file:",X),p(`Error reading file: ${X.message}`)}else p("Please drop a valid .ild file")},$=async(he,ve)=>{if(!ve.toLowerCase().endsWith(".ild")){console.log("Unsupported file type:",ve),p("Please drop a valid .ild file");return}if(!b){p("ILDA parser not available.");return}try{if(window.electronAPI&&window.electronAPI.readFileAsBinary){const R=(await window.electronAPI.readFileAsBinary(he)).slice().buffer;console.log(`[Clip.jsx] ArrayBuffer byteLength before posting to worker (handleFilePathDrop): ${R.byteLength}`),b.postMessage({type:"parse-ilda",arrayBuffer:R,fileName:ve,filePath:he,layerIndex:t,colIndex:r},[R])}else p("Binary file access not available")}catch(X){console.error("Error processing file path:",X),console.error("Error stack:",X.stack),p(`Error processing file: ${X.message}`)}},ae=he=>{he.preventDefault(),he.stopPropagation(),q(!1);const ve=he.dataTransfer.getData("application/json");if(ve)try{const R=JSON.parse(ve);if(R.filePath&&R.fileName){$(R.filePath,R.fileName);return}if(R.type==="transform"||R.type==="animation"||R.type==="color"||R.type==="effect"){if(o){o(R),m();return}}else if(R.name){if(l){l(t,r,R);return}}else if(R.ip&&typeof R.channel=="number"&&E){E(t,r,R);return}}catch(R){console.error("Error parsing dropped data:",R)}const X=he.dataTransfer.files;if(X&&X.length>0){Se(X[0]);return}console.log("No recognized data format found in drop"),p("No valid ILD file, effect, or generator dropped.")},ne=he=>{he.preventDefault(),he.stopPropagation()},oe=he=>{he.preventDefault(),window.electronAPI&&window.electronAPI.showClipContextMenu&&window.electronAPI.showClipContextMenu(t,r,u?.triggerStyle||"normal")};return g.jsxs("div",{className:`clip ${N?"dragging":""} ${x?"active-clip":""} `,onDragEnter:ne,onDragOver:ce,onDragLeave:xe,onDrop:ae,onContextMenu:oe,children:[g.jsx(Tt,{id:`clip_${t}_${r}`,children:g.jsx("div",{className:"clip-thumbnail",onMouseDown:()=>h(!0),onMouseUp:()=>h(!1),onMouseLeave:()=>h(!1),children:u&&u.parsing?g.jsx("div",{className:"clip-loading-spinner"}):K?g.jsx(dm,{frame:K}):g.jsx("p",{})})}),g.jsx(Tt,{id:`clip_${t}_${r}_preview`,children:g.jsx("span",{className:`clip-label ${v?"selected-clip":""}`,onClick:m,children:_})})]})},kg=lr.memo(Lg),Ig=()=>{const[a,t]=D.useState(""),[r,l]=D.useState([]),o=async()=>{if(window.electronAPI){const u=await window.electronAPI.openFileExplorer();if(u){t(u);const f=await window.electronAPI.readIldFiles(u);l(f)}}};return g.jsxs("div",{className:"file-browser",children:[g.jsx("h3",{children:"ILD File Browser"}),g.jsx("button",{onClick:o,children:"Open Folder"}),a&&g.jsxs("p",{className:"fileBrowser",children:["Selected Directory: ",a.split("\\").filter(Boolean).pop()]}),g.jsx("div",{className:"ild-file-list",children:r.length>0?r.map((u,f)=>{const p=u.split("\\").pop();return g.jsx("div",{className:"ild-file-item",draggable:!0,onDragStart:h=>h.dataTransfer.setData("application/json",JSON.stringify({filePath:u,fileName:p})),children:p},f)}):g.jsx("p",{children:"No ILD files found in selected directory."})})]})},pm=[{id:"circle",name:"Circle",description:"Generates a simple circle.",defaultParams:{radius:.5,numPoints:100,x:0,y:0,r:255,g:255,b:255},paramControls:[{id:"radius",label:"Radius",type:"range",min:.01,max:1,step:.01},{id:"numPoints",label:"Number of Points",type:"range",min:3,max:360,step:1},{id:"x",label:"X Position",type:"range",min:-1,max:1,step:.01},{id:"y",label:"Y Position",type:"range",min:-1,max:1,step:.01},{id:"r",label:"Red",type:"range",min:0,max:255,step:1},{id:"g",label:"Green",type:"range",min:0,max:255,step:1},{id:"b",label:"Blue",type:"range",min:0,max:255,step:1}]},{id:"square",name:"Square",description:"Generates a simple square.",defaultParams:{width:1,height:1,pointDensity:25,x:0,y:0,r:255,g:255,b:255},paramControls:[{id:"width",label:"Width",type:"range",min:.01,max:2,step:.01},{id:"height",label:"Height",type:"range",min:.01,max:2,step:.01},{id:"pointDensity",label:"Point Density",type:"range",min:1,max:100,step:1},{id:"x",label:"X Position",type:"range",min:-1,max:1,step:.01},{id:"y",label:"Y Position",type:"range",min:-1,max:1,step:.01},{id:"r",label:"Red",type:"range",min:0,max:255,step:1},{id:"g",label:"Green",type:"range",min:0,max:255,step:1},{id:"b",label:"Blue",type:"range",min:0,max:255,step:1}]},{id:"line",name:"Line",description:"Generates a straight line.",defaultParams:{x1:-.5,y1:0,x2:.5,y2:0,pointDensity:50,r:255,g:255,b:255},paramControls:[{id:"x1",label:"X1",type:"range",min:-1,max:1,step:.01},{id:"y1",label:"Y1",type:"range",min:-1,max:1,step:.01},{id:"x2",label:"X2",type:"range",min:-1,max:1,step:.01},{id:"y2",label:"Y2",type:"range",min:-1,max:1,step:.01},{id:"pointDensity",label:"Point Density",type:"range",min:2,max:200,step:1},{id:"r",label:"Red",type:"range",min:0,max:255,step:1},{id:"g",label:"Green",type:"range",min:0,max:255,step:1},{id:"b",label:"Blue",type:"range",min:0,max:255,step:1}]},{id:"text",name:"Text",description:"Generates text.",defaultParams:{text:"TrueLazer",x:0,y:0,fontSize:72,numPoints:200,fontUrl:"src/fonts/arial.ttf",r:255,g:255,b:255},paramControls:[{id:"text",label:"Text Content",type:"text"},{id:"x",label:"X Position",type:"range",min:-1,max:1,step:.01},{id:"y",label:"Y Position",type:"range",min:-1,max:1,step:.01},{id:"fontSize",label:"Font Size",type:"range",min:10,max:200,step:1},{id:"numPoints",label:"Target Points",type:"range",min:10,max:1e3,step:1},{id:"fontUrl",label:"Font URL",type:"text"},{id:"r",label:"Red",type:"range",min:0,max:255,step:1},{id:"g",label:"Green",type:"range",min:0,max:255,step:1},{id:"b",label:"Blue",type:"range",min:0,max:255,step:1}]},{id:"star",name:"Star",description:"Generates a star shape.",defaultParams:{outerRadius:.5,innerRadius:.2,numSpikes:5,pointDensity:10,x:0,y:0,r:255,g:255,b:255},paramControls:[{id:"outerRadius",label:"Outer Radius",type:"range",min:.01,max:1,step:.01},{id:"innerRadius",label:"Inner Radius",type:"range",min:.01,max:1,step:.01},{id:"numSpikes",label:"Number of Spikes",type:"range",min:3,max:20,step:1},{id:"pointDensity",label:"Point Density",type:"range",min:1,max:50,step:1},{id:"x",label:"X Position",type:"range",min:-1,max:1,step:.01},{id:"y",label:"Y Position",type:"range",min:-1,max:1,step:.01},{id:"r",label:"Red",type:"range",min:0,max:255,step:1},{id:"g",label:"Green",type:"range",min:0,max:255,step:1},{id:"b",label:"Blue",type:"range",min:0,max:255,step:1}]}],Bg=()=>{const a=(t,r)=>{t.dataTransfer.setData("application/json",JSON.stringify(r))};return g.jsxs("div",{className:"generator-panel",children:[g.jsx("h3",{children:"Generators"}),pm.map(t=>g.jsx("div",{className:"generator-item",draggable:!0,onDragStart:r=>a(r,t),children:t.name},t.id))]})},Fg=()=>{const a=(t,r)=>{t.dataTransfer.setData("application/json",JSON.stringify(r))};return g.jsxs("div",{className:"effect-panel",children:[g.jsx("h3",{children:"Effects"}),en.map(t=>g.jsx("div",{draggable:!0,onDragStart:r=>a(r,t),className:"effect-item",children:t.name},t.id))]})},mm=({value:a,onChange:t,label:r,onDrop:l,size:o=40})=>{const u=D.useRef(null),f=v=>{l&&(v.preventDefault(),v.dataTransfer.dropEffect="link")},p=v=>{if(l){v.preventDefault();try{const x=JSON.parse(v.dataTransfer.getData("application/x-truelazer-param"));x&&x.type==="range"&&l(x)}catch(x){console.error("Invalid drop data",x)}}},h=-135+a*270,m=v=>{v.preventDefault();const x=v.clientY,b=a,E=w=>{const N=(x-w.clientY)/200;let q=Math.max(0,Math.min(1,b+N));t(q)},C=()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",C)};window.addEventListener("mousemove",E),window.addEventListener("mouseup",C)};return D.useEffect(()=>{const v=u.current;if(!v)return;const x=b=>{b.preventDefault(),b.stopPropagation();const E=b.deltaY*-.001;let C=Math.max(0,Math.min(1,a+E));t(C)};return v.addEventListener("wheel",x,{passive:!1}),()=>{v.removeEventListener("wheel",x)}},[a,t]),g.jsxs("div",{className:"quick-assign-knob",ref:u,style:{width:o,cursor:"ns-resize",userSelect:"none"},onDragOver:f,onDrop:p,onMouseDown:m,children:[g.jsx("div",{className:"knob-circle",style:{width:o*.66,height:o*.66},children:g.jsx("div",{className:"knob-indicator",style:{transform:`rotate(${h}deg)`}})}),r&&g.jsx("div",{className:"knob-label",title:r,children:r})]})},Gg=({dacs:a=[],onDacSelected:t,onDacsDiscovered:r,dacSettings:l={},onUpdateDacSettings:o})=>{const[u,f]=D.useState(!1),[p,h]=D.useState(null),[m,v]=D.useState([]),[x,b]=D.useState(null),E=lr.useRef(!1);D.useEffect(()=>{window.electronAPI&&window.electronAPI.getNetworkInterfaces().then(N=>{v(N),N.length>0&&b(N[0])})},[]),D.useEffect(()=>{u&&!E.current&&(E.current=!0,console.log("Starting DAC scan on:",x?.address),window.electronAPI?window.electronAPI.discoverDacs(2e3,x?.address).then(async N=>{console.log("DACs discovered:",N);const q=await Promise.all(N.map(async _=>{try{const K=(await window.electronAPI.getDacServices(_.ip,x?.address)).filter(ce=>ce.serviceID!==0);return{..._,channels:K}}catch(Y){return console.error(`Error fetching services for DAC ${_.ip}:`,Y),{..._,channels:[]}}}));r&&r(q)}).catch(N=>{console.error("Error discovering DACs:",N)}).finally(()=>{f(!1),E.current=!1}):(console.warn("electronAPI is not available. Cannot discover DACs."),f(!1),E.current=!1))},[u,x,r]);const C=(N,q)=>{const _={...N,channel:q};h(_),t&&t(_)},w=(N,q,_)=>{const Y={...q,channel:_};N.dataTransfer.setData("application/json",JSON.stringify(Y))},B=N=>{const q=N.target.value,_=m.find(Y=>Y.address===q);b(_)};return g.jsxs("div",{className:"dac-panel",children:[g.jsx("h3",{children:"DACs"}),g.jsxs("div",{className:"network-interface-selector",children:[g.jsx("select",{onChange:B,value:x?.address||"",children:m.map(N=>g.jsxs("option",{value:N.address,children:[N.name," (",N.address,")"]},N.address))}),g.jsxs("label",{children:[g.jsx("input",{type:"checkbox",checked:u,onChange:N=>f(N.target.checked),disabled:u}),"Scan"]})]}),g.jsx("div",{className:"dac-list",children:a.map(N=>g.jsxs("div",{className:"dac-group",children:[g.jsxs("div",{className:"dac-ip",children:[N.hostName||N.ip," (",N.ip,")"]}),g.jsx("div",{className:"dac-channels",children:N.channels&&N.channels.length>0?N.channels.map(q=>g.jsxs("div",{className:`dac-channel-item ${p&&p.unitID===N.unitID&&p.channel===q.serviceID?"selected":""}`,onClick:()=>C(N,q.serviceID),draggable:!0,onDragStart:_=>w(_,N,q.serviceID),children:["Channel ",q.serviceID," (",q.name,")"]},`${N.unitID}-${q.serviceID}`)):g.jsx("div",{className:"dac-channel-item no-channels",children:"No channels found"})})]},N.unitID||N.ip))}),a.length>0&&g.jsxs("div",{className:"dac-dimmers-section",children:[g.jsx("h4",{children:"Channel Dimmers"}),g.jsx("div",{className:"dac-dimmers-grid",children:a.flatMap(N=>(N.channels||[]).map(q=>({dac:N,ch:q}))).map(({dac:N,ch:q})=>{const _=`${N.ip}:${q.serviceID}`,Y=l[_]||{},K=Y.dimmer!==void 0?Y.dimmer:1;return g.jsx(Tt,{id:`dimmer_${_.replace(/\./g,"_")}`,children:g.jsx(mm,{label:`${N.hostName||N.ip} Ch${q.serviceID}`,value:K,onChange:ce=>{o&&o(_,{...Y,dimmer:ce})}})},`dimmer_${_}`)})})]})]})},jg=({min:a,max:t,step:r,value:l,onChange:o})=>{const u=D.useRef(null),[f,p]=D.useState(null),h=l?l[0]:a,m=l?l[1]:t,v=b=>(b-a)/(t-a)*100,x=(b,E)=>{b.preventDefault(),p(E);const C=B=>{if(!u.current)return;const N=u.current.getBoundingClientRect(),q=B.clientX-N.left;let _=Math.max(0,Math.min(100,q/N.width*100)),Y=a+_/100*(t-a);r&&(Y=Math.round(Y/r)*r),E==="min"?(Y=Math.min(Y,m),o([Y,m])):(Y=Math.max(Y,h),o([h,Y]))},w=()=>{p(null),window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",w)};window.addEventListener("mousemove",C),window.addEventListener("mouseup",w)};return g.jsxs("div",{className:"range-slider-container",children:[g.jsxs("div",{className:"range-slider-track",ref:u,children:[g.jsx("div",{className:"range-slider-fill",style:{left:`${v(h)}%`,width:`${v(m)-v(h)}%`}}),g.jsx("div",{className:"range-slider-handle min-handle",style:{left:`${v(h)}%`},onMouseDown:b=>x(b,"min")}),g.jsx("div",{className:"range-slider-handle max-handle",style:{left:`${v(m)}%`},onMouseDown:b=>x(b,"max")})]}),g.jsxs("div",{className:"range-slider-values",children:[g.jsx("span",{children:h.toFixed(2)}),g.jsx("span",{children:m.toFixed(2)})]})]})},zg=({animSettings:a,onChange:t,controlDef:r})=>{const{range:l=[r.min,r.max],direction:o="forward",style:u="loop",syncMode:f=null}=a||{},p=(h,m)=>t({...a,[h]:m});return g.jsxs("div",{className:"animation-controls-grid",children:[g.jsx("div",{className:"anim-row range-row",style:{width:"100%",marginBottom:"5px"},children:g.jsx(jg,{min:r.min,max:r.max,step:r.step,value:l,onChange:h=>p("range",h)})}),g.jsxs("div",{className:"anim-row controls-row",children:[g.jsxs("div",{className:"btn-group",children:[g.jsx("button",{className:o==="backward"?"active":"",onClick:()=>p("direction","backward"),children:"<|"}),g.jsx("button",{className:o==="pause"?"active":"",onClick:()=>p("direction","pause"),children:"||"}),g.jsx("button",{className:o==="forward"?"active":"",onClick:()=>p("direction","forward"),children:"|>"})]}),g.jsxs("div",{className:"btn-group",children:[g.jsx("button",{className:u==="once"?"active":"",onClick:()=>p("style","once"),children:"->|"}),g.jsx("button",{className:u==="bounce"?"active":"",onClick:()=>p("style","bounce"),children:"|<->|"}),g.jsx("button",{className:u==="loop"?"active":"",onClick:()=>p("style","loop"),children:"Loop"})]}),g.jsxs("div",{className:"btn-group",children:[g.jsx("button",{className:f==="fps"?"active":"",onClick:()=>p("syncMode",f==="fps"?null:"fps"),children:"F"}),g.jsx("button",{className:f==="timeline"?"active":"",onClick:()=>p("syncMode",f==="timeline"?null:"timeline"),children:"T"}),g.jsx("button",{className:f==="bpm"?"active":"",onClick:()=>p("syncMode",f==="bpm"?null:"bpm"),children:"B"})]})]})]})},Hg=({control:a,value:t,onChange:r,animSettings:l,onAnimChange:o,effectId:u})=>{const[f,p]=D.useState(!1),h=m=>{m.dataTransfer.setData("application/x-truelazer-param",JSON.stringify({type:a.type,paramId:a.id,effectId:u}))};return g.jsxs("div",{className:"param-editor",children:[g.jsxs("div",{className:"param-header",children:[g.jsx("button",{className:`anim-toggle-btn ${f?"active":""}`,onClick:()=>p(!f),title:"Animate",children:"A"}),g.jsx("label",{className:"param-label",draggable:!0,onDragStart:h,children:a.label})]}),g.jsxs("div",{className:"control-row",children:[a.type==="range"&&g.jsxs(g.Fragment,{children:[g.jsx(Tt,{id:`${u}_${a.id}`,children:g.jsx("input",{type:"range",min:a.min,max:a.max,step:a.step,value:t,onChange:m=>r(parseFloat(m.target.value)),className:"param-slider"})}),g.jsx("input",{type:"number",value:t,onChange:m=>r(parseFloat(m.target.value)||0),className:"param-number-input",step:a.step})]}),a.type==="text"&&g.jsx("input",{type:"text",value:t,onChange:m=>r(m.target.value),className:"param-text-input"}),a.type==="checkbox"&&g.jsx(Tt,{id:`${u}_${a.id}`,children:g.jsx("input",{type:"checkbox",checked:t,onChange:m=>r(m.target.checked),className:"param-checkbox"})}),a.type==="select"&&g.jsx("select",{value:t,onChange:m=>r(m.target.value),className:"param-select",children:a.options.map(m=>g.jsx("option",{value:m,children:m},m))})]}),f&&g.jsx(zg,{animSettings:l,onChange:o,controlDef:a})]})},Pg=({effect:a,onParamChange:t,onRemove:r,syncSettings:l={},onSetParamSync:o})=>{if(!a)return null;const u=en.find(f=>f.id===a.id);return u?g.jsxs("div",{className:"effect-editor settings-card",children:[g.jsxs("div",{className:"effect-header settings-card-header",children:[g.jsx("h4",{children:a.name}),g.jsx("button",{className:"remove-effect-btn",onClick:r,children:""})]}),g.jsx("div",{className:"settings-card-content",children:u.paramControls.map(f=>{if(f.showIf&&!Object.entries(f.showIf).every(([v,x])=>a.params[v]===x))return null;const p=`${a.id}.${f.id}`,h=typeof l[p]=="object"?l[p]:{syncMode:l[p]};return g.jsx(Hg,{control:f,value:a.params[f.id],onChange:m=>t(f.id,m),animSettings:h,onAnimChange:m=>o(p,m),effectId:a.id},f.id)})})]}):null},Yg=({paramId:a,currentSyncMode:t,onSetSyncMode:r})=>g.jsxs("div",{className:"sync-controls",children:[g.jsx("button",{className:`sync-btn ${t==="fps"?"active":""}`,onClick:()=>r(a,"fps"),title:"Sync to Global FPS",children:"F"}),g.jsx("button",{className:`sync-btn ${t==="timeline"?"active":""}`,onClick:()=>r(a,"timeline"),title:"Sync to Timeline",children:"T"}),g.jsx("button",{className:`sync-btn ${t==="bpm"?"active":""}`,onClick:()=>r(a,"bpm"),title:"Sync to BPM",children:"B"})]}),qg=({selectedGeneratorId:a,selectedGeneratorParams:t,onParameterChange:r,syncSettings:l={},onSetParamSync:o})=>{if(!a)return g.jsx("div",{className:"generator-settings-panel",children:"No generator selected."});const u=pm.find(h=>h.id===a);if(!u)return g.jsxs("div",{className:"generator-settings-panel",children:["Generator definition not found for ID: ",a]});const f=(h,m)=>{const v=u.paramControls.find(b=>b.id===h);let x=m;v&&(v.type==="range"||v.type==="number")?x=parseFloat(m):v&&v.type==="checkbox"&&(x=m),r(h,x)},p=async h=>{const m=h.target.value;if(m==="browse")if(window.electronAPI&&window.electronAPI.showFontFileDialog){const v=await window.electronAPI.showFontFileDialog();v&&r("fontUrl",v)}else console.error("Font file dialog API not available.");else r("fontUrl",m)};return g.jsxs("div",{className:"generator-settings-panel settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsxs("h4",{children:[u.name," Settings"]})}),g.jsx("div",{className:"settings-card-content",children:u.paramControls.map(h=>g.jsxs("div",{className:"param-editor",children:[g.jsxs("div",{className:"param-label-row",style:{display:"flex",alignItems:"center"},children:[g.jsx("label",{htmlFor:h.id,children:h.label}),g.jsx(Yg,{paramId:`${a}.${h.id}`,currentSyncMode:l[`${a}.${h.id}`],onSetSyncMode:o})]}),g.jsx("div",{className:"control-row",children:h.id==="fontUrl"?g.jsxs("div",{className:"font-selector-container",children:[g.jsxs("select",{className:"param-select",onChange:p,value:t[h.id]||"src/fonts/arial.ttf",children:[g.jsx("option",{value:"src/fonts/arial.ttf",children:"Arial"}),g.jsx("option",{value:"src/fonts/impact.ttf",children:"Impact"}),g.jsx("option",{value:"src/fonts/Geometr415 Blk BT Black.ttf",children:"Geometric 415"}),g.jsx("option",{value:"src/fonts/STENCIL.TTF",children:"Stencil"}),g.jsx("option",{value:"browse",children:"Browse..."})]}),g.jsx("span",{className:"font-path-tiny",children:t[h.id]?.split(/[\\/]/).pop()})]}):h.type==="range"?g.jsxs(g.Fragment,{children:[g.jsx("input",{type:"range",id:h.id,min:h.min,max:h.max,step:h.step,value:t[h.id]||"",onChange:m=>f(h.id,m.target.value),className:"param-slider"}),g.jsx("input",{type:"number",value:t[h.id]||0,onChange:m=>f(h.id,m.target.value),className:"param-number-input",step:h.step})]}):h.type==="number"?g.jsx("input",{type:"number",id:h.id,min:h.min,max:h.max,step:h.step,value:t[h.id]||"",onChange:m=>f(h.id,m.target.value),className:"param-number-input"}):h.type==="text"?g.jsx("input",{type:"text",id:h.id,value:t[h.id]||"",onChange:m=>f(h.id,m.target.value),className:"param-text-input"}):h.type==="checkbox"?g.jsx("input",{type:"checkbox",id:h.id,checked:t[h.id]||!1,onChange:m=>f(h.id,m.target.checked),className:"param-checkbox"}):null})]},h.id))})]})},Vg=({settings:a,onUpdate:t})=>{const{mode:r="fps",duration:l=1,beats:o=8,speedMultiplier:u=1}=a||{},f=h=>{t({mode:h})},p=(h,m,v=!1)=>{let x=a[h]||(h==="beats"?8:1);v?x=m>1?x*2:x/2:x+=m,x<.01&&(x=.01),t({[h]:x})};return g.jsxs("div",{className:"clip-playback-settings settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"Clip Playback"})}),g.jsxs("div",{className:"settings-card-content",children:[g.jsxs("div",{className:"playback-mode-selector",children:[g.jsx("button",{className:r==="fps"?"active":"",onClick:()=>f("fps"),children:"FPS"}),g.jsx("button",{className:r==="timeline"?"active":"",onClick:()=>f("timeline"),children:"Timeline"}),g.jsx("button",{className:r==="bpm"?"active":"",onClick:()=>f("bpm"),children:"BPM Sync"})]}),g.jsxs("div",{className:"playback-controls",children:[r==="timeline"&&g.jsxs("div",{className:"control-group",children:[g.jsx("label",{children:"Duration (s)"}),g.jsxs("div",{className:"value-adjuster",children:[g.jsx("button",{onClick:()=>p("duration",-1),children:"-1"}),g.jsx("input",{type:"number",value:l.toFixed(2),onChange:h=>t({duration:parseFloat(h.target.value)||1})}),g.jsx("button",{onClick:()=>p("duration",1),children:"+1"}),g.jsx("button",{onClick:()=>p("duration",.5,!0),children:"/2"}),g.jsx("button",{onClick:()=>p("duration",2,!0),children:"*2"})]})]}),r==="bpm"&&g.jsxs("div",{className:"control-group",children:[g.jsx("label",{children:"Beats"}),g.jsxs("div",{className:"value-adjuster",children:[g.jsx("button",{onClick:()=>p("beats",-1),children:"-1"}),g.jsx("input",{type:"number",value:o,onChange:h=>t({beats:parseInt(h.target.value)||1})}),g.jsx("button",{onClick:()=>p("beats",1),children:"+1"}),g.jsx("button",{onClick:()=>p("beats",.5,!0),children:"/2"}),g.jsx("button",{onClick:()=>p("beats",2,!0),children:"*2"})]})]}),(r==="timeline"||r==="bpm")&&g.jsxs("div",{className:"control-group",children:[g.jsx("label",{children:"Speed Multiplier"}),g.jsxs("div",{className:"value-adjuster",children:[g.jsx("button",{onClick:()=>p("speedMultiplier",-.1),children:"-0.1"}),g.jsx("input",{type:"number",value:u.toFixed(2),onChange:h=>t({speedMultiplier:parseFloat(h.target.value)||1})}),g.jsx("button",{onClick:()=>p("speedMultiplier",.1),children:"+0.1"})]})]})]})]})]})},Xg=({selectedLayerIndex:a,selectedColIndex:t,clip:r,audioInfo:l,onAssignAudio:o,onRemoveAudio:u,onUpdatePlaybackSettings:f,onSetParamSync:p,onToggleDacMirror:h,onRemoveDac:m,onRemoveEffect:v,onParameterChange:x,onGeneratorParameterChange:b})=>{if(a===null||t===null)return g.jsxs("div",{className:"clip-settings-panel settings-panel-base",children:[g.jsx("h3",{children:"Clip Settings"}),g.jsx("p",{className:"info-text",children:"Select a clip to view settings."})]});const{effects:E=[],assignedDacs:C=[],playbackSettings:w={},syncSettings:B={},audioFile:N=null,type:q=null,generatorDefinition:_=null,currentParams:Y={}}=r||{},K=E.length>0,ce=q==="generator"&&!!_,xe=C.length>0,Se=l&&l.duration?l.currentTime/l.duration*100:0;return g.jsxs("div",{className:"clip-settings-panel settings-panel-base",children:[g.jsx("h3",{children:"Clip Settings"}),g.jsxs("div",{className:"audio-settings-section settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"Audio"})}),g.jsx("div",{className:"settings-card-content",children:N?g.jsxs("div",{className:"assigned-audio-info",children:[g.jsx("div",{className:"audio-file-name",title:N.path,children:N.name}),g.jsx("div",{className:"audio-progress-container",children:g.jsx("div",{className:"audio-progress-bar",style:{width:`${Se}%`}})}),g.jsx("div",{className:"audio-time-info",children:l?`${l.currentTime.toFixed(1)}s / ${l.duration.toFixed(1)}s`:"0.0s / 0.0s"}),g.jsx("button",{className:"remove-audio-btn",onClick:u,children:"Remove Audio"})]}):g.jsx("button",{className:"assign-audio-btn",onClick:o,children:"Assign Audio File"})})]}),g.jsx(Vg,{settings:w,onUpdate:$=>f(a,t,$)}),xe&&g.jsxs("div",{className:"assigned-dacs-settings settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"Assigned DACs"})}),g.jsx("div",{className:"settings-card-content",children:g.jsx("ul",{className:"assigned-dacs-list",children:C.map(($,ae)=>g.jsxs("li",{className:"assigned-dac-item",children:[g.jsxs("span",{className:"dac-name-tiny",children:[$.hostName||$.ip," - Ch ",$.channel]}),g.jsxs("div",{className:"dac-mirror-controls",children:[g.jsx("button",{className:`mirror-btn ${$.mirrorX?"active":""}`,onClick:()=>h(a,t,ae,"x"),title:"Mirror X Axis",children:"X"}),g.jsx("button",{className:`mirror-btn ${$.mirrorY?"active":""}`,onClick:()=>h(a,t,ae,"y"),title:"Mirror Y Axis",children:"Y"})]}),g.jsx("button",{className:"remove-dac-btn",onClick:()=>m(ae),children:""})]},`${$.unitID||$.ip}-${$.channel}-${ae}`))})})]}),ce&&g.jsx(qg,{selectedGeneratorId:_.id,selectedGeneratorParams:Y,onParameterChange:b,syncSettings:B,onSetParamSync:p}),K&&E.map(($,ae)=>g.jsx(Pg,{effect:$,syncSettings:B,onSetParamSync:p,onParamChange:(ne,oe)=>x(a,t,ae,ne,oe),onRemove:()=>v(a,t,ae)},$.id+ae)),!ce&&!K&&g.jsx("p",{className:"info-text",children:"No generators or effects applied."})]})},Zg=({selectedLayerIndex:a,autopilotMode:t,onAutopilotChange:r})=>a===null?g.jsxs("div",{className:"settings-panel-base",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"Layer Settings"})}),g.jsx("div",{className:"settings-card-content",children:g.jsx("p",{className:"info-text",children:"Select a layer to edit settings"})})]}):g.jsxs("div",{className:"settings-panel-base",children:[g.jsx("div",{className:"settings-card-header",children:g.jsxs("h4",{children:["Layer ",a+1," Settings"]})}),g.jsx("div",{className:"settings-card-content",children:g.jsxs("div",{className:"param-editor",children:[g.jsx("label",{children:"Autopilot"}),g.jsx("div",{className:"clip-playback-settings",children:g.jsxs("div",{className:"playback-mode-selector",children:[g.jsx("button",{className:t==="off"?"active":"",onClick:()=>r("off"),children:"OFF"}),g.jsx("button",{className:t==="forward"?"active":"",onClick:()=>r("forward"),children:"ON"}),g.jsx("button",{className:t==="random"?"active":"",onClick:()=>r("random"),children:"RND"})]})})]})})]}),Qg=({message:a,visible:t})=>t?g.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#333",color:"white",padding:"10px 20px",borderRadius:"5px",zIndex:1e3,opacity:t?1:0,transition:"opacity 0.5s ease-in-out"},children:a}):null,vm=D.createContext(null),gm=()=>D.useContext(vm),Kg=({children:a,onWorkerMessage:t})=>{const r=D.useRef(null);return r.current===null&&(r.current=new Worker(new URL(""+new URL("rendering.worker-CSdiujTz.js",import.meta.url).href,import.meta.url),{type:"module"})),D.useEffect(()=>{const l=r.current;return t&&(l.onmessage=t),()=>{l.terminate(),t&&(l.onmessage=null)}},[t]),g.jsx(vm.Provider,{value:r.current,children:a})},Wg=({frame:a,effects:t,showBeamEffect:r,beamAlpha:l,fadeAlpha:o,previewScanRate:u,beamRenderMode:f,intensity:p})=>{const h=D.useRef(null),m=gm(),v=D.useRef(`ilda-player-${Math.random()}`);return D.useEffect(()=>{const x=h.current;if(!x||!m)return;const b=x.transferControlToOffscreen();return m.postMessage({action:"register",payload:{id:v.current,canvas:b,type:"single",data:{showBeamEffect:r,beamAlpha:l,fadeAlpha:o,previewScanRate:u,beamRenderMode:f,intensity:p}}},[b]),()=>{m.postMessage({action:"deregister",payload:{id:v.current}})}},[]),D.useEffect(()=>{if(!m)return;const x=a?[a]:[];m.postMessage({action:"update",payload:{id:v.current,data:{ildaFrames:x,effects:t,showBeamEffect:r,beamAlpha:l,fadeAlpha:o,previewScanRate:u,beamRenderMode:f,intensity:p}}})},[m,a,t,r,l,o,u,f,p]),g.jsxs("div",{className:"ilda-player",children:[g.jsx("h3",{children:"Selected Preview"}),g.jsx("canvas",{ref:h,width:"300",height:"300",style:{backgroundColor:"black"}})]})},Jg=lr.memo(Wg),$g=({activeFrames:a,showBeamEffect:t,beamAlpha:r,fadeAlpha:l,previewScanRate:o,beamRenderMode:u,layerIntensities:f,masterIntensity:p})=>{const h=D.useRef(null),m=gm(),v=D.useRef(`world-preview-${Math.random()}`);return D.useEffect(()=>{const x=h.current;if(!x||!m)return;const b=x.transferControlToOffscreen();return m.postMessage({action:"register",payload:{id:v.current,canvas:b,type:"world",data:{showBeamEffect:t,beamAlpha:r,fadeAlpha:l,previewScanRate:o,beamRenderMode:u}}},[b]),()=>{m.postMessage({action:"deregister",payload:{id:v.current}})}},[]),D.useEffect(()=>{if(!m)return;const x=Object.entries(a).map(([b,{frame:E,effects:C,layerIndex:w}])=>({frames:[E],effects:C,workerId:b,layerIndex:w}));m.postMessage({action:"update",payload:{id:v.current,data:{worldData:x,showBeamEffect:t,beamAlpha:r,fadeAlpha:l,previewScanRate:o,beamRenderMode:u,layerIntensities:f,masterIntensity:p}}})},[m,a,t,r,l,o,u,f,p]),g.jsxs("div",{className:"world-preview",children:[g.jsx("h3",{children:"World Preview"}),g.jsx("canvas",{ref:h,width:"300",height:"300",style:{backgroundColor:"black"}})]})},ey=({bpm:a,onBpmChange:t})=>{const[r,l]=D.useState([]),[o,u]=D.useState(a);D.useEffect(()=>{u(a)},[a]);const f=()=>{const h=Date.now(),m=[...r,h].slice(-4);if(l(m),m.length>=2){const v=[];for(let E=1;E<m.length;E++)v.push(m[E]-m[E-1]);const x=v.reduce((E,C)=>E+C)/v.length,b=Math.round(6e4/x);t(b)}},p=h=>{const m=parseFloat(h.target.value);u(h.target.value),!isNaN(m)&&m>0&&m<999&&t(m)};return g.jsx("div",{className:"bpm-controls",children:g.jsxs("div",{className:"bpm-display",children:[g.jsx(Tt,{id:"bpm_tap",children:g.jsx("button",{className:"bpm-tap-btn",onClick:f,children:"TAP"})}),g.jsxs("div",{className:"bpm-fine-controls",children:[g.jsx(Tt,{id:"bpm_fine_down",children:g.jsx("button",{className:"bpm-fine-btn",onClick:()=>t(Math.max(1,a-.1)),children:"-"})}),g.jsx(Tt,{id:"bpm_value",children:g.jsx("input",{type:"number",className:"bpm-input",value:o,onChange:p,min:"1",max:"999",step:"0.1"})}),g.jsx(Tt,{id:"bpm_fine_up",children:g.jsx("button",{className:"bpm-fine-btn",onClick:()=>t(Math.min(999,a+.1)),children:"+"})})]}),g.jsx("span",{className:"bpm-label",children:"BPM"})]})})},ty=({onPlay:a,onPause:t,onStop:r,isPlaying:l,isStopped:o})=>g.jsxs("div",{className:"transport-controls",children:[g.jsx(Tt,{id:"transport_play",children:g.jsx("button",{className:`speed-control-button ${l?"active":""}`,onClick:a,children:""})}),g.jsx(Tt,{id:"transport_pause",children:g.jsx("button",{className:`speed-control-button ${!l&&!o?"active":""}`,onClick:t,children:""})}),g.jsx(Tt,{id:"transport_stop",children:g.jsx("button",{className:`speed-control-button ${o?"active":""}`,onClick:r,children:""})})]}),ny=({value:a,onToggle:t,label:r,onDrop:l})=>{const o=f=>{f.preventDefault(),f.dataTransfer.dropEffect="link"},u=f=>{f.preventDefault();try{const p=JSON.parse(f.dataTransfer.getData("application/x-truelazer-param"));p&&(p.type==="toggle"||p.type==="checkbox")&&l(p)}catch(p){console.error("Invalid drop data",p)}};return g.jsx("div",{className:`quick-assign-button ${a?"active":""}`,onClick:t,onDragOver:o,onDrop:u,children:g.jsx("div",{className:"button-label",title:r||"Empty",children:r||"Assign"})})},ay=({assigns:a,onUpdateKnob:t,onToggleButton:r,onAssign:l})=>g.jsxs("div",{className:"global-quick-assigns-panel",children:[g.jsx("div",{className:"quick-assigns-row knobs-row",children:Array.from({length:8}).map((o,u)=>g.jsx(Tt,{id:`quick_knob_${u}`,children:g.jsx(mm,{value:a.knobs[u]?.value||0,label:a.knobs[u]?.label,onChange:f=>t(u,f),onDrop:f=>l("knob",u,f)})},`knob-${u}`))}),g.jsx("div",{className:"quick-assigns-row buttons-row",children:Array.from({length:8}).map((o,u)=>g.jsx(Tt,{id:`quick_btn_${u}`,children:g.jsx(ny,{value:a.buttons[u]?.value||!1,label:a.buttons[u]?.label,onToggle:()=>r(u),onDrop:f=>l("button",u,f)})},`btn-${u}`))})]}),ry=({enabledShortcuts:a={},onOpenOutputSettings:t,quickAssigns:r,onUpdateKnob:l,onToggleButton:o,onAssign:u})=>{const{midiInitialized:f,midiInputs:p,selectedMidiInputId:h,setSelectedMidiInputId:m,isMapping:v,startMapping:x,stopMapping:b,learningId:E,lastMidiEvent:C,setMappings:w,saveMappings:B,exportMappings:N,importMappings:q}=so(),{artnetInitialized:_,isMapping:Y,startMapping:K,stopMapping:ce,setMappings:xe,saveMappings:Se,exportMappings:$,importMappings:ae,lastDmxEvent:ne}=kc()||{},[oe,he]=D.useState([]),[ve,X]=D.useState(""),[R,z]=D.useState(!1),[L,ue]=D.useState(57121),[T,G]=D.useState("127.0.0.1"),[re,le]=D.useState(57120),[Te,Ie]=D.useState(null);D.useEffect(()=>{const it=async()=>{if(a.artnet)try{const Ze=await window.electronAPI.getArtnetUniverses();he(Ze),Ze.length>0&&X(Ze[0].id)}catch(Ze){console.error("Failed to fetch Art-Net universes:",Ze)}},ln=async()=>{if(a.osc)try{if((await window.electronAPI.initializeOsc({localPort:L,remoteAddress:T,remotePort:re})).success)return z(!0),window.electronAPI.onOscMessageReceived(({oscMessage:jn})=>{Ie(jn)})}catch(Ze){console.error("Failed to initialize OSC:",Ze)}};let Je=()=>{};return it(),ln().then(Ze=>{typeof Ze=="function"&&(Je=Ze)}),()=>{typeof Je=="function"&&Je()}},[a]);const Ae=it=>m(it.target.value),dt=()=>v?b():x(),ze=()=>Y?ce():K();return g.jsxs("div",{className:"settings-panel settings-panel-base",children:[g.jsx("h3",{children:"Global Settings"}),r&&g.jsxs("div",{className:"settings-card quick-assigns-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"Quick Assigns"})}),g.jsx("div",{className:"settings-card-content",children:g.jsx(ay,{assigns:r,onUpdateKnob:l,onToggleButton:o,onAssign:u})})]}),g.jsxs("div",{className:"settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"Channel/DAC Settings"})}),g.jsxs("div",{className:"settings-card-content",children:[g.jsx("p",{className:"info-text",children:"Output routing and safety zones configuration."}),g.jsx("button",{className:"small-btn",style:{width:"100%",marginTop:"5px"},onClick:t,children:"Open Output Settings"})]})]}),(a.midi||a.artnet||a.osc)&&g.jsxs("div",{className:"shortcuts-settings-panel",children:[a.midi&&g.jsxs("div",{className:"settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"MIDI Shortcuts"})}),g.jsx("div",{className:"settings-card-content",children:f?g.jsxs("div",{className:"midi-config",children:[g.jsx("select",{className:"param-select",value:h,onChange:Ae,style:{marginBottom:"8px",width:"100%"},children:p.map(it=>g.jsx("option",{value:it.id,children:it.name},it.id))}),g.jsxs("div",{className:"button-grid",children:[g.jsx("button",{className:`mapping-btn ${v?"active":""}`,onClick:dt,style:{backgroundColor:v?"var(--theme-color)":"",gridColumn:"span 2"},children:v?"Stop Mapping":"Start Mapping"}),g.jsx("button",{className:"small-btn",onClick:B,children:"Save Default"}),g.jsx("button",{className:"small-btn",onClick:N,children:"Export"}),g.jsx("button",{className:"small-btn",onClick:q,children:"Import"}),g.jsx("button",{className:"small-btn clear",onClick:()=>w({}),children:"Clear"})]}),C&&g.jsxs("div",{className:"last-event-status",children:[C.type," ",C.note||C.controller," (CH",C.channel,")"]})]}):g.jsx("p",{className:"loading-text",children:"Initializing MIDI..."})})]}),a.artnet&&g.jsxs("div",{className:"settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"ArtNet Shortcuts"})}),g.jsx("div",{className:"settings-card-content",children:_?g.jsxs("div",{className:"artnet-config",children:[g.jsx("select",{className:"param-select",value:ve,onChange:it=>{X(it.target.value);const ln=parseInt(it.target.value.replace("universe-",""));window.electronAPI&&window.electronAPI.listenArtnetUniverse&&window.electronAPI.listenArtnetUniverse(ln)},style:{marginBottom:"8px",width:"100%"},children:oe.map(it=>g.jsx("option",{value:it.id,children:it.name},it.id))}),g.jsxs("div",{className:"button-grid",children:[g.jsx("button",{className:`mapping-btn ${Y?"active":""}`,onClick:ze,style:{backgroundColor:Y?"var(--theme-color)":"",gridColumn:"span 2"},children:Y?"Stop Mapping":"Start Mapping"}),g.jsx("button",{className:"small-btn",onClick:Se,children:"Save Default"}),g.jsx("button",{className:"small-btn",onClick:$,children:"Export"}),g.jsx("button",{className:"small-btn",onClick:ae,children:"Import"}),g.jsx("button",{className:"small-btn clear",onClick:()=>xe({}),children:"Clear"})]}),ne&&g.jsxs("div",{className:"last-event-status",children:["UNIV ",ne.universe," CH ",ne.channel+1," (Val: ",ne.value,")"]})]}):g.jsx("p",{className:"loading-text",children:"Initializing Art-Net..."})})]}),a.osc&&g.jsxs("div",{className:"settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"OSC Shortcuts"})}),g.jsx("div",{className:"settings-card-content",children:g.jsx("div",{className:"osc-config",children:g.jsxs("p",{className:"info-text",children:["Listening on port: ",L]})})})]})]})]})},iy=({show:a,title:t,initialValue:r,onSave:l,onClose:o})=>{const[u,f]=D.useState(r||"");if(D.useEffect(()=>{a&&f(r||"")},[a,r]),!a)return null;const p=()=>{l(u),o()},h=m=>{m.key==="Enter"&&p(),m.key==="Escape"&&o()};return g.jsx("div",{className:"shortcuts-modal-overlay",style:{pointerEvents:"auto"},children:g.jsxs("div",{className:"shortcuts-modal-content",style:{maxWidth:"400px"},children:[g.jsx("h3",{children:t||"Rename"}),g.jsxs("div",{className:"settings-section",style:{border:"none"},children:[g.jsx("input",{type:"text",value:u,onChange:m=>f(m.target.value),onKeyDown:h,autoFocus:!0,style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",color:"white",border:"1px solid var(--theme-color)",borderRadius:"4px",marginBottom:"15px"}}),g.jsxs("div",{className:"button-row",style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[g.jsx("button",{onClick:o,children:"Cancel"}),g.jsx("button",{onClick:p,style:{backgroundColor:"var(--theme-color)",color:"black"},children:"Save"})]})]})]})})},ly=({safetyZones:a,outputArea:t,testLineY:r,testLineEnabled:l,transformationEnabled:o,transformationMode:u,onUpdateSafetyZones:f,onUpdateOutputArea:p,selectedZoneIndex:h,onSelectZone:m,gridSize:v=20,snapToGrid:x=!1})=>{const b=D.useRef(null),[E,C]=D.useState(null),w=($,ae,ne)=>{$.strokeStyle="#333",$.lineWidth=1,$.beginPath();for(let oe=0;oe<=v;oe++){const he=oe/v,ve=he*ae,X=he*ne;$.moveTo(ve,0),$.lineTo(ve,ne),$.moveTo(0,X),$.lineTo(ae,X)}$.stroke(),$.strokeStyle="#666",$.lineWidth=2,$.beginPath(),$.moveTo(ae/2,0),$.lineTo(ae/2,ne),$.moveTo(0,ne/2),$.lineTo(ae,ne/2),$.stroke(),$.fillStyle="#aaa",$.font="10px monospace",$.fillText("0,0",5,12),$.fillText("1,0",ae-25,12),$.fillText("0,1",5,ne-5),$.fillText("1,1",ae-25,ne-5)},B=($,ae,ne,oe=!1,he=!1)=>{const{x:ve,y:X,w:R,h:z}=ae;if($.fillStyle=ne,$.fillRect(ve,X,R,z),$.strokeStyle=oe?"#fff":he?"#0089ff":"#ff0000",$.lineWidth=oe?2:1,$.strokeRect(ve,X,R,z),oe||he){$.fillStyle="#fff";const ue=(re,le)=>$.fillRect(re-6/2,le-6/2,6,6);ue(ve,X),ue(ve+R,X),ue(ve,X+z),ue(ve+R,X+z);const T=4;$.fillStyle="#ccc";const G=(re,le)=>$.fillRect(re-T/2,le-T/2,T,T);G(ve+R/2,X),G(ve+R/2,X+z),G(ve,X+z/2),G(ve+R,X+z/2)}},N=()=>{const $=b.current;if(!$)return;const ae=$.getContext("2d"),{width:ne,height:oe}=$;if(ae.clearRect(0,0,ne,oe),w(ae,ne,oe),o&&t&&B(ae,{x:t.x*ne,y:t.y*oe,w:t.w*ne,h:t.h*oe},"rgba(0, 137, 255, 0.2)",!1,!0),a.forEach((he,ve)=>{B(ae,{x:he.x*ne,y:he.y*oe,w:he.w*ne,h:he.h*oe},"rgba(255, 0, 0, 0.3)",ve===h)}),l){ae.strokeStyle="#00ff00",ae.lineWidth=2,ae.beginPath();const he=r*oe;ae.moveTo(0,he),ae.lineTo(ne,he),ae.stroke()}};D.useEffect(()=>{N()},[a,t,r,l,o,h,v]);const q=$=>{const ae=b.current.getBoundingClientRect();return{x:($.clientX-ae.left)/ae.width,y:($.clientY-ae.top)/ae.height}},_=($,ae,ne)=>{if(!ne)return null;const oe=.03;return Math.abs($-ne.x)<oe&&Math.abs(ae-ne.y)<oe?"nw":Math.abs($-(ne.x+ne.w))<oe&&Math.abs(ae-ne.y)<oe?"ne":Math.abs($-ne.x)<oe&&Math.abs(ae-(ne.y+ne.h))<oe?"sw":Math.abs($-(ne.x+ne.w))<oe&&Math.abs(ae-(ne.y+ne.h))<oe?"se":Math.abs(ae-ne.y)<oe&&$>=ne.x&&$<=ne.x+ne.w?"n":Math.abs(ae-(ne.y+ne.h))<oe&&$>=ne.x&&$<=ne.x+ne.w?"s":Math.abs($-ne.x)<oe&&ae>=ne.y&&ae<=ne.y+ne.h?"w":Math.abs($-(ne.x+ne.w))<oe&&ae>=ne.y&&ae<=ne.y+ne.h?"e":null},Y=($,ae,ne)=>ne?$>=ne.x&&$<=ne.x+ne.w&&ae>=ne.y&&ae<=ne.y+ne.h:!1,K=$=>{const{x:ae,y:ne}=q($);if(h!==null&&a[h]){const oe=a[h],he=_(ae,ne,oe);if(he){C({type:"zone",index:h,handle:he,startX:ae,startY:ne,originalRect:{...oe}});return}}for(let oe=a.length-1;oe>=0;oe--){const he=a[oe];if(he&&Y(ae,ne,he)){m(oe);const ve=_(ae,ne,he);C({type:"zone",index:oe,handle:ve||"move",startX:ae,startY:ne,originalRect:{...he}});return}}if(o&&t){const oe=_(ae,ne,t);if(oe){C({type:"output",handle:oe,startX:ae,startY:ne,originalRect:{...t}}),m(null);return}if(Y(ae,ne,t)){C({type:"output",handle:"move",startX:ae,startY:ne,originalRect:{...t}}),m(null);return}}m(null)},ce=$=>{if(!x)return $;const ae=1/v;return Math.round($/ae)*ae},xe=$=>{if(!E)return;const{x:ae,y:ne}=q($),oe=ae-E.startX,he=ne-E.startY,ve=(X,R,z,L)=>{let ue={...X};if(R==="move")ue.x=ce(X.x+z),ue.y=ce(X.y+L);else{if(R.includes("w")){const T=ce(X.x+z);ue.w=X.x+X.w-T,ue.x=T}if(R.includes("e")){const T=ce(X.x+X.w+z);ue.w=T-ue.x}if(R.includes("n")){const T=ce(X.y+L);ue.h=X.y+X.h-T,ue.y=T}if(R.includes("s")){const T=ce(X.y+X.h+L);ue.h=T-ue.y}}return ue.w<.01&&(ue.w=.01),ue.h<.01&&(ue.h=.01),ue};if(E.type==="zone"){const X=ve(E.originalRect,E.handle,oe,he);f(E.index,X)}else if(E.type==="output"){const X=ve(E.originalRect,E.handle,oe,he);p(X)}},Se=()=>{C(null)};return g.jsx("div",{className:"output-canvas-container",style:{width:"100%",height:"100%"},children:g.jsx("canvas",{ref:b,width:600,height:600,style:{width:"100%",height:"100%",display:"block"},className:"output-canvas",onMouseDown:K,onMouseMove:xe,onMouseUp:Se,onMouseLeave:Se})})},sy=({show:a,onClose:t,dacs:r=[],dacSettings:l={},onUpdateDacSettings:o})=>{const[u,f]=D.useState(null),[p,h]=D.useState(null),[m,v]=D.useState(20),[x,b]=D.useState(!1),E=D.useMemo(()=>{const _=[];return r.forEach(Y=>{Y.channels&&Y.channels.length>0?Y.channels.forEach(K=>{_.push({id:`${Y.ip}:${K.serviceID}`,displayName:`${Y.hostName||Y.unitID||"DAC"} : ${K.name||`CH ${K.serviceID}`}`,ip:Y.ip,channel:K.serviceID,dacName:Y.hostName||Y.unitID})}):_.push({id:`${Y.ip}:0`,displayName:Y.hostName||Y.unitID||`DAC ${Y.ip}`,ip:Y.ip,channel:0,dacName:Y.hostName||Y.unitID})}),_},[r]);if(D.useEffect(()=>{E.length>0&&!u&&f(E[0].id)},[E,u]),!a)return null;const C=l[u]||{safetyZones:[],outputArea:{x:.1,y:.1,w:.8,h:.8},transformationEnabled:!1,transformationMode:"crop",testLineEnabled:!1,testLineY:.5},w=_=>{u&&o(u,{...C,..._})},B=()=>{const _={x:.4,y:.4,w:.2,h:.2};w({safetyZones:[...C.safetyZones,_]}),h(C.safetyZones.length)},N=()=>{w({safetyZones:[]}),h(null)},q=(_,Y)=>{const K=[...C.safetyZones];K[_]=Y,w({safetyZones:K})};return g.jsx("div",{className:"output-settings-modal-overlay",children:g.jsxs("div",{className:"output-settings-modal-content",children:[g.jsxs("div",{className:"output-settings-header",children:[g.jsx("h2",{children:"Output Settings"}),g.jsx("button",{className:"close-btn",onClick:t,children:"Close"})]}),g.jsxs("div",{className:"output-settings-body",children:[g.jsx("div",{className:"output-settings-col",children:g.jsxs("div",{className:"settings-group",children:[g.jsx("h4",{children:"Available Outputs"}),g.jsxs("ul",{className:"dac-list",children:[E.length===0?g.jsx("li",{style:{color:"#666",fontStyle:"italic"},children:"No Outputs detected"}):null,E.map((_,Y)=>g.jsxs("li",{className:`dac-list-item ${u===_.id?"selected":""}`,onClick:()=>f(_.id),children:[g.jsx("span",{style:{fontWeight:"bold",fontSize:"0.9em"},children:_.displayName}),g.jsx("span",{style:{fontSize:"0.7em",color:"#888"},children:_.ip})]},_.id))]})]})}),g.jsxs("div",{className:"output-settings-col canvas-col",children:[g.jsxs("div",{className:"canvas-toolbar",children:[g.jsx("button",{className:"tool-btn",onClick:B,title:"Add Safety Zone",children:"+ Zone"}),g.jsx("button",{className:`tool-btn ${C.transformationEnabled?"active":""}`,onClick:()=>w({transformationEnabled:!C.transformationEnabled}),title:"Toggle Output Transformation",children:""}),g.jsx("button",{className:`tool-btn ${C.testLineEnabled?"active":""}`,onClick:()=>w({testLineEnabled:!C.testLineEnabled}),title:"Toggle Test Line",children:"_"}),g.jsx("span",{style:{width:1,background:"#555",margin:"0 5px"}}),g.jsx("button",{className:`tool-btn ${x?"active":""}`,onClick:()=>b(!x),title:"Snap to Grid",children:""}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:5,marginLeft:5},children:[g.jsx("span",{style:{fontSize:10,color:"#aaa"},children:"Grid:"}),g.jsx("input",{type:"number",min:"5",max:"100",value:m,onChange:_=>v(parseInt(_.target.value)),className:"param-number-input",style:{width:40}})]})]}),g.jsx(ly,{safetyZones:C.safetyZones,outputArea:C.outputArea,testLineY:C.testLineY,testLineEnabled:C.testLineEnabled,transformationEnabled:C.transformationEnabled,transformationMode:C.transformationMode,onUpdateSafetyZones:q,onUpdateOutputArea:_=>w({outputArea:_}),selectedZoneIndex:p,onSelectZone:h,gridSize:m,snapToGrid:x})]}),g.jsx("div",{className:"output-settings-col",children:u?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"settings-group",children:[g.jsx("h4",{children:"Output Transformation"}),g.jsxs("div",{className:"control-row",style:{marginBottom:10},children:[g.jsx("label",{style:{flex:1},children:"Enable Editing"}),g.jsx("input",{type:"checkbox",checked:C.transformationEnabled,onChange:_=>w({transformationEnabled:_.target.checked})})]}),C.transformationEnabled&&g.jsxs("div",{className:"control-row",children:[g.jsx("label",{style:{flex:1},children:"Mode"}),g.jsxs("select",{className:"param-select",value:C.transformationMode,onChange:_=>w({transformationMode:_.target.value}),children:[g.jsx("option",{value:"crop",children:"Crop"}),g.jsx("option",{value:"scale",children:"Scale"})]})]})]}),g.jsxs("div",{className:"settings-group",children:[g.jsx("h4",{children:"Safety Zones"}),g.jsxs("div",{className:"control-row",style:{justifyContent:"space-between",marginBottom:5},children:[g.jsx("button",{className:"small-btn",onClick:B,children:"Add New"}),g.jsx("button",{className:"small-btn clear",onClick:N,children:"Clear All"})]}),g.jsx("div",{className:"zone-list",children:C.safetyZones.map((_,Y)=>g.jsxs("div",{className:`zone-item ${p===Y?"selected":""}`,onClick:()=>h(Y),children:[g.jsxs("span",{children:["Zone ",Y+1]}),g.jsx("button",{className:"delete-zone-btn",onClick:K=>{K.stopPropagation(),p===Y&&h(null);const ce=C.safetyZones.filter((xe,Se)=>Se!==Y);w({safetyZones:ce})},children:""})]},Y))}),p!==null&&g.jsxs("div",{style:{marginTop:10,borderTop:"1px solid #333",paddingTop:5},children:[g.jsx("label",{children:"Selected Zone Properties"}),g.jsx("div",{style:{fontSize:"0.8em",color:"#aaa"},children:"Select and drag zone on canvas to resize."})]})]}),g.jsxs("div",{className:"settings-group",children:[g.jsx("h4",{children:"Test Output"}),g.jsxs("div",{className:"control-row",style:{marginBottom:10},children:[g.jsx("label",{style:{flex:1},children:"Enable Test Line"}),g.jsx("input",{type:"checkbox",checked:C.testLineEnabled,onChange:_=>w({testLineEnabled:_.target.checked})})]}),C.testLineEnabled&&g.jsxs("div",{className:"control-row",children:[g.jsx("label",{children:"Y Position"}),g.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:C.testLineY,onChange:_=>w({testLineY:parseFloat(_.target.value)}),className:"param-slider"})]})]})]}):g.jsx("div",{style:{padding:20,textAlign:"center",color:"#666"},children:"Select an Output to configure settings"})})]})]})})};class oy extends lr.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){console.error("Uncaught error:",t,r)}render(){return this.state.hasError?g.jsx("h1",{children:"Something went wrong."}):this.props.children}}const ym=D.createContext(null),uy=()=>D.useContext(ym),cy=({children:a})=>{const[t,r]=D.useState(null);return D.useEffect(()=>{if(!t){const l=new Worker(new URL(""+new URL("ilda-parser.worker-VgVoWU9i.js",import.meta.url).href,import.meta.url));r(l)}return()=>{t&&t.terminate()}},[t]),g.jsx(ym.Provider,{value:t,children:a})},bm=D.createContext(null),fy=({children:a})=>{const t=D.useMemo(()=>{try{const r=new Worker(new URL(""+new URL("generators.worker-6MtbyBrw.js",import.meta.url).href,import.meta.url),{type:"module"});return r.onerror=l=>{console.error("Generator Worker instantiation or internal error:",l)},r}catch(r){return console.error("Failed to create Generator Worker:",r),null}},[]);return D.useEffect(()=>{if(t)return()=>{t.terminate()}},[t]),g.jsx(bm.Provider,{value:t,children:a})},dy=()=>{const a=D.useContext(bm);if(a===void 0)throw new Error("useGeneratorWorker must be used within a GeneratorWorkerProvider");return a},hy=()=>{const[a,t]=D.useState([]),[r,l]=D.useState("default"),o=D.useRef({}),u=D.useCallback(async()=>{try{const q=(await navigator.mediaDevices.enumerateDevices()).filter(_=>_.kind==="audiooutput");if(t(q),window.electronAPI&&window.electronAPI.setAudioDevices){const _=q.map(Y=>({deviceId:Y.deviceId,label:Y.label,groupId:Y.groupId}));window.electronAPI.setAudioDevices(_)}}catch(N){console.error("Error enumerating audio devices:",N)}},[]);D.useEffect(()=>{u();let N;return window.electronAPI&&window.electronAPI.onUpdateAudioDeviceId&&(N=window.electronAPI.onUpdateAudioDeviceId(q=>{l(q)})),navigator.mediaDevices.addEventListener("devicechange",u),()=>{navigator.mediaDevices.removeEventListener("devicechange",u),N&&N()}},[u]);const f=D.useCallback(async(N,q,_=!0)=>{if(o.current[N]&&(o.current[N].pause(),o.current[N].src="",delete o.current[N]),!q)return;const Y=new Audio(`file://${q}`);if(r&&Y.setSinkId)try{await Y.setSinkId(r)}catch(K){console.error("Error setting audio sink ID:",K)}if(o.current[N]=Y,_)try{await Y.play()}catch(K){console.error("Error playing audio:",K)}return Y},[r]),p=D.useCallback(N=>{o.current[N]&&(o.current[N].pause(),o.current[N].src="",delete o.current[N])},[]),h=D.useCallback(N=>{o.current[N]&&o.current[N].pause()},[]),m=D.useCallback(async N=>{if(o.current[N]&&o.current[N].paused)try{await o.current[N].play()}catch(q){console.error("Error resuming audio:",q)}},[]),v=D.useCallback(N=>{const q=Math.max(.0625,Math.min(N,16));Object.values(o.current).forEach(_=>{try{_.playbackRate=q}catch(Y){console.warn("Failed to set playbackRate:",Y)}})},[]),x=D.useCallback(N=>{o.current[N]&&(o.current[N].currentTime=0)},[]),b=D.useCallback(()=>{Object.keys(o.current).forEach(N=>{p(N)})},[p]),E=D.useCallback(()=>{Object.keys(o.current).forEach(N=>{h(N)})},[h]),C=D.useCallback(()=>{Object.keys(o.current).forEach(N=>{m(N)})},[m]),w=D.useCallback(()=>{Object.keys(o.current).forEach(N=>{x(N)})},[x]),B=D.useCallback(N=>{const q=o.current[N];return q?{currentTime:q.currentTime,duration:q.duration,paused:q.paused}:null},[]);return{devices:a,selectedDeviceId:r,setSelectedDeviceId:l,playAudio:f,stopAudio:p,pauseAudio:h,resumeAudio:m,setPlaybackRate:v,resetAudio:x,stopAllAudio:b,pauseAllAudio:E,resumeAllAudio:C,resetAllAudio:w,getAudioInfo:B}};var py=om();const my=Uc(py),vy=()=>{const{isMapping:a,mappings:t,learningId:r}=so(),{isMapping:l,mappings:o,learningId:u}=kc()||{},f=a||l,[p,h]=D.useState([]),m=D.useCallback(()=>{if(!f)return;const v=document.querySelectorAll("[data-mappable-id]"),x=Array.from(v).map(b=>{const E=b.getBoundingClientRect();return{id:b.getAttribute("data-mappable-id"),rect:{top:E.top,left:E.left,width:E.width,height:E.height}}});h(x)},[f]);return D.useEffect(()=>{if(f){m(),window.addEventListener("resize",m);const v=setTimeout(m,100);return()=>{window.removeEventListener("resize",m),clearTimeout(v)}}else h([])},[f,m]),f?my.createPortal(g.jsx("div",{className:"midi-mapping-global-overlay-container",children:p.map(v=>{const x=t[v.id],b=o?o[v.id]:null,E=a&&r===v.id||l&&u===v.id;let C=null;return a?C=x?x.label:null:l&&(C=b?b.label:null),g.jsx("div",{className:`midi-mapping-label-box ${E?"learning":""} ${C?"mapped":""} ${l?"artnet-mapping":""}`,style:{position:"fixed",top:v.rect.top,left:v.rect.left,width:v.rect.width,height:v.rect.height,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:g.jsx("div",{className:"mapping-label",children:C||"+"})},v.id)})}),document.body):null};/*! https://mths.be/codepointat v0.2.0 by @mathias */String.prototype.codePointAt||(function(){var a=(function(){try{var r={},l=Object.defineProperty,o=l(r,r,r)&&l}catch{}return o})(),t=function(r){if(this==null)throw TypeError();var l=String(this),o=l.length,u=r?Number(r):0;if(u!=u&&(u=0),!(u<0||u>=o)){var f=l.charCodeAt(u),p;return f>=55296&&f<=56319&&o>u+1&&(p=l.charCodeAt(u+1),p>=56320&&p<=57343)?(f-55296)*1024+p-56320+65536:f}};a?a(String.prototype,"codePointAt",{value:t,configurable:!0,writable:!0}):String.prototype.codePointAt=t})();function Sm(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}var gy=new Sm,yy=new Sm,xm=new Uint8Array(30),Em=new Uint16Array(30),by=new Uint8Array(30),Sy=new Uint16Array(30);function Tm(a,t,r,l){var o,u;for(o=0;o<r;++o)a[o]=0;for(o=0;o<30-r;++o)a[o+r]=o/r|0;for(u=l,o=0;o<30;++o)t[o]=u,u+=1<<a[o]}function xy(a,t){var r;for(r=0;r<7;++r)a.table[r]=0;for(a.table[7]=24,a.table[8]=152,a.table[9]=112,r=0;r<24;++r)a.trans[r]=256+r;for(r=0;r<144;++r)a.trans[24+r]=r;for(r=0;r<8;++r)a.trans[168+r]=280+r;for(r=0;r<112;++r)a.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}xy(gy,yy);Tm(xm,Em,4,3);Tm(by,Sy,2,1);xm[28]=0;Em[28]=258;function vi(a,t,r,l,o){return Math.pow(1-o,3)*a+3*Math.pow(1-o,2)*o*t+3*(1-o)*Math.pow(o,2)*r+Math.pow(o,3)*l}function or(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}or.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};or.prototype.addPoint=function(a,t){typeof a=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=a,this.x2=a),a<this.x1&&(this.x1=a),a>this.x2&&(this.x2=a)),typeof t=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))};or.prototype.addX=function(a){this.addPoint(a,null)};or.prototype.addY=function(a){this.addPoint(null,a)};or.prototype.addBezier=function(a,t,r,l,o,u,f,p){var h=[a,t],m=[r,l],v=[o,u],x=[f,p];this.addPoint(a,t),this.addPoint(f,p);for(var b=0;b<=1;b++){var E=6*h[b]-12*m[b]+6*v[b],C=-3*h[b]+9*m[b]-9*v[b]+3*x[b],w=3*m[b]-3*h[b];if(C===0){if(E===0)continue;var B=-w/E;0<B&&B<1&&(b===0&&this.addX(vi(h[b],m[b],v[b],x[b],B)),b===1&&this.addY(vi(h[b],m[b],v[b],x[b],B)));continue}var N=Math.pow(E,2)-4*w*C;if(!(N<0)){var q=(-E+Math.sqrt(N))/(2*C);0<q&&q<1&&(b===0&&this.addX(vi(h[b],m[b],v[b],x[b],q)),b===1&&this.addY(vi(h[b],m[b],v[b],x[b],q)));var _=(-E-Math.sqrt(N))/(2*C);0<_&&_<1&&(b===0&&this.addX(vi(h[b],m[b],v[b],x[b],_)),b===1&&this.addY(vi(h[b],m[b],v[b],x[b],_)))}}};or.prototype.addQuad=function(a,t,r,l,o,u){var f=a+.6666666666666666*(r-a),p=t+2/3*(l-t),h=f+1/3*(o-a),m=p+1/3*(u-t);this.addBezier(a,t,f,p,h,m,o,u)};function Pt(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}Pt.prototype.moveTo=function(a,t){this.commands.push({type:"M",x:a,y:t})};Pt.prototype.lineTo=function(a,t){this.commands.push({type:"L",x:a,y:t})};Pt.prototype.curveTo=Pt.prototype.bezierCurveTo=function(a,t,r,l,o,u){this.commands.push({type:"C",x1:a,y1:t,x2:r,y2:l,x:o,y:u})};Pt.prototype.quadTo=Pt.prototype.quadraticCurveTo=function(a,t,r,l){this.commands.push({type:"Q",x1:a,y1:t,x:r,y:l})};Pt.prototype.close=Pt.prototype.closePath=function(){this.commands.push({type:"Z"})};Pt.prototype.extend=function(a){if(a.commands)a=a.commands;else if(a instanceof or){var t=a;this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),this.close();return}Array.prototype.push.apply(this.commands,a)};Pt.prototype.getBoundingBox=function(){for(var a=new or,t=0,r=0,l=0,o=0,u=0;u<this.commands.length;u++){var f=this.commands[u];switch(f.type){case"M":a.addPoint(f.x,f.y),t=l=f.x,r=o=f.y;break;case"L":a.addPoint(f.x,f.y),l=f.x,o=f.y;break;case"Q":a.addQuad(l,o,f.x1,f.y1,f.x,f.y),l=f.x,o=f.y;break;case"C":a.addBezier(l,o,f.x1,f.y1,f.x2,f.y2,f.x,f.y),l=f.x,o=f.y;break;case"Z":l=t,o=r;break;default:throw new Error("Unexpected path command "+f.type)}}return a.isEmpty()&&a.addPoint(0,0),a};Pt.prototype.draw=function(a){a.beginPath();for(var t=0;t<this.commands.length;t+=1){var r=this.commands[t];r.type==="M"?a.moveTo(r.x,r.y):r.type==="L"?a.lineTo(r.x,r.y):r.type==="C"?a.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):r.type==="Q"?a.quadraticCurveTo(r.x1,r.y1,r.x,r.y):r.type==="Z"&&a.closePath()}this.fill&&(a.fillStyle=this.fill,a.fill()),this.stroke&&(a.strokeStyle=this.stroke,a.lineWidth=this.strokeWidth,a.stroke())};Pt.prototype.toPathData=function(a){a=a!==void 0?a:2;function t(f){return Math.round(f)===f?""+Math.round(f):f.toFixed(a)}function r(){for(var f=arguments,p="",h=0;h<arguments.length;h+=1){var m=f[h];m>=0&&h>0&&(p+=" "),p+=t(m)}return p}for(var l="",o=0;o<this.commands.length;o+=1){var u=this.commands[o];u.type==="M"?l+="M"+r(u.x,u.y):u.type==="L"?l+="L"+r(u.x,u.y):u.type==="C"?l+="C"+r(u.x1,u.y1,u.x2,u.y2,u.x,u.y):u.type==="Q"?l+="Q"+r(u.x1,u.y1,u.x,u.y):u.type==="Z"&&(l+="Z")}return l};Pt.prototype.toSVG=function(a){var t='<path d="';return t+=this.toPathData(a),t+='"',this.fill&&this.fill!=="black"&&(this.fill===null?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>",t};Pt.prototype.toDOMElement=function(a){var t=this.toPathData(a),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r};function Am(a){throw new Error(a)}function Ap(a,t){a||Am(t)}var ke={fail:Am,argument:Ap,assert:Ap},Cp=32768,Np=2147483648,bi={},de={},_e={};function Zn(a){return function(){return a}}de.BYTE=function(a){return ke.argument(a>=0&&a<=255,"Byte value should be between 0 and 255."),[a]};_e.BYTE=Zn(1);de.CHAR=function(a){return[a.charCodeAt(0)]};_e.CHAR=Zn(1);de.CHARARRAY=function(a){typeof a>"u"&&(a="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var t=[],r=0;r<a.length;r+=1)t[r]=a.charCodeAt(r);return t};_e.CHARARRAY=function(a){return typeof a>"u"?0:a.length};de.USHORT=function(a){return[a>>8&255,a&255]};_e.USHORT=Zn(2);de.SHORT=function(a){return a>=Cp&&(a=-(2*Cp-a)),[a>>8&255,a&255]};_e.SHORT=Zn(2);de.UINT24=function(a){return[a>>16&255,a>>8&255,a&255]};_e.UINT24=Zn(3);de.ULONG=function(a){return[a>>24&255,a>>16&255,a>>8&255,a&255]};_e.ULONG=Zn(4);de.LONG=function(a){return a>=Np&&(a=-(2*Np-a)),[a>>24&255,a>>16&255,a>>8&255,a&255]};_e.LONG=Zn(4);de.FIXED=de.ULONG;_e.FIXED=_e.ULONG;de.FWORD=de.SHORT;_e.FWORD=_e.SHORT;de.UFWORD=de.USHORT;_e.UFWORD=_e.USHORT;de.LONGDATETIME=function(a){return[0,0,0,0,a>>24&255,a>>16&255,a>>8&255,a&255]};_e.LONGDATETIME=Zn(8);de.TAG=function(a){return ke.argument(a.length===4,"Tag should be exactly 4 ASCII characters."),[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]};_e.TAG=Zn(4);de.Card8=de.BYTE;_e.Card8=_e.BYTE;de.Card16=de.USHORT;_e.Card16=_e.USHORT;de.OffSize=de.BYTE;_e.OffSize=_e.BYTE;de.SID=de.USHORT;_e.SID=_e.USHORT;de.NUMBER=function(a){return a>=-107&&a<=107?[a+139]:a>=108&&a<=1131?(a=a-108,[(a>>8)+247,a&255]):a>=-1131&&a<=-108?(a=-a-108,[(a>>8)+251,a&255]):a>=-32768&&a<=32767?de.NUMBER16(a):de.NUMBER32(a)};_e.NUMBER=function(a){return de.NUMBER(a).length};de.NUMBER16=function(a){return[28,a>>8&255,a&255]};_e.NUMBER16=Zn(3);de.NUMBER32=function(a){return[29,a>>24&255,a>>16&255,a>>8&255,a&255]};_e.NUMBER32=Zn(5);de.REAL=function(a){var t=a.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(r){var l=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));t=(Math.round(a*l)/l).toString()}for(var o="",u=0,f=t.length;u<f;u+=1){var p=t[u];p==="e"?o+=t[++u]==="-"?"c":"b":p==="."?o+="a":p==="-"?o+="e":o+=p}o+=o.length&1?"f":"ff";for(var h=[30],m=0,v=o.length;m<v;m+=2)h.push(parseInt(o.substr(m,2),16));return h};_e.REAL=function(a){return de.REAL(a).length};de.NAME=de.CHARARRAY;_e.NAME=_e.CHARARRAY;de.STRING=de.CHARARRAY;_e.STRING=_e.CHARARRAY;bi.UTF8=function(a,t,r){for(var l=[],o=r,u=0;u<o;u++,t+=1)l[u]=a.getUint8(t);return String.fromCharCode.apply(null,l)};bi.UTF16=function(a,t,r){for(var l=[],o=r/2,u=0;u<o;u++,t+=2)l[u]=a.getUint16(t);return String.fromCharCode.apply(null,l)};de.UTF16=function(a){for(var t=[],r=0;r<a.length;r+=1){var l=a.charCodeAt(r);t[t.length]=l>>8&255,t[t.length]=l&255}return t};_e.UTF16=function(a){return a.length*2};var Nc={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};bi.MACSTRING=function(a,t,r,l){var o=Nc[l];if(o!==void 0){for(var u="",f=0;f<r;f++){var p=a.getUint8(t+f);p<=127?u+=String.fromCharCode(p):u+=o[p&127]}return u}};var Vs=typeof WeakMap=="function"&&new WeakMap,Xs,Ey=function(a){if(!Xs){Xs={};for(var t in Nc)Xs[t]=new String(t)}var r=Xs[a];if(r!==void 0){if(Vs){var l=Vs.get(r);if(l!==void 0)return l}var o=Nc[a];if(o!==void 0){for(var u={},f=0;f<o.length;f++)u[o.charCodeAt(f)]=f+128;return Vs&&Vs.set(r,u),u}}};de.MACSTRING=function(a,t){var r=Ey(t);if(r!==void 0){for(var l=[],o=0;o<a.length;o++){var u=a.charCodeAt(o);if(u>=128&&(u=r[u],u===void 0))return;l[o]=u}return l}};_e.MACSTRING=function(a,t){var r=de.MACSTRING(a,t);return r!==void 0?r.length:0};function Mc(a){return a>=-128&&a<=127}function Ty(a,t,r){for(var l=0,o=a.length;t<o&&l<64&&a[t]===0;)++t,++l;return r.push(128|l-1),t}function Ay(a,t,r){for(var l=0,o=a.length,u=t;u<o&&l<64;){var f=a[u];if(!Mc(f)||f===0&&u+1<o&&a[u+1]===0)break;++u,++l}r.push(l-1);for(var p=t;p<u;++p)r.push(a[p]+256&255);return u}function Cy(a,t,r){for(var l=0,o=a.length,u=t;u<o&&l<64;){var f=a[u];if(f===0||Mc(f)&&u+1<o&&Mc(a[u+1]))break;++u,++l}r.push(64|l-1);for(var p=t;p<u;++p){var h=a[p];r.push(h+65536>>8&255,h+256&255)}return u}de.VARDELTAS=function(a){for(var t=0,r=[];t<a.length;){var l=a[t];l===0?t=Ty(a,t,r):l>=-128&&l<=127?t=Ay(a,t,r):t=Cy(a,t,r)}return r};de.INDEX=function(a){for(var t=1,r=[t],l=[],o=0;o<a.length;o+=1){var u=de.OBJECT(a[o]);Array.prototype.push.apply(l,u),t+=u.length,r.push(t)}if(l.length===0)return[0,0];for(var f=[],p=1+Math.floor(Math.log(t)/Math.log(2))/8|0,h=[void 0,de.BYTE,de.USHORT,de.UINT24,de.ULONG][p],m=0;m<r.length;m+=1){var v=h(r[m]);Array.prototype.push.apply(f,v)}return Array.prototype.concat(de.Card16(a.length),de.OffSize(p),f,l)};_e.INDEX=function(a){return de.INDEX(a).length};de.DICT=function(a){for(var t=[],r=Object.keys(a),l=r.length,o=0;o<l;o+=1){var u=parseInt(r[o],0),f=a[u];t=t.concat(de.OPERAND(f.value,f.type)),t=t.concat(de.OPERATOR(u))}return t};_e.DICT=function(a){return de.DICT(a).length};de.OPERATOR=function(a){return a<1200?[a]:[12,a-1200]};de.OPERAND=function(a,t){var r=[];if(Array.isArray(t))for(var l=0;l<t.length;l+=1)ke.argument(a.length===t.length,"Not enough arguments given for type"+t),r=r.concat(de.OPERAND(a[l],t[l]));else if(t==="SID")r=r.concat(de.NUMBER(a));else if(t==="offset")r=r.concat(de.NUMBER32(a));else if(t==="number")r=r.concat(de.NUMBER(a));else if(t==="real")r=r.concat(de.REAL(a));else throw new Error("Unknown operand type "+t);return r};de.OP=de.BYTE;_e.OP=_e.BYTE;var Zs=typeof WeakMap=="function"&&new WeakMap;de.CHARSTRING=function(a){if(Zs){var t=Zs.get(a);if(t!==void 0)return t}for(var r=[],l=a.length,o=0;o<l;o+=1){var u=a[o];r=r.concat(de[u.type](u.value))}return Zs&&Zs.set(a,r),r};_e.CHARSTRING=function(a){return de.CHARSTRING(a).length};de.OBJECT=function(a){var t=de[a.type];return ke.argument(t!==void 0,"No encoding function for type "+a.type),t(a.value)};_e.OBJECT=function(a){var t=_e[a.type];return ke.argument(t!==void 0,"No sizeOf function for type "+a.type),t(a.value)};de.TABLE=function(a){for(var t=[],r=a.fields.length,l=[],o=[],u=0;u<r;u+=1){var f=a.fields[u],p=de[f.type];ke.argument(p!==void 0,"No encoding function for field type "+f.type+" ("+f.name+")");var h=a[f.name];h===void 0&&(h=f.value);var m=p(h);f.type==="TABLE"?(o.push(t.length),t=t.concat([0,0]),l.push(m)):t=t.concat(m)}for(var v=0;v<l.length;v+=1){var x=o[v],b=t.length;ke.argument(b<65536,"Table "+a.tableName+" too big."),t[x]=b>>8,t[x+1]=b&255,t=t.concat(l[v])}return t};_e.TABLE=function(a){for(var t=0,r=a.fields.length,l=0;l<r;l+=1){var o=a.fields[l],u=_e[o.type];ke.argument(u!==void 0,"No sizeOf function for field type "+o.type+" ("+o.name+")");var f=a[o.name];f===void 0&&(f=o.value),t+=u(f),o.type==="TABLE"&&(t+=2)}return t};de.RECORD=de.TABLE;_e.RECORD=_e.TABLE;de.LITERAL=function(a){return a};_e.LITERAL=function(a){return a.length};function Zt(a,t,r){if(t.length&&(t[0].name!=="coverageFormat"||t[0].value===1))for(var l=0;l<t.length;l+=1){var o=t[l];this[o.name]=o.value}if(this.tableName=a,this.fields=t,r)for(var u=Object.keys(r),f=0;f<u.length;f+=1){var p=u[f],h=r[p];this[p]!==void 0&&(this[p]=h)}}Zt.prototype.encode=function(){return de.TABLE(this)};Zt.prototype.sizeOf=function(){return _e.TABLE(this)};function Rl(a,t,r){r===void 0&&(r=t.length);var l=new Array(t.length+1);l[0]={name:a+"Count",type:"USHORT",value:r};for(var o=0;o<t.length;o++)l[o+1]={name:a+o,type:"USHORT",value:t[o]};return l}function wc(a,t,r){var l=t.length,o=new Array(l+1);o[0]={name:a+"Count",type:"USHORT",value:l};for(var u=0;u<l;u++)o[u+1]={name:a+u,type:"TABLE",value:r(t[u],u)};return o}function Ol(a,t,r){var l=t.length,o=[];o[0]={name:a+"Count",type:"USHORT",value:l};for(var u=0;u<l;u++)o=o.concat(r(t[u],u));return o}function to(a){a.format===1?Zt.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Rl("glyph",a.glyphs))):a.format===2?Zt.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(Ol("rangeRecord",a.ranges,function(t){return[{name:"startGlyphID",type:"USHORT",value:t.start},{name:"endGlyphID",type:"USHORT",value:t.end},{name:"startCoverageIndex",type:"USHORT",value:t.index}]}))):ke.assert(!1,"Coverage format must be 1 or 2.")}to.prototype=Object.create(Zt.prototype);to.prototype.constructor=to;function no(a){Zt.call(this,"scriptListTable",Ol("scriptRecord",a,function(t,r){var l=t.script,o=l.defaultLangSys;return ke.assert(!!o,"Unable to write GSUB: script "+t.tag+" has no default language system."),[{name:"scriptTag"+r,type:"TAG",value:t.tag},{name:"script"+r,type:"TABLE",value:new Zt("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Zt("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:o.reqFeatureIndex}].concat(Rl("featureIndex",o.featureIndexes)))}].concat(Ol("langSys",l.langSysRecords,function(u,f){var p=u.langSys;return[{name:"langSysTag"+f,type:"TAG",value:u.tag},{name:"langSys"+f,type:"TABLE",value:new Zt("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:p.reqFeatureIndex}].concat(Rl("featureIndex",p.featureIndexes)))}]})))}]}))}no.prototype=Object.create(Zt.prototype);no.prototype.constructor=no;function ao(a){Zt.call(this,"featureListTable",Ol("featureRecord",a,function(t,r){var l=t.feature;return[{name:"featureTag"+r,type:"TAG",value:t.tag},{name:"feature"+r,type:"TABLE",value:new Zt("featureTable",[{name:"featureParams",type:"USHORT",value:l.featureParams}].concat(Rl("lookupListIndex",l.lookupListIndexes)))}]}))}ao.prototype=Object.create(Zt.prototype);ao.prototype.constructor=ao;function ro(a,t){Zt.call(this,"lookupListTable",wc("lookup",a,function(r){var l=t[r.lookupType];return ke.assert(!!l,"Unable to write GSUB lookup type "+r.lookupType+" tables."),new Zt("lookupTable",[{name:"lookupType",type:"USHORT",value:r.lookupType},{name:"lookupFlag",type:"USHORT",value:r.lookupFlag}].concat(wc("subtable",r.subtables,l)))}))}ro.prototype=Object.create(Zt.prototype);ro.prototype.constructor=ro;var be={Table:Zt,Record:Zt,Coverage:to,ScriptList:no,FeatureList:ao,LookupList:ro,ushortList:Rl,tableList:wc,recordList:Ol};function Mp(a,t){return a.getUint8(t)}function io(a,t){return a.getUint16(t,!1)}function Ny(a,t){return a.getInt16(t,!1)}function Ic(a,t){return a.getUint32(t,!1)}function Cm(a,t){var r=a.getInt16(t,!1),l=a.getUint16(t+2,!1);return r+l/65535}function My(a,t){for(var r="",l=t;l<t+4;l+=1)r+=String.fromCharCode(a.getInt8(l));return r}function wy(a,t,r){for(var l=0,o=0;o<r;o+=1)l<<=8,l+=a.getUint8(t+o);return l}function Ry(a,t,r){for(var l=[],o=t;o<r;o+=1)l.push(a.getUint8(o));return l}function Oy(a){for(var t="",r=0;r<a.length;r+=1)t+=String.fromCharCode(a[r]);return t}var Dy={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function V(a,t){this.data=a,this.offset=t,this.relativeOffset=0}V.prototype.parseByte=function(){var a=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,a};V.prototype.parseChar=function(){var a=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,a};V.prototype.parseCard8=V.prototype.parseByte;V.prototype.parseUShort=function(){var a=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,a};V.prototype.parseCard16=V.prototype.parseUShort;V.prototype.parseSID=V.prototype.parseUShort;V.prototype.parseOffset16=V.prototype.parseUShort;V.prototype.parseShort=function(){var a=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,a};V.prototype.parseF2Dot14=function(){var a=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,a};V.prototype.parseULong=function(){var a=Ic(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a};V.prototype.parseOffset32=V.prototype.parseULong;V.prototype.parseFixed=function(){var a=Cm(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a};V.prototype.parseString=function(a){var t=this.data,r=this.offset+this.relativeOffset,l="";this.relativeOffset+=a;for(var o=0;o<a;o++)l+=String.fromCharCode(t.getUint8(r+o));return l};V.prototype.parseTag=function(){return this.parseString(4)};V.prototype.parseLongDateTime=function(){var a=Ic(this.data,this.offset+this.relativeOffset+4);return a-=2082844800,this.relativeOffset+=8,a};V.prototype.parseVersion=function(a){var t=io(this.data,this.offset+this.relativeOffset),r=io(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,a===void 0&&(a=4096),t+r/a/10};V.prototype.skip=function(a,t){t===void 0&&(t=1),this.relativeOffset+=Dy[a]*t};V.prototype.parseULongList=function(a){a===void 0&&(a=this.parseULong());for(var t=new Array(a),r=this.data,l=this.offset+this.relativeOffset,o=0;o<a;o++)t[o]=r.getUint32(l),l+=4;return this.relativeOffset+=a*4,t};V.prototype.parseOffset16List=V.prototype.parseUShortList=function(a){a===void 0&&(a=this.parseUShort());for(var t=new Array(a),r=this.data,l=this.offset+this.relativeOffset,o=0;o<a;o++)t[o]=r.getUint16(l),l+=2;return this.relativeOffset+=a*2,t};V.prototype.parseShortList=function(a){for(var t=new Array(a),r=this.data,l=this.offset+this.relativeOffset,o=0;o<a;o++)t[o]=r.getInt16(l),l+=2;return this.relativeOffset+=a*2,t};V.prototype.parseByteList=function(a){for(var t=new Array(a),r=this.data,l=this.offset+this.relativeOffset,o=0;o<a;o++)t[o]=r.getUint8(l++);return this.relativeOffset+=a,t};V.prototype.parseList=function(a,t){t||(t=a,a=this.parseUShort());for(var r=new Array(a),l=0;l<a;l++)r[l]=t.call(this);return r};V.prototype.parseList32=function(a,t){t||(t=a,a=this.parseULong());for(var r=new Array(a),l=0;l<a;l++)r[l]=t.call(this);return r};V.prototype.parseRecordList=function(a,t){t||(t=a,a=this.parseUShort());for(var r=new Array(a),l=Object.keys(t),o=0;o<a;o++){for(var u={},f=0;f<l.length;f++){var p=l[f],h=t[p];u[p]=h.call(this)}r[o]=u}return r};V.prototype.parseRecordList32=function(a,t){t||(t=a,a=this.parseULong());for(var r=new Array(a),l=Object.keys(t),o=0;o<a;o++){for(var u={},f=0;f<l.length;f++){var p=l[f],h=t[p];u[p]=h.call(this)}r[o]=u}return r};V.prototype.parseStruct=function(a){if(typeof a=="function")return a.call(this);for(var t=Object.keys(a),r={},l=0;l<t.length;l++){var o=t[l],u=a[o];r[o]=u.call(this)}return r};V.prototype.parseValueRecord=function(a){if(a===void 0&&(a=this.parseUShort()),a!==0){var t={};return a&1&&(t.xPlacement=this.parseShort()),a&2&&(t.yPlacement=this.parseShort()),a&4&&(t.xAdvance=this.parseShort()),a&8&&(t.yAdvance=this.parseShort()),a&16&&(t.xPlaDevice=void 0,this.parseShort()),a&32&&(t.yPlaDevice=void 0,this.parseShort()),a&64&&(t.xAdvDevice=void 0,this.parseShort()),a&128&&(t.yAdvDevice=void 0,this.parseShort()),t}};V.prototype.parseValueRecordList=function(){for(var a=this.parseUShort(),t=this.parseUShort(),r=new Array(t),l=0;l<t;l++)r[l]=this.parseValueRecord(a);return r};V.prototype.parsePointer=function(a){var t=this.parseOffset16();if(t>0)return new V(this.data,this.offset+t).parseStruct(a)};V.prototype.parsePointer32=function(a){var t=this.parseOffset32();if(t>0)return new V(this.data,this.offset+t).parseStruct(a)};V.prototype.parseListOfLists=function(a){for(var t=this.parseOffset16List(),r=t.length,l=this.relativeOffset,o=new Array(r),u=0;u<r;u++){var f=t[u];if(f===0){o[u]=void 0;continue}if(this.relativeOffset=f,a){for(var p=this.parseOffset16List(),h=new Array(p.length),m=0;m<p.length;m++)this.relativeOffset=f+p[m],h[m]=a.call(this);o[u]=h}else o[u]=this.parseUShortList()}return this.relativeOffset=l,o};V.prototype.parseCoverage=function(){var a=this.offset+this.relativeOffset,t=this.parseUShort(),r=this.parseUShort();if(t===1)return{format:1,glyphs:this.parseUShortList(r)};if(t===2){for(var l=new Array(r),o=0;o<r;o++)l[o]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:l}}throw new Error("0x"+a.toString(16)+": Coverage format must be 1 or 2.")};V.prototype.parseClassDef=function(){var a=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(t===2)return{format:2,ranges:this.parseRecordList({start:V.uShort,end:V.uShort,classId:V.uShort})};throw new Error("0x"+a.toString(16)+": ClassDef format must be 1 or 2.")};V.list=function(a,t){return function(){return this.parseList(a,t)}};V.list32=function(a,t){return function(){return this.parseList32(a,t)}};V.recordList=function(a,t){return function(){return this.parseRecordList(a,t)}};V.recordList32=function(a,t){return function(){return this.parseRecordList32(a,t)}};V.pointer=function(a){return function(){return this.parsePointer(a)}};V.pointer32=function(a){return function(){return this.parsePointer32(a)}};V.tag=V.prototype.parseTag;V.byte=V.prototype.parseByte;V.uShort=V.offset16=V.prototype.parseUShort;V.uShortList=V.prototype.parseUShortList;V.uLong=V.offset32=V.prototype.parseULong;V.uLongList=V.prototype.parseULongList;V.struct=V.prototype.parseStruct;V.coverage=V.prototype.parseCoverage;V.classDef=V.prototype.parseClassDef;var wp={reserved:V.uShort,reqFeatureIndex:V.uShort,featureIndexes:V.uShortList};V.prototype.parseScriptList=function(){return this.parsePointer(V.recordList({tag:V.tag,script:V.pointer({defaultLangSys:V.pointer(wp),langSysRecords:V.recordList({tag:V.tag,langSys:V.pointer(wp)})})}))||[]};V.prototype.parseFeatureList=function(){return this.parsePointer(V.recordList({tag:V.tag,feature:V.pointer({featureParams:V.offset16,lookupListIndexes:V.uShortList})}))||[]};V.prototype.parseLookupList=function(a){return this.parsePointer(V.list(V.pointer(function(){var t=this.parseUShort();ke.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var r=this.parseUShort(),l=r&16;return{lookupType:t,lookupFlag:r,subtables:this.parseList(V.pointer(a[t])),markFilteringSet:l?this.parseUShort():void 0}})))||[]};V.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var a=this.parseUShort(),t=this.parseUShort();ke.argument(a===1&&t<1,"GPOS/GSUB feature variations table unknown.");var r=this.parseRecordList32({conditionSetOffset:V.offset32,featureTableSubstitutionOffset:V.offset32});return r})||[]};var Be={getByte:Mp,getCard8:Mp,getUShort:io,getCard16:io,getShort:Ny,getULong:Ic,getFixed:Cm,getTag:My,getOffset:wy,getBytes:Ry,bytesToString:Oy,Parser:V};function _y(a,t){t.parseUShort(),a.length=t.parseULong(),a.language=t.parseULong();var r;a.groupCount=r=t.parseULong(),a.glyphIndexMap={};for(var l=0;l<r;l+=1)for(var o=t.parseULong(),u=t.parseULong(),f=t.parseULong(),p=o;p<=u;p+=1)a.glyphIndexMap[p]=f,f++}function Uy(a,t,r,l,o){a.length=t.parseUShort(),a.language=t.parseUShort();var u;a.segCount=u=t.parseUShort()>>1,t.skip("uShort",3),a.glyphIndexMap={};for(var f=new Be.Parser(r,l+o+14),p=new Be.Parser(r,l+o+16+u*2),h=new Be.Parser(r,l+o+16+u*4),m=new Be.Parser(r,l+o+16+u*6),v=l+o+16+u*8,x=0;x<u-1;x+=1)for(var b=void 0,E=f.parseUShort(),C=p.parseUShort(),w=h.parseShort(),B=m.parseUShort(),N=C;N<=E;N+=1)B!==0?(v=m.offset+m.relativeOffset-2,v+=B,v+=(N-C)*2,b=Be.getUShort(r,v),b!==0&&(b=b+w&65535)):b=N+w&65535,a.glyphIndexMap[N]=b}function Ly(a,t){var r={};r.version=Be.getUShort(a,t),ke.argument(r.version===0,"cmap table version should be 0."),r.numTables=Be.getUShort(a,t+2);for(var l=-1,o=r.numTables-1;o>=0;o-=1){var u=Be.getUShort(a,t+4+o*8),f=Be.getUShort(a,t+4+o*8+2);if(u===3&&(f===0||f===1||f===10)||u===0&&(f===0||f===1||f===2||f===3||f===4)){l=Be.getULong(a,t+4+o*8+4);break}}if(l===-1)throw new Error("No valid cmap sub-tables found.");var p=new Be.Parser(a,t+l);if(r.format=p.parseUShort(),r.format===12)_y(r,p);else if(r.format===4)Uy(r,p,a,t,l);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+r.format+").");return r}function ky(a,t,r){a.segments.push({end:t,start:t,delta:-(t-r),offset:0,glyphIndex:r})}function Iy(a){a.segments.push({end:65535,start:65535,delta:1,offset:0})}function By(a){var t=!0,r;for(r=a.length-1;r>0;r-=1){var l=a.get(r);if(l.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),t=!1;break}}var o=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:t?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:t?12:20}];t||(o=o.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),o=o.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var u=new be.Table("cmap",o);for(u.segments=[],r=0;r<a.length;r+=1){for(var f=a.get(r),p=0;p<f.unicodes.length;p+=1)ky(u,f.unicodes[p],r);u.segments=u.segments.sort(function(q,_){return q.start-_.start})}Iy(u);var h=u.segments.length,m=0,v=[],x=[],b=[],E=[],C=[],w=[];for(r=0;r<h;r+=1){var B=u.segments[r];B.end<=65535&&B.start<=65535?(v=v.concat({name:"end_"+r,type:"USHORT",value:B.end}),x=x.concat({name:"start_"+r,type:"USHORT",value:B.start}),b=b.concat({name:"idDelta_"+r,type:"SHORT",value:B.delta}),E=E.concat({name:"idRangeOffset_"+r,type:"USHORT",value:B.offset}),B.glyphId!==void 0&&(C=C.concat({name:"glyph_"+r,type:"USHORT",value:B.glyphId}))):m+=1,!t&&B.glyphIndex!==void 0&&(w=w.concat({name:"cmap12Start_"+r,type:"ULONG",value:B.start}),w=w.concat({name:"cmap12End_"+r,type:"ULONG",value:B.end}),w=w.concat({name:"cmap12Glyph_"+r,type:"ULONG",value:B.glyphIndex}))}if(u.segCountX2=(h-m)*2,u.searchRange=Math.pow(2,Math.floor(Math.log(h-m)/Math.log(2)))*2,u.entrySelector=Math.log(u.searchRange/2)/Math.log(2),u.rangeShift=u.segCountX2-u.searchRange,u.fields=u.fields.concat(v),u.fields.push({name:"reservedPad",type:"USHORT",value:0}),u.fields=u.fields.concat(x),u.fields=u.fields.concat(b),u.fields=u.fields.concat(E),u.fields=u.fields.concat(C),u.cmap4Length=14+v.length*2+2+x.length*2+b.length*2+E.length*2+C.length*2,!t){var N=16+w.length*4;u.cmap12Offset=20+u.cmap4Length,u.fields=u.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:N},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:w.length/3}]),u.fields=u.fields.concat(w)}return u}var Fy={parse:Ly,make:By},$s=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Gy=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],jy=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Rp=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function Nm(a){this.font=a}Nm.prototype.charToGlyphIndex=function(a){var t=a.codePointAt(0),r=this.font.glyphs;if(r){for(var l=0;l<r.length;l+=1)for(var o=r.get(l),u=0;u<o.unicodes.length;u+=1)if(o.unicodes[u]===t)return l}return null};function lo(a,t){this.encoding=a,this.charset=t}lo.prototype.charToGlyphIndex=function(a){var t=a.codePointAt(0),r=this.encoding[t];return this.charset.indexOf(r)};function zy(a,t,r,l,o){a.beginPath(),a.moveTo(t,r),a.lineTo(l,o),a.stroke()}var Dr={line:zy};function Hy(a,t){var r=t||new Pt;return{configurable:!0,get:function(){return typeof r=="function"&&(r=r()),r},set:function(l){r=l}}}function Gn(a){this.bindConstructorValues(a)}Gn.prototype.bindConstructorValues=function(a){this.index=a.index||0,this.name=a.name||null,this.unicode=a.unicode||void 0,this.unicodes=a.unicodes||a.unicode!==void 0?[a.unicode]:[],"xMin"in a&&(this.xMin=a.xMin),"yMin"in a&&(this.yMin=a.yMin),"xMax"in a&&(this.xMax=a.xMax),"yMax"in a&&(this.yMax=a.yMax),"advanceWidth"in a&&(this.advanceWidth=a.advanceWidth),Object.defineProperty(this,"path",Hy(this,a.path))};Gn.prototype.addUnicode=function(a){this.unicodes.length===0&&(this.unicode=a),this.unicodes.push(a)};Gn.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};Gn.prototype.getPath=function(a,t,r,l,o){a=a!==void 0?a:0,t=t!==void 0?t:0,r=r!==void 0?r:72;var u,f;l||(l={});var p=l.xScale,h=l.yScale;if(l.hinting&&o&&o.hinting&&(f=this.path&&o.hinting.exec(this,r)),f)u=o.hinting.getCommands(f),a=Math.round(a),t=Math.round(t),p=h=1;else{u=this.path.commands;var m=1/(this.path.unitsPerEm||1e3)*r;p===void 0&&(p=m),h===void 0&&(h=m)}for(var v=new Pt,x=0;x<u.length;x+=1){var b=u[x];b.type==="M"?v.moveTo(a+b.x*p,t+-b.y*h):b.type==="L"?v.lineTo(a+b.x*p,t+-b.y*h):b.type==="Q"?v.quadraticCurveTo(a+b.x1*p,t+-b.y1*h,a+b.x*p,t+-b.y*h):b.type==="C"?v.curveTo(a+b.x1*p,t+-b.y1*h,a+b.x2*p,t+-b.y2*h,a+b.x*p,t+-b.y*h):b.type==="Z"&&v.closePath()}return v};Gn.prototype.getContours=function(){if(this.points===void 0)return[];for(var a=[],t=[],r=0;r<this.points.length;r+=1){var l=this.points[r];t.push(l),l.lastPointOfContour&&(a.push(t),t=[])}return ke.argument(t.length===0,"There are still points left in the current contour."),a};Gn.prototype.getMetrics=function(){for(var a=this.path.commands,t=[],r=[],l=0;l<a.length;l+=1){var o=a[l];o.type!=="Z"&&(t.push(o.x),r.push(o.y)),(o.type==="Q"||o.type==="C")&&(t.push(o.x1),r.push(o.y1)),o.type==="C"&&(t.push(o.x2),r.push(o.y2))}var u={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:this.leftSideBearing};return isFinite(u.xMin)||(u.xMin=0),isFinite(u.xMax)||(u.xMax=this.advanceWidth),isFinite(u.yMin)||(u.yMin=0),isFinite(u.yMax)||(u.yMax=0),u.rightSideBearing=this.advanceWidth-u.leftSideBearing-(u.xMax-u.xMin),u};Gn.prototype.draw=function(a,t,r,l,o){this.getPath(t,r,l,o).draw(a)};Gn.prototype.drawPoints=function(a,t,r,l){function o(x,b,E,C){a.beginPath();for(var w=0;w<x.length;w+=1)a.moveTo(b+x[w].x*C,E+x[w].y*C),a.arc(b+x[w].x*C,E+x[w].y*C,2,0,Math.PI*2,!1);a.closePath(),a.fill()}t=t!==void 0?t:0,r=r!==void 0?r:0,l=l!==void 0?l:24;for(var u=1/this.path.unitsPerEm*l,f=[],p=[],h=this.path,m=0;m<h.commands.length;m+=1){var v=h.commands[m];v.x!==void 0&&f.push({x:v.x,y:-v.y}),v.x1!==void 0&&p.push({x:v.x1,y:-v.y1}),v.x2!==void 0&&p.push({x:v.x2,y:-v.y2})}a.fillStyle="blue",o(f,t,r,u),a.fillStyle="red",o(p,t,r,u)};Gn.prototype.drawMetrics=function(a,t,r,l){var o;t=t!==void 0?t:0,r=r!==void 0?r:0,l=l!==void 0?l:24,o=1/this.path.unitsPerEm*l,a.lineWidth=1,a.strokeStyle="black",Dr.line(a,t,-1e4,t,1e4),Dr.line(a,-1e4,r,1e4,r);var u=this.xMin||0,f=this.yMin||0,p=this.xMax||0,h=this.yMax||0,m=this.advanceWidth||0;a.strokeStyle="blue",Dr.line(a,t+u*o,-1e4,t+u*o,1e4),Dr.line(a,t+p*o,-1e4,t+p*o,1e4),Dr.line(a,-1e4,r+-f*o,1e4,r+-f*o),Dr.line(a,-1e4,r+-h*o,1e4,r+-h*o),a.strokeStyle="green",Dr.line(a,t+m*o,-1e4,t+m*o,1e4)};function Qs(a,t,r){Object.defineProperty(a,t,{get:function(){return a.path,a[r]},set:function(l){a[r]=l},enumerable:!0,configurable:!0})}function Bc(a,t){if(this.font=a,this.glyphs={},Array.isArray(t))for(var r=0;r<t.length;r++){var l=t[r];l.path.unitsPerEm=a.unitsPerEm,this.glyphs[r]=l}this.length=t&&t.length||0}Bc.prototype.get=function(a){if(this.glyphs[a]===void 0){this.font._push(a),typeof this.glyphs[a]=="function"&&(this.glyphs[a]=this.glyphs[a]());var t=this.glyphs[a],r=this.font._IndexToUnicodeMap[a];if(r)for(var l=0;l<r.unicodes.length;l++)t.addUnicode(r.unicodes[l]);this.font.cffEncoding?this.font.isCIDFont?t.name="gid"+a:t.name=this.font.cffEncoding.charset[a]:this.font.glyphNames.names&&(t.name=this.font.glyphNames.glyphIndexToName(a)),this.glyphs[a].advanceWidth=this.font._hmtxTableData[a].advanceWidth,this.glyphs[a].leftSideBearing=this.font._hmtxTableData[a].leftSideBearing}else typeof this.glyphs[a]=="function"&&(this.glyphs[a]=this.glyphs[a]());return this.glyphs[a]};Bc.prototype.push=function(a,t){this.glyphs[a]=t,this.length++};function Py(a,t){return new Gn({index:t,font:a})}function Yy(a,t,r,l,o,u){return function(){var f=new Gn({index:t,font:a});return f.path=function(){r(f,l,o);var p=u(a.glyphs,f);return p.unitsPerEm=a.unitsPerEm,p},Qs(f,"xMin","_xMin"),Qs(f,"xMax","_xMax"),Qs(f,"yMin","_yMin"),Qs(f,"yMax","_yMax"),f}}function qy(a,t,r,l){return function(){var o=new Gn({index:t,font:a});return o.path=function(){var u=r(a,o,l);return u.unitsPerEm=a.unitsPerEm,u},o}}var sa={GlyphSet:Bc,glyphLoader:Py,ttfGlyphLoader:Yy,cffGlyphLoader:qy};function Mm(a,t){if(a===t)return!0;if(Array.isArray(a)&&Array.isArray(t)){if(a.length!==t.length)return!1;for(var r=0;r<a.length;r+=1)if(!Mm(a[r],t[r]))return!1;return!0}else return!1}function Rc(a){var t;return a.length<1240?t=107:a.length<33900?t=1131:t=32768,t}function ar(a,t,r){var l=[],o=[],u=Be.getCard16(a,t),f,p;if(u!==0){var h=Be.getByte(a,t+2);f=t+(u+1)*h+2;for(var m=t+3,v=0;v<u+1;v+=1)l.push(Be.getOffset(a,m,h)),m+=h;p=f+l[u]}else p=t+2;for(var x=0;x<l.length-1;x+=1){var b=Be.getBytes(a,f+l[x],f+l[x+1]);r&&(b=r(b)),o.push(b)}return{objects:o,startOffset:t,endOffset:p}}function Vy(a,t){var r=[],l=Be.getCard16(a,t),o,u;if(l!==0){var f=Be.getByte(a,t+2);o=t+(l+1)*f+2;for(var p=t+3,h=0;h<l+1;h+=1)r.push(Be.getOffset(a,p,f)),p+=f;u=o+r[l]}else u=t+2;return{offsets:r,startOffset:t,endOffset:u}}function Xy(a,t,r,l,o){var u=Be.getCard16(r,l),f=0;if(u!==0){var p=Be.getByte(r,l+2);f=l+(u+1)*p+2}var h=Be.getBytes(r,f+t[a],f+t[a+1]);return h}function Zy(a){for(var t="",r=15,l=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var o=a.parseByte(),u=o>>4,f=o&15;if(u===r||(t+=l[u],f===r))break;t+=l[f]}return parseFloat(t)}function Qy(a,t){var r,l,o,u;if(t===28)return r=a.parseByte(),l=a.parseByte(),r<<8|l;if(t===29)return r=a.parseByte(),l=a.parseByte(),o=a.parseByte(),u=a.parseByte(),r<<24|l<<16|o<<8|u;if(t===30)return Zy(a);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return r=a.parseByte(),(t-247)*256+r+108;if(t>=251&&t<=254)return r=a.parseByte(),-(t-251)*256-r-108;throw new Error("Invalid b0 "+t)}function Ky(a){for(var t={},r=0;r<a.length;r+=1){var l=a[r][0],o=a[r][1],u=void 0;if(o.length===1?u=o[0]:u=o,t.hasOwnProperty(l)&&!isNaN(t[l]))throw new Error("Object "+t+" already has key "+l);t[l]=u}return t}function wm(a,t,r){t=t!==void 0?t:0;var l=new Be.Parser(a,t),o=[],u=[];for(r=r!==void 0?r:a.length;l.relativeOffset<r;){var f=l.parseByte();f<=21?(f===12&&(f=1200+l.parseByte()),o.push([f,u]),u=[]):u.push(Qy(l,f))}return Ky(o)}function Ml(a,t){return t<=390?t=$s[t]:t=a[t-391],t}function Rm(a,t,r){for(var l={},o,u=0;u<t.length;u+=1){var f=t[u];if(Array.isArray(f.type)){var p=[];p.length=f.type.length;for(var h=0;h<f.type.length;h++)o=a[f.op]!==void 0?a[f.op][h]:void 0,o===void 0&&(o=f.value!==void 0&&f.value[h]!==void 0?f.value[h]:null),f.type[h]==="SID"&&(o=Ml(r,o)),p[h]=o;l[f.name]=p}else o=a[f.op],o===void 0&&(o=f.value!==void 0?f.value:null),f.type==="SID"&&(o=Ml(r,o)),l[f.name]=o}return l}function Wy(a,t){var r={};return r.formatMajor=Be.getCard8(a,t),r.formatMinor=Be.getCard8(a,t+1),r.size=Be.getCard8(a,t+2),r.offsetSize=Be.getCard8(a,t+3),r.startOffset=t,r.endOffset=t+4,r}var Om=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Dm=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Jy(a,t){var r=wm(a,0,a.byteLength);return Rm(r,Om,t)}function _m(a,t,r,l){var o=wm(a,t,r);return Rm(o,Dm,l)}function Op(a,t,r,l){for(var o=[],u=0;u<r.length;u+=1){var f=new DataView(new Uint8Array(r[u]).buffer),p=Jy(f,l);p._subrs=[],p._subrsBias=0,p._defaultWidthX=0,p._nominalWidthX=0;var h=p.private[0],m=p.private[1];if(h!==0&&m!==0){var v=_m(a,m+t,h,l);if(p._defaultWidthX=v.defaultWidthX,p._nominalWidthX=v.nominalWidthX,v.subrs!==0){var x=m+v.subrs,b=ar(a,x+t);p._subrs=b.objects,p._subrsBias=Rc(p._subrs)}p._privateDict=v}o.push(p)}return o}function $y(a,t,r,l){var o,u,f=new Be.Parser(a,t);r-=1;var p=[".notdef"],h=f.parseCard8();if(h===0)for(var m=0;m<r;m+=1)o=f.parseSID(),p.push(Ml(l,o));else if(h===1)for(;p.length<=r;){o=f.parseSID(),u=f.parseCard8();for(var v=0;v<=u;v+=1)p.push(Ml(l,o)),o+=1}else if(h===2)for(;p.length<=r;){o=f.parseSID(),u=f.parseCard16();for(var x=0;x<=u;x+=1)p.push(Ml(l,o)),o+=1}else throw new Error("Unknown charset format "+h);return p}function e1(a,t,r){var l,o={},u=new Be.Parser(a,t),f=u.parseCard8();if(f===0)for(var p=u.parseCard8(),h=0;h<p;h+=1)l=u.parseCard8(),o[l]=h;else if(f===1){var m=u.parseCard8();l=1;for(var v=0;v<m;v+=1)for(var x=u.parseCard8(),b=u.parseCard8(),E=x;E<=x+b;E+=1)o[E]=l,l+=1}else throw new Error("Unknown encoding format "+f);return new lo(o,r)}function Dp(a,t,r){var l,o,u,f,p=new Pt,h=[],m=0,v=!1,x=!1,b=0,E=0,C,w,B,N;if(a.isCIDFont){var q=a.tables.cff.topDict._fdSelect[t.index],_=a.tables.cff.topDict._fdArray[q];C=_._subrs,w=_._subrsBias,B=_._defaultWidthX,N=_._nominalWidthX}else C=a.tables.cff.topDict._subrs,w=a.tables.cff.topDict._subrsBias,B=a.tables.cff.topDict._defaultWidthX,N=a.tables.cff.topDict._nominalWidthX;var Y=B;function K(Se,$){x&&p.closePath(),p.moveTo(Se,$),x=!0}function ce(){var Se;Se=h.length%2!==0,Se&&!v&&(Y=h.shift()+N),m+=h.length>>1,h.length=0,v=!0}function xe(Se){for(var $,ae,ne,oe,he,ve,X,R,z,L,ue,T,G=0;G<Se.length;){var re=Se[G];switch(G+=1,re){case 1:ce();break;case 3:ce();break;case 4:h.length>1&&!v&&(Y=h.shift()+N,v=!0),E+=h.pop(),K(b,E);break;case 5:for(;h.length>0;)b+=h.shift(),E+=h.shift(),p.lineTo(b,E);break;case 6:for(;h.length>0&&(b+=h.shift(),p.lineTo(b,E),h.length!==0);)E+=h.shift(),p.lineTo(b,E);break;case 7:for(;h.length>0&&(E+=h.shift(),p.lineTo(b,E),h.length!==0);)b+=h.shift(),p.lineTo(b,E);break;case 8:for(;h.length>0;)l=b+h.shift(),o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),b=u+h.shift(),E=f+h.shift(),p.curveTo(l,o,u,f,b,E);break;case 10:he=h.pop()+w,ve=C[he],ve&&xe(ve);break;case 11:return;case 12:switch(re=Se[G],G+=1,re){case 35:l=b+h.shift(),o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),X=u+h.shift(),R=f+h.shift(),z=X+h.shift(),L=R+h.shift(),ue=z+h.shift(),T=L+h.shift(),b=ue+h.shift(),E=T+h.shift(),h.shift(),p.curveTo(l,o,u,f,X,R),p.curveTo(z,L,ue,T,b,E);break;case 34:l=b+h.shift(),o=E,u=l+h.shift(),f=o+h.shift(),X=u+h.shift(),R=f,z=X+h.shift(),L=f,ue=z+h.shift(),T=E,b=ue+h.shift(),p.curveTo(l,o,u,f,X,R),p.curveTo(z,L,ue,T,b,E);break;case 36:l=b+h.shift(),o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),X=u+h.shift(),R=f,z=X+h.shift(),L=f,ue=z+h.shift(),T=L+h.shift(),b=ue+h.shift(),p.curveTo(l,o,u,f,X,R),p.curveTo(z,L,ue,T,b,E);break;case 37:l=b+h.shift(),o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),X=u+h.shift(),R=f+h.shift(),z=X+h.shift(),L=R+h.shift(),ue=z+h.shift(),T=L+h.shift(),Math.abs(ue-b)>Math.abs(T-E)?b=ue+h.shift():E=T+h.shift(),p.curveTo(l,o,u,f,X,R),p.curveTo(z,L,ue,T,b,E);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+re),h.length=0}break;case 14:h.length>0&&!v&&(Y=h.shift()+N,v=!0),x&&(p.closePath(),x=!1);break;case 18:ce();break;case 19:case 20:ce(),G+=m+7>>3;break;case 21:h.length>2&&!v&&(Y=h.shift()+N,v=!0),E+=h.pop(),b+=h.pop(),K(b,E);break;case 22:h.length>1&&!v&&(Y=h.shift()+N,v=!0),b+=h.pop(),K(b,E);break;case 23:ce();break;case 24:for(;h.length>2;)l=b+h.shift(),o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),b=u+h.shift(),E=f+h.shift(),p.curveTo(l,o,u,f,b,E);b+=h.shift(),E+=h.shift(),p.lineTo(b,E);break;case 25:for(;h.length>6;)b+=h.shift(),E+=h.shift(),p.lineTo(b,E);l=b+h.shift(),o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),b=u+h.shift(),E=f+h.shift(),p.curveTo(l,o,u,f,b,E);break;case 26:for(h.length%2&&(b+=h.shift());h.length>0;)l=b,o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),b=u,E=f+h.shift(),p.curveTo(l,o,u,f,b,E);break;case 27:for(h.length%2&&(E+=h.shift());h.length>0;)l=b+h.shift(),o=E,u=l+h.shift(),f=o+h.shift(),b=u+h.shift(),E=f,p.curveTo(l,o,u,f,b,E);break;case 28:$=Se[G],ae=Se[G+1],h.push(($<<24|ae<<16)>>16),G+=2;break;case 29:he=h.pop()+a.gsubrsBias,ve=a.gsubrs[he],ve&&xe(ve);break;case 30:for(;h.length>0&&(l=b,o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),b=u+h.shift(),E=f+(h.length===1?h.shift():0),p.curveTo(l,o,u,f,b,E),h.length!==0);)l=b+h.shift(),o=E,u=l+h.shift(),f=o+h.shift(),E=f+h.shift(),b=u+(h.length===1?h.shift():0),p.curveTo(l,o,u,f,b,E);break;case 31:for(;h.length>0&&(l=b+h.shift(),o=E,u=l+h.shift(),f=o+h.shift(),E=f+h.shift(),b=u+(h.length===1?h.shift():0),p.curveTo(l,o,u,f,b,E),h.length!==0);)l=b,o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),b=u+h.shift(),E=f+(h.length===1?h.shift():0),p.curveTo(l,o,u,f,b,E);break;default:re<32?console.log("Glyph "+t.index+": unknown operator "+re):re<247?h.push(re-139):re<251?($=Se[G],G+=1,h.push((re-247)*256+$+108)):re<255?($=Se[G],G+=1,h.push(-(re-251)*256-$-108)):($=Se[G],ae=Se[G+1],ne=Se[G+2],oe=Se[G+3],G+=4,h.push(($<<24|ae<<16|ne<<8|oe)/65536))}}}return xe(r),t.advanceWidth=Y,p}function t1(a,t,r,l){var o=[],u,f=new Be.Parser(a,t),p=f.parseCard8();if(p===0)for(var h=0;h<r;h++){if(u=f.parseCard8(),u>=l)throw new Error("CFF table CID Font FDSelect has bad FD index value "+u+" (FD count "+l+")");o.push(u)}else if(p===3){var m=f.parseCard16(),v=f.parseCard16();if(v!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+v);for(var x,b=0;b<m;b++){if(u=f.parseCard8(),x=f.parseCard16(),u>=l)throw new Error("CFF table CID Font FDSelect has bad FD index value "+u+" (FD count "+l+")");if(x>r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+x);for(;v<x;v++)o.push(u);v=x}if(x!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+x)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+p);return o}function n1(a,t,r,l){r.tables.cff={};var o=Wy(a,t),u=ar(a,o.endOffset,Be.bytesToString),f=ar(a,u.endOffset),p=ar(a,f.endOffset,Be.bytesToString),h=ar(a,p.endOffset);r.gsubrs=h.objects,r.gsubrsBias=Rc(r.gsubrs);var m=Op(a,t,f.objects,p.objects);if(m.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+m.length);var v=m[0];if(r.tables.cff.topDict=v,v._privateDict&&(r.defaultWidthX=v._privateDict.defaultWidthX,r.nominalWidthX=v._privateDict.nominalWidthX),v.ros[0]!==void 0&&v.ros[1]!==void 0&&(r.isCIDFont=!0),r.isCIDFont){var x=v.fdArray,b=v.fdSelect;if(x===0||b===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");x+=t;var E=ar(a,x),C=Op(a,t,E.objects,p.objects);v._fdArray=C,b+=t,v._fdSelect=t1(a,b,r.numGlyphs,C.length)}var w=t+v.private[1],B=_m(a,w,v.private[0],p.objects);if(r.defaultWidthX=B.defaultWidthX,r.nominalWidthX=B.nominalWidthX,B.subrs!==0){var N=w+B.subrs,q=ar(a,N);r.subrs=q.objects,r.subrsBias=Rc(r.subrs)}else r.subrs=[],r.subrsBias=0;var _;l.lowMemory?(_=Vy(a,t+v.charStrings),r.nGlyphs=_.offsets.length):(_=ar(a,t+v.charStrings),r.nGlyphs=_.objects.length);var Y=$y(a,t+v.charset,r.nGlyphs,p.objects);if(v.encoding===0?r.cffEncoding=new lo(Gy,Y):v.encoding===1?r.cffEncoding=new lo(jy,Y):r.cffEncoding=e1(a,t+v.encoding,Y),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new sa.GlyphSet(r),l.lowMemory)r._push=function(xe){var Se=Xy(xe,_.offsets,a,t+v.charStrings);r.glyphs.push(xe,sa.cffGlyphLoader(r,xe,Dp,Se))};else for(var K=0;K<r.nGlyphs;K+=1){var ce=_.objects[K];r.glyphs.push(K,sa.cffGlyphLoader(r,K,Dp,ce))}}function Um(a,t){var r,l=$s.indexOf(a);return l>=0&&(r=l),l=t.indexOf(a),l>=0?r=l+$s.length:(r=$s.length+t.length,t.push(a)),r}function a1(){return new be.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function r1(a){var t=new be.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<a.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:a[r]});return t}function Lm(a,t,r){for(var l={},o=0;o<a.length;o+=1){var u=a[o],f=t[u.name];f!==void 0&&!Mm(f,u.value)&&(u.type==="SID"&&(f=Um(f,r)),l[u.op]={name:u.name,type:u.type,value:f})}return l}function _p(a,t){var r=new be.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=Lm(Om,a,t),r}function Up(a){var t=new be.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:a}],t}function i1(a){var t=new be.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<a.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:a[r]});return t}function l1(){return new be.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function s1(a,t){for(var r=new be.Record("Charsets",[{name:"format",type:"Card8",value:0}]),l=0;l<a.length;l+=1){var o=a[l],u=Um(o,t);r.fields.push({name:"glyph_"+l,type:"SID",value:u})}return r}function o1(a){var t=[],r=a.path;t.push({name:"width",type:"NUMBER",value:a.advanceWidth});for(var l=0,o=0,u=0;u<r.commands.length;u+=1){var f=void 0,p=void 0,h=r.commands[u];if(h.type==="Q"){var m=.3333333333333333,v=2/3;h={type:"C",x:h.x,y:h.y,x1:Math.round(m*l+v*h.x1),y1:Math.round(m*o+v*h.y1),x2:Math.round(m*h.x+v*h.x1),y2:Math.round(m*h.y+v*h.y1)}}if(h.type==="M")f=Math.round(h.x-l),p=Math.round(h.y-o),t.push({name:"dx",type:"NUMBER",value:f}),t.push({name:"dy",type:"NUMBER",value:p}),t.push({name:"rmoveto",type:"OP",value:21}),l=Math.round(h.x),o=Math.round(h.y);else if(h.type==="L")f=Math.round(h.x-l),p=Math.round(h.y-o),t.push({name:"dx",type:"NUMBER",value:f}),t.push({name:"dy",type:"NUMBER",value:p}),t.push({name:"rlineto",type:"OP",value:5}),l=Math.round(h.x),o=Math.round(h.y);else if(h.type==="C"){var x=Math.round(h.x1-l),b=Math.round(h.y1-o),E=Math.round(h.x2-h.x1),C=Math.round(h.y2-h.y1);f=Math.round(h.x-h.x2),p=Math.round(h.y-h.y2),t.push({name:"dx1",type:"NUMBER",value:x}),t.push({name:"dy1",type:"NUMBER",value:b}),t.push({name:"dx2",type:"NUMBER",value:E}),t.push({name:"dy2",type:"NUMBER",value:C}),t.push({name:"dx",type:"NUMBER",value:f}),t.push({name:"dy",type:"NUMBER",value:p}),t.push({name:"rrcurveto",type:"OP",value:8}),l=Math.round(h.x),o=Math.round(h.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}function u1(a){for(var t=new be.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<a.length;r+=1){var l=a.get(r),o=o1(l);t.charStrings.push({name:l.name,type:"CHARSTRING",value:o})}return t}function c1(a,t){var r=new be.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=Lm(Dm,a,t),r}function f1(a,t){for(var r=new be.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),l=1/t.unitsPerEm,o={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[l,0,0,l,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},u={},f=[],p,h=1;h<a.length;h+=1)p=a.get(h),f.push(p.name);var m=[];r.header=a1(),r.nameIndex=r1([t.postScriptName]);var v=_p(o,m);r.topDictIndex=Up(v),r.globalSubrIndex=l1(),r.charsets=s1(f,m),r.charStringsIndex=u1(a),r.privateDict=c1(u,m),r.stringIndex=i1(m);var x=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();return o.charset=x,o.encoding=0,o.charStrings=o.charset+r.charsets.sizeOf(),o.private[1]=o.charStrings+r.charStringsIndex.sizeOf(),v=_p(o,m),r.topDictIndex=Up(v),r}var d1={parse:n1,make:f1};function h1(a,t){var r={},l=new Be.Parser(a,t);return r.version=l.parseVersion(),r.fontRevision=Math.round(l.parseFixed()*1e3)/1e3,r.checkSumAdjustment=l.parseULong(),r.magicNumber=l.parseULong(),ke.argument(r.magicNumber===1594834165,"Font header has wrong magic number."),r.flags=l.parseUShort(),r.unitsPerEm=l.parseUShort(),r.created=l.parseLongDateTime(),r.modified=l.parseLongDateTime(),r.xMin=l.parseShort(),r.yMin=l.parseShort(),r.xMax=l.parseShort(),r.yMax=l.parseShort(),r.macStyle=l.parseUShort(),r.lowestRecPPEM=l.parseUShort(),r.fontDirectionHint=l.parseShort(),r.indexToLocFormat=l.parseShort(),r.glyphDataFormat=l.parseShort(),r}function p1(a){var t=Math.round(new Date().getTime()/1e3)+2082844800,r=t;return a.createdTimestamp&&(r=a.createdTimestamp+2082844800),new be.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],a)}var m1={parse:h1,make:p1};function v1(a,t){var r={},l=new Be.Parser(a,t);return r.version=l.parseVersion(),r.ascender=l.parseShort(),r.descender=l.parseShort(),r.lineGap=l.parseShort(),r.advanceWidthMax=l.parseUShort(),r.minLeftSideBearing=l.parseShort(),r.minRightSideBearing=l.parseShort(),r.xMaxExtent=l.parseShort(),r.caretSlopeRise=l.parseShort(),r.caretSlopeRun=l.parseShort(),r.caretOffset=l.parseShort(),l.relativeOffset+=8,r.metricDataFormat=l.parseShort(),r.numberOfHMetrics=l.parseUShort(),r}function g1(a){return new be.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],a)}var y1={parse:v1,make:g1};function b1(a,t,r,l,o){for(var u,f,p=new Be.Parser(a,t),h=0;h<l;h+=1){h<r&&(u=p.parseUShort(),f=p.parseShort());var m=o.get(h);m.advanceWidth=u,m.leftSideBearing=f}}function S1(a,t,r,l,o){a._hmtxTableData={};for(var u,f,p=new Be.Parser(t,r),h=0;h<o;h+=1)h<l&&(u=p.parseUShort(),f=p.parseShort()),a._hmtxTableData[h]={advanceWidth:u,leftSideBearing:f}}function x1(a,t,r,l,o,u,f){f.lowMemory?S1(a,t,r,l,o):b1(t,r,l,o,u)}function E1(a){for(var t=new be.Table("hmtx",[]),r=0;r<a.length;r+=1){var l=a.get(r),o=l.advanceWidth||0,u=l.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:o}),t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:u})}return t}var T1={parse:x1,make:E1};function A1(a){for(var t=new be.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:a.length}]),r="",l=12+a.length*4,o=0;o<a.length;++o){var u=r.indexOf(a[o]);u<0&&(u=r.length,r+=a[o]),t.fields.push({name:"offset "+o,type:"USHORT",value:l+u}),t.fields.push({name:"length "+o,type:"USHORT",value:a[o].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),t}function C1(a,t){var r=new Be.Parser(a,t),l=r.parseULong();ke.argument(l===1,"Unsupported ltag table version."),r.skip("uLong",1);for(var o=r.parseULong(),u=[],f=0;f<o;f++){for(var p="",h=t+r.parseUShort(),m=r.parseUShort(),v=h;v<h+m;++v)p+=String.fromCharCode(a.getInt8(v));u.push(p)}return u}var N1={make:A1,parse:C1};function M1(a,t){var r={},l=new Be.Parser(a,t);return r.version=l.parseVersion(),r.numGlyphs=l.parseUShort(),r.version===1&&(r.maxPoints=l.parseUShort(),r.maxContours=l.parseUShort(),r.maxCompositePoints=l.parseUShort(),r.maxCompositeContours=l.parseUShort(),r.maxZones=l.parseUShort(),r.maxTwilightPoints=l.parseUShort(),r.maxStorage=l.parseUShort(),r.maxFunctionDefs=l.parseUShort(),r.maxInstructionDefs=l.parseUShort(),r.maxStackElements=l.parseUShort(),r.maxSizeOfInstructions=l.parseUShort(),r.maxComponentElements=l.parseUShort(),r.maxComponentDepth=l.parseUShort()),r}function w1(a){return new be.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:a}])}var R1={parse:M1,make:w1},km=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Im={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},O1={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},Bm={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function D1(a,t,r){switch(a){case 0:if(t===65535)return"und";if(r)return r[t];break;case 1:return Im[t];case 3:return Bm[t]}}var Oc="utf-16",_1={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},U1={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function Fm(a,t,r){switch(a){case 0:return Oc;case 1:return U1[r]||_1[t];case 3:if(t===1||t===10)return Oc;break}}function L1(a,t,r){for(var l={},o=new Be.Parser(a,t),u=o.parseUShort(),f=o.parseUShort(),p=o.offset+o.parseUShort(),h=0;h<f;h++){var m=o.parseUShort(),v=o.parseUShort(),x=o.parseUShort(),b=o.parseUShort(),E=km[b]||b,C=o.parseUShort(),w=o.parseUShort(),B=D1(m,x,r),N=Fm(m,v,x);if(N!==void 0&&B!==void 0){var q=void 0;if(N===Oc?q=bi.UTF16(a,p+w,C):q=bi.MACSTRING(a,p+w,C,N),q){var _=l[E];_===void 0&&(_=l[E]={}),_[B]=q}}}return u===1&&o.parseUShort(),l}function gc(a){var t={};for(var r in a)t[a[r]]=parseInt(r);return t}function Lp(a,t,r,l,o,u){return new be.Record("NameRecord",[{name:"platformID",type:"USHORT",value:a},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:l},{name:"length",type:"USHORT",value:o},{name:"offset",type:"USHORT",value:u}])}function k1(a,t){var r=a.length,l=t.length-r+1;e:for(var o=0;o<l;o++)for(;o<l;o++){for(var u=0;u<r;u++)if(t[o+u]!==a[u])continue e;return o}return-1}function kp(a,t){var r=k1(a,t);if(r<0){r=t.length;for(var l=0,o=a.length;l<o;++l)t.push(a[l])}return r}function I1(a,t){var r,l=[],o={},u=gc(km);for(var f in a){var p=u[f];if(p===void 0&&(p=f),r=parseInt(p),isNaN(r))throw new Error('Name table entry "'+f+'" does not exist, see nameTableNames for complete list.');o[r]=a[f],l.push(r)}for(var h=gc(Im),m=gc(Bm),v=[],x=[],b=0;b<l.length;b++){r=l[b];var E=o[r];for(var C in E){var w=E[C],B=1,N=h[C],q=O1[N],_=Fm(B,q,N),Y=de.MACSTRING(w,_);Y===void 0&&(B=0,N=t.indexOf(C),N<0&&(N=t.length,t.push(C)),q=4,Y=de.UTF16(w));var K=kp(Y,x);v.push(Lp(B,q,N,r,Y.length,K));var ce=m[C];if(ce!==void 0){var xe=de.UTF16(w),Se=kp(xe,x);v.push(Lp(3,1,ce,r,xe.length,Se))}}}v.sort(function(ne,oe){return ne.platformID-oe.platformID||ne.encodingID-oe.encodingID||ne.languageID-oe.languageID||ne.nameID-oe.nameID});for(var $=new be.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:v.length},{name:"stringOffset",type:"USHORT",value:6+v.length*12}]),ae=0;ae<v.length;ae++)$.fields.push({name:"record_"+ae,type:"RECORD",value:v[ae]});return $.fields.push({name:"strings",type:"LITERAL",value:x}),$}var B1={parse:L1,make:I1},Dc=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function F1(a){for(var t=0;t<Dc.length;t+=1){var r=Dc[t];if(a>=r.begin&&a<r.end)return t}return-1}function G1(a,t){var r={},l=new Be.Parser(a,t);r.version=l.parseUShort(),r.xAvgCharWidth=l.parseShort(),r.usWeightClass=l.parseUShort(),r.usWidthClass=l.parseUShort(),r.fsType=l.parseUShort(),r.ySubscriptXSize=l.parseShort(),r.ySubscriptYSize=l.parseShort(),r.ySubscriptXOffset=l.parseShort(),r.ySubscriptYOffset=l.parseShort(),r.ySuperscriptXSize=l.parseShort(),r.ySuperscriptYSize=l.parseShort(),r.ySuperscriptXOffset=l.parseShort(),r.ySuperscriptYOffset=l.parseShort(),r.yStrikeoutSize=l.parseShort(),r.yStrikeoutPosition=l.parseShort(),r.sFamilyClass=l.parseShort(),r.panose=[];for(var o=0;o<10;o++)r.panose[o]=l.parseByte();return r.ulUnicodeRange1=l.parseULong(),r.ulUnicodeRange2=l.parseULong(),r.ulUnicodeRange3=l.parseULong(),r.ulUnicodeRange4=l.parseULong(),r.achVendID=String.fromCharCode(l.parseByte(),l.parseByte(),l.parseByte(),l.parseByte()),r.fsSelection=l.parseUShort(),r.usFirstCharIndex=l.parseUShort(),r.usLastCharIndex=l.parseUShort(),r.sTypoAscender=l.parseShort(),r.sTypoDescender=l.parseShort(),r.sTypoLineGap=l.parseShort(),r.usWinAscent=l.parseUShort(),r.usWinDescent=l.parseUShort(),r.version>=1&&(r.ulCodePageRange1=l.parseULong(),r.ulCodePageRange2=l.parseULong()),r.version>=2&&(r.sxHeight=l.parseShort(),r.sCapHeight=l.parseShort(),r.usDefaultChar=l.parseUShort(),r.usBreakChar=l.parseUShort(),r.usMaxContent=l.parseUShort()),r}function j1(a){return new be.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],a)}var Ip={parse:G1,make:j1,unicodeRanges:Dc,getUnicodeRange:F1};function z1(a,t){var r={},l=new Be.Parser(a,t);switch(r.version=l.parseVersion(),r.italicAngle=l.parseFixed(),r.underlinePosition=l.parseShort(),r.underlineThickness=l.parseShort(),r.isFixedPitch=l.parseULong(),r.minMemType42=l.parseULong(),r.maxMemType42=l.parseULong(),r.minMemType1=l.parseULong(),r.maxMemType1=l.parseULong(),r.version){case 1:r.names=Rp.slice();break;case 2:r.numberOfGlyphs=l.parseUShort(),r.glyphNameIndex=new Array(r.numberOfGlyphs);for(var o=0;o<r.numberOfGlyphs;o++)r.glyphNameIndex[o]=l.parseUShort();r.names=[];for(var u=0;u<r.numberOfGlyphs;u++)if(r.glyphNameIndex[u]>=Rp.length){var f=l.parseChar();r.names.push(l.parseString(f))}break;case 2.5:r.numberOfGlyphs=l.parseUShort(),r.offset=new Array(r.numberOfGlyphs);for(var p=0;p<r.numberOfGlyphs;p++)r.offset[p]=l.parseChar();break}return r}function H1(){return new be.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var P1={parse:z1,make:H1},Vn=new Array(9);Vn[1]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{substFormat:1,coverage:this.parsePointer(V.coverage),deltaGlyphId:this.parseUShort()};if(r===2)return{substFormat:2,coverage:this.parsePointer(V.coverage),substitute:this.parseOffset16List()};ke.assert(!1,"0x"+t.toString(16)+": lookup type 1 format must be 1 or 2.")};Vn[2]=function(){var t=this.parseUShort();return ke.argument(t===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(V.coverage),sequences:this.parseListOfLists()}};Vn[3]=function(){var t=this.parseUShort();return ke.argument(t===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(V.coverage),alternateSets:this.parseListOfLists()}};Vn[4]=function(){var t=this.parseUShort();return ke.argument(t===1,"GSUB ligature table identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(V.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var yi={sequenceIndex:V.uShort,lookupListIndex:V.uShort};Vn[5]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{substFormat:r,coverage:this.parsePointer(V.coverage),ruleSets:this.parseListOfLists(function(){var u=this.parseUShort(),f=this.parseUShort();return{input:this.parseUShortList(u-1),lookupRecords:this.parseRecordList(f,yi)}})};if(r===2)return{substFormat:r,coverage:this.parsePointer(V.coverage),classDef:this.parsePointer(V.classDef),classSets:this.parseListOfLists(function(){var u=this.parseUShort(),f=this.parseUShort();return{classes:this.parseUShortList(u-1),lookupRecords:this.parseRecordList(f,yi)}})};if(r===3){var l=this.parseUShort(),o=this.parseUShort();return{substFormat:r,coverages:this.parseList(l,V.pointer(V.coverage)),lookupRecords:this.parseRecordList(o,yi)}}ke.assert(!1,"0x"+t.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};Vn[6]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{substFormat:1,coverage:this.parsePointer(V.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(yi)}})};if(r===2)return{substFormat:2,coverage:this.parsePointer(V.coverage),backtrackClassDef:this.parsePointer(V.classDef),inputClassDef:this.parsePointer(V.classDef),lookaheadClassDef:this.parsePointer(V.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(yi)}})};if(r===3)return{substFormat:3,backtrackCoverage:this.parseList(V.pointer(V.coverage)),inputCoverage:this.parseList(V.pointer(V.coverage)),lookaheadCoverage:this.parseList(V.pointer(V.coverage)),lookupRecords:this.parseRecordList(yi)};ke.assert(!1,"0x"+t.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};Vn[7]=function(){var t=this.parseUShort();ke.argument(t===1,"GSUB Extension Substitution subtable identifier-format must be 1");var r=this.parseUShort(),l=new V(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:r,extension:Vn[r].call(l)}};Vn[8]=function(){var t=this.parseUShort();return ke.argument(t===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(V.coverage),backtrackCoverage:this.parseList(V.pointer(V.coverage)),lookaheadCoverage:this.parseList(V.pointer(V.coverage)),substitutes:this.parseUShortList()}};function Y1(a,t){t=t||0;var r=new V(a,t),l=r.parseVersion(1);return ke.argument(l===1||l===1.1,"Unsupported GSUB table version."),l===1?{version:l,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(Vn)}:{version:l,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(Vn),variations:r.parseFeatureVariationsList()}}var Si=new Array(9);Si[1]=function(t){return t.substFormat===1?new be.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new be.Coverage(t.coverage)},{name:"deltaGlyphID",type:"USHORT",value:t.deltaGlyphId}]):new be.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new be.Coverage(t.coverage)}].concat(be.ushortList("substitute",t.substitute)))};Si[2]=function(t){return ke.assert(t.substFormat===1,"Lookup type 2 substFormat must be 1."),new be.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new be.Coverage(t.coverage)}].concat(be.tableList("seqSet",t.sequences,function(r){return new be.Table("sequenceSetTable",be.ushortList("sequence",r))})))};Si[3]=function(t){return ke.assert(t.substFormat===1,"Lookup type 3 substFormat must be 1."),new be.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new be.Coverage(t.coverage)}].concat(be.tableList("altSet",t.alternateSets,function(r){return new be.Table("alternateSetTable",be.ushortList("alternate",r))})))};Si[4]=function(t){return ke.assert(t.substFormat===1,"Lookup type 4 substFormat must be 1."),new be.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new be.Coverage(t.coverage)}].concat(be.tableList("ligSet",t.ligatureSets,function(r){return new be.Table("ligatureSetTable",be.tableList("ligature",r,function(l){return new be.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:l.ligGlyph}].concat(be.ushortList("component",l.components,l.components.length+1)))}))})))};Si[6]=function(t){if(t.substFormat===1){var r=new be.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:t.substFormat},{name:"coverage",type:"TABLE",value:new be.Coverage(t.coverage)}].concat(be.tableList("chainRuleSet",t.chainRuleSets,function(u){return new be.Table("chainRuleSetTable",be.tableList("chainRule",u,function(f){var p=be.ushortList("backtrackGlyph",f.backtrack,f.backtrack.length).concat(be.ushortList("inputGlyph",f.input,f.input.length+1)).concat(be.ushortList("lookaheadGlyph",f.lookahead,f.lookahead.length)).concat(be.ushortList("substitution",[],f.lookupRecords.length));return f.lookupRecords.forEach(function(h,m){p=p.concat({name:"sequenceIndex"+m,type:"USHORT",value:h.sequenceIndex}).concat({name:"lookupListIndex"+m,type:"USHORT",value:h.lookupListIndex})}),new be.Table("chainRuleTable",p)}))})));return r}else if(t.substFormat===2)ke.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(t.substFormat===3){var l=[{name:"substFormat",type:"USHORT",value:t.substFormat}];l.push({name:"backtrackGlyphCount",type:"USHORT",value:t.backtrackCoverage.length}),t.backtrackCoverage.forEach(function(u,f){l.push({name:"backtrackCoverage"+f,type:"TABLE",value:new be.Coverage(u)})}),l.push({name:"inputGlyphCount",type:"USHORT",value:t.inputCoverage.length}),t.inputCoverage.forEach(function(u,f){l.push({name:"inputCoverage"+f,type:"TABLE",value:new be.Coverage(u)})}),l.push({name:"lookaheadGlyphCount",type:"USHORT",value:t.lookaheadCoverage.length}),t.lookaheadCoverage.forEach(function(u,f){l.push({name:"lookaheadCoverage"+f,type:"TABLE",value:new be.Coverage(u)})}),l.push({name:"substitutionCount",type:"USHORT",value:t.lookupRecords.length}),t.lookupRecords.forEach(function(u,f){l=l.concat({name:"sequenceIndex"+f,type:"USHORT",value:u.sequenceIndex}).concat({name:"lookupListIndex"+f,type:"USHORT",value:u.lookupListIndex})});var o=new be.Table("chainContextTable",l);return o}ke.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};function q1(a){return new be.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new be.ScriptList(a.scripts)},{name:"features",type:"TABLE",value:new be.FeatureList(a.features)},{name:"lookups",type:"TABLE",value:new be.LookupList(a.lookups,Si)}])}var V1={parse:Y1,make:q1};function X1(a,t){var r=new Be.Parser(a,t),l=r.parseULong();ke.argument(l===1,"Unsupported META table version."),r.parseULong(),r.parseULong();for(var o=r.parseULong(),u={},f=0;f<o;f++){var p=r.parseTag(),h=r.parseULong(),m=r.parseULong(),v=bi.UTF8(a,t+h,m);u[p]=v}return u}function Z1(a){var t=Object.keys(a).length,r="",l=16+t*12,o=new be.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:l},{name:"numTags",type:"ULONG",value:t}]);for(var u in a){var f=r.length;r+=a[u],o.fields.push({name:"tag "+u,type:"TAG",value:u}),o.fields.push({name:"offset "+u,type:"ULONG",value:l+f}),o.fields.push({name:"length "+u,type:"ULONG",value:a[u].length})}return o.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),o}var Q1={parse:X1,make:Z1};function Bp(a){return Math.log(a)/Math.log(2)|0}function Fc(a){for(;a.length%4!==0;)a.push(0);for(var t=0,r=0;r<a.length;r+=4)t+=(a[r]<<24)+(a[r+1]<<16)+(a[r+2]<<8)+a[r+3];return t%=Math.pow(2,32),t}function Fp(a,t,r,l){return new be.Record("Table Record",[{name:"tag",type:"TAG",value:a!==void 0?a:""},{name:"checkSum",type:"ULONG",value:t!==void 0?t:0},{name:"offset",type:"ULONG",value:r!==void 0?r:0},{name:"length",type:"ULONG",value:l!==void 0?l:0}])}function Gm(a){var t=new be.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=a,t.numTables=a.length;var r=Math.pow(2,Bp(t.numTables));t.searchRange=16*r,t.entrySelector=Bp(r),t.rangeShift=t.numTables*16-t.searchRange;for(var l=[],o=[],u=t.sizeOf()+Fp().sizeOf()*t.numTables;u%4!==0;)u+=1,o.push({name:"padding",type:"BYTE",value:0});for(var f=0;f<a.length;f+=1){var p=a[f];ke.argument(p.tableName.length===4,"Table name"+p.tableName+" is invalid.");var h=p.sizeOf(),m=Fp(p.tableName,Fc(p.encode()),u,h);for(l.push({name:m.tag+" Table Record",type:"RECORD",value:m}),o.push({name:p.tableName+" table",type:"RECORD",value:p}),u+=h,ke.argument(!isNaN(u),"Something went wrong calculating the offset.");u%4!==0;)u+=1,o.push({name:"padding",type:"BYTE",value:0})}return l.sort(function(v,x){return v.value.tag>x.value.tag?1:-1}),t.fields=t.fields.concat(l),t.fields=t.fields.concat(o),t}function Gp(a,t,r){for(var l=0;l<t.length;l+=1){var o=a.charToGlyphIndex(t[l]);if(o>0){var u=a.glyphs.get(o);return u.getMetrics()}}return r}function K1(a){for(var t=0,r=0;r<a.length;r+=1)t+=a[r];return t/a.length}function W1(a){for(var t=[],r=[],l=[],o=[],u=[],f=[],p=[],h,m=0,v=0,x=0,b=0,E=0,C=0;C<a.glyphs.length;C+=1){var w=a.glyphs.get(C),B=w.unicode|0;if(isNaN(w.advanceWidth))throw new Error("Glyph "+w.name+" ("+C+"): advanceWidth is not a number.");(h>B||h===void 0)&&B>0&&(h=B),m<B&&(m=B);var N=Ip.getUnicodeRange(B);if(N<32)v|=1<<N;else if(N<64)x|=1<<N-32;else if(N<96)b|=1<<N-64;else if(N<123)E|=1<<N-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(w.name!==".notdef"){var q=w.getMetrics();t.push(q.xMin),r.push(q.yMin),l.push(q.xMax),o.push(q.yMax),f.push(q.leftSideBearing),p.push(q.rightSideBearing),u.push(w.advanceWidth)}}var _={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,l),yMax:Math.max.apply(null,o),advanceWidthMax:Math.max.apply(null,u),advanceWidthAvg:K1(u),minLeftSideBearing:Math.min.apply(null,f),maxLeftSideBearing:Math.max.apply(null,f),minRightSideBearing:Math.min.apply(null,p)};_.ascender=a.ascender,_.descender=a.descender;var Y=m1.make({flags:3,unitsPerEm:a.unitsPerEm,xMin:_.xMin,yMin:_.yMin,xMax:_.xMax,yMax:_.yMax,lowestRecPPEM:3,createdTimestamp:a.createdTimestamp}),K=y1.make({ascender:_.ascender,descender:_.descender,advanceWidthMax:_.advanceWidthMax,minLeftSideBearing:_.minLeftSideBearing,minRightSideBearing:_.minRightSideBearing,xMaxExtent:_.maxLeftSideBearing+(_.xMax-_.xMin),numberOfHMetrics:a.glyphs.length}),ce=R1.make(a.glyphs.length),xe=Ip.make(Object.assign({xAvgCharWidth:Math.round(_.advanceWidthAvg),usFirstCharIndex:h,usLastCharIndex:m,ulUnicodeRange1:v,ulUnicodeRange2:x,ulUnicodeRange3:b,ulUnicodeRange4:E,sTypoAscender:_.ascender,sTypoDescender:_.descender,sTypoLineGap:0,usWinAscent:_.yMax,usWinDescent:Math.abs(_.yMin),ulCodePageRange1:1,sxHeight:Gp(a,"xyvw",{yMax:Math.round(_.ascender/2)}).yMax,sCapHeight:Gp(a,"HIKLEFJMNTZBDPRAGOQSUVWXY",_).yMax,usDefaultChar:a.hasChar(" ")?32:0,usBreakChar:a.hasChar(" ")?32:0},a.tables.os2)),Se=T1.make(a.glyphs),$=Fy.make(a.glyphs),ae=a.getEnglishName("fontFamily"),ne=a.getEnglishName("fontSubfamily"),oe=ae+" "+ne,he=a.getEnglishName("postScriptName");he||(he=ae.replace(/\s/g,"")+"-"+ne);var ve={};for(var X in a.names)ve[X]=a.names[X];ve.uniqueID||(ve.uniqueID={en:a.getEnglishName("manufacturer")+":"+oe}),ve.postScriptName||(ve.postScriptName={en:he}),ve.preferredFamily||(ve.preferredFamily=a.names.fontFamily),ve.preferredSubfamily||(ve.preferredSubfamily=a.names.fontSubfamily);var R=[],z=B1.make(ve,R),L=R.length>0?N1.make(R):void 0,ue=P1.make(),T=d1.make(a.glyphs,{version:a.getEnglishName("version"),fullName:oe,familyName:ae,weightName:ne,postScriptName:he,unitsPerEm:a.unitsPerEm,fontBBox:[0,_.yMin,_.ascender,_.advanceWidthMax]}),G=a.metas&&Object.keys(a.metas).length>0?Q1.make(a.metas):void 0,re=[Y,K,ce,xe,z,$,ue,T,Se];L&&re.push(L),a.tables.gsub&&re.push(V1.make(a.tables.gsub)),G&&re.push(G);for(var le=Gm(re),Te=le.encode(),Ie=Fc(Te),Ae=le.fields,dt=!1,ze=0;ze<Ae.length;ze+=1)if(Ae[ze].name==="head table"){Ae[ze].value.checkSumAdjustment=2981146554-Ie,dt=!0;break}if(!dt)throw new Error("Could not find head table with checkSum to adjust.");return le}var J1={make:Gm,fontToTable:W1,computeCheckSum:Fc};function yc(a,t){for(var r=0,l=a.length-1;r<=l;){var o=r+l>>>1,u=a[o].tag;if(u===t)return o;u<t?r=o+1:l=o-1}return-r-1}function jp(a,t){for(var r=0,l=a.length-1;r<=l;){var o=r+l>>>1,u=a[o];if(u===t)return o;u<t?r=o+1:l=o-1}return-r-1}function zp(a,t){for(var r,l=0,o=a.length-1;l<=o;){var u=l+o>>>1;r=a[u];var f=r.start;if(f===t)return r;f<t?l=u+1:o=u-1}if(l>0)return r=a[l-1],t>r.end?0:r}function _l(a,t){this.font=a,this.tableName=t}_l.prototype={searchTag:yc,binSearch:jp,getTable:function(a){var t=this.font.tables[this.tableName];return!t&&a&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var a=this.getTable();return a?a.scripts.map(function(t){return t.tag}):[]},getDefaultScriptName:function(){var a=this.getTable();if(a){for(var t=!1,r=0;r<a.scripts.length;r++){var l=a.scripts[r].tag;if(l==="DFLT")return l;l==="latn"&&(t=!0)}if(t)return"latn"}},getScriptTable:function(a,t){var r=this.getTable(t);if(r){a=a||"DFLT";var l=r.scripts,o=yc(r.scripts,a);if(o>=0)return l[o].script;if(t){var u={tag:a,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return l.splice(-1-o,0,u),u.script}}},getLangSysTable:function(a,t,r){var l=this.getScriptTable(a,r);if(l){if(!t||t==="dflt"||t==="DFLT")return l.defaultLangSys;var o=yc(l.langSysRecords,t);if(o>=0)return l.langSysRecords[o].langSys;if(r){var u={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return l.langSysRecords.splice(-1-o,0,u),u.langSys}}},getFeatureTable:function(a,t,r,l){var o=this.getLangSysTable(a,t,l);if(o){for(var u,f=o.featureIndexes,p=this.font.tables[this.tableName].features,h=0;h<f.length;h++)if(u=p[f[h]],u.tag===r)return u.feature;if(l){var m=p.length;return ke.assert(m===0||r>=p[m-1].tag,"Features must be added in alphabetical order."),u={tag:r,feature:{params:0,lookupListIndexes:[]}},p.push(u),f.push(m),u.feature}}},getLookupTables:function(a,t,r,l,o){var u=this.getFeatureTable(a,t,r,o),f=[];if(u){for(var p,h=u.lookupListIndexes,m=this.font.tables[this.tableName].lookups,v=0;v<h.length;v++)p=m[h[v]],p.lookupType===l&&f.push(p);if(f.length===0&&o){p={lookupType:l,lookupFlag:0,subtables:[],markFilteringSet:void 0};var x=m.length;return m.push(p),h.push(x),[p]}}return f},getGlyphClass:function(a,t){switch(a.format){case 1:return a.startGlyph<=t&&t<a.startGlyph+a.classes.length?a.classes[t-a.startGlyph]:0;case 2:var r=zp(a.ranges,t);return r?r.classId:0}},getCoverageIndex:function(a,t){switch(a.format){case 1:var r=jp(a.glyphs,t);return r>=0?r:-1;case 2:var l=zp(a.ranges,t);return l?l.index+t-l.start:-1}},expandCoverage:function(a){if(a.format===1)return a.glyphs;for(var t=[],r=a.ranges,l=0;l<r.length;l++)for(var o=r[l],u=o.start,f=o.end,p=u;p<=f;p++)t.push(p);return t}};function Ul(a){_l.call(this,a,"gpos")}Ul.prototype=_l.prototype;Ul.prototype.init=function(){var a=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(a)};Ul.prototype.getKerningValue=function(a,t,r){for(var l=0;l<a.length;l++)for(var o=a[l].subtables,u=0;u<o.length;u++){var f=o[u],p=this.getCoverageIndex(f.coverage,t);if(!(p<0))switch(f.posFormat){case 1:for(var h=f.pairSets[p],m=0;m<h.length;m++){var v=h[m];if(v.secondGlyph===r)return v.value1&&v.value1.xAdvance||0}break;case 2:var x=this.getGlyphClass(f.classDef1,t),b=this.getGlyphClass(f.classDef2,r),E=f.classRecords[x][b];return E.value1&&E.value1.xAdvance||0}}return 0};Ul.prototype.getKerningTables=function(a,t){if(this.font.tables.gpos)return this.getLookupTables(a,t,"kern",2)};function Tn(a){_l.call(this,a,"gsub")}function $1(a,t){var r=a.length;if(r!==t.length)return!1;for(var l=0;l<r;l++)if(a[l]!==t[l])return!1;return!0}function Gc(a,t,r){for(var l=a.subtables,o=0;o<l.length;o++){var u=l[o];if(u.substFormat===t)return u}if(r)return l.push(r),r}Tn.prototype=_l.prototype;Tn.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};Tn.prototype.getSingle=function(a,t,r){for(var l=[],o=this.getLookupTables(t,r,a,1),u=0;u<o.length;u++)for(var f=o[u].subtables,p=0;p<f.length;p++){var h=f[p],m=this.expandCoverage(h.coverage),v=void 0;if(h.substFormat===1){var x=h.deltaGlyphId;for(v=0;v<m.length;v++){var b=m[v];l.push({sub:b,by:b+x})}}else{var E=h.substitute;for(v=0;v<m.length;v++)l.push({sub:m[v],by:E[v]})}}return l};Tn.prototype.getMultiple=function(a,t,r){for(var l=[],o=this.getLookupTables(t,r,a,2),u=0;u<o.length;u++)for(var f=o[u].subtables,p=0;p<f.length;p++){var h=f[p],m=this.expandCoverage(h.coverage),v=void 0;for(v=0;v<m.length;v++){var x=m[v],b=h.sequences[v];l.push({sub:x,by:b})}}return l};Tn.prototype.getAlternates=function(a,t,r){for(var l=[],o=this.getLookupTables(t,r,a,3),u=0;u<o.length;u++)for(var f=o[u].subtables,p=0;p<f.length;p++)for(var h=f[p],m=this.expandCoverage(h.coverage),v=h.alternateSets,x=0;x<m.length;x++)l.push({sub:m[x],by:v[x]});return l};Tn.prototype.getLigatures=function(a,t,r){for(var l=[],o=this.getLookupTables(t,r,a,4),u=0;u<o.length;u++)for(var f=o[u].subtables,p=0;p<f.length;p++)for(var h=f[p],m=this.expandCoverage(h.coverage),v=h.ligatureSets,x=0;x<m.length;x++)for(var b=m[x],E=v[x],C=0;C<E.length;C++){var w=E[C];l.push({sub:[b].concat(w.components),by:w.ligGlyph})}return l};Tn.prototype.addSingle=function(a,t,r,l){var o=this.getLookupTables(r,l,a,1,!0)[0],u=Gc(o,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});ke.assert(u.coverage.format===1,"Single: unable to modify coverage table format "+u.coverage.format);var f=t.sub,p=this.binSearch(u.coverage.glyphs,f);p<0&&(p=-1-p,u.coverage.glyphs.splice(p,0,f),u.substitute.splice(p,0,0)),u.substitute[p]=t.by};Tn.prototype.addMultiple=function(a,t,r,l){ke.assert(t.by instanceof Array&&t.by.length>1,'Multiple: "by" must be an array of two or more ids');var o=this.getLookupTables(r,l,a,2,!0)[0],u=Gc(o,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});ke.assert(u.coverage.format===1,"Multiple: unable to modify coverage table format "+u.coverage.format);var f=t.sub,p=this.binSearch(u.coverage.glyphs,f);p<0&&(p=-1-p,u.coverage.glyphs.splice(p,0,f),u.sequences.splice(p,0,0)),u.sequences[p]=t.by};Tn.prototype.addAlternate=function(a,t,r,l){var o=this.getLookupTables(r,l,a,3,!0)[0],u=Gc(o,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});ke.assert(u.coverage.format===1,"Alternate: unable to modify coverage table format "+u.coverage.format);var f=t.sub,p=this.binSearch(u.coverage.glyphs,f);p<0&&(p=-1-p,u.coverage.glyphs.splice(p,0,f),u.alternateSets.splice(p,0,0)),u.alternateSets[p]=t.by};Tn.prototype.addLigature=function(a,t,r,l){var o=this.getLookupTables(r,l,a,4,!0)[0],u=o.subtables[0];u||(u={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},o.subtables[0]=u),ke.assert(u.coverage.format===1,"Ligature: unable to modify coverage table format "+u.coverage.format);var f=t.sub[0],p=t.sub.slice(1),h={ligGlyph:t.by,components:p},m=this.binSearch(u.coverage.glyphs,f);if(m>=0){for(var v=u.ligatureSets[m],x=0;x<v.length;x++)if($1(v[x].components,p))return;v.push(h)}else m=-1-m,u.coverage.glyphs.splice(m,0,f),u.ligatureSets.splice(m,0,[h])};Tn.prototype.getFeature=function(a,t,r){if(/ss\d\d/.test(a))return this.getSingle(a,t,r);switch(a){case"aalt":case"salt":return this.getSingle(a,t,r).concat(this.getAlternates(a,t,r));case"dlig":case"liga":case"rlig":return this.getLigatures(a,t,r);case"ccmp":return this.getMultiple(a,t,r).concat(this.getLigatures(a,t,r));case"stch":return this.getMultiple(a,t,r)}};Tn.prototype.add=function(a,t,r,l){if(/ss\d\d/.test(a))return this.addSingle(a,t,r,l);switch(a){case"aalt":case"salt":return typeof t.by=="number"?this.addSingle(a,t,r,l):this.addAlternate(a,t,r,l);case"dlig":case"liga":case"rlig":return this.addLigature(a,t,r,l);case"ccmp":return t.by instanceof Array?this.addMultiple(a,t,r,l):this.addLigature(a,t,r,l)}};function eb(){return typeof window<"u"}function tb(a){for(var t=new Buffer(a.byteLength),r=new Uint8Array(a),l=0;l<t.length;++l)t[l]=r[l];return t}function Nl(a,t){if(!a)throw t}function Hp(a,t,r,l,o){var u;return(t&l)>0?(u=a.parseByte(),(t&o)===0&&(u=-u),u=r+u):(t&o)>0?u=r:u=r+a.parseShort(),u}function jm(a,t,r){var l=new Be.Parser(t,r);a.numberOfContours=l.parseShort(),a._xMin=l.parseShort(),a._yMin=l.parseShort(),a._xMax=l.parseShort(),a._yMax=l.parseShort();var o,u;if(a.numberOfContours>0){for(var f=a.endPointIndices=[],p=0;p<a.numberOfContours;p+=1)f.push(l.parseUShort());a.instructionLength=l.parseUShort(),a.instructions=[];for(var h=0;h<a.instructionLength;h+=1)a.instructions.push(l.parseByte());var m=f[f.length-1]+1;o=[];for(var v=0;v<m;v+=1)if(u=l.parseByte(),o.push(u),(u&8)>0)for(var x=l.parseByte(),b=0;b<x;b+=1)o.push(u),v+=1;if(ke.argument(o.length===m,"Bad flags."),f.length>0){var E=[],C;if(m>0){for(var w=0;w<m;w+=1)u=o[w],C={},C.onCurve=!!(u&1),C.lastPointOfContour=f.indexOf(w)>=0,E.push(C);for(var B=0,N=0;N<m;N+=1)u=o[N],C=E[N],C.x=Hp(l,u,B,2,16),B=C.x;for(var q=0,_=0;_<m;_+=1)u=o[_],C=E[_],C.y=Hp(l,u,q,4,32),q=C.y}a.points=E}else a.points=[]}else if(a.numberOfContours===0)a.points=[];else{a.isComposite=!0,a.points=[],a.components=[];for(var Y=!0;Y;){o=l.parseUShort();var K={glyphIndex:l.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(o&1)>0?(o&2)>0?(K.dx=l.parseShort(),K.dy=l.parseShort()):K.matchedPoints=[l.parseUShort(),l.parseUShort()]:(o&2)>0?(K.dx=l.parseChar(),K.dy=l.parseChar()):K.matchedPoints=[l.parseByte(),l.parseByte()],(o&8)>0?K.xScale=K.yScale=l.parseF2Dot14():(o&64)>0?(K.xScale=l.parseF2Dot14(),K.yScale=l.parseF2Dot14()):(o&128)>0&&(K.xScale=l.parseF2Dot14(),K.scale01=l.parseF2Dot14(),K.scale10=l.parseF2Dot14(),K.yScale=l.parseF2Dot14()),a.components.push(K),Y=!!(o&32)}if(o&256){a.instructionLength=l.parseUShort(),a.instructions=[];for(var ce=0;ce<a.instructionLength;ce+=1)a.instructions.push(l.parseByte())}}}function bc(a,t){for(var r=[],l=0;l<a.length;l+=1){var o=a[l],u={x:t.xScale*o.x+t.scale01*o.y+t.dx,y:t.scale10*o.x+t.yScale*o.y+t.dy,onCurve:o.onCurve,lastPointOfContour:o.lastPointOfContour};r.push(u)}return r}function nb(a){for(var t=[],r=[],l=0;l<a.length;l+=1){var o=a[l];r.push(o),o.lastPointOfContour&&(t.push(r),r=[])}return ke.argument(r.length===0,"There are still points left in the current contour."),t}function zm(a){var t=new Pt;if(!a)return t;for(var r=nb(a),l=0;l<r.length;++l){var o=r[l],u=null,f=o[o.length-1],p=o[0];if(f.onCurve)t.moveTo(f.x,f.y);else if(p.onCurve)t.moveTo(p.x,p.y);else{var h={x:(f.x+p.x)*.5,y:(f.y+p.y)*.5};t.moveTo(h.x,h.y)}for(var m=0;m<o.length;++m)if(u=f,f=p,p=o[(m+1)%o.length],f.onCurve)t.lineTo(f.x,f.y);else{var v=p;u.onCurve||((f.x+u.x)*.5,(f.y+u.y)*.5),p.onCurve||(v={x:(f.x+p.x)*.5,y:(f.y+p.y)*.5}),t.quadraticCurveTo(f.x,f.y,v.x,v.y)}t.closePath()}return t}function Hm(a,t){if(t.isComposite)for(var r=0;r<t.components.length;r+=1){var l=t.components[r],o=a.get(l.glyphIndex);if(o.getPath(),o.points){var u=void 0;if(l.matchedPoints===void 0)u=bc(o.points,l);else{if(l.matchedPoints[0]>t.points.length-1||l.matchedPoints[1]>o.points.length-1)throw Error("Matched points out of range in "+t.name);var f=t.points[l.matchedPoints[0]],p=o.points[l.matchedPoints[1]],h={xScale:l.xScale,scale01:l.scale01,scale10:l.scale10,yScale:l.yScale,dx:0,dy:0};p=bc([p],h)[0],h.dx=f.x-p.x,h.dy=f.y-p.y,u=bc(o.points,h)}t.points=t.points.concat(u)}}return zm(t.points)}function ab(a,t,r,l){for(var o=new sa.GlyphSet(l),u=0;u<r.length-1;u+=1){var f=r[u],p=r[u+1];f!==p?o.push(u,sa.ttfGlyphLoader(l,u,jm,a,t+f,Hm)):o.push(u,sa.glyphLoader(l,u))}return o}function rb(a,t,r,l){var o=new sa.GlyphSet(l);return l._push=function(u){var f=r[u],p=r[u+1];f!==p?o.push(u,sa.ttfGlyphLoader(l,u,jm,a,t+f,Hm)):o.push(u,sa.glyphLoader(l,u))},o}function ib(a,t,r,l,o){return o.lowMemory?rb(a,t,r,l):ab(a,t,r,l)}var lb={getPath:zm,parse:ib},Pm,Ur,Ym,_c;function qm(a){this.font=a,this.getCommands=function(t){return lb.getPath(t).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function sb(a){return a}function Vm(a){return Math.sign(a)*Math.round(Math.abs(a))}function ob(a){return Math.sign(a)*Math.round(Math.abs(a*2))/2}function ub(a){return Math.sign(a)*(Math.round(Math.abs(a)+.5)-.5)}function cb(a){return Math.sign(a)*Math.ceil(Math.abs(a))}function fb(a){return Math.sign(a)*Math.floor(Math.abs(a))}var Xm=function(a){var t=this.srPeriod,r=this.srPhase,l=this.srThreshold,o=1;return a<0&&(a=-a,o=-1),a+=l-r,a=Math.trunc(a/t)*t,a+=r,a<0?r*o:a*o},la={x:1,y:0,axis:"x",distance:function(a,t,r,l){return(r?a.xo:a.x)-(l?t.xo:t.x)},interpolate:function(a,t,r,l){var o,u,f,p,h,m,v;if(!l||l===this){if(o=a.xo-t.xo,u=a.xo-r.xo,h=t.x-t.xo,m=r.x-r.xo,f=Math.abs(o),p=Math.abs(u),v=f+p,v===0){a.x=a.xo+(h+m)/2;return}a.x=a.xo+(h*p+m*f)/v;return}if(o=l.distance(a,t,!0,!0),u=l.distance(a,r,!0,!0),h=l.distance(t,t,!1,!0),m=l.distance(r,r,!1,!0),f=Math.abs(o),p=Math.abs(u),v=f+p,v===0){la.setRelative(a,a,(h+m)/2,l,!0);return}la.setRelative(a,a,(h*p+m*f)/v,l,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(a,t,r,l,o){if(!l||l===this){a.x=(o?t.xo:t.x)+r;return}var u=o?t.xo:t.x,f=o?t.yo:t.y,p=u+r*l.x,h=f+r*l.y;a.x=p+(a.y-h)/l.normalSlope},slope:0,touch:function(a){a.xTouched=!0},touched:function(a){return a.xTouched},untouch:function(a){a.xTouched=!1}},Ma={x:0,y:1,axis:"y",distance:function(a,t,r,l){return(r?a.yo:a.y)-(l?t.yo:t.y)},interpolate:function(a,t,r,l){var o,u,f,p,h,m,v;if(!l||l===this){if(o=a.yo-t.yo,u=a.yo-r.yo,h=t.y-t.yo,m=r.y-r.yo,f=Math.abs(o),p=Math.abs(u),v=f+p,v===0){a.y=a.yo+(h+m)/2;return}a.y=a.yo+(h*p+m*f)/v;return}if(o=l.distance(a,t,!0,!0),u=l.distance(a,r,!0,!0),h=l.distance(t,t,!1,!0),m=l.distance(r,r,!1,!0),f=Math.abs(o),p=Math.abs(u),v=f+p,v===0){Ma.setRelative(a,a,(h+m)/2,l,!0);return}Ma.setRelative(a,a,(h*p+m*f)/v,l,!0)},normalSlope:0,setRelative:function(a,t,r,l,o){if(!l||l===this){a.y=(o?t.yo:t.y)+r;return}var u=o?t.xo:t.x,f=o?t.yo:t.y,p=u+r*l.x,h=f+r*l.y;a.y=h+l.normalSlope*(a.x-p)},slope:Number.POSITIVE_INFINITY,touch:function(a){a.yTouched=!0},touched:function(a){return a.yTouched},untouch:function(a){a.yTouched=!1}};Object.freeze(la);Object.freeze(Ma);function Ll(a,t){this.x=a,this.y=t,this.axis=void 0,this.slope=t/a,this.normalSlope=-a/t,Object.freeze(this)}Ll.prototype.distance=function(a,t,r,l){return this.x*la.distance(a,t,r,l)+this.y*Ma.distance(a,t,r,l)};Ll.prototype.interpolate=function(a,t,r,l){var o,u,f,p,h,m,v;if(f=l.distance(a,t,!0,!0),p=l.distance(a,r,!0,!0),o=l.distance(t,t,!1,!0),u=l.distance(r,r,!1,!0),h=Math.abs(f),m=Math.abs(p),v=h+m,v===0){this.setRelative(a,a,(o+u)/2,l,!0);return}this.setRelative(a,a,(o*m+u*h)/v,l,!0)};Ll.prototype.setRelative=function(a,t,r,l,o){l=l||this;var u=o?t.xo:t.x,f=o?t.yo:t.y,p=u+r*l.x,h=f+r*l.y,m=l.normalSlope,v=this.slope,x=a.x,b=a.y;a.x=(v*x-m*p+h-b)/(v-m),a.y=v*(a.x-x)+b};Ll.prototype.touch=function(a){a.xTouched=!0,a.yTouched=!0};function kl(a,t){var r=Math.sqrt(a*a+t*t);return a/=r,t/=r,a===1&&t===0?la:a===0&&t===1?Ma:new Ll(a,t)}function wa(a,t,r,l){this.x=this.xo=Math.round(a*64)/64,this.y=this.yo=Math.round(t*64)/64,this.lastPointOfContour=r,this.onCurve=l,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}wa.prototype.nextTouched=function(a){for(var t=this.nextPointOnContour;!a.touched(t)&&t!==this;)t=t.nextPointOnContour;return t};wa.prototype.prevTouched=function(a){for(var t=this.prevPointOnContour;!a.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Dl=Object.freeze(new wa(0,0)),db={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function rr(a,t){switch(this.env=a,this.stack=[],this.prog=t,a){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=la,this.round=Vm}}qm.prototype.exec=function(a,t){if(typeof t!="number")throw new Error("Point size is not a number!");if(!(this._errorState>2)){var r=this.font,l=this._prepState;if(!l||l.ppem!==t){var o=this._fpgmState;if(!o){rr.prototype=db,o=this._fpgmState=new rr("fpgm",r.tables.fpgm),o.funcs=[],o.font=r,exports.DEBUG&&(console.log("---EXEC FPGM---"),o.step=-1);try{Ur(o)}catch(m){console.log("Hinting error in FPGM:"+m),this._errorState=3;return}}rr.prototype=o,l=this._prepState=new rr("prep",r.tables.prep),l.ppem=t;var u=r.tables.cvt;if(u)for(var f=l.cvt=new Array(u.length),p=t/r.unitsPerEm,h=0;h<u.length;h++)f[h]=u[h]*p;else l.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),l.step=-1);try{Ur(l)}catch(m){this._errorState<2&&console.log("Hinting error in PREP:"+m),this._errorState=2}}if(!(this._errorState>1))try{return Ym(a,l)}catch(m){this._errorState<1&&(console.log("Hinting error:"+m),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}}};Ym=function(a,t){var r=t.ppem/t.font.unitsPerEm,l=r,o=a.components,u,f,p;if(rr.prototype=t,!o)p=new rr("glyf",a.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),p.step=-1),_c(a,p,r,l),f=p.gZone;else{var h=t.font;f=[],u=[];for(var m=0;m<o.length;m++){var v=o[m],x=h.glyphs.get(v.glyphIndex);p=new rr("glyf",x.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+m+"---"),p.step=-1),_c(x,p,r,l);for(var b=Math.round(v.dx*r),E=Math.round(v.dy*l),C=p.gZone,w=p.contours,B=0;B<C.length;B++){var N=C[B];N.xTouched=N.yTouched=!1,N.xo=N.x=N.x+b,N.yo=N.y=N.y+E}var q=f.length;f.push.apply(f,C);for(var _=0;_<w.length;_++)u.push(w[_]+q)}a.instructions&&!p.inhibitGridFit&&(p=new rr("glyf",a.instructions),p.gZone=p.z0=p.z1=p.z2=f,p.contours=u,f.push(new wa(0,0),new wa(Math.round(a.advanceWidth*r),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),p.step=-1),Ur(p),f.length-=2)}return f};_c=function(a,t,r,l){for(var o=a.points||[],u=o.length,f=t.gZone=t.z0=t.z1=t.z2=[],p=t.contours=[],h,m=0;m<u;m++)h=o[m],f[m]=new wa(h.x*r,h.y*l,h.lastPointOfContour,h.onCurve);for(var v,x,b=0;b<u;b++)h=f[b],v||(v=h,p.push(b)),h.lastPointOfContour?(h.nextPointOnContour=v,v.prevPointOnContour=h,v=void 0):(x=f[b+1],h.nextPointOnContour=x,x.prevPointOnContour=h);if(!t.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",t.stack);for(var E=0;E<u;E++)console.log(E,f[E].x,f[E].y)}if(f.push(new wa(0,0),new wa(Math.round(a.advanceWidth*r),0)),Ur(t),f.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",t.stack);for(var C=0;C<u;C++)console.log(C,f[C].x,f[C].y)}}};Ur=function(a){var t=a.prog;if(t){var r=t.length,l;for(a.ip=0;a.ip<r;a.ip++){if(exports.DEBUG&&a.step++,l=Pm[t[a.ip]],!l)throw new Error("unknown instruction: 0x"+Number(t[a.ip]).toString(16));l(a)}}};function oo(a){for(var t=a.tZone=new Array(a.gZone.length),r=0;r<t.length;r++)t[r]=new wa(0,0)}function Zm(a,t){var r=a.prog,l=a.ip,o=1,u;do if(u=r[++l],u===88)o++;else if(u===89)o--;else if(u===64)l+=r[l+1]+1;else if(u===65)l+=2*r[l+1]+1;else if(u>=176&&u<=183)l+=u-176+1;else if(u>=184&&u<=191)l+=(u-184+1)*2;else if(t&&o===1&&u===27)break;while(o>0);a.ip=l}function Pp(a,t){exports.DEBUG&&console.log(t.step,"SVTCA["+a.axis+"]"),t.fv=t.pv=t.dpv=a}function Yp(a,t){exports.DEBUG&&console.log(t.step,"SPVTCA["+a.axis+"]"),t.pv=t.dpv=a}function qp(a,t){exports.DEBUG&&console.log(t.step,"SFVTCA["+a.axis+"]"),t.fv=a}function Vp(a,t){var r=t.stack,l=r.pop(),o=r.pop(),u=t.z2[l],f=t.z1[o];exports.DEBUG&&console.log("SPVTL["+a+"]",l,o);var p,h;a?(p=u.y-f.y,h=f.x-u.x):(p=f.x-u.x,h=f.y-u.y),t.pv=t.dpv=kl(p,h)}function Xp(a,t){var r=t.stack,l=r.pop(),o=r.pop(),u=t.z2[l],f=t.z1[o];exports.DEBUG&&console.log("SFVTL["+a+"]",l,o);var p,h;a?(p=u.y-f.y,h=f.x-u.x):(p=f.x-u.x,h=f.y-u.y),t.fv=kl(p,h)}function hb(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"SPVFS[]",r,l),a.pv=a.dpv=kl(l,r)}function pb(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"SPVFS[]",r,l),a.fv=kl(l,r)}function mb(a){var t=a.stack,r=a.pv;exports.DEBUG&&console.log(a.step,"GPV[]"),t.push(r.x*16384),t.push(r.y*16384)}function vb(a){var t=a.stack,r=a.fv;exports.DEBUG&&console.log(a.step,"GFV[]"),t.push(r.x*16384),t.push(r.y*16384)}function gb(a){a.fv=a.pv,exports.DEBUG&&console.log(a.step,"SFVTPV[]")}function yb(a){var t=a.stack,r=t.pop(),l=t.pop(),o=t.pop(),u=t.pop(),f=t.pop(),p=a.z0,h=a.z1,m=p[r],v=p[l],x=h[o],b=h[u],E=a.z2[f];exports.DEBUG&&console.log("ISECT[], ",r,l,o,u,f);var C=m.x,w=m.y,B=v.x,N=v.y,q=x.x,_=x.y,Y=b.x,K=b.y,ce=(C-B)*(_-K)-(w-N)*(q-Y),xe=C*N-w*B,Se=q*K-_*Y;E.x=(xe*(q-Y)-Se*(C-B))/ce,E.y=(xe*(_-K)-Se*(w-N))/ce}function bb(a){a.rp0=a.stack.pop(),exports.DEBUG&&console.log(a.step,"SRP0[]",a.rp0)}function Sb(a){a.rp1=a.stack.pop(),exports.DEBUG&&console.log(a.step,"SRP1[]",a.rp1)}function xb(a){a.rp2=a.stack.pop(),exports.DEBUG&&console.log(a.step,"SRP2[]",a.rp2)}function Eb(a){var t=a.stack.pop();switch(exports.DEBUG&&console.log(a.step,"SZP0[]",t),a.zp0=t,t){case 0:a.tZone||oo(a),a.z0=a.tZone;break;case 1:a.z0=a.gZone;break;default:throw new Error("Invalid zone pointer")}}function Tb(a){var t=a.stack.pop();switch(exports.DEBUG&&console.log(a.step,"SZP1[]",t),a.zp1=t,t){case 0:a.tZone||oo(a),a.z1=a.tZone;break;case 1:a.z1=a.gZone;break;default:throw new Error("Invalid zone pointer")}}function Ab(a){var t=a.stack.pop();switch(exports.DEBUG&&console.log(a.step,"SZP2[]",t),a.zp2=t,t){case 0:a.tZone||oo(a),a.z2=a.tZone;break;case 1:a.z2=a.gZone;break;default:throw new Error("Invalid zone pointer")}}function Cb(a){var t=a.stack.pop();switch(exports.DEBUG&&console.log(a.step,"SZPS[]",t),a.zp0=a.zp1=a.zp2=t,t){case 0:a.tZone||oo(a),a.z0=a.z1=a.z2=a.tZone;break;case 1:a.z0=a.z1=a.z2=a.gZone;break;default:throw new Error("Invalid zone pointer")}}function Nb(a){a.loop=a.stack.pop(),exports.DEBUG&&console.log(a.step,"SLOOP[]",a.loop)}function Mb(a){exports.DEBUG&&console.log(a.step,"RTG[]"),a.round=Vm}function wb(a){exports.DEBUG&&console.log(a.step,"RTHG[]"),a.round=ub}function Rb(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"SMD[]",t),a.minDis=t/64}function Ob(a){exports.DEBUG&&console.log(a.step,"ELSE[]"),Zm(a,!1)}function Db(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"JMPR[]",t),a.ip+=t-1}function _b(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"SCVTCI[]",t),a.cvCutIn=t/64}function Ub(a){var t=a.stack;exports.DEBUG&&console.log(a.step,"DUP[]"),t.push(t[t.length-1])}function Sc(a){exports.DEBUG&&console.log(a.step,"POP[]"),a.stack.pop()}function Lb(a){exports.DEBUG&&console.log(a.step,"CLEAR[]"),a.stack.length=0}function kb(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"SWAP[]"),t.push(r),t.push(l)}function Ib(a){var t=a.stack;exports.DEBUG&&console.log(a.step,"DEPTH[]"),t.push(t.length)}function Bb(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"LOOPCALL[]",r,l);var o=a.ip,u=a.prog;a.prog=a.funcs[r];for(var f=0;f<l;f++)Ur(a),exports.DEBUG&&console.log(++a.step,f+1<l?"next loopcall":"done loopcall",f);a.ip=o,a.prog=u}function Fb(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"CALL[]",t);var r=a.ip,l=a.prog;a.prog=a.funcs[t],Ur(a),a.ip=r,a.prog=l,exports.DEBUG&&console.log(++a.step,"returning from",t)}function Gb(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"CINDEX[]",r),t.push(t[t.length-r])}function jb(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"MINDEX[]",r),t.push(t.splice(t.length-r,1)[0])}function zb(a){if(a.env!=="fpgm")throw new Error("FDEF not allowed here");var t=a.stack,r=a.prog,l=a.ip,o=t.pop(),u=l;for(exports.DEBUG&&console.log(a.step,"FDEF[]",o);r[++l]!==45;);a.ip=l,a.funcs[o]=r.slice(u+1,l)}function Zp(a,t){var r=t.stack.pop(),l=t.z0[r],o=t.fv,u=t.pv;exports.DEBUG&&console.log(t.step,"MDAP["+a+"]",r);var f=u.distance(l,Dl);a&&(f=t.round(f)),o.setRelative(l,Dl,f,u),o.touch(l),t.rp0=t.rp1=r}function Qp(a,t){var r=t.z2,l=r.length-2,o,u,f;exports.DEBUG&&console.log(t.step,"IUP["+a.axis+"]");for(var p=0;p<l;p++)o=r[p],!a.touched(o)&&(u=o.prevTouched(a),u!==o&&(f=o.nextTouched(a),u===f&&a.setRelative(o,o,a.distance(u,u,!1,!0),a,!0),a.interpolate(o,u,f,a)))}function Kp(a,t){for(var r=t.stack,l=a?t.rp1:t.rp2,o=(a?t.z0:t.z1)[l],u=t.fv,f=t.pv,p=t.loop,h=t.z2;p--;){var m=r.pop(),v=h[m],x=f.distance(o,o,!1,!0);u.setRelative(v,v,x,f),u.touch(v),exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-p)+": ":"")+"SHP["+(a?"rp1":"rp2")+"]",m)}t.loop=1}function Wp(a,t){var r=t.stack,l=a?t.rp1:t.rp2,o=(a?t.z0:t.z1)[l],u=t.fv,f=t.pv,p=r.pop(),h=t.z2[t.contours[p]],m=h;exports.DEBUG&&console.log(t.step,"SHC["+a+"]",p);var v=f.distance(o,o,!1,!0);do m!==o&&u.setRelative(m,m,v,f),m=m.nextPointOnContour;while(m!==h)}function Jp(a,t){var r=t.stack,l=a?t.rp1:t.rp2,o=(a?t.z0:t.z1)[l],u=t.fv,f=t.pv,p=r.pop();exports.DEBUG&&console.log(t.step,"SHZ["+a+"]",p);var h;switch(p){case 0:h=t.tZone;break;case 1:h=t.gZone;break;default:throw new Error("Invalid zone")}for(var m,v=f.distance(o,o,!1,!0),x=h.length-2,b=0;b<x;b++)m=h[b],u.setRelative(m,m,v,f)}function Hb(a){for(var t=a.stack,r=a.loop,l=a.fv,o=t.pop()/64,u=a.z2;r--;){var f=t.pop(),p=u[f];exports.DEBUG&&console.log(a.step,(a.loop>1?"loop "+(a.loop-r)+": ":"")+"SHPIX[]",f,o),l.setRelative(p,p,o),l.touch(p)}a.loop=1}function Pb(a){for(var t=a.stack,r=a.rp1,l=a.rp2,o=a.loop,u=a.z0[r],f=a.z1[l],p=a.fv,h=a.dpv,m=a.z2;o--;){var v=t.pop(),x=m[v];exports.DEBUG&&console.log(a.step,(a.loop>1?"loop "+(a.loop-o)+": ":"")+"IP[]",v,r,"<->",l),p.interpolate(x,u,f,h),p.touch(x)}a.loop=1}function $p(a,t){var r=t.stack,l=r.pop()/64,o=r.pop(),u=t.z1[o],f=t.z0[t.rp0],p=t.fv,h=t.pv;p.setRelative(u,f,l,h),p.touch(u),exports.DEBUG&&console.log(t.step,"MSIRP["+a+"]",l,o),t.rp1=t.rp0,t.rp2=o,a&&(t.rp0=o)}function Yb(a){for(var t=a.stack,r=a.rp0,l=a.z0[r],o=a.loop,u=a.fv,f=a.pv,p=a.z1;o--;){var h=t.pop(),m=p[h];exports.DEBUG&&console.log(a.step,(a.loop>1?"loop "+(a.loop-o)+": ":"")+"ALIGNRP[]",h),u.setRelative(m,l,0,f),u.touch(m)}a.loop=1}function qb(a){exports.DEBUG&&console.log(a.step,"RTDG[]"),a.round=ob}function em(a,t){var r=t.stack,l=r.pop(),o=r.pop(),u=t.z0[o],f=t.fv,p=t.pv,h=t.cvt[l];exports.DEBUG&&console.log(t.step,"MIAP["+a+"]",l,"(",h,")",o);var m=p.distance(u,Dl);a&&(Math.abs(m-h)<t.cvCutIn&&(m=h),m=t.round(m)),f.setRelative(u,Dl,m,p),t.zp0===0&&(u.xo=u.x,u.yo=u.y),f.touch(u),t.rp0=t.rp1=o}function Vb(a){var t=a.prog,r=a.ip,l=a.stack,o=t[++r];exports.DEBUG&&console.log(a.step,"NPUSHB[]",o);for(var u=0;u<o;u++)l.push(t[++r]);a.ip=r}function Xb(a){var t=a.ip,r=a.prog,l=a.stack,o=r[++t];exports.DEBUG&&console.log(a.step,"NPUSHW[]",o);for(var u=0;u<o;u++){var f=r[++t]<<8|r[++t];f&32768&&(f=-((f^65535)+1)),l.push(f)}a.ip=t}function Zb(a){var t=a.stack,r=a.store;r||(r=a.store=[]);var l=t.pop(),o=t.pop();exports.DEBUG&&console.log(a.step,"WS",l,o),r[o]=l}function Qb(a){var t=a.stack,r=a.store,l=t.pop();exports.DEBUG&&console.log(a.step,"RS",l);var o=r&&r[l]||0;t.push(o)}function Kb(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"WCVTP",r,l),a.cvt[l]=r/64}function Wb(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"RCVT",r),t.push(a.cvt[r]*64)}function tm(a,t){var r=t.stack,l=r.pop(),o=t.z2[l];exports.DEBUG&&console.log(t.step,"GC["+a+"]",l),r.push(t.dpv.distance(o,Dl,a,!1)*64)}function nm(a,t){var r=t.stack,l=r.pop(),o=r.pop(),u=t.z1[l],f=t.z0[o],p=t.dpv.distance(f,u,a,a);exports.DEBUG&&console.log(t.step,"MD["+a+"]",l,o,"->",p),t.stack.push(Math.round(p*64))}function Jb(a){exports.DEBUG&&console.log(a.step,"MPPEM[]"),a.stack.push(a.ppem)}function $b(a){exports.DEBUG&&console.log(a.step,"FLIPON[]"),a.autoFlip=!0}function eS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"LT[]",r,l),t.push(l<r?1:0)}function tS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"LTEQ[]",r,l),t.push(l<=r?1:0)}function nS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"GT[]",r,l),t.push(l>r?1:0)}function aS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"GTEQ[]",r,l),t.push(l>=r?1:0)}function rS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"EQ[]",r,l),t.push(r===l?1:0)}function iS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"NEQ[]",r,l),t.push(r!==l?1:0)}function lS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"ODD[]",r),t.push(Math.trunc(r)%2?1:0)}function sS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"EVEN[]",r),t.push(Math.trunc(r)%2?0:1)}function oS(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"IF[]",t),t||(Zm(a,!0),exports.DEBUG&&console.log(a.step,"EIF[]"))}function uS(a){exports.DEBUG&&console.log(a.step,"EIF[]")}function cS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"AND[]",r,l),t.push(r&&l?1:0)}function fS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"OR[]",r,l),t.push(r||l?1:0)}function dS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"NOT[]",r),t.push(r?0:1)}function xc(a,t){var r=t.stack,l=r.pop(),o=t.fv,u=t.pv,f=t.ppem,p=t.deltaBase+(a-1)*16,h=t.deltaShift,m=t.z0;exports.DEBUG&&console.log(t.step,"DELTAP["+a+"]",l,r);for(var v=0;v<l;v++){var x=r.pop(),b=r.pop(),E=p+((b&240)>>4);if(E===f){var C=(b&15)-8;C>=0&&C++,exports.DEBUG&&console.log(t.step,"DELTAPFIX",x,"by",C*h);var w=m[x];o.setRelative(w,w,C*h,u)}}}function hS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"SDB[]",r),a.deltaBase=r}function pS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"SDS[]",r),a.deltaShift=Math.pow(.5,r)}function mS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"ADD[]",r,l),t.push(l+r)}function vS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"SUB[]",r,l),t.push(l-r)}function gS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"DIV[]",r,l),t.push(l*64/r)}function yS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"MUL[]",r,l),t.push(l*r/64)}function bS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"ABS[]",r),t.push(Math.abs(r))}function SS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"NEG[]",r),t.push(-r)}function xS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"FLOOR[]",r),t.push(Math.floor(r/64)*64)}function ES(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"CEILING[]",r),t.push(Math.ceil(r/64)*64)}function Ks(a,t){var r=t.stack,l=r.pop();exports.DEBUG&&console.log(t.step,"ROUND[]"),r.push(t.round(l/64)*64)}function TS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"WCVTF[]",r,l),a.cvt[l]=r*a.ppem/a.font.unitsPerEm}function Ec(a,t){var r=t.stack,l=r.pop(),o=t.ppem,u=t.deltaBase+(a-1)*16,f=t.deltaShift;exports.DEBUG&&console.log(t.step,"DELTAC["+a+"]",l,r);for(var p=0;p<l;p++){var h=r.pop(),m=r.pop(),v=u+((m&240)>>4);if(v===o){var x=(m&15)-8;x>=0&&x++;var b=x*f;exports.DEBUG&&console.log(t.step,"DELTACFIX",h,"by",b),t.cvt[h]+=b}}}function AS(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"SROUND[]",t),a.round=Xm;var r;switch(t&192){case 0:r=.5;break;case 64:r=1;break;case 128:r=2;break;default:throw new Error("invalid SROUND value")}switch(a.srPeriod=r,t&48){case 0:a.srPhase=0;break;case 16:a.srPhase=.25*r;break;case 32:a.srPhase=.5*r;break;case 48:a.srPhase=.75*r;break;default:throw new Error("invalid SROUND value")}t&=15,t===0?a.srThreshold=0:a.srThreshold=(t/8-.5)*r}function CS(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"S45ROUND[]",t),a.round=Xm;var r;switch(t&192){case 0:r=Math.sqrt(2)/2;break;case 64:r=Math.sqrt(2);break;case 128:r=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(a.srPeriod=r,t&48){case 0:a.srPhase=0;break;case 16:a.srPhase=.25*r;break;case 32:a.srPhase=.5*r;break;case 48:a.srPhase=.75*r;break;default:throw new Error("invalid S45ROUND value")}t&=15,t===0?a.srThreshold=0:a.srThreshold=(t/8-.5)*r}function NS(a){exports.DEBUG&&console.log(a.step,"ROFF[]"),a.round=sb}function MS(a){exports.DEBUG&&console.log(a.step,"RUTG[]"),a.round=cb}function wS(a){exports.DEBUG&&console.log(a.step,"RDTG[]"),a.round=fb}function RS(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"SCANCTRL[]",t)}function am(a,t){var r=t.stack,l=r.pop(),o=r.pop(),u=t.z2[l],f=t.z1[o];exports.DEBUG&&console.log(t.step,"SDPVTL["+a+"]",l,o);var p,h;a?(p=u.y-f.y,h=f.x-u.x):(p=f.x-u.x,h=f.y-u.y),t.dpv=kl(p,h)}function OS(a){var t=a.stack,r=t.pop(),l=0;exports.DEBUG&&console.log(a.step,"GETINFO[]",r),r&1&&(l=35),r&32&&(l|=4096),t.push(l)}function DS(a){var t=a.stack,r=t.pop(),l=t.pop(),o=t.pop();exports.DEBUG&&console.log(a.step,"ROLL[]"),t.push(l),t.push(r),t.push(o)}function _S(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"MAX[]",r,l),t.push(Math.max(l,r))}function US(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"MIN[]",r,l),t.push(Math.min(l,r))}function LS(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"SCANTYPE[]",t)}function kS(a){var t=a.stack.pop(),r=a.stack.pop();switch(exports.DEBUG&&console.log(a.step,"INSTCTRL[]",t,r),t){case 1:a.inhibitGridFit=!!r;return;case 2:a.ignoreCvt=!!r;return;default:throw new Error("invalid INSTCTRL[] selector")}}function tr(a,t){var r=t.stack,l=t.prog,o=t.ip;exports.DEBUG&&console.log(t.step,"PUSHB["+a+"]");for(var u=0;u<a;u++)r.push(l[++o]);t.ip=o}function nr(a,t){var r=t.ip,l=t.prog,o=t.stack;exports.DEBUG&&console.log(t.ip,"PUSHW["+a+"]");for(var u=0;u<a;u++){var f=l[++r]<<8|l[++r];f&32768&&(f=-((f^65535)+1)),o.push(f)}t.ip=r}function ye(a,t,r,l,o,u){var f=u.stack,p=a&&f.pop(),h=f.pop(),m=u.rp0,v=u.z0[m],x=u.z1[h],b=u.minDis,E=u.fv,C=u.dpv,w,B,N,q;B=w=C.distance(x,v,!0,!0),N=B>=0?1:-1,B=Math.abs(B),a&&(q=u.cvt[p],l&&Math.abs(B-q)<u.cvCutIn&&(B=q)),r&&B<b&&(B=b),l&&(B=u.round(B)),E.setRelative(x,v,N*B,C),E.touch(x),exports.DEBUG&&console.log(u.step,(a?"MIRP[":"MDRP[")+(t?"M":"m")+(r?">":"_")+(l?"R":"_")+(o===0?"Gr":o===1?"Bl":o===2?"Wh":"")+"]",a?p+"("+u.cvt[p]+","+q+")":"",h,"(d =",w,"->",N*B,")"),u.rp1=u.rp0,u.rp2=h,t&&(u.rp0=h)}Pm=[Pp.bind(void 0,Ma),Pp.bind(void 0,la),Yp.bind(void 0,Ma),Yp.bind(void 0,la),qp.bind(void 0,Ma),qp.bind(void 0,la),Vp.bind(void 0,0),Vp.bind(void 0,1),Xp.bind(void 0,0),Xp.bind(void 0,1),hb,pb,mb,vb,gb,yb,bb,Sb,xb,Eb,Tb,Ab,Cb,Nb,Mb,wb,Rb,Ob,Db,_b,void 0,void 0,Ub,Sc,Lb,kb,Ib,Gb,jb,void 0,void 0,void 0,Bb,Fb,zb,void 0,Zp.bind(void 0,0),Zp.bind(void 0,1),Qp.bind(void 0,Ma),Qp.bind(void 0,la),Kp.bind(void 0,0),Kp.bind(void 0,1),Wp.bind(void 0,0),Wp.bind(void 0,1),Jp.bind(void 0,0),Jp.bind(void 0,1),Hb,Pb,$p.bind(void 0,0),$p.bind(void 0,1),Yb,qb,em.bind(void 0,0),em.bind(void 0,1),Vb,Xb,Zb,Qb,Kb,Wb,tm.bind(void 0,0),tm.bind(void 0,1),void 0,nm.bind(void 0,0),nm.bind(void 0,1),Jb,void 0,$b,void 0,void 0,eS,tS,nS,aS,rS,iS,lS,sS,oS,uS,cS,fS,dS,xc.bind(void 0,1),hS,pS,mS,vS,gS,yS,bS,SS,xS,ES,Ks.bind(void 0,0),Ks.bind(void 0,1),Ks.bind(void 0,2),Ks.bind(void 0,3),void 0,void 0,void 0,void 0,TS,xc.bind(void 0,2),xc.bind(void 0,3),Ec.bind(void 0,1),Ec.bind(void 0,2),Ec.bind(void 0,3),AS,CS,void 0,void 0,NS,void 0,MS,wS,Sc,Sc,void 0,void 0,void 0,void 0,void 0,RS,am.bind(void 0,0),am.bind(void 0,1),OS,void 0,DS,_S,US,LS,kS,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,tr.bind(void 0,1),tr.bind(void 0,2),tr.bind(void 0,3),tr.bind(void 0,4),tr.bind(void 0,5),tr.bind(void 0,6),tr.bind(void 0,7),tr.bind(void 0,8),nr.bind(void 0,1),nr.bind(void 0,2),nr.bind(void 0,3),nr.bind(void 0,4),nr.bind(void 0,5),nr.bind(void 0,6),nr.bind(void 0,7),nr.bind(void 0,8),ye.bind(void 0,0,0,0,0,0),ye.bind(void 0,0,0,0,0,1),ye.bind(void 0,0,0,0,0,2),ye.bind(void 0,0,0,0,0,3),ye.bind(void 0,0,0,0,1,0),ye.bind(void 0,0,0,0,1,1),ye.bind(void 0,0,0,0,1,2),ye.bind(void 0,0,0,0,1,3),ye.bind(void 0,0,0,1,0,0),ye.bind(void 0,0,0,1,0,1),ye.bind(void 0,0,0,1,0,2),ye.bind(void 0,0,0,1,0,3),ye.bind(void 0,0,0,1,1,0),ye.bind(void 0,0,0,1,1,1),ye.bind(void 0,0,0,1,1,2),ye.bind(void 0,0,0,1,1,3),ye.bind(void 0,0,1,0,0,0),ye.bind(void 0,0,1,0,0,1),ye.bind(void 0,0,1,0,0,2),ye.bind(void 0,0,1,0,0,3),ye.bind(void 0,0,1,0,1,0),ye.bind(void 0,0,1,0,1,1),ye.bind(void 0,0,1,0,1,2),ye.bind(void 0,0,1,0,1,3),ye.bind(void 0,0,1,1,0,0),ye.bind(void 0,0,1,1,0,1),ye.bind(void 0,0,1,1,0,2),ye.bind(void 0,0,1,1,0,3),ye.bind(void 0,0,1,1,1,0),ye.bind(void 0,0,1,1,1,1),ye.bind(void 0,0,1,1,1,2),ye.bind(void 0,0,1,1,1,3),ye.bind(void 0,1,0,0,0,0),ye.bind(void 0,1,0,0,0,1),ye.bind(void 0,1,0,0,0,2),ye.bind(void 0,1,0,0,0,3),ye.bind(void 0,1,0,0,1,0),ye.bind(void 0,1,0,0,1,1),ye.bind(void 0,1,0,0,1,2),ye.bind(void 0,1,0,0,1,3),ye.bind(void 0,1,0,1,0,0),ye.bind(void 0,1,0,1,0,1),ye.bind(void 0,1,0,1,0,2),ye.bind(void 0,1,0,1,0,3),ye.bind(void 0,1,0,1,1,0),ye.bind(void 0,1,0,1,1,1),ye.bind(void 0,1,0,1,1,2),ye.bind(void 0,1,0,1,1,3),ye.bind(void 0,1,1,0,0,0),ye.bind(void 0,1,1,0,0,1),ye.bind(void 0,1,1,0,0,2),ye.bind(void 0,1,1,0,0,3),ye.bind(void 0,1,1,0,1,0),ye.bind(void 0,1,1,0,1,1),ye.bind(void 0,1,1,0,1,2),ye.bind(void 0,1,1,0,1,3),ye.bind(void 0,1,1,1,0,0),ye.bind(void 0,1,1,1,0,1),ye.bind(void 0,1,1,1,0,2),ye.bind(void 0,1,1,1,0,3),ye.bind(void 0,1,1,1,1,0),ye.bind(void 0,1,1,1,1,1),ye.bind(void 0,1,1,1,1,2),ye.bind(void 0,1,1,1,1,3)];function xi(a){this.char=a,this.state={},this.activeState=null}function jc(a,t,r){this.contextName=r,this.startIndex=a,this.endOffset=t}function IS(a,t,r){this.contextName=a,this.openRange=null,this.ranges=[],this.checkStart=t,this.checkEnd=r}function Xn(a,t){this.context=a,this.index=t,this.length=a.length,this.current=a[t],this.backtrack=a.slice(0,t),this.lookahead=a.slice(t+1)}function uo(a){this.eventId=a,this.subscribers=[]}function BS(a){var t=this,r=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];r.forEach(function(o){Object.defineProperty(t.events,o,{value:new uo(o)})}),a&&r.forEach(function(o){var u=a[o];typeof u=="function"&&t.events[o].subscribe(u)});var l=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];l.forEach(function(o){t.events[o].subscribe(t.updateContextsRanges)})}function Ot(a){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],BS.call(this,a)}xi.prototype.setState=function(a,t){return this.state[a]=t,this.activeState={key:a,value:this.state[a]},this.activeState};xi.prototype.getState=function(a){return this.state[a]||null};Ot.prototype.inboundIndex=function(a){return a>=0&&a<this.tokens.length};Ot.prototype.composeRUD=function(a){var t=this,r=!0,l=a.map(function(u){return t[u[0]].apply(t,u.slice(1).concat(r))}),o=function(u){return typeof u=="object"&&u.hasOwnProperty("FAIL")};if(l.every(o))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:l.filter(o)};this.dispatch("composeRUD",[l.filter(function(u){return!o(u)})])};Ot.prototype.replaceRange=function(a,t,r,l){t=t!==null?t:this.tokens.length;var o=r.every(function(f){return f instanceof xi});if(!isNaN(a)&&this.inboundIndex(a)&&o){var u=this.tokens.splice.apply(this.tokens,[a,t].concat(r));return l||this.dispatch("replaceToken",[a,t,r]),[u,r]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};Ot.prototype.replaceToken=function(a,t,r){if(!isNaN(a)&&this.inboundIndex(a)&&t instanceof xi){var l=this.tokens.splice(a,1,t);return r||this.dispatch("replaceToken",[a,t]),[l[0],t]}else return{FAIL:"replaceToken: invalid token or index."}};Ot.prototype.removeRange=function(a,t,r){t=isNaN(t)?this.tokens.length:t;var l=this.tokens.splice(a,t);return r||this.dispatch("removeRange",[l,a,t]),l};Ot.prototype.removeToken=function(a,t){if(!isNaN(a)&&this.inboundIndex(a)){var r=this.tokens.splice(a,1);return t||this.dispatch("removeToken",[r,a]),r}else return{FAIL:"removeToken: invalid token index."}};Ot.prototype.insertToken=function(a,t,r){var l=a.every(function(o){return o instanceof xi});return l?(this.tokens.splice.apply(this.tokens,[t,0].concat(a)),r||this.dispatch("insertToken",[a,t]),a):{FAIL:"insertToken: invalid token(s)."}};Ot.prototype.registerModifier=function(a,t,r){this.events.newToken.subscribe(function(l,o){var u=[l,o],f=t===null||t.apply(this,u)===!0,p=[l,o];if(f){var h=r.apply(this,p);l.setState(a,h)}}),this.registeredModifiers.push(a)};uo.prototype.subscribe=function(a){return typeof a=="function"?this.subscribers.push(a)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};uo.prototype.unsubscribe=function(a){this.subscribers.splice(a,1)};Xn.prototype.setCurrentIndex=function(a){this.index=a,this.current=this.context[a],this.backtrack=this.context.slice(0,a),this.lookahead=this.context.slice(a+1)};Xn.prototype.get=function(a){switch(!0){case a===0:return this.current;case(a<0&&Math.abs(a)<=this.backtrack.length):return this.backtrack.slice(a)[0];case(a>0&&a<=this.lookahead.length):return this.lookahead[a-1];default:return null}};Ot.prototype.rangeToText=function(a){if(a instanceof jc)return this.getRangeTokens(a).map(function(t){return t.char}).join("")};Ot.prototype.getText=function(){return this.tokens.map(function(a){return a.char}).join("")};Ot.prototype.getContext=function(a){var t=this.registeredContexts[a];return t||null};Ot.prototype.on=function(a,t){var r=this.events[a];return r?r.subscribe(t):null};Ot.prototype.dispatch=function(a,t){var r=this,l=this.events[a];l instanceof uo&&l.subscribers.forEach(function(o){o.apply(r,t||[])})};Ot.prototype.registerContextChecker=function(a,t,r){if(this.getContext(a))return{FAIL:"context name '"+a+"' is already registered."};if(typeof t!="function")return{FAIL:"missing context start check."};if(typeof r!="function")return{FAIL:"missing context end check."};var l=new IS(a,t,r);return this.registeredContexts[a]=l,this.contextCheckers.push(l),l};Ot.prototype.getRangeTokens=function(a){var t=a.startIndex+a.endOffset;return[].concat(this.tokens.slice(a.startIndex,t))};Ot.prototype.getContextRanges=function(a){var t=this.getContext(a);return t?t.ranges:{FAIL:"context checker '"+a+"' is not registered."}};Ot.prototype.resetContextsRanges=function(){var a=this.registeredContexts;for(var t in a)if(a.hasOwnProperty(t)){var r=a[t];r.ranges=[]}};Ot.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var a=this.tokens.map(function(l){return l.char}),t=0;t<a.length;t++){var r=new Xn(a,t);this.runContextCheck(r)}this.dispatch("updateContextsRanges",[this.registeredContexts])};Ot.prototype.setEndOffset=function(a,t){var r=this.getContext(t).openRange.startIndex,l=new jc(r,a,t),o=this.getContext(t).ranges;return l.rangeId=t+"."+o.length,o.push(l),this.getContext(t).openRange=null,l};Ot.prototype.runContextCheck=function(a){var t=this,r=a.index;this.contextCheckers.forEach(function(l){var o=l.contextName,u=t.getContext(o).openRange;if(!u&&l.checkStart(a)&&(u=new jc(r,null,o),t.getContext(o).openRange=u,t.dispatch("contextStart",[o,r])),u&&l.checkEnd(a)){var f=r-u.startIndex+1,p=t.setEndOffset(f,o);t.dispatch("contextEnd",[o,p])}})};Ot.prototype.tokenize=function(a){this.tokens=[],this.resetContextsRanges();var t=Array.from(a);this.dispatch("start");for(var r=0;r<t.length;r++){var l=t[r],o=new Xn(t,r);this.dispatch("next",[o]),this.runContextCheck(o);var u=new xi(l);this.tokens.push(u),this.dispatch("newToken",[u,o])}return this.dispatch("end",[this.tokens]),this.tokens};function ir(a){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(a)}function Qm(a){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(a)}function sr(a){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(a)}function eo(a){return/[A-z]/.test(a)}function FS(a){return/\s/.test(a)}function An(a){this.font=a,this.features={}}function _r(a){this.id=a.id,this.tag=a.tag,this.substitution=a.substitution}function Il(a,t){if(!a)return-1;switch(t.format){case 1:return t.glyphs.indexOf(a);case 2:for(var r=t.ranges,l=0;l<r.length;l++){var o=r[l];if(a>=o.start&&a<=o.end){var u=a-o.start;return o.index+u}}break;default:return-1}return-1}function GS(a,t){var r=Il(a,t.coverage);return r===-1?null:a+t.deltaGlyphId}function jS(a,t){var r=Il(a,t.coverage);return r===-1?null:t.substitute[r]}function Tc(a,t){for(var r=[],l=0;l<a.length;l++){var o=a[l],u=t.current;u=Array.isArray(u)?u[0]:u;var f=Il(u,o);f!==-1&&r.push(f)}return r.length!==a.length?-1:r}function zS(a,t){var r=t.inputCoverage.length+t.lookaheadCoverage.length+t.backtrackCoverage.length;if(a.context.length<r)return[];var l=Tc(t.inputCoverage,a);if(l===-1)return[];var o=t.inputCoverage.length-1;if(a.lookahead.length<t.lookaheadCoverage.length)return[];for(var u=a.lookahead.slice(o);u.length&&sr(u[0].char);)u.shift();var f=new Xn(u,0),p=Tc(t.lookaheadCoverage,f),h=[].concat(a.backtrack);for(h.reverse();h.length&&sr(h[0].char);)h.shift();if(h.length<t.backtrackCoverage.length)return[];var m=new Xn(h,0),v=Tc(t.backtrackCoverage,m),x=l.length===t.inputCoverage.length&&p.length===t.lookaheadCoverage.length&&v.length===t.backtrackCoverage.length,b=[];if(x)for(var E=0;E<t.lookupRecords.length;E++)for(var C=t.lookupRecords[E],w=C.lookupListIndex,B=this.getLookupByIndex(w),N=0;N<B.subtables.length;N++){var q=B.subtables[N],_=this.getLookupMethod(B,q),Y=this.getSubstitutionType(B,q);if(Y==="12")for(var K=0;K<l.length;K++){var ce=a.get(K),xe=_(ce);xe&&b.push(xe)}}return b}function HS(a,t){var r=a.current,l=Il(r,t.coverage);if(l===-1)return null;for(var o,u=t.ligatureSets[l],f=0;f<u.length;f++){o=u[f];for(var p=0;p<o.components.length;p++){var h=a.lookahead[p],m=o.components[p];if(h!==m)break;if(p===o.components.length-1)return o}}return null}function PS(a,t){var r=Il(a,t.coverage);return r===-1?null:t.sequences[r]}An.prototype.getDefaultScriptFeaturesIndexes=function(){for(var a=this.font.tables.gsub.scripts,t=0;t<a.length;t++){var r=a[t];if(r.tag==="DFLT")return r.script.defaultLangSys.featureIndexes}return[]};An.prototype.getScriptFeaturesIndexes=function(a){var t=this.font.tables;if(!t.gsub)return[];if(!a)return this.getDefaultScriptFeaturesIndexes();for(var r=this.font.tables.gsub.scripts,l=0;l<r.length;l++){var o=r[l];if(o.tag===a&&o.script.defaultLangSys)return o.script.defaultLangSys.featureIndexes;var u=o.langSysRecords;if(u)for(var f=0;f<u.length;f++){var p=u[f];if(p.tag===a){var h=p.langSys;return h.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()};An.prototype.mapTagsToFeatures=function(a,t){for(var r={},l=0;l<a.length;l++){var o=a[l].tag,u=a[l].feature;r[o]=u}this.features[t].tags=r};An.prototype.getScriptFeatures=function(a){var t=this.features[a];if(this.features.hasOwnProperty(a))return t;var r=this.getScriptFeaturesIndexes(a);if(!r)return null;var l=this.font.tables.gsub;return t=r.map(function(o){return l.features[o]}),this.features[a]=t,this.mapTagsToFeatures(t,a),t};An.prototype.getSubstitutionType=function(a,t){var r=a.lookupType.toString(),l=t.substFormat.toString();return r+l};An.prototype.getLookupMethod=function(a,t){var r=this,l=this.getSubstitutionType(a,t);switch(l){case"11":return function(o){return GS.apply(r,[o,t])};case"12":return function(o){return jS.apply(r,[o,t])};case"63":return function(o){return zS.apply(r,[o,t])};case"41":return function(o){return HS.apply(r,[o,t])};case"21":return function(o){return PS.apply(r,[o,t])};default:throw new Error("lookupType: "+a.lookupType+" - substFormat: "+t.substFormat+" is not yet supported")}};An.prototype.lookupFeature=function(a){var t=a.contextParams,r=t.index,l=this.getFeature({tag:a.tag,script:a.script});if(!l)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+a.tag+"' for script '"+a.script+"'.");for(var o=this.getFeatureLookups(l),u=[].concat(t.context),f=0;f<o.length;f++)for(var p=o[f],h=this.getLookupSubtables(p),m=0;m<h.length;m++){var v=h[m],x=this.getSubstitutionType(p,v),b=this.getLookupMethod(p,v),E=void 0;switch(x){case"11":E=b(t.current),E&&u.splice(r,1,new _r({id:11,tag:a.tag,substitution:E}));break;case"12":E=b(t.current),E&&u.splice(r,1,new _r({id:12,tag:a.tag,substitution:E}));break;case"63":E=b(t),Array.isArray(E)&&E.length&&u.splice(r,1,new _r({id:63,tag:a.tag,substitution:E}));break;case"41":E=b(t),E&&u.splice(r,1,new _r({id:41,tag:a.tag,substitution:E}));break;case"21":E=b(t.current),E&&u.splice(r,1,new _r({id:21,tag:a.tag,substitution:E}));break}t=new Xn(u,r),!(Array.isArray(E)&&!E.length)&&(E=null)}return u.length?u:null};An.prototype.supports=function(a){if(!a.script)return!1;this.getScriptFeatures(a.script);var t=this.features.hasOwnProperty(a.script);if(!a.tag)return t;var r=this.features[a.script].some(function(l){return l.tag===a.tag});return t&&r};An.prototype.getLookupSubtables=function(a){return a.subtables||null};An.prototype.getLookupByIndex=function(a){var t=this.font.tables.gsub.lookups;return t[a]||null};An.prototype.getFeatureLookups=function(a){return a.lookupListIndexes.map(this.getLookupByIndex.bind(this))};An.prototype.getFeature=function(t){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(t.script)||this.getScriptFeatures(t.script);var r=this.features[t.script];return r?r.tags[t.tag]?this.features[t.script].tags[t.tag]:null:{FAIL:"No feature for script "+t.script}};function YS(a){var t=a.current,r=a.get(-1);return r===null&&ir(t)||!ir(r)&&ir(t)}function qS(a){var t=a.get(1);return t===null||!ir(t)}var VS={startCheck:YS,endCheck:qS};function XS(a){var t=a.current,r=a.get(-1);return(ir(t)||sr(t))&&!ir(r)}function ZS(a){var t=a.get(1);switch(!0){case t===null:return!0;case(!ir(t)&&!sr(t)):var r=FS(t);if(!r)return!0;if(r){var l=!1;if(l=a.lookahead.some(function(o){return ir(o)||sr(o)}),!l)return!0}break;default:return!1}}var QS={startCheck:XS,endCheck:ZS};function KS(a,t,r){t[r].setState(a.tag,a.substitution)}function WS(a,t,r){t[r].setState(a.tag,a.substitution)}function JS(a,t,r){a.substitution.forEach(function(l,o){var u=t[r+o];u.setState(a.tag,l)})}function $S(a,t,r){var l=t[r];l.setState(a.tag,a.substitution.ligGlyph);for(var o=a.substitution.components.length,u=0;u<o;u++)l=t[r+u+1],l.setState("deleted",!0)}var rm={11:KS,12:WS,63:JS,41:$S};function zc(a,t,r){a instanceof _r&&rm[a.id]&&rm[a.id](a,t,r)}function ex(a){for(var t=[].concat(a.backtrack),r=t.length-1;r>=0;r--){var l=t[r],o=Qm(l),u=sr(l);if(!o&&!u)return!0;if(o)return!1}return!1}function tx(a){if(Qm(a.current))return!1;for(var t=0;t<a.lookahead.length;t++){var r=a.lookahead[t],l=sr(r);if(!l)return!0}return!1}function nx(a){var t=this,r="arab",l=this.featuresTags[r],o=this.tokenizer.getRangeTokens(a);if(o.length!==1){var u=new Xn(o.map(function(p){return p.getState("glyphIndex")}),0),f=new Xn(o.map(function(p){return p.char}),0);o.forEach(function(p,h){if(!sr(p.char)){u.setCurrentIndex(h),f.setCurrentIndex(h);var m=0;ex(f)&&(m|=1),tx(f)&&(m|=2);var v;switch(m){case 1:v="fina";break;case 2:v="init";break;case 3:v="medi";break}if(l.indexOf(v)!==-1){var x=t.query.lookupFeature({tag:v,script:r,contextParams:u});if(x instanceof Error)return console.info(x.message);x.forEach(function(b,E){b instanceof _r&&(zc(b,o,E),u.context[E]=b.substitution)})}}})}}function im(a,t){var r=a.map(function(l){return l.activeState.value});return new Xn(r,0)}function ax(a){var t=this,r="arab",l=this.tokenizer.getRangeTokens(a),o=im(l);o.context.forEach(function(u,f){o.setCurrentIndex(f);var p=t.query.lookupFeature({tag:"rlig",script:r,contextParams:o});p.length&&(p.forEach(function(h){return zc(h,l,f)}),o=im(l))})}function rx(a){var t=a.current,r=a.get(-1);return r===null&&eo(t)||!eo(r)&&eo(t)}function ix(a){var t=a.get(1);return t===null||!eo(t)}var lx={startCheck:rx,endCheck:ix};function lm(a,t){var r=a.map(function(l){return l.activeState.value});return new Xn(r,0)}function sx(a){var t=this,r="latn",l=this.tokenizer.getRangeTokens(a),o=lm(l);o.context.forEach(function(u,f){o.setCurrentIndex(f);var p=t.query.lookupFeature({tag:"liga",script:r,contextParams:o});p.length&&(p.forEach(function(h){return zc(h,l,f)}),o=lm(l))})}function Qn(a){this.baseDir=a||"ltr",this.tokenizer=new Ot,this.featuresTags={}}Qn.prototype.setText=function(a){this.text=a};Qn.prototype.contextChecks={latinWordCheck:lx,arabicWordCheck:VS,arabicSentenceCheck:QS};function Ac(a){var t=this.contextChecks[a+"Check"];return this.tokenizer.registerContextChecker(a,t.startCheck,t.endCheck)}function ox(){return Ac.call(this,"latinWord"),Ac.call(this,"arabicWord"),Ac.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function ux(){var a=this,t=this.tokenizer.getContextRanges("arabicSentence");t.forEach(function(r){var l=a.tokenizer.getRangeTokens(r);a.tokenizer.replaceRange(r.startIndex,r.endOffset,l.reverse())})}Qn.prototype.registerFeatures=function(a,t){var r=this,l=t.filter(function(o){return r.query.supports({script:a,tag:o})});this.featuresTags.hasOwnProperty(a)?this.featuresTags[a]=this.featuresTags[a].concat(l):this.featuresTags[a]=l};Qn.prototype.applyFeatures=function(a,t){if(!a)throw new Error("No valid font was provided to apply features");this.query||(this.query=new An(a));for(var r=0;r<t.length;r++){var l=t[r];this.query.supports({script:l.script})&&this.registerFeatures(l.script,l.tags)}};Qn.prototype.registerModifier=function(a,t,r){this.tokenizer.registerModifier(a,t,r)};function Hc(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function cx(){var a=this,t="arab";if(this.featuresTags.hasOwnProperty(t)){Hc.call(this);var r=this.tokenizer.getContextRanges("arabicWord");r.forEach(function(l){nx.call(a,l)})}}function fx(){var a=this,t="arab";if(this.featuresTags.hasOwnProperty(t)){var r=this.featuresTags[t];if(r.indexOf("rlig")!==-1){Hc.call(this);var l=this.tokenizer.getContextRanges("arabicWord");l.forEach(function(o){ax.call(a,o)})}}}function dx(){var a=this,t="latn";if(this.featuresTags.hasOwnProperty(t)){var r=this.featuresTags[t];if(r.indexOf("liga")!==-1){Hc.call(this);var l=this.tokenizer.getContextRanges("latinWord");l.forEach(function(o){sx.call(a,o)})}}}Qn.prototype.checkContextReady=function(a){return!!this.tokenizer.getContext(a)};Qn.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(cx.call(this),fx.call(this)),this.checkContextReady("latinWord")&&dx.call(this),this.checkContextReady("arabicSentence")&&ux.call(this)};Qn.prototype.processText=function(a){(!this.text||this.text!==a)&&(this.setText(a),ox.call(this),this.applyFeaturesToContexts())};Qn.prototype.getBidiText=function(a){return this.processText(a),this.tokenizer.getText()};Qn.prototype.getTextGlyphs=function(a){this.processText(a);for(var t=[],r=0;r<this.tokenizer.tokens.length;r++){var l=this.tokenizer.tokens[r];if(!l.state.deleted){var o=l.activeState.value;t.push(Array.isArray(o)?o[0]:o)}}return t};function gt(a){a=a||{},a.tables=a.tables||{},a.empty||(Nl(a.familyName,"When creating a new Font object, familyName is required."),Nl(a.styleName,"When creating a new Font object, styleName is required."),Nl(a.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Nl(a.ascender,"When creating a new Font object, ascender is required."),Nl(a.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:a.familyName||" "},fontSubfamily:{en:a.styleName||" "},fullName:{en:a.fullName||a.familyName+" "+a.styleName},postScriptName:{en:a.postScriptName||(a.familyName+a.styleName).replace(/\s/g,"")},designer:{en:a.designer||" "},designerURL:{en:a.designerURL||" "},manufacturer:{en:a.manufacturer||" "},manufacturerURL:{en:a.manufacturerURL||" "},license:{en:a.license||" "},licenseURL:{en:a.licenseURL||" "},version:{en:a.version||"Version 0.1"},description:{en:a.description||" "},copyright:{en:a.copyright||" "},trademark:{en:a.trademark||" "}},this.unitsPerEm=a.unitsPerEm||1e3,this.ascender=a.ascender,this.descender=a.descender,this.createdTimestamp=a.createdTimestamp,this.tables=Object.assign(a.tables,{os2:Object.assign({usWeightClass:a.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:a.widthClass||this.usWidthClasses.MEDIUM,fsSelection:a.fsSelection||this.fsSelectionValues.REGULAR},a.tables.os2)})),this.supported=!0,this.glyphs=new sa.GlyphSet(this,a.glyphs||[]),this.encoding=new Nm(this),this.position=new Ul(this),this.substitution=new Tn(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new qm(this)}})}gt.prototype.hasChar=function(a){return this.encoding.charToGlyphIndex(a)!==null};gt.prototype.charToGlyphIndex=function(a){return this.encoding.charToGlyphIndex(a)};gt.prototype.charToGlyph=function(a){var t=this.charToGlyphIndex(a),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r};gt.prototype.updateFeatures=function(a){return this.defaultRenderOptions.features.map(function(t){return t.script==="latn"?{script:"latn",tags:t.tags.filter(function(r){return a[r]})}:t})};gt.prototype.stringToGlyphs=function(a,t){var r=this,l=new Qn,o=function(x){return r.charToGlyphIndex(x.char)};l.registerModifier("glyphIndex",null,o);var u=t?this.updateFeatures(t.features):this.defaultRenderOptions.features;l.applyFeatures(this,u);for(var f=l.getTextGlyphs(a),p=f.length,h=new Array(p),m=this.glyphs.get(0),v=0;v<p;v+=1)h[v]=this.glyphs.get(f[v])||m;return h};gt.prototype.nameToGlyphIndex=function(a){return this.glyphNames.nameToGlyphIndex(a)};gt.prototype.nameToGlyph=function(a){var t=this.nameToGlyphIndex(a),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r};gt.prototype.glyphIndexToName=function(a){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(a):""};gt.prototype.getKerningValue=function(a,t){a=a.index||a,t=t.index||t;var r=this.position.defaultKerningTables;return r?this.position.getKerningValue(r,a,t):this.kerningPairs[a+","+t]||0};gt.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};gt.prototype.forEachGlyph=function(a,t,r,l,o,u){t=t!==void 0?t:0,r=r!==void 0?r:0,l=l!==void 0?l:72,o=Object.assign({},this.defaultRenderOptions,o);var f=1/this.unitsPerEm*l,p=this.stringToGlyphs(a,o),h;if(o.kerning){var m=o.script||this.position.getDefaultScriptName();h=this.position.getKerningTables(m,o.language)}for(var v=0;v<p.length;v+=1){var x=p[v];if(u.call(this,x,t,r,l,o),x.advanceWidth&&(t+=x.advanceWidth*f),o.kerning&&v<p.length-1){var b=h?this.position.getKerningValue(h,x.index,p[v+1].index):this.getKerningValue(x,p[v+1]);t+=b*f}o.letterSpacing?t+=o.letterSpacing*l:o.tracking&&(t+=o.tracking/1e3*l)}return t};gt.prototype.getPath=function(a,t,r,l,o){var u=new Pt;return this.forEachGlyph(a,t,r,l,o,function(f,p,h,m){var v=f.getPath(p,h,m,o,this);u.extend(v)}),u};gt.prototype.getPaths=function(a,t,r,l,o){var u=[];return this.forEachGlyph(a,t,r,l,o,function(f,p,h,m){var v=f.getPath(p,h,m,o,this);u.push(v)}),u};gt.prototype.getAdvanceWidth=function(a,t,r){return this.forEachGlyph(a,0,0,t,r,function(){})};gt.prototype.draw=function(a,t,r,l,o,u){this.getPath(t,r,l,o,u).draw(a)};gt.prototype.drawPoints=function(a,t,r,l,o,u){this.forEachGlyph(t,r,l,o,u,function(f,p,h,m){f.drawPoints(a,p,h,m)})};gt.prototype.drawMetrics=function(a,t,r,l,o,u){this.forEachGlyph(t,r,l,o,u,function(f,p,h,m){f.drawMetrics(a,p,h,m)})};gt.prototype.getEnglishName=function(a){var t=this.names[a];if(t)return t.en};gt.prototype.validate=function(){var a=this;function t(l,o){}function r(l){var o=a.getEnglishName(l);o&&o.trim().length>0}r("fontFamily"),r("weightName"),r("manufacturer"),r("copyright"),r("version"),this.unitsPerEm>0};gt.prototype.toTables=function(){return J1.fontToTable(this)};gt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};gt.prototype.toArrayBuffer=function(){for(var a=this.toTables(),t=a.encode(),r=new ArrayBuffer(t.length),l=new Uint8Array(r),o=0;o<t.length;o++)l[o]=t[o];return r};gt.prototype.download=function(a){var t=this.getEnglishName("fontFamily"),r=this.getEnglishName("fontSubfamily");a=a||t.replace(/\s/g,"")+"-"+r+".otf";var l=this.toArrayBuffer();if(eb())if(window.URL=window.URL||window.webkitURL,window.URL){var o=new DataView(l),u=new Blob([o],{type:"font/opentype"}),f=document.createElement("a");f.href=window.URL.createObjectURL(u),f.download=a;var p=document.createEvent("MouseEvents");p.initEvent("click",!0,!1),f.dispatchEvent(p)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var h=require("fs"),m=tb(l);h.writeFileSync(a,m)}};gt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};gt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};gt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Ra=new Array(10);Ra[1]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{posFormat:1,coverage:this.parsePointer(V.coverage),value:this.parseValueRecord()};if(r===2)return{posFormat:2,coverage:this.parsePointer(V.coverage),values:this.parseValueRecordList()};ke.assert(!1,"0x"+t.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};Ra[2]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();ke.assert(r===1||r===2,"0x"+t.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var l=this.parsePointer(V.coverage),o=this.parseUShort(),u=this.parseUShort();if(r===1)return{posFormat:r,coverage:l,valueFormat1:o,valueFormat2:u,pairSets:this.parseList(V.pointer(V.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(o),value2:this.parseValueRecord(u)}})))};if(r===2){var f=this.parsePointer(V.classDef),p=this.parsePointer(V.classDef),h=this.parseUShort(),m=this.parseUShort();return{posFormat:r,coverage:l,valueFormat1:o,valueFormat2:u,classDef1:f,classDef2:p,class1Count:h,class2Count:m,classRecords:this.parseList(h,V.list(m,function(){return{value1:this.parseValueRecord(o),value2:this.parseValueRecord(u)}}))}}};Ra[3]=function(){return{error:"GPOS Lookup 3 not supported"}};Ra[4]=function(){return{error:"GPOS Lookup 4 not supported"}};Ra[5]=function(){return{error:"GPOS Lookup 5 not supported"}};Ra[6]=function(){return{error:"GPOS Lookup 6 not supported"}};Ra[7]=function(){return{error:"GPOS Lookup 7 not supported"}};Ra[8]=function(){return{error:"GPOS Lookup 8 not supported"}};Ra[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);const sm=()=>Math.random().toString(36).substr(2,9),hx=lr.memo(({playbackFps:a,onSpeedChange:t})=>g.jsxs("div",{className:"master-speed-slider",children:[g.jsxs("label",{htmlFor:"masterSpeedRange",children:[a," FPS"]}),g.jsx(Tt,{id:"master_speed",children:g.jsx("input",{type:"range",min:"1",max:"120",value:a,className:"slider_hor",id:"masterSpeedRange",onChange:r=>t(parseInt(r.target.value))})})]})),px=lr.memo(({isWorldOutputActive:a,onToggleWorldOutput:t})=>g.jsx("div",{className:"container",children:g.jsx(Tt,{id:"laser_output",children:g.jsx("input",{type:"checkbox",checked:a,onChange:t})})})),wl=(a,t,r,l)=>!Array.isArray(a)||a.length!==t?Array(t).fill(null).map((o,u)=>Array(r).fill(null).map((f,p)=>l(u,p))):a.map((o,u)=>!Array.isArray(o)||o.length!==r?Array(r).fill(null).map((f,p)=>l(u,p)):o),Km=a=>({columns:Array.from({length:8},(t,r)=>`Col ${r+1}`),layers:Array.from({length:5},(t,r)=>`Layer ${r+1}`),clipContents:wl(a?.clipContents,5,8,()=>({parsing:!1})),clipNames:wl(a?.clipNames,5,8,(t,r)=>`Clip ${t+1}-${r+1}`),thumbnailFrameIndexes:Array(5).fill(null).map(()=>Array(8).fill(0)),layerEffects:Array(5).fill([]),layerIntensities:Array(5).fill(1),layerAutopilots:Array(5).fill("off"),layerBlackouts:Array(5).fill(!1),layerSolos:Array(5).fill(!1),masterIntensity:1,globalBlackout:!1,selectedLayerIndex:null,selectedColIndex:null,notification:{message:"",visible:!1},dacs:[],selectedDac:a?.dacAssignment?.selectedDac??a?.selectedDac??null,ildaFrames:[],selectedIldaWorkerId:null,selectedIldaTotalFrames:0,bpm:a?.bpm??120,showBeamEffect:a?.renderSettings?.showBeamEffect??!0,beamAlpha:a?.renderSettings?.beamAlpha??.1,fadeAlpha:a?.renderSettings?.fadeAlpha??.13,playbackFps:a?.renderSettings?.playbackFps??60,previewScanRate:a?.renderSettings?.previewScanRate??1,beamRenderMode:a?.renderSettings?.beamRenderMode??"points",activeClipIndexes:Array(5).fill(null),isPlaying:!1,isStopped:!0,isWorldOutputActive:!1,thumbnailRenderMode:a?.thumbnailRenderMode??"still",theme:a?.theme??"orange",projectLoadTimestamp:null,clipClipboard:null,dacOutputSettings:a?.dacOutputSettings??{},quickAssigns:{knobs:Array(8).fill(null).map(()=>({value:0,label:null,link:null})),buttons:Array(8).fill(null).map(()=>({value:!1,label:null,link:null}))}});function mx(a,t){switch(t.type){case"SET_DAC_OUTPUT_SETTINGS":return{...a,dacOutputSettings:{...a.dacOutputSettings,[t.payload.id]:t.payload.settings}};case"SET_COLUMNS":return{...a,columns:t.payload};case"SET_COLUMN_NAME":{const l=[...a.columns];return l[t.payload.index]=t.payload.name,{...a,columns:l}}case"SET_LAYERS":return{...a,layers:t.payload};case"SET_LAYER_NAME":{const l=[...a.layers];return l[t.payload.index]=t.payload.name,{...a,layers:l}}case"SET_CLIP_CONTENT":{const l=[...a.clipContents];if(!l[t.payload.layerIndex])return console.error(`Reducer Error: Layer array at index ${t.payload.layerIndex} is undefined. Action:`,t),a;l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const o=l[t.payload.layerIndex][t.payload.colIndex]||{};return l[t.payload.layerIndex][t.payload.colIndex]={...o,...t.payload.content},{...a,clipContents:l}}case"SET_CLIP_NAME":{const l=[...a.clipNames];return l[t.payload.layerIndex]=[...l[t.payload.layerIndex]],l[t.payload.layerIndex][t.payload.colIndex]=t.payload.name,{...a,clipNames:l}}case"SET_THUMBNAIL_FRAME_INDEX":{const l=[...a.thumbnailFrameIndexes];return l[t.payload.layerIndex][t.payload.colIndex]=t.payload.index,{...a,thumbnailFrameIndexes:l}}case"ADD_LAYER_EFFECT":{const l=[...a.layerEffects],o={...t.payload.effect,instanceId:sm(),params:{...t.payload.effect.defaultParams}};return l[t.payload.layerIndex].push(o),{...a,layerEffects:l}}case"ADD_CLIP_EFFECT":{const l=[...a.clipContents];if(!l[t.payload.layerIndex])return console.error(`Reducer Error: Layer array at index ${t.payload.layerIndex} is undefined. Action:`,t),a;l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const o=l[t.payload.layerIndex][t.payload.colIndex]||{},u={...t.payload.effect,instanceId:sm(),params:{...t.payload.effect.defaultParams}},f={...o,effects:[...o.effects||[],u]};return l[t.payload.layerIndex][t.payload.colIndex]=f,{...a,clipContents:l}}case"SET_SELECTED_CLIP":return{...a,selectedLayerIndex:t.payload.layerIndex,selectedColIndex:t.payload.colIndex};case"SET_NOTIFICATION":return{...a,notification:t.payload};case"SET_ILDA_FRAMES":return{...a,ildaFrames:t.payload};case"SET_SELECTED_ILDA_DATA":return{...a,selectedIldaWorkerId:t.payload.workerId,selectedIldaTotalFrames:t.payload.totalFrames,selectedGeneratorId:t.payload.generatorId,selectedGeneratorParams:t.payload.generatorParams};case"SET_ACTIVE_CLIP":{const l=[...a.activeClipIndexes];return l[t.payload.layerIndex]=t.payload.colIndex,{...a,activeClipIndexes:l}}case"CLEAR_CLIP":{const l=[...a.clipContents];l[t.payload.layerIndex]=[...l[t.payload.layerIndex]],l[t.payload.layerIndex][t.payload.colIndex]=null;const o=[...a.clipNames];o[t.payload.layerIndex][t.payload.colIndex]=`Clip ${t.payload.layerIndex+1}-${t.payload.colIndex+1}`;const u=[...a.thumbnailFrameIndexes];u[t.payload.layerIndex][t.payload.colIndex]=0;const f=[...a.activeClipIndexes];return f[t.payload.layerIndex]===t.payload.colIndex&&(f[t.payload.layerIndex]=null),a.selectedLayerIndex===t.payload.layerIndex&&a.selectedColIndex===t.payload.colIndex?{...a,clipContents:l,clipNames:o,thumbnailFrameIndexes:u,activeClipIndexes:f,selectedLayerIndex:null,selectedColIndex:null,selectedIldaWorkerId:null,selectedIldaTotalFrames:0,selectedGeneratorId:null,selectedGeneratorParams:{}}:{...a,clipContents:l,clipNames:o,thumbnailFrameIndexes:u,activeClipIndexes:f}}case"DEACTIVATE_LAYER_CLIPS":{const l=[...a.activeClipIndexes];return l[t.payload.layerIndex]=null,{...a,activeClipIndexes:l}}case"CLEAR_ALL_ACTIVE_CLIPS":return{...a,activeClipIndexes:Array(a.layers.length).fill(null)};case"SET_LAYER_INTENSITY":{const l=[...a.layerIntensities];return l[t.payload.layerIndex]=t.payload.intensity,{...a,layerIntensities:l}}case"SET_LAYER_AUTOPILOT":{const l=[...a.layerAutopilots];return l[t.payload.layerIndex]=t.payload.mode,{...a,layerAutopilots:l}}case"TOGGLE_LAYER_BLACKOUT":{const l=[...a.layerBlackouts];return l[t.payload.layerIndex]=!l[t.payload.layerIndex],{...a,layerBlackouts:l}}case"TOGGLE_LAYER_SOLO":{const l=[...a.layerSolos],o=l[t.payload.layerIndex];return l.fill(!1),o||(l[t.payload.layerIndex]=!0),{...a,layerSolos:l}}case"SET_MASTER_INTENSITY":return{...a,masterIntensity:t.payload};case"TOGGLE_GLOBAL_BLACKOUT":return{...a,globalBlackout:!a.globalBlackout};case"SET_RENDER_SETTING":return{...a,[t.payload.setting]:t.payload.value};case"REMOVE_CLIP_EFFECT":{const l=[...a.clipContents];l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const o={...l[t.payload.layerIndex][t.payload.colIndex]};if(o&&o.effects){const u=[...o.effects];u.splice(t.payload.effectIndex,1),o.effects=u,l[t.payload.layerIndex][t.payload.colIndex]=o}return{...a,clipContents:l}}case"UPDATE_EFFECT_PARAMETER":{const l=[...a.clipContents];l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const o={...l[t.payload.layerIndex][t.payload.colIndex]};if(o&&o.effects){const u=[...o.effects],f={...u[t.payload.effectIndex]};f.params={...f.params,[t.payload.paramName]:t.payload.newValue},u[t.payload.effectIndex]=f,o.effects=u,l[t.payload.layerIndex][t.payload.colIndex]=o}return{...a,clipContents:l}}case"UPDATE_CLIP_PLAYBACK_SETTINGS":{const l=[...a.clipContents];l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const o={...l[t.payload.layerIndex][t.payload.colIndex]};return o&&(o.playbackSettings={...o.playbackSettings||{mode:"fps",duration:1,beats:8,speedMultiplier:1},...t.payload.settings},l[t.payload.layerIndex][t.payload.colIndex]=o),{...a,clipContents:l}}case"SET_CLIP_PARAM_SYNC":{const{layerIndex:l,colIndex:o,paramId:u,syncMode:f}=t.payload,p=[...a.clipContents];p[l]=[...p[l]];const h={...p[l][o]};if(h){const m=h.syncSettings||{},v=m[u]===f?null:f;h.syncSettings={...m,[u]:v},p[l][o]=h}return{...a,clipContents:p}}case"UPDATE_GENERATOR_PARAM":{const l=[...a.clipContents];l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const o={...l[t.payload.layerIndex][t.payload.colIndex]};return o&&o.type==="generator"&&o.currentParams&&(o.currentParams={...o.currentParams,[t.payload.paramName]:t.payload.newValue},l[t.payload.layerIndex][t.payload.colIndex]=o,a.selectedLayerIndex===t.payload.layerIndex&&a.selectedColIndex===t.payload.colIndex)?{...a,clipContents:l,selectedGeneratorParams:o.currentParams}:{...a,clipContents:l}}case"SET_DACS":return{...a,dacs:t.payload};case"SET_BPM":return{...a,bpm:t.payload};case"SET_SELECTED_DAC":return{...a,selectedDac:t.payload};case"SET_IS_PLAYING":return{...a,isPlaying:t.payload};case"SET_IS_STOPPED":return{...a,isStopped:t.payload};case"SET_WORLD_OUTPUT_ACTIVE":return{...a,isWorldOutputActive:t.payload};case"TOGGLE_WORLD_OUTPUT_ACTIVE":return{...a,isWorldOutputActive:!a.isWorldOutputActive};case"SET_CLIPBOARD":return{...a,clipClipboard:t.payload};case"SET_CLIP_DAC":{console.log("App.jsx Reducer: SET_CLIP_DAC payload.dac:",t.payload.dac);const l=[...a.clipContents];if(!l[t.payload.layerIndex])return console.error(`Reducer Error: Layer array at index ${t.payload.layerIndex} is undefined. Action:`,t),a;l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const o=l[t.payload.layerIndex][t.payload.colIndex]||{},u=o.assignedDacs||[];if(u.some(p=>p.ip===t.payload.dac.ip&&p.channel===t.payload.dac.channel))return a;const f={...o,assignedDacs:[...u,{...t.payload.dac,mirrorX:!1,mirrorY:!1}]};return l[t.payload.layerIndex][t.payload.colIndex]=f,{...a,clipContents:l}}case"TOGGLE_CLIP_DAC_MIRROR":{const{layerIndex:l,colIndex:o,dacIndex:u,axis:f}=t.payload,p=[...a.clipContents];p[l]=[...p[l]];const h={...p[l][o]};if(h&&h.assignedDacs){const m=[...h.assignedDacs],v={...m[u]};return f==="x"&&(v.mirrorX=!v.mirrorX),f==="y"&&(v.mirrorY=!v.mirrorY),m[u]=v,h.assignedDacs=m,p[l][o]=h,{...a,clipContents:p}}return a}case"REMOVE_CLIP_DAC":{const l=[...a.clipContents];l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const{layerIndex:o,colIndex:u,dacIndex:f}=t.payload,p=l[o][u];if(p&&p.assignedDacs){const h=[...p.assignedDacs];return h.splice(f,1),l[t.payload.layerIndex][t.payload.colIndex]={...p,assignedDacs:h},{...a,clipContents:l}}return a}case"SET_CLIP_AUDIO":{const l=[...a.clipContents],{layerIndex:o,colIndex:u,audioFile:f}=t.payload;l[o]=[...l[o]];const p=l[o][u];return p?(l[o][u]={...p,audioFile:f},{...a,clipContents:l}):a}case"REMOVE_CLIP_AUDIO":{const l=[...a.clipContents],{layerIndex:o,colIndex:u}=t.payload;l[o]=[...l[o]];const f=l[o][u];return f?(l[o][u]={...f,audioFile:null},{...a,clipContents:l}):a}case"SET_CLIP_PARSING_STATUS":{const{layerIndex:l,colIndex:o,status:u}=t.payload,f=[...a.clipContents];f[l]=[...f[l]];const p=f[l][o]||{};return f[l][o]={...p,parsing:u},{...a,clipContents:f}}case"SET_THUMBNAIL_RENDER_MODE":return{...a,thumbnailRenderMode:t.payload};case"SET_CLIP_TRIGGER_STYLE":{const{layerIndex:l,colIndex:o,style:u}=t.payload,f=[...a.clipContents];f[l]=[...f[l]];const p=f[l][o]||{};return f[l][o]={...p,triggerStyle:u},{...a,clipContents:f}}case"SET_THEME":return{...a,theme:t.payload};case"UPDATE_THUMBNAIL":{const{layerIndex:l,colIndex:o,frameIndex:u}=t.payload,f=[...a.thumbnailFrameIndexes];return f[l][o]=u,{...a,thumbnailFrameIndexes:f}}case"RESET_STATE":return Km({});case"LOAD_PROJECT":const r={...a,...t.payload};return r.clipContents=wl(r.clipContents,5,8,()=>({parsing:!1})),r.clipNames=wl(r.clipNames,5,8,(l,o)=>`Clip ${l+1}-${o+1}`),r.clipContents=r.clipContents.map(l=>l.map(o=>o&&o.type==="ilda"?{...o,workerId:null}:o)),r.activeClipIndexes=Array(a.layers.length).fill(null),r.selectedLayerIndex=null,r.selectedColIndex=null,r.selectedIldaWorkerId=null,r.selectedIldaTotalFrames=0,r.selectedGeneratorId=null,r.selectedGeneratorParams={},r.projectLoadTimestamp=Date.now(),r;case"LOAD_SETTINGS":return{...a,showBeamEffect:t.payload.renderSettings?.showBeamEffect??a.showBeamEffect,beamAlpha:t.payload.renderSettings?.beamAlpha??a.beamAlpha,fadeAlpha:t.payload.renderSettings?.fadeAlpha??a.fadeAlpha,playbackFps:t.payload.renderSettings?.playbackFps??a.playbackFps,previewScanRate:t.payload.renderSettings?.previewScanRate??a.previewScanRate,beamRenderMode:t.payload.renderSettings?.beamRenderMode??a.beamRenderMode,theme:t.payload.theme??a.theme,thumbnailRenderMode:t.payload.thumbnailRenderMode??a.thumbnailRenderMode,selectedDac:t.payload.selectedDac??a.selectedDac,clipNames:t.payload.clipNames?wl(t.payload.clipNames,5,8,(l,o)=>`Clip ${l+1}-${o+1}`):a.clipNames,dacOutputSettings:t.payload.dacOutputSettings??a.dacOutputSettings};case"ASSIGN_QUICK_CONTROL":{const{type:l,index:o,link:u}=t.payload,f={...a.quickAssigns};return f[l==="knob"?"knobs":"buttons"][o]={...f[l==="knob"?"knobs":"buttons"][o],label:u.paramName,link:u},{...a,quickAssigns:f}}case"UPDATE_QUICK_CONTROL":{const{type:l,index:o,value:u}=t.payload,f={...a.quickAssigns},p=l==="knob"?"knobs":"buttons";f[p][o]={...f[p][o],value:u};let h={...a,quickAssigns:f};const m=f[p][o];if(m.link){const{layerIndex:v,colIndex:x,effectIndex:b,paramName:E,targetType:C}=m.link,w=[...h.clipContents];if(w[v]){w[v]=[...w[v]];const B=w[v][x];if(B)if(C==="effect"&&B.effects&&B.effects[b]){const N=[...B.effects],q={...N[b]};q.params={...q.params,[E]:u},N[b]=q,w[v][x]={...B,effects:N}}else C==="generator"&&(w[v][x]={...B,currentParams:{...B.currentParams,[E]:u}});h.clipContents=w}}return h}case"TOGGLE_QUICK_BUTTON":{const{index:l}=t.payload,u=!a.quickAssigns.buttons[l].value,f={...a.quickAssigns};f.buttons[l]={...f.buttons[l],value:u};let p={...a,quickAssigns:f};const h=f.buttons[l];if(h.link){const{layerIndex:m,colIndex:v,effectIndex:x,paramName:b,targetType:E}=h.link,C=[...p.clipContents];if(C[m]){C[m]=[...C[m]];const w=C[m][v];if(w)if(E==="effect"&&w.effects&&w.effects[x]){const B=[...w.effects],N={...B[x]};N.params={...N.params,[b]:u},B[x]=N,C[m][v]={...w,effects:B}}else E==="generator"&&(C[m][v]={...w,currentParams:{...w.currentParams,[b]:u}});p.clipContents=C}}return p}default:return a}}const Ws={orange:{full:9,dim:10},yellow:{full:13,dim:14},cyan:{full:36,dim:35},"light-blue":{full:41,dim:43},blue:{full:45,dim:46},magenta:{full:53,dim:54},red:{full:5,dim:6},green:{full:21,dim:22},white:{full:3,dim:1}},vx=({isPlaying:a,globalBlackout:t,layerBlackouts:r,layerSolos:l,isWorldOutputActive:o,clipContents:u,activeClipIndexes:f,theme:p,bpm:h,quickAssigns:m})=>{const{sendFeedback:v,mappings:x,selectedMidiInputId:b,midiInitialized:E}=so();return D.useEffect(()=>{if(!b||!E||!a){E&&b&&Js(b,"F#6",0,1);return}let C=!1;const w=6e4/(h||120),B=setInterval(()=>{C=!C,Js(b,"F#6",C?127:0,1)},w/2);return()=>{clearInterval(B),Js(b,"F#6",0,1)}},[a,h,b,E]),D.useEffect(()=>{v("transport_play",a),v("transport_stop",!a)},[a,v]),D.useEffect(()=>{v("comp_blackout",t)},[t,v]),D.useEffect(()=>{v("laser_output",o)},[o,v]),D.useEffect(()=>{r.forEach((C,w)=>{v(`layer_${w}_blackout`,C)})},[r,v]),D.useEffect(()=>{l.forEach((C,w)=>{v(`layer_${w}_solo`,C)})},[l,v]),D.useEffect(()=>{if(!u||!f)return;const C=Ws[p]||Ws.orange;u.forEach((w,B)=>{w.forEach((N,q)=>{const _=`clip_${B}_${q}`;if(x[_]){const Y=f[B]===q,K=N!==null&&(N.type==="ilda"||N.type==="generator"),ce=N?.triggerStyle||"normal";let xe=0,Se=null;Y?(xe=C.full,ce==="toggle"&&(Se=10)):K&&(xe=C.dim),v(_,xe,Se)}})})},[u,f,p,x,v]),D.useEffect(()=>{if(!m)return;const C=Ws[p]||Ws.orange;m.buttons.forEach((w,B)=>{v(`quick_btn_${B}`,w.value?C.full:0)})},[m,p,v]),null};function gx(){const a=uy(),t=dy(),{playAudio:r,stopAudio:l,pauseAllAudio:o,resumeAllAudio:u,setPlaybackRate:f,resetAllAudio:p,stopAllAudio:h,getAudioInfo:m}=hy();D.useRef(new Set),D.useRef(0);const v=D.useRef({}),x=D.useRef(new Map),b=D.useRef({}),[E,C]=D.useState(0),w=D.useRef({}),B=D.useRef({}),[N,q]=D.useState(null),[_,Y]=D.useState(!1),[K,ce]=D.useState(!1),[xe,Se]=D.useState({midi:!1,artnet:!1,osc:!1,keyboard:!1}),[$,ae]=D.useState(!1),[ne,oe]=D.useState(!1),[he,ve]=D.useState({title:"",initialValue:"",onSave:()=>{}}),[X,R]=D.useState("files"),[z,L]=D.useReducer(mx,Km(_?N:{})),{columns:ue,layers:T,clipContents:G,clipNames:re,thumbnailFrameIndexes:le,layerEffects:Te,layerIntensities:Ie,layerAutopilots:Ae,layerBlackouts:dt,layerSolos:ze,masterIntensity:it,globalBlackout:ln,selectedLayerIndex:Je,selectedColIndex:Ze,notification:ur,dacs:jn,selectedDac:Ei,ildaFrames:Pc,selectedIldaWorkerId:Bt,selectedIldaTotalFrames:Ti,showBeamEffect:Ai,beamAlpha:Ci,fadeAlpha:cr,playbackFps:fr,previewScanRate:Ni,beamRenderMode:Bl,activeClipIndexes:un,isPlaying:tn,isWorldOutputActive:Ut,selectedGeneratorId:oa,selectedGeneratorParams:cn,thumbnailRenderMode:Mi,theme:Lr,dacOutputSettings:ua}=z,Cn=D.useMemo(()=>T.map((k,O)=>{const Q=un[O];if(Q!==null){const j=G[O][Q];if(j){let te,me=null;if(j.type==="ilda"&&j.workerId&&j.totalFrames)return te=j.workerId,me=j.stillFrame,{type:"ilda",workerId:te,totalFrames:j.totalFrames,effects:j.effects||[],dac:j.dac||null,assignedDacs:j.assignedDacs||[],ildaFormat:j.ildaFormat||0,stillFrame:me,layerIndex:O};if(j.type==="generator"&&j.frames&&j.generatorDefinition)return te=`generator-${O}-${Q}`,me=j.frames?.[0]||null,{type:"generator",workerId:te,totalFrames:j.frames.length,effects:j.effects||[],dac:j.dac||null,assignedDacs:j.assignedDacs||[],ildaFormat:0,stillFrame:me,layerIndex:O}}}return null}).filter(Boolean),[T,un,G]),dr=D.useRef(Ie),Kn=D.useRef(Ae),hr=D.useRef(it),Oa=D.useRef(dt),wi=D.useRef(ze),Ri=D.useRef(ln),kr=D.useRef(ua),Ir=D.useRef(jn),ca=D.useRef([]),Da=D.useRef(G),pr=D.useRef(un),fa=D.useRef(re),Br=D.useRef(Bt),Oi=D.useRef(Ti),Di=D.useRef({});D.useEffect(()=>{dr.current=Ie,Kn.current=Ae,hr.current=it,Oa.current=dt,wi.current=ze,Ri.current=ln,kr.current=ua,Ir.current=jn,ca.current=Cn,Da.current=G,pr.current=un,fa.current=re,Br.current=Bt,Oi.current=Ti},[Ie,it,dt,ze,ln,ua,jn,Cn,G,un,re,Bt,Ti]);const co=D.useCallback(k=>{const O=1-k*2,Q=[],j=100;for(let te=0;te<j;te++){const me=te/(j-1)*2-1;Q.push({x:me,y:O,r:0,g:255,b:0,blanking:!1})}return{points:Q,isTypedArray:!1}},[]),Wn=D.useCallback((k,O)=>{if(!O||!k||!k.points)return k;const{safetyZones:Q,outputArea:j,transformationEnabled:te,transformationMode:me}=O;let fe=k.points;const He=k.isTypedArray||fe instanceof Float32Array,Ue=He?fe.length/8:fe.length;let De;He?De=new Float32Array(fe):De=fe.map(Le=>({...Le}));for(let Le=0;Le<Ue;Le++){let Gt,yt,Lt,Rn,Ce,et;if(He?(Gt=De[Le*8],yt=De[Le*8+1],Lt=De[Le*8+3],Rn=De[Le*8+4],Ce=De[Le*8+5],et=De[Le*8+6]):(Gt=De[Le].x,yt=De[Le].y,Lt=De[Le].r,Rn=De[Le].g,Ce=De[Le].b,et=De[Le].blanking?1:0),te&&j){let pe=(Gt+1)/2,Ve=(1-yt)/2;me==="crop"?(pe<j.x||pe>j.x+j.w||Ve<j.y||Ve>j.y+j.h)&&(Lt=0,Rn=0,Ce=0,et=1):me==="scale"&&(pe=j.x+pe*j.w,Ve=j.y+Ve*j.h,Gt=pe*2-1,yt=1-Ve*2)}if(Q&&Q.length>0){let pe=(Gt+1)/2,Ve=(1-yt)/2;for(const Pe of Q)if(pe>=Pe.x&&pe<=Pe.x+Pe.w&&Ve>=Pe.y&&Ve<=Pe.y+Pe.h){Lt=0,Rn=0,Ce=0,et=1;break}}He?(De[Le*8]=Gt,De[Le*8+1]=yt,De[Le*8+3]=Lt,De[Le*8+4]=Rn,De[Le*8+5]=Ce,De[Le*8+6]=et):(De[Le].x=Gt,De[Le].y=yt,De[Le].r=Lt,De[Le].g=Rn,De[Le].b=Ce,De[Le].blanking=et>.5)}return{...k,points:De,isTypedArray:He}},[]),Ft=D.useCallback((k,O)=>{L({type:"SET_DAC_OUTPUT_SETTINGS",payload:{id:k,settings:O}})},[]),Yt=D.useCallback(k=>{L({type:"SET_RENDER_SETTING",payload:{setting:"playbackFps",value:k}})},[]);D.useEffect(()=>{const k=fr/60;f(k)},[fr,f]);const sn=k=>{L({type:"SET_NOTIFICATION",payload:{message:k,visible:!0}}),setTimeout(()=>{L({type:"SET_NOTIFICATION",payload:{message:"",visible:!1}})},3e3)};D.useEffect(()=>{const k={orange:"#ff5e00",yellow:"#ffd400",cyan:"#00fff3","light-blue":"#0089ff",blue:"#005aff",magenta:"#fb00ff",red:"#ff0000",green:"#00ff00",white:"#ffffff"},O=k[Lr]||k.orange;document.documentElement.style.setProperty("--theme-color",O);const Q=parseInt(O.slice(1,3),16),j=parseInt(O.slice(3,5),16),te=parseInt(O.slice(5,7),16);document.documentElement.style.setProperty("--theme-color-transparent",`rgba(${Q}, ${j}, ${te}, 0.2)`),window.electronAPI&&window.electronAPI.setTheme&&window.electronAPI.setTheme(Lr)},[Lr]),D.useMemo(()=>{const k=new Set;return Bt&&k.add(Bt),Cn.forEach(O=>{O&&O.type==="ilda"&&O.workerId&&k.add(O.workerId)}),Array.from(k)},[Bt,Cn]),D.useEffect(()=>{if(!a)return;const k=Ce=>{if(Ce.data.type==="get-frame"&&Ce.data.success)if(Ce.data.isStillFrame){const{workerId:et,frame:pe,layerIndex:Ve,colIndex:Pe}=Ce.data;L({type:"SET_CLIP_CONTENT",payload:{layerIndex:Ve,colIndex:Pe,content:{stillFrame:pe,parsing:!1}}})}else v.current[Ce.data.workerId]=Ce.data.frame;else if(Ce.data.type==="parse-ilda"&&Ce.data.success){const{workerId:et,totalFrames:pe,ildaFormat:Ve,fileName:Pe,filePath:Fe,layerIndex:Ge,colIndex:Me}=Ce.data,Ye=z.clipContents[Ge][Me]||{},at={...Ye,type:"ilda",workerId:et,totalFrames:pe,ildaFormat:Ve,fileName:Pe,filePath:Fe,stillFrame:null,parsing:!0,playbackSettings:Ye.playbackSettings||{mode:"fps",duration:pe/60,beats:8,speedMultiplier:1}};L({type:"SET_CLIP_CONTENT",payload:{layerIndex:Ge,colIndex:Me,content:at}});const Re=fa.current[Ge][Me],lt=`Clip ${Ge+1}-${Me+1}`;Re===lt&&L({type:"SET_CLIP_NAME",payload:{layerIndex:Ge,colIndex:Me,name:Pe}}),a.postMessage({type:"get-frame",workerId:et,frameIndex:0,isStillFrame:!0,layerIndex:Ge,colIndex:Me})}else if(Ce.data.success===!1){sn(`Worker error: ${Ce.data.error}`);const{layerIndex:et,colIndex:pe}=Ce.data;et!==void 0&&pe!==void 0&&L({type:"SET_CLIP_PARSING_STATUS",payload:{layerIndex:et,colIndex:pe,status:!1}})}};a.addEventListener("message",k);let O,Q,j,te=0,me=0;const fe=60,He=1e3/fe,De=1e3/30,Le=Ce=>{if(Ce.length===0)return null;if(Ce.length===1)return Ce[0];let et=0;Ce.forEach((Pe,Fe)=>{const Me=Pe.points instanceof Float32Array||Pe.isTypedArray?Pe.points.length/8:Pe.points.length;et+=Me,Fe<Ce.length-1&&(et+=2)});const pe=new Float32Array(et*8);let Ve=0;return Ce.forEach((Pe,Fe)=>{const Ge=Pe.points instanceof Float32Array||Pe.isTypedArray,Me=Ge?Pe.points.length/8:Pe.points.length;for(let Ye=0;Ye<Me;Ye++){const at=(Ve+Ye)*8;if(Ge){const Re=Ye*8;pe.set(Pe.points.subarray(Re,Re+8),at)}else{const Re=Pe.points[Ye];pe[at]=Re.x,pe[at+1]=Re.y,pe[at+2]=Re.z||0,pe[at+3]=Re.r,pe[at+4]=Re.g,pe[at+5]=Re.b,pe[at+6]=Re.blanking?1:0,pe[at+7]=Re.lastPoint?1:0}pe[at+7]=0}if(Ve+=Me,Fe<Ce.length-1){const Ye=Ce[Fe+1],at=Ye.points instanceof Float32Array||Ye.isTypedArray,Re=pe[(Ve-1)*8],lt=pe[(Ve-1)*8+1];let St,Qt;at?(St=Ye.points[0],Qt=Ye.points[1]):(St=Ye.points[0].x,Qt=Ye.points[0].y);let On=Ve*8;pe[On]=Re,pe[On+1]=lt,pe[On+6]=1,pe[On+3]=0,pe[On+4]=0,pe[On+5]=0;let jt=(Ve+1)*8;pe[jt]=St,pe[jt+1]=Qt,pe[jt+6]=1,pe[jt+3]=0,pe[jt+4]=0,pe[jt+5]=0,Ve+=2}}),pe[(et-1)*8+7]=1,{points:pe,isTypedArray:!0}},Gt=Ce=>{if(!Ut){cancelAnimationFrame(Q);return}if(Ce-te>He){if(window.electronAPI&&Ut){const et=new Map;ca.current.forEach(pe=>{if(pe&&v.current[pe.workerId]){const Ve=pe.assignedDacs&&pe.assignedDacs.length>0?pe.assignedDacs:Ei?[Ei]:[];if(Ve.length===0)return;const Pe=pe.effects||[],Fe=v.current[pe.workerId],Ge=dr.current[pe.layerIndex],Me=Ri.current,Ye=Oa.current[pe.layerIndex],at=wi.current[pe.layerIndex],Re=wi.current.some($e=>$e);let lt=Ge;Me?lt=0:Re?at?Ye&&(lt=0):lt=0:Ye&&(lt=0);const St=lt*hr.current;if(St<=0)return;const Qt=b.current[pe.workerId]||0,On=pe.syncSettings||{},jt={...Fe,points:yt(Fe.points)?Fe.points:Fe.points.map($e=>({...$e,r:Math.round($e.r*St),g:Math.round($e.g*St),b:Math.round($e.b*St)}))};if(yt(jt.points)){const $e=jt.points,xt=$e.length/8,mt=new Float32Array($e);for(let Qe=0;Qe<xt;Qe++)mt[Qe*8+3]*=St,mt[Qe*8+4]*=St,mt[Qe*8+5]*=St;jt.points=mt}const At=Pe.map($e=>{const xt={...$e.params},mt=en.find(Qe=>Qe.id===$e.id);return mt&&mt.paramControls.forEach(Qe=>{const pn=`${$e.id}.${Qe.id}`,mn=On[pn],Nt=typeof mn=="string"?{syncMode:mn,range:[Qe.min,Qe.max],direction:"forward",style:"loop"}:mn;if(Nt&&Nt.syncMode&&(Qe.type==="range"||Qe.type==="number")){let Kt=0;Nt.syncMode==="fps"?Kt=Ce*.001%1:(Nt.syncMode==="timeline"||Nt.syncMode==="bpm")&&(Kt=Qt),Nt.direction==="backward"?Kt=1-Kt:Nt.direction==="pause"&&(Kt=0),Nt.style==="bounce"?Kt=Kt<.5?Kt*2:2-Kt*2:Nt.style==="once"&&(Kt=Math.min(Kt,1));const ht=Nt.range?Nt.range[0]:Qe.min,Mt=Nt.range?Nt.range[1]:Qe.max;xt[Qe.id]=ht+(Mt-ht)*Kt}}),{...$e,params:xt}}),nn=hm(jt,At,{progress:Qt,time:Ce,effectStates:x.current});Ve.forEach($e=>{const xt=$e.ip,mt=$e.channel||($e.channels&&$e.channels.length>0?$e.channels[0].serviceID:0);if(mt!==void 0){const Qe=`${xt}:${mt}`;et.has(Qe)||et.set(Qe,{ip:xt,channel:mt,frames:[]});let pn=nn;if($e.mirrorX||$e.mirrorY){const mn=nn.points,Nt=nn.isTypedArray,Kt=Nt?mn.length/8:mn.length,ht=Nt?new Float32Array(mn):mn.map(Mt=>({...Mt}));for(let Mt=0;Mt<Kt;Mt++)Nt?($e.mirrorX&&(ht[Mt*8]=-ht[Mt*8]),$e.mirrorY&&(ht[Mt*8+1]=-ht[Mt*8+1])):($e.mirrorX&&(ht[Mt].x=-ht[Mt].x),$e.mirrorY&&(ht[Mt].y=-ht[Mt].y));pn={...nn,points:ht}}et.get(Qe).frames.push(pn)}})}}),Ir.current.forEach(pe=>{(pe.channels&&pe.channels.length>0?pe.channels.map(Pe=>Pe.serviceID):[0]).forEach(Pe=>{const Fe=`${pe.ip}:${Pe}`,Ge=kr.current[Fe];if(Ge){et.has(Fe)||et.set(Fe,{ip:pe.ip,channel:Pe,frames:[]});const Me=et.get(Fe);if(Ge.testLineEnabled){const Ye=co(Ge.testLineY!==void 0?Ge.testLineY:.5);Me.frames=[Ye]}}})}),et.forEach(pe=>{let Ve=Le(pe.frames);const Pe=`${pe.ip}:${pe.channel}`,Fe=kr.current[Pe];if(Ve&&Fe){if(Fe.dimmer!==void 0&&Fe.dimmer<1){const Ge=Fe.dimmer,Me=Ve.points,Ye=Ve.isTypedArray,at=Ye?Me.length/8:Me.length;for(let Re=0;Re<at;Re++)Ye?(Me[Re*8+3]*=Ge,Me[Re*8+4]*=Ge,Me[Re*8+5]*=Ge):(Me[Re].r*=Ge,Me[Re].g*=Ge,Me[Re].b*=Ge)}Ve=Wn(Ve,Fe)}Ve&&window.electronAPI.sendFrame(pe.ip,pe.channel,Ve,fe)})}te=Ce}Q=requestAnimationFrame(Gt)};function yt(Ce){return!!Ce&&(Ce instanceof Float32Array||Ce.buffer instanceof ArrayBuffer)}const Lt=Ce=>{const et=1e3/fr,pe=z.bpm||120,Ve=(Fe,Ge,Me)=>{w.current[Me]||(w.current[Me]=Ce);const Ye=Ce-w.current[Me],at=pr.current[Ge]!==null?m(Ge):null;let Re=B.current[Me]||0,lt=0;const St=Fe.totalFrames||1,Qt=Fe.playbackSettings||{mode:"fps",duration:St/60,beats:8,speedMultiplier:1};if(at&&tn&&!at.paused)lt=at.duration>0?at.currentTime/at.duration:0,Re=Math.floor(lt*St);else if(Qt.mode==="timeline"){const At=Qt.duration*1e3/(Qt.speedMultiplier||1);tn&&At>0&&(lt=Ye/At%1,Re=Math.floor(lt*St))}else if(Qt.mode==="bpm"){const At=6e4/pe,nn=Qt.beats*At/(Qt.speedMultiplier||1);tn&&nn>0&&(lt=Ye/nn%1,Re=Math.floor(lt*St))}else if(Ye>=et){const At=Math.floor(Ye/et);w.current[Me]=Ce-Ye%et,tn&&(Re=Re+At),lt=St>0?Re%St/St:0}else return;isNaN(Re)&&(Re=0),isNaN(lt)&&(lt=0);const jt=(Di.current[Me]||0)>.9&&lt<.1;if(Di.current[Me]=lt,b.current[Me]=lt,St>0&&(Re=Re%St),jt&&tn){const At=Kn.current[Ge];if(At&&At!=="off"){const nn=Da.current[Ge],$e=pr.current[Ge];let xt=-1;if(At==="forward")for(let mt=1;mt<nn.length;mt++){const Qe=($e+mt)%nn.length,pn=nn[Qe];if(pn&&(pn.type==="ilda"||pn.type==="generator")){xt=Qe;break}}else if(At==="random"){const mt=nn.map((Qe,pn)=>Qe&&(Qe.type==="ilda"||Qe.type==="generator")?pn:-1).filter(Qe=>Qe!==-1);if(mt.length>0){const Qe=Math.floor(Math.random()*mt.length);xt=mt[Qe],xt===$e&&mt.length>1&&(xt=mt[(Qe+1)%mt.length])}}xt!==-1&&xt!==$e&&setTimeout(()=>{bt(Ge,xt)},0)}}(B.current[Me]!==Re||!v.current[Me])&&(B.current[Me]=Re,Fe.type==="ilda"?a.postMessage({type:"get-frame",workerId:Me,frameIndex:Re}):Fe.type==="generator"&&Fe.frames&&Fe.frames[Re%Fe.frames.length]&&(v.current[Me]=Fe.frames[Re%Fe.frames.length]))};T.forEach((Fe,Ge)=>{const Me=pr.current[Ge];if(Me===null)return;const Ye=Da.current[Ge][Me];if(!Ye)return;let at=Ye.type==="ilda"?Ye.workerId:Ye.type==="generator"?`generator-${Ge}-${Me}`:null;at&&Ve(Ye,Ge,at)});const Pe=Br.current;if(Pe&&!ca.current.some(Fe=>Fe.workerId===Pe)){const Fe=Je,Ge=Ze;if(Fe!==null&&Ge!==null){const Me=Da.current[Fe][Ge];Me&&Ve(Me,Fe,Pe)}}O=requestAnimationFrame(Lt)},Rn=Ce=>{Ce-me>De&&(C(et=>et+1),me=Ce),j=requestAnimationFrame(Rn)};return O=requestAnimationFrame(Lt),j=requestAnimationFrame(Rn),Ut?Q=requestAnimationFrame(Gt):cancelAnimationFrame(Q),()=>{a.removeEventListener("message",k),cancelAnimationFrame(O),cancelAnimationFrame(Q),cancelAnimationFrame(j)}},[a,fr,tn,Ut,Ei,m,z.bpm,Je,Ze]),D.useEffect(()=>{let k,O,Q;return window.electronAPI&&(k=window.electronAPI.onClipContextMenuCommand((j,te,me)=>{if(console.log(`Clip context menu command received: ${j} for ${te}-${me}`),j==="update-thumbnail"){const fe=G[te][me];if(fe)if(fe.type==="ilda"&&fe.workerId&&a){const He=B.current[fe.workerId]||0;a.postMessage({type:"get-frame",workerId:fe.workerId,frameIndex:He,isStillFrame:!0,layerIndex:te,colIndex:me})}else fe.type==="generator"&&fe.generatorDefinition&&t&&zn(te,me,fe.generatorDefinition,fe.currentParams)}else if(j==="clear-clip")L({type:"CLEAR_CLIP",payload:{layerIndex:te,colIndex:me}});else if(j==="rename-clip"){const fe=fa.current[te][me];ve({title:"Rename Clip",initialValue:fe,onSave:He=>L({type:"SET_CLIP_NAME",payload:{layerIndex:te,colIndex:me,name:He}})}),ae(!0)}else if(j==="copy-clip"){const fe={content:Da.current[te][me],name:fa.current[te][me]};L({type:"SET_CLIPBOARD",payload:fe}),sn("Clip copied.")}else if(j==="cut-clip"){const fe={content:Da.current[te][me],name:fa.current[te][me]};L({type:"SET_CLIPBOARD",payload:fe}),L({type:"CLEAR_CLIP",payload:{layerIndex:te,colIndex:me}}),sn("Clip cut.")}else if(j==="paste-clip")if(z.clipClipboard){const{content:fe,name:He}=z.clipClipboard;let Ue={...fe};Ue.type==="ilda"&&(Ue.workerId=null),L({type:"SET_CLIP_CONTENT",payload:{layerIndex:te,colIndex:me,content:Ue}}),L({type:"SET_CLIP_NAME",payload:{layerIndex:te,colIndex:me,name:He}}),sn("Clip pasted."),setTimeout(()=>{const De=Ue;De.type==="generator"&&De.generatorDefinition&&zn(te,me,De.generatorDefinition,De.currentParams)},100)}else sn("Clipboard is empty.");else j==="set-trigger-style-normal"?L({type:"SET_CLIP_TRIGGER_STYLE",payload:{layerIndex:te,colIndex:me,style:"normal"}}):j==="set-trigger-style-toggle"?L({type:"SET_CLIP_TRIGGER_STYLE",payload:{layerIndex:te,colIndex:me,style:"toggle"}}):j==="set-trigger-style-flash"&&L({type:"SET_CLIP_TRIGGER_STYLE",payload:{layerIndex:te,colIndex:me,style:"flash"}})}),O=window.electronAPI.onLayerFullContextMenuCommand((j,te)=>{if(console.log(`Layer context menu command received: ${j} for ${te}`),j==="layer-rename"){const me=T[te];ve({title:"Rename Layer",initialValue:me,onSave:fe=>L({type:"SET_LAYER_NAME",payload:{index:te,name:fe}})}),ae(!0)}else j==="layer-clear-clips"&&L({type:"DEACTIVATE_LAYER_CLIPS",payload:{layerIndex:te}})}),Q=window.electronAPI.onContextMenuActionFromMain(j=>{if(console.log("General context menu action received:",j),j.type==="rename-column"){const te=ue[j.index];ve({title:"Rename Column",initialValue:te,onSave:me=>L({type:"SET_COLUMN_NAME",payload:{index:j.index,name:me}})}),ae(!0)}else if(j.type==="rename-layer"){const te=T[j.index];ve({title:"Rename Layer",initialValue:te,onSave:me=>L({type:"SET_LAYER_NAME",payload:{index:j.index,name:me}})}),ae(!0)}})),()=>{k&&k(),O&&O(),Q&&Q()}},[G,re,T,ue,a,t,z.clipClipboard]);const Fr=D.useRef(le);D.useEffect(()=>{for(let k=0;k<T.length;k++)for(let O=0;O<ue.length;O++){const Q=le[k][O],j=Fr.current[k][O];if(Q!==j){const te=G[k][O];te&&te.type==="ilda"&&te.workerId&&(console.log(`[App.jsx] Fetching new still frame for ${k}-${O} at index ${Q}`),a.postMessage({type:"get-frame",workerId:te.workerId,frameIndex:Q,isStillFrame:!0,layerIndex:k,colIndex:O}))}}Fr.current=le},[le,G,T.length,ue.length,a]),D.useEffect(()=>{!z.projectLoadTimestamp||!a||!t||(console.log("Project loaded, regenerating content..."),G.forEach((k,O)=>{k.forEach((Q,j)=>{Q&&(Q.type==="ilda"&&Q.filePath&&!Q.workerId?(console.log(`Reparsing ILDA file for clip ${O}-${j}: ${Q.filePath}`),a.postMessage({type:"load-and-parse-ilda",fileName:Q.fileName,filePath:Q.filePath,layerIndex:O,colIndex:j})):Q.type==="generator"&&Q.generatorDefinition&&(console.log(`Regenerating generator clip ${O}-${j} on project load`),zn(O,j,Q.generatorDefinition,Q.currentParams)))})}))},[z.projectLoadTimestamp,a,t]),D.useEffect(()=>{let k,O,Q,j,te;return window.electronAPI&&(k=window.electronAPI.on("new-project",()=>L({type:"RESET_STATE"})),O=window.electronAPI.on("open-project",()=>{}),Q=window.electronAPI.on("save-project",()=>window.electronAPI.send("save-project",z)),j=window.electronAPI.on("save-project-as",()=>window.electronAPI.send("save-project-as",z)),te=window.electronAPI.on("load-project-data",me=>{L({type:"LOAD_PROJECT",payload:me})})),()=>{k&&k(),O&&O(),Q&&Q(),j&&j(),te&&te()}},[z]),D.useEffect(()=>{let k,O;return(async()=>{if(window.electronAPI&&window.electronAPI.getAllSettings){const j=await window.electronAPI.getAllSettings();j&&(j.shortcutsState&&Se(j.shortcutsState),L({type:"LOAD_SETTINGS",payload:j}))}})(),window.electronAPI&&(k=window.electronAPI.onMenuAction(j=>{if(console.log("Menu action received:",j),j==="output-settings")oe(!0);else if(j.startsWith("set-theme-")){const te=j.split("set-theme-")[1];L({type:"SET_THEME",payload:te})}else if(j==="shortcuts-window"||j.startsWith("open-")&&j.endsWith("-settings"))ce(!0);else if(j.startsWith("toggle-")){const te=j.split("-");if(te.length===3){const me=te[1],fe=te[2]==="true";Se(He=>({...He,[me]:fe}))}}}),O=window.electronAPI.onRenderSettingsCommand(j=>{console.log("Render settings command received:",j),L({type:"SET_RENDER_SETTING",payload:{setting:j.setting,value:j.value}})})),()=>{k&&k(),O&&O()}},[]),D.useEffect(()=>{if(!a)return;const k=async O=>{if(O.data.type==="request-file-content"){const{filePath:Q,requestId:j}=O.data;try{const te=await window.electronAPI.readFileForWorker(Q);a.postMessage({type:"file-content-response",requestId:j,arrayBuffer:te},[te])}catch(te){console.error(`Renderer: Failed to read file for worker: ${Q}`,te),a.postMessage({type:"file-content-response",requestId:j,error:te.message})}}else if(O.data.type==="parsing-status"){const{layerIndex:Q,colIndex:j,status:te}=O.data;L({type:"SET_CLIP_PARSING_STATUS",payload:{layerIndex:Q,colIndex:j,status:te}})}};return a.addEventListener("message",k),()=>{a.removeEventListener("message",k)}},[a]);const fo=D.useMemo(()=>Je!==null&&Ze!==null?G[Je][Ze]?.effects||[]:[],[Je,Ze,G]),ho=D.useCallback((k,O,Q,j,te)=>{L({type:"UPDATE_EFFECT_PARAMETER",payload:{layerIndex:k,colIndex:O,effectIndex:Q,paramName:j,newValue:te}})},[]);D.useEffect(()=>{if(!t)return;const k=O=>{if(O.data.success){const{layerIndex:Q,colIndex:j,frames:te,generatorDefinition:me,currentParams:fe}=O.data,He=z.clipContents[Q][j]||{},Ue={...He,type:"generator",generatorDefinition:me,frames:te,currentParams:fe,playbackSettings:He.playbackSettings||{mode:"fps",duration:te.length/60,beats:8,speedMultiplier:1}};L({type:"SET_CLIP_CONTENT",payload:{layerIndex:Q,colIndex:j,content:Ue}});const De=fa.current[Q][j],Le=`Clip ${Q+1}-${j+1}`;De===Le&&L({type:"SET_CLIP_NAME",payload:{layerIndex:Q,colIndex:j,name:me.name}});const Gt=`generator-${Q}-${j}`;v.current[Gt]=te[0]}else sn(`Error generating frames: ${O.data.error}`)};return t.addEventListener("message",k),()=>{t.removeEventListener("message",k)}},[t,z.clipContents]);const Fl=D.useCallback((k,O,Q)=>{console.log("[App.jsx] handleDropGenerator - Received generatorDefinition:",Q),t&&(console.log("[App.jsx] handleDropGenerator - Using new regenerateGeneratorClip function"),zn(k,O,Q,Q.defaultParams))},[t]),zn=async(k,O,Q,j)=>{const te={...Q.defaultParams,...j};let me=null;if(Q.id==="text"){const He="src/fonts/arial.ttf";let Ue=te.fontUrl;["https://raw.githubusercontent.com/google/fonts/main/ofl/roboto/Roboto-Regular.ttf","https://raw.githubusercontent.com/googlefonts/roboto-2/main/src/hinted/Roboto-Regular.ttf"].includes(Ue)&&(Ue=He);try{if(Ue.startsWith("http"))if(window.electronAPI&&window.electronAPI.fetchUrlAsArrayBuffer)me=await window.electronAPI.fetchUrlAsArrayBuffer(Ue);else throw new Error("URL fetching API is not available.");else if(window.electronAPI&&window.electronAPI.readFileForWorker)me=await window.electronAPI.readFileForWorker(Ue);else throw new Error("File reading API is not available.")}catch(Le){console.error(`Failed to load font for text generator at ${k}-${O}:`,Le),sn(`Font error: ${Le.message}`);return}}const fe={type:"generate",layerIndex:k,colIndex:O,generator:Q,params:te,fontBuffer:me};me?t.postMessage(fe,[me]):t.postMessage(fe)},Nn=D.useCallback(k=>{l(k),L({type:"DEACTIVATE_LAYER_CLIPS",payload:{layerIndex:k}})},[l]),Jn=D.useCallback(()=>{h(),L({type:"CLEAR_ALL_ACTIVE_CLIPS"})},[h]),$n=D.useCallback(()=>{u(),T.forEach((k,O)=>{const Q=un[O];if(Q!==null){const j=G[O][Q];j&&j.audioFile&&!m(O)&&r(O,j.audioFile.path,!0)}}),L({type:"SET_IS_PLAYING",payload:!0}),L({type:"SET_IS_STOPPED",payload:!1})},[u,T,un,G,m,r]),da=D.useCallback(()=>{o(),L({type:"SET_IS_PLAYING",payload:!1}),L({type:"SET_IS_STOPPED",payload:!1})},[o]),ea=D.useCallback(()=>{p(),o(),L({type:"SET_IS_PLAYING",payload:!1}),L({type:"SET_IS_STOPPED",payload:!0}),B.current={}},[p,o]),bt=D.useCallback((k,O,Q=!0)=>{const j=G[k][O];if(!j){Q&&(Mn(k,O),Nn(k));return}const te=j.triggerStyle||"normal",me=un[k];if(te==="normal"){if(!Q)return}else if(te==="toggle"){if(!Q)return;if(me===O){Nn(k);return}}else if(te==="flash"&&!Q){me===O&&Nn(k);return}if(j&&j.type==="generator"&&j.frames&&j.frames.length>0){const fe=`generator-${k}-${O}`;v.current[fe]=j.frames[0],w.current[fe]=performance.now(),B.current[fe]=0}else j&&j.type==="ilda"&&j.workerId&&(w.current[j.workerId]=performance.now(),B.current[j.workerId]=0);j&&j.audioFile?r(k,j.audioFile.path,tn):l(k),L({type:"SET_ACTIVE_CLIP",payload:{layerIndex:k,colIndex:O}})},[G,un,Nn,r,tn,l]),Gl=D.useCallback((k,O,Q)=>{L({type:"ADD_CLIP_EFFECT",payload:{layerIndex:k,colIndex:O,effect:Q}})},[]),jl=D.useCallback((k,O,Q)=>{console.trace("App.jsx: handleDropDac received dacData:",Q),L({type:"SET_CLIP_DAC",payload:{layerIndex:k,colIndex:O,dac:Q}})},[]),Mn=D.useCallback((k,O)=>{L({type:"SET_SELECTED_CLIP",payload:{layerIndex:k,colIndex:O}});const Q=G[k][O];if(Q&&Q.type==="ilda")L({type:"SET_SELECTED_ILDA_DATA",payload:{workerId:Q.workerId,totalFrames:Q.totalFrames,generatorId:null,generatorParams:{}}});else if(Q&&Q.type==="generator"){const j=`generator-${k}-${O}`;L({type:"SET_SELECTED_ILDA_DATA",payload:{workerId:j,generatorId:Q.generatorDefinition.id,generatorParams:Q.currentParams,totalFrames:Q.frames.length}}),console.log(`[App.jsx] handleClipPreview - Dispatched SET_SELECTED_ILDA_DATA for generator. workerId: ${j}`)}else L({type:"SET_SELECTED_ILDA_DATA",payload:{workerId:null,totalFrames:0,generatorId:null,generatorParams:{}}})},[G]),_a=k=>{window.electronAPI&&window.electronAPI.showLayerFullContextMenu&&window.electronAPI.showLayerFullContextMenu(k)},po=k=>{window.electronAPI&&window.electronAPI.showColumnContextMenu&&window.electronAPI.showColumnContextMenu(k)},Gr=k=>{T.forEach((O,Q)=>{const j=G[Q][k];j&&(j.type==="ilda"||j.type==="generator")?bt(Q,k):Nn(Q)})},zl=D.useCallback(k=>{L({type:"SET_SELECTED_DAC",payload:k})},[]),mo=D.useCallback(k=>{L({type:"SET_DACS",payload:k})},[]),jr=(k,O)=>{if(Je!==null&&Ze!==null){const Q=G[Je][Ze];if(!Q||!Q.generatorDefinition)return;const j={...Q.currentParams,[k]:O};L({type:"UPDATE_GENERATOR_PARAM",payload:{layerIndex:Je,colIndex:Ze,paramName:k,newValue:O}}),zn(Je,Ze,Q.generatorDefinition,j)}},mr=Je!==null&&Ze!==null?G[Je][Ze]:null,wn=mr?Je:null,ha=(wn!==null?Ie[wn]:1)*it,Ua=D.useMemo(()=>{const k=v.current[Bt]||null;return k&&ha!==1?{...k,points:k.points.map(O=>({...O,r:Math.round(O.r*ha),g:Math.round(O.g*ha),b:Math.round(O.b*ha)}))}:k},[E,Bt,ha]),_i=D.useMemo(()=>{const k={};return Cn.forEach(O=>{O&&O.workerId&&v.current[O.workerId]&&(k[O.workerId]={frame:v.current[O.workerId],effects:O.effects||[],layerIndex:O.layerIndex})}),k},[Cn,E]),Ui=D.useMemo(()=>{const k=ze.some(O=>O);return Ie.map((O,Q)=>{if(ln)return 0;if(k){if(!ze[Q]||dt[Q])return 0}else if(dt[Q])return 0;return O})},[Ie,dt,ze,ln]),Pl=D.useCallback((k,O,Q=127,j="noteon")=>{if(O===0&&!k.endsWith("_intensity")&&k!=="master_intensity"&&k!=="master_speed"&&!k.startsWith("clip_")&&k!=="bpm_value"&&k!=="bpm_fine_up"&&k!=="bpm_fine_down")return;const te=O/Q;switch(k){case"transport_play":O>0&&$n();break;case"transport_pause":O>0&&da();break;case"transport_stop":O>0&&ea();break;case"comp_blackout":O>0&&L({type:"TOGGLE_GLOBAL_BLACKOUT"});break;case"comp_clear":O>0&&Jn();break;case"master_intensity":L({type:"SET_MASTER_INTENSITY",payload:te});break;case"master_speed":const me=Math.max(1,Math.round(te*120));Yt(me);break;case"laser_output":O>0&&L({type:"TOGGLE_WORLD_OUTPUT_ACTIVE"});break;case"bpm_value":if(j==="controlchange"){let fe=0;O<=10?fe=O:O>=118&&(fe=O-128),fe!==0&&L({type:"SET_BPM",payload:Math.max(1,Math.min(999,(z.bpm||120)+fe))})}break;case"bpm_fine_up":O>0&&L({type:"SET_BPM",payload:Math.min(999,(z.bpm||120)+.1)});break;case"bpm_fine_down":O>0&&L({type:"SET_BPM",payload:Math.max(1,(z.bpm||120)-.1)});break;case"bpm_tap":break;default:if(k.startsWith("layer_")){const fe=k.split("_"),He=parseInt(fe[1]),Ue=fe[2];Ue==="blackout"&&O>0?L({type:"TOGGLE_LAYER_BLACKOUT",payload:{layerIndex:He}}):Ue==="solo"&&O>0?L({type:"TOGGLE_LAYER_SOLO",payload:{layerIndex:He}}):Ue==="intensity"?L({type:"SET_LAYER_INTENSITY",payload:{layerIndex:He,intensity:te}}):Ue==="clear"&&O>0&&Nn(He)}else if(k.startsWith("clip_")){const fe=k.split("_"),He=parseInt(fe[1]),Ue=parseInt(fe[2]);fe[3]==="preview"?O>0&&Mn(He,Ue):bt(He,Ue,O>0)}else if(k.startsWith("column_")){const fe=k.split("_"),He=parseInt(fe[1]);O>0&&Gr(He)}else if(k.startsWith("quick_knob_")){const fe=parseInt(k.split("_")[2]);L({type:"UPDATE_QUICK_CONTROL",payload:{type:"knob",index:fe,value:te}})}else if(k.startsWith("quick_btn_")){const fe=parseInt(k.split("_")[2]);O>0&&L({type:"TOGGLE_QUICK_BUTTON",payload:{index:fe}})}else if(k.startsWith("dimmer_")){const fe=k.replace("dimmer_","").replace(/_/g,"."),He=ua[fe]||{};L({type:"SET_DAC_OUTPUT_SETTINGS",payload:{id:fe,settings:{...He,dimmer:te}}})}else{const fe=k.split("_");if(fe.length>=2&&Je!==null&&Ze!==null){const He=G[Je][Ze];if(He&&He.effects){const Ue=fe[0],De=fe.slice(1).join("_"),Le=He.effects.findIndex(Gt=>Gt.id===Ue);if(Le!==-1){const yt=en.find(Lt=>Lt.id===Ue)?.paramControls.find(Lt=>Lt.id===De);if(yt){let Lt=te;yt.type==="range"||yt.type==="number"?Lt=yt.min+(yt.max-yt.min)*te:yt.type==="checkbox"&&(Lt=te>.5),L({type:"UPDATE_EFFECT_PARAMETER",payload:{layerIndex:Je,colIndex:Ze,effectIndex:Le,paramName:De,newValue:Lt}})}}}}}}},[$n,da,ea,Jn,Nn,Yt,z.bpm,Mn,bt,Gr,G,Je,Ze,ua]);return g.jsx(mg,{onMidiCommand:Pl,children:g.jsxs(vg,{onArtnetCommand:(k,O)=>Pl(k,O,255),children:[g.jsx(vx,{isPlaying:tn,globalBlackout:ln,layerBlackouts:dt,layerSolos:ze,isWorldOutputActive:Ut,clipContents:G,activeClipIndexes:un,theme:Lr,bpm:z.bpm,quickAssigns:z.quickAssigns}),g.jsx(vy,{}),g.jsx("div",{className:"app",children:g.jsxs(oy,{children:[g.jsx(Qg,{message:ur.message,visible:ur.visible}),g.jsx(sy,{show:ne,onClose:()=>oe(!1),dacs:jn,dacSettings:ua,onUpdateDacSettings:Ft}),g.jsx(iy,{show:$,title:he.title,initialValue:he.initialValue,onSave:he.onSave,onClose:()=>ce(!1)||ae(!1)}),g.jsxs("div",{className:"main-content",children:[g.jsxs("div",{className:"top-bar-left-area",children:[g.jsx(yg,{masterIntensity:z.masterIntensity,onMasterIntensityChange:k=>L({type:"SET_MASTER_INTENSITY",payload:k}),onClearAllActive:Jn,isGlobalBlackout:ln,onToggleGlobalBlackout:()=>L({type:"TOGGLE_GLOBAL_BLACKOUT"})}),g.jsx(px,{isWorldOutputActive:Ut,onToggleWorldOutput:()=>L({type:"TOGGLE_WORLD_OUTPUT_ACTIVE"})})]}),g.jsxs("div",{className:"layer-controls-container",children:[T.map((k,O)=>{const Q=Cn.find(te=>{const me=un[O];if(me===null)return!1;const fe=G[O][me];return fe?fe.type==="ilda"?te.workerId===fe.workerId:fe.type==="generator"?te.workerId===`generator-${O}-${me}`:!1:!1})||null,j=Q?v.current[Q.workerId]:null;return g.jsx(Sg,{layerName:k,index:O,layerEffects:Te[O],activeClipData:Q,liveFrame:j,thumbnailRenderMode:Mi,intensity:z.layerIntensities[O],onIntensityChange:te=>L({type:"SET_LAYER_INTENSITY",payload:{layerIndex:O,intensity:te}}),onDeactivateLayerClips:()=>Nn(O),onShowLayerFullContextMenu:()=>_a(O),isBlackout:dt[O],isSolo:ze[O],onToggleBlackout:()=>L({type:"TOGGLE_LAYER_BLACKOUT",payload:{layerIndex:O}}),onToggleSolo:()=>L({type:"TOGGLE_LAYER_SOLO",payload:{layerIndex:O}})},O)}),"          "]}),g.jsx("div",{className:"clip-deck-container",children:g.jsxs("div",{className:"clip-deck",children:[g.jsx("div",{className:"column-headers-container",children:ue.map((k,O)=>g.jsx(bg,{name:k,index:O,onTrigger:()=>Gr(O),onShowColumnHeaderContextMenu:()=>po(O)},O))}),T.map((k,O)=>g.jsx("div",{className:"layer-row",children:ue.map((Q,j)=>{const te=G?.[O]?.[j];let me=null;te&&te.type==="ilda"?me=te.workerId:te&&te.type==="generator"&&(me=`generator-${O}-${j}`);const fe=me?v.current[me]:null,He=te&&te.type==="ilda"?te.stillFrame:te&&te.type==="generator"?te.frames?.[0]:null;return g.jsx(kg,{layerIndex:O,colIndex:j,clipName:re?.[O]?.[j]||`Clip ${O+1}-${j+1}`,clipContent:te,thumbnailFrameIndex:le[O][j],thumbnailRenderMode:Mi,liveFrame:fe,stillFrame:He,onActivateClick:Ue=>bt(O,j,Ue),isActive:un[O]===j,onUnsupportedFile:sn,onDropEffect:Ue=>Gl(O,j,Ue),onDropGenerator:Fl,onDropDac:(Ue,De,Le)=>{console.log("App.jsx: Lambda dacData from Clip:",Le),jl(Ue,De,Le)},onLabelClick:()=>Mn(O,j),isSelected:Je===O&&Ze===j,ildaParserWorker:a},j)})},O))]})}),g.jsxs("div",{className:"side-panel",children:[g.jsxs("div",{className:"thumbnail-render-mode-selector",children:[g.jsx("label",{htmlFor:"thumbnailRenderMode",children:"Thumbnail Mode:"}),g.jsxs("select",{id:"thumbnailRenderMode",value:Mi,onChange:k=>L({type:"SET_THUMBNAIL_RENDER_MODE",payload:k.target.value}),children:[g.jsx("option",{value:"still",children:"Still Frame"}),g.jsx("option",{value:"active",children:"Live Render"})]})]}),g.jsx(Jg,{frame:Ua,effects:fo,showBeamEffect:Ai,beamAlpha:Ci,fadeAlpha:cr,previewScanRate:Ni,beamRenderMode:Bl,intensity:ha}),g.jsx($g,{activeFrames:_i,showBeamEffect:Ai,beamAlpha:Ci,fadeAlpha:cr,previewScanRate:Ni,beamRenderMode:Bl,layerIntensities:Ui,masterIntensity:it})]}),g.jsxs("div",{className:"middle-bar",children:[g.jsx("div",{className:"middle-bar-left-area",children:g.jsx(ey,{bpm:z.bpm,onBpmChange:k=>L({type:"SET_BPM",payload:k})})}),g.jsxs("div",{className:"middle-bar-mid-area",children:[g.jsx(ty,{onPlay:$n,onPause:da,onStop:ea,isPlaying:tn,isStopped:z.isStopped}),g.jsx(hx,{playbackFps:fr,onSpeedChange:Yt})]}),"          			",g.jsx("div",{className:"middle-bar-right-area",children:g.jsx("p",{children:" Right Section of Middle-Bar"})})]}),"          ",g.jsxs("div",{className:"bottom-panel",children:[g.jsxs("div",{className:"bottom-panel-tabs-container",children:[g.jsxs("div",{className:"bottom-panel-tabs",children:[g.jsx("button",{className:`tab-button ${X==="files"?"active":""}`,onClick:()=>R("files"),children:"Files"}),g.jsx("button",{className:`tab-button ${X==="generators"?"active":""}`,onClick:()=>R("generators"),children:"Generators"}),g.jsx("button",{className:`tab-button ${X==="effects"?"active":""}`,onClick:()=>R("effects"),children:"Effects"})]}),g.jsxs("div",{className:"bottom-panel-tab-content",children:[X==="files"&&g.jsx(Ig,{onDropIld:(k,O,Q)=>a.postMessage({type:"parse-ilda",file:Q,layerIndex:k,colIndex:O})}),X==="generators"&&g.jsx(Bg,{}),X==="effects"&&g.jsx(Fg,{})]})]}),g.jsx(Gg,{dacs:jn,onDacSelected:zl,onDacsDiscovered:mo,dacSettings:ua,onUpdateDacSettings:Ft}),g.jsx(Zg,{selectedLayerIndex:Je,autopilotMode:Je!==null?z.layerAutopilots[Je]:"off",onAutopilotChange:k=>L({type:"SET_LAYER_AUTOPILOT",payload:{layerIndex:Je,mode:k}})}),g.jsx(Xg,{selectedLayerIndex:Je,selectedColIndex:Ze,clip:mr,audioInfo:m(Je),onAssignAudio:async()=>{const k=await window.electronAPI.showAudioFileDialog();if(k){const O=k.split(/[\\/]/).pop();L({type:"SET_CLIP_AUDIO",payload:{layerIndex:Je,colIndex:Ze,audioFile:{path:k,name:O}}})}},onRemoveAudio:()=>L({type:"REMOVE_CLIP_AUDIO",payload:{layerIndex:Je,colIndex:Ze}}),onUpdatePlaybackSettings:(k,O,Q)=>L({type:"UPDATE_CLIP_PLAYBACK_SETTINGS",payload:{layerIndex:k,colIndex:O,settings:Q}}),onSetParamSync:(k,O)=>L({type:"SET_CLIP_PARAM_SYNC",payload:{layerIndex:Je,colIndex:Ze,paramId:k,syncMode:O}}),onToggleDacMirror:(k,O,Q,j)=>L({type:"TOGGLE_CLIP_DAC_MIRROR",payload:{layerIndex:k,colIndex:O,dacIndex:Q,axis:j}}),onRemoveDac:k=>L({type:"REMOVE_CLIP_DAC",payload:{layerIndex:Je,colIndex:Ze,dacIndex:k}}),onRemoveEffect:(k,O,Q)=>L({type:"REMOVE_CLIP_EFFECT",payload:{layerIndex:k,colIndex:O,effectIndex:Q}}),onParameterChange:ho,onGeneratorParameterChange:jr}),g.jsx(ry,{enabledShortcuts:xe,onOpenOutputSettings:()=>oe(!0),quickAssigns:z.quickAssigns,onUpdateKnob:(k,O)=>L({type:"UPDATE_QUICK_CONTROL",payload:{type:"knob",index:k,value:O}}),onToggleButton:k=>L({type:"UPDATE_QUICK_CONTROL",payload:{type:"button",index:k,value:!z.quickAssigns.buttons[k].value}}),onAssign:(k,O,Q)=>L({type:"ASSIGN_QUICK_CONTROL",payload:{type:k,index:O,link:Q}})})]})]})]})})]})})}lg.createRoot(document.getElementById("root")).render(g.jsx(Kg,{children:g.jsx(cy,{children:g.jsxs(fy,{children:[" ",g.jsx(gx,{})]})})}));

(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function r(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(o){if(o.ep)return;o.ep=!0;const u=r(o);fetch(o.href,u)}})();function _c(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var cc={exports:{}},Tl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cp;function Wv(){if(cp)return Tl;cp=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(l,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:a,type:l,key:f,ref:o!==void 0?o:null,props:u}}return Tl.Fragment=t,Tl.jsx=r,Tl.jsxs=r,Tl}var fp;function Jv(){return fp||(fp=1,cc.exports=Wv()),cc.exports}var g=Jv(),fc={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dp;function $v(){if(dp)return Ie;dp=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.iterator;function S(T){return T===null||typeof T!="object"?null:(T=x&&T[x]||T["@@iterator"],typeof T=="function"?T:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function j(T,G,ie){this.props=T,this.context=G,this.refs=D,this.updater=ie||E}j.prototype.isReactComponent={},j.prototype.setState=function(T,G){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,G,"setState")},j.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function N(){}N.prototype=j.prototype;function V(T,G,ie){this.props=T,this.context=G,this.refs=D,this.updater=ie||E}var U=V.prototype=new N;U.constructor=V,C(U,j.prototype),U.isPureReactComponent=!0;var Y=Array.isArray,Q={H:null,A:null,T:null,S:null,V:null},ue=Object.prototype.hasOwnProperty;function Ee(T,G,ie,se,Te,_e){return ie=_e.ref,{$$typeof:a,type:T,key:G,ref:ie!==void 0?ie:null,props:_e}}function Se(T,G){return Ee(T.type,G,void 0,void 0,void 0,T.props)}function J(T){return typeof T=="object"&&T!==null&&T.$$typeof===a}function ae(T){var G={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(ie){return G[ie]})}var ne=/\/+/g;function ce(T,G){return typeof T=="object"&&T!==null&&T.key!=null?ae(""+T.key):G.toString(36)}function de(){}function re(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(de,de):(T.status="pending",T.then(function(G){T.status==="pending"&&(T.status="fulfilled",T.value=G)},function(G){T.status==="pending"&&(T.status="rejected",T.reason=G)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function ee(T,G,ie,se,Te){var _e=typeof T;(_e==="undefined"||_e==="boolean")&&(T=null);var Ae=!1;if(T===null)Ae=!0;else switch(_e){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(T.$$typeof){case a:case t:Ae=!0;break;case v:return Ae=T._init,ee(Ae(T._payload),G,ie,se,Te)}}if(Ae)return Te=Te(T),Ae=se===""?"."+ce(T,0):se,Y(Te)?(ie="",Ae!=null&&(ie=Ae.replace(ne,"$&/")+"/"),ee(Te,G,ie,"",function(rt){return rt})):Te!=null&&(J(Te)&&(Te=Se(Te,ie+(Te.key==null||T&&T.key===Te.key?"":(""+Te.key).replace(ne,"$&/")+"/")+Ae)),G.push(Te)),1;Ae=0;var dt=se===""?".":se+":";if(Y(T))for(var Fe=0;Fe<T.length;Fe++)se=T[Fe],_e=dt+ce(se,Fe),Ae+=ee(se,G,ie,_e,Te);else if(Fe=S(T),typeof Fe=="function")for(T=Fe.call(T),Fe=0;!(se=T.next()).done;)se=se.value,_e=dt+ce(se,Fe++),Ae+=ee(se,G,ie,_e,Te);else if(_e==="object"){if(typeof T.then=="function")return ee(re(T),G,ie,se,Te);throw G=String(T),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function R(T,G,ie){if(T==null)return T;var se=[],Te=0;return ee(T,se,"","",function(_e){return G.call(ie,_e,Te++)}),se}function P(T){if(T._status===-1){var G=T._result;G=G(),G.then(function(ie){(T._status===0||T._status===-1)&&(T._status=1,T._result=ie)},function(ie){(T._status===0||T._status===-1)&&(T._status=2,T._result=ie)}),T._status===-1&&(T._status=0,T._result=G)}if(T._status===1)return T._result.default;throw T._result}var I=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function fe(){}return Ie.Children={map:R,forEach:function(T,G,ie){R(T,function(){G.apply(this,arguments)},ie)},count:function(T){var G=0;return R(T,function(){G++}),G},toArray:function(T){return R(T,function(G){return G})||[]},only:function(T){if(!J(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},Ie.Component=j,Ie.Fragment=r,Ie.Profiler=o,Ie.PureComponent=V,Ie.StrictMode=l,Ie.Suspense=h,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(T){return Q.H.useMemoCache(T)}},Ie.cache=function(T){return function(){return T.apply(null,arguments)}},Ie.cloneElement=function(T,G,ie){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var se=C({},T.props),Te=T.key,_e=void 0;if(G!=null)for(Ae in G.ref!==void 0&&(_e=void 0),G.key!==void 0&&(Te=""+G.key),G)!ue.call(G,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&G.ref===void 0||(se[Ae]=G[Ae]);var Ae=arguments.length-2;if(Ae===1)se.children=ie;else if(1<Ae){for(var dt=Array(Ae),Fe=0;Fe<Ae;Fe++)dt[Fe]=arguments[Fe+2];se.children=dt}return Ee(T.type,Te,void 0,void 0,_e,se)},Ie.createContext=function(T){return T={$$typeof:f,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:u,_context:T},T},Ie.createElement=function(T,G,ie){var se,Te={},_e=null;if(G!=null)for(se in G.key!==void 0&&(_e=""+G.key),G)ue.call(G,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(Te[se]=G[se]);var Ae=arguments.length-2;if(Ae===1)Te.children=ie;else if(1<Ae){for(var dt=Array(Ae),Fe=0;Fe<Ae;Fe++)dt[Fe]=arguments[Fe+2];Te.children=dt}if(T&&T.defaultProps)for(se in Ae=T.defaultProps,Ae)Te[se]===void 0&&(Te[se]=Ae[se]);return Ee(T,_e,void 0,void 0,null,Te)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(T){return{$$typeof:p,render:T}},Ie.isValidElement=J,Ie.lazy=function(T){return{$$typeof:v,_payload:{_status:-1,_result:T},_init:P}},Ie.memo=function(T,G){return{$$typeof:m,type:T,compare:G===void 0?null:G}},Ie.startTransition=function(T){var G=Q.T,ie={};Q.T=ie;try{var se=T(),Te=Q.S;Te!==null&&Te(ie,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(fe,I)}catch(_e){I(_e)}finally{Q.T=G}},Ie.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},Ie.use=function(T){return Q.H.use(T)},Ie.useActionState=function(T,G,ie){return Q.H.useActionState(T,G,ie)},Ie.useCallback=function(T,G){return Q.H.useCallback(T,G)},Ie.useContext=function(T){return Q.H.useContext(T)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(T,G){return Q.H.useDeferredValue(T,G)},Ie.useEffect=function(T,G,ie){var se=Q.H;if(typeof ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(T,G)},Ie.useId=function(){return Q.H.useId()},Ie.useImperativeHandle=function(T,G,ie){return Q.H.useImperativeHandle(T,G,ie)},Ie.useInsertionEffect=function(T,G){return Q.H.useInsertionEffect(T,G)},Ie.useLayoutEffect=function(T,G){return Q.H.useLayoutEffect(T,G)},Ie.useMemo=function(T,G){return Q.H.useMemo(T,G)},Ie.useOptimistic=function(T,G){return Q.H.useOptimistic(T,G)},Ie.useReducer=function(T,G,ie){return Q.H.useReducer(T,G,ie)},Ie.useRef=function(T){return Q.H.useRef(T)},Ie.useState=function(T){return Q.H.useState(T)},Ie.useSyncExternalStore=function(T,G,ie){return Q.H.useSyncExternalStore(T,G,ie)},Ie.useTransition=function(){return Q.H.useTransition()},Ie.version="19.1.1",Ie}var hp;function Uc(){return hp||(hp=1,fc.exports=$v()),fc.exports}var O=Uc();const ir=_c(O);var dc={exports:{}},Al={},hc={exports:{}},pc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pp;function eg(){return pp||(pp=1,(function(a){function t(R,P){var I=R.length;R.push(P);e:for(;0<I;){var fe=I-1>>>1,T=R[fe];if(0<o(T,P))R[fe]=P,R[I]=T,I=fe;else break e}}function r(R){return R.length===0?null:R[0]}function l(R){if(R.length===0)return null;var P=R[0],I=R.pop();if(I!==P){R[0]=I;e:for(var fe=0,T=R.length,G=T>>>1;fe<G;){var ie=2*(fe+1)-1,se=R[ie],Te=ie+1,_e=R[Te];if(0>o(se,I))Te<T&&0>o(_e,se)?(R[fe]=_e,R[Te]=I,fe=Te):(R[fe]=se,R[ie]=I,fe=ie);else if(Te<T&&0>o(_e,I))R[fe]=_e,R[Te]=I,fe=Te;else break e}}return P}function o(R,P){var I=R.sortIndex-P.sortIndex;return I!==0?I:R.id-P.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;a.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();a.unstable_now=function(){return f.now()-p}}var h=[],m=[],v=1,x=null,S=3,E=!1,C=!1,D=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function Y(R){for(var P=r(m);P!==null;){if(P.callback===null)l(m);else if(P.startTime<=R)l(m),P.sortIndex=P.expirationTime,t(h,P);else break;P=r(m)}}function Q(R){if(D=!1,Y(R),!C)if(r(h)!==null)C=!0,ue||(ue=!0,ce());else{var P=r(m);P!==null&&ee(Q,P.startTime-R)}}var ue=!1,Ee=-1,Se=5,J=-1;function ae(){return j?!0:!(a.unstable_now()-J<Se)}function ne(){if(j=!1,ue){var R=a.unstable_now();J=R;var P=!0;try{e:{C=!1,D&&(D=!1,V(Ee),Ee=-1),E=!0;var I=S;try{t:{for(Y(R),x=r(h);x!==null&&!(x.expirationTime>R&&ae());){var fe=x.callback;if(typeof fe=="function"){x.callback=null,S=x.priorityLevel;var T=fe(x.expirationTime<=R);if(R=a.unstable_now(),typeof T=="function"){x.callback=T,Y(R),P=!0;break t}x===r(h)&&l(h),Y(R)}else l(h);x=r(h)}if(x!==null)P=!0;else{var G=r(m);G!==null&&ee(Q,G.startTime-R),P=!1}}break e}finally{x=null,S=I,E=!1}P=void 0}}finally{P?ce():ue=!1}}}var ce;if(typeof U=="function")ce=function(){U(ne)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,re=de.port2;de.port1.onmessage=ne,ce=function(){re.postMessage(null)}}else ce=function(){N(ne,0)};function ee(R,P){Ee=N(function(){R(a.unstable_now())},P)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(R){R.callback=null},a.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<R?Math.floor(1e3/R):5},a.unstable_getCurrentPriorityLevel=function(){return S},a.unstable_next=function(R){switch(S){case 1:case 2:case 3:var P=3;break;default:P=S}var I=S;S=P;try{return R()}finally{S=I}},a.unstable_requestPaint=function(){j=!0},a.unstable_runWithPriority=function(R,P){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var I=S;S=R;try{return P()}finally{S=I}},a.unstable_scheduleCallback=function(R,P,I){var fe=a.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?fe+I:fe):I=fe,R){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=I+T,R={id:v++,callback:P,priorityLevel:R,startTime:I,expirationTime:T,sortIndex:-1},I>fe?(R.sortIndex=I,t(m,R),r(h)===null&&R===r(m)&&(D?(V(Ee),Ee=-1):D=!0,ee(Q,I-fe))):(R.sortIndex=T,t(h,R),C||E||(C=!0,ue||(ue=!0,ce()))),R},a.unstable_shouldYield=ae,a.unstable_wrapCallback=function(R){var P=S;return function(){var I=S;S=P;try{return R.apply(this,arguments)}finally{S=I}}}})(pc)),pc}var mp;function tg(){return mp||(mp=1,hc.exports=eg()),hc.exports}var mc={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp;function ng(){if(vp)return en;vp=1;var a=Uc();function t(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var l={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(h,m,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:h,containerInfo:m,implementation:v}}var f=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,en.createPortal=function(h,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return u(h,m,null,v)},en.flushSync=function(h){var m=f.T,v=l.p;try{if(f.T=null,l.p=2,h)return h()}finally{f.T=m,l.p=v,l.d.f()}},en.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,l.d.C(h,m))},en.prefetchDNS=function(h){typeof h=="string"&&l.d.D(h)},en.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var v=m.as,x=p(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,E=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?l.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:x,integrity:S,fetchPriority:E}):v==="script"&&l.d.X(h,{crossOrigin:x,integrity:S,fetchPriority:E,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},en.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=p(m.as,m.crossOrigin);l.d.M(h,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&l.d.M(h)},en.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,x=p(v,m.crossOrigin);l.d.L(h,v,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},en.preloadModule=function(h,m){if(typeof h=="string")if(m){var v=p(m.as,m.crossOrigin);l.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else l.d.m(h)},en.requestFormReset=function(h){l.d.r(h)},en.unstable_batchedUpdates=function(h,m){return h(m)},en.useFormState=function(h,m,v){return f.H.useFormState(h,m,v)},en.useFormStatus=function(){return f.H.useHostTransitionStatus()},en.version="19.1.1",en}var gp;function o0(){if(gp)return mc.exports;gp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),mc.exports=ng(),mc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp;function ag(){if(yp)return Al;yp=1;var a=tg(),t=Uc(),r=o0();function l(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function f(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(u(e)!==e)throw Error(l(188))}function h(e){var n=e.alternate;if(!n){if(n=u(e),n===null)throw Error(l(188));return n!==e?null:e}for(var i=e,s=n;;){var c=i.return;if(c===null)break;var d=c.alternate;if(d===null){if(s=c.return,s!==null){i=s;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===i)return p(c),e;if(d===s)return p(c),n;d=d.sibling}throw Error(l(188))}if(i.return!==s.return)i=c,s=d;else{for(var y=!1,b=c.child;b;){if(b===i){y=!0,i=c,s=d;break}if(b===s){y=!0,s=c,i=d;break}b=b.sibling}if(!y){for(b=d.child;b;){if(b===i){y=!0,i=d,s=c;break}if(b===s){y=!0,s=d,i=c;break}b=b.sibling}if(!y)throw Error(l(189))}}if(i.alternate!==s)throw Error(l(190))}if(i.tag!==3)throw Error(l(188));return i.stateNode.current===i?e:n}function m(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=m(e),n!==null)return n;e=e.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),V=Symbol.for("react.consumer"),U=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),Ee=Symbol.for("react.memo"),Se=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),ne=Symbol.iterator;function ce(e){return e===null||typeof e!="object"?null:(e=ne&&e[ne]||e["@@iterator"],typeof e=="function"?e:null)}var de=Symbol.for("react.client.reference");function re(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===de?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case j:return"Profiler";case D:return"StrictMode";case Q:return"Suspense";case ue:return"SuspenseList";case J:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case U:return(e.displayName||"Context")+".Provider";case V:return(e._context.displayName||"Context")+".Consumer";case Y:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ee:return n=e.displayName||null,n!==null?n:re(e.type)||"Memo";case Se:n=e._payload,e=e._init;try{return re(e(n))}catch{}}return null}var ee=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I={pending:!1,data:null,method:null,action:null},fe=[],T=-1;function G(e){return{current:e}}function ie(e){0>T||(e.current=fe[T],fe[T]=null,T--)}function se(e,n){T++,fe[T]=e.current,e.current=n}var Te=G(null),_e=G(null),Ae=G(null),dt=G(null);function Fe(e,n){switch(se(Ae,n),se(_e,e),se(Te,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Fh(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Fh(n),e=Gh(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ie(Te),se(Te,e)}function rt(){ie(Te),ie(_e),ie(Ae)}function nn(e){e.memoizedState!==null&&se(dt,e);var n=Te.current,i=Gh(n,e.type);n!==i&&(se(_e,e),se(Te,i))}function tt(e){_e.current===e&&(ie(Te),ie(_e)),dt.current===e&&(ie(dt),yl._currentValue=I)}var et=Object.prototype.hasOwnProperty,or=a.unstable_scheduleCallback,Gn=a.unstable_cancelCallback,xi=a.unstable_shouldYield,Hc=a.unstable_requestPaint,Lt=a.unstable_now,Ei=a.unstable_getCurrentPriorityLevel,Ti=a.unstable_ImmediatePriority,Ai=a.unstable_UserBlockingPriority,ur=a.unstable_NormalPriority,Ra=a.unstable_LowPriority,Ci=a.unstable_IdlePriority,Bl=a.log,ln=a.unstable_setDisableYieldValue,Kt=null,Ot=null;function sa(e){if(typeof Bl=="function"&&ln(e),Ot&&typeof Ot.setStrictMode=="function")try{Ot.setStrictMode(Kt,e)}catch{}}var sn=Math.clz32?Math.clz32:cr,Ni=Math.log,Ur=Math.LN2;function cr(e){return e>>>=0,e===0?32:31-(Ni(e)/Ur|0)|0}var En=256,fr=4194304;function Qn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function dr(e,n,i){var s=e.pendingLanes;if(s===0)return 0;var c=0,d=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var b=s&134217727;return b!==0?(s=b&~d,s!==0?c=Qn(s):(y&=b,y!==0?c=Qn(y):i||(i=b&~e,i!==0&&(c=Qn(i))))):(b=s&~d,b!==0?c=Qn(b):y!==0?c=Qn(y):i||(i=s&~e,i!==0&&(c=Qn(i)))),c===0?0:n!==0&&n!==c&&(n&d)===0&&(d=c&-c,i=n&-n,d>=i||d===32&&(i&4194048)!==0)?n:c}function wa(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Mi(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ri(){var e=En;return En<<=1,(En&4194048)===0&&(En=256),e}function Lr(){var e=fr;return fr<<=1,(fr&62914560)===0&&(fr=4194304),e}function kr(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function oa(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Oa(e,n,i,s,c,d){var y=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var b=e.entanglements,A=e.expirationTimes,B=e.hiddenUpdates;for(i=y&~i;0<i;){var X=31-sn(i),$=1<<X;b[X]=0,A[X]=-1;var z=B[X];if(z!==null)for(B[X]=null,X=0;X<z.length;X++){var H=z[X];H!==null&&(H.lane&=-536870913)}i&=~$}s!==0&&hr(e,s,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(y&~n))}function hr(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var s=31-sn(n);e.entangledLanes|=n,e.entanglements[s]=e.entanglements[s]|1073741824|i&4194090}function ua(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var s=31-sn(i),c=1<<s;c&n|e[s]&n&&(e[s]|=n),i&=~c}}function Br(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function wi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Oi(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:rp(e.type))}function uo(e,n){var i=P.p;try{return P.p=e,n()}finally{P.p=i}}var Kn=Math.random().toString(36).slice(2),kt="__reactFiber$"+Kn,jt="__reactProps$"+Kn,an="__reactContainer$"+Kn,Ir="__reactEvents$"+Kn,co="__reactListeners$"+Kn,fo="__reactHandles$"+Kn,Il="__reactResources$"+Kn,jn="__reactMarker$"+Kn;function Tn(e){delete e[kt],delete e[jt],delete e[Ir],delete e[co],delete e[fo]}function Wn(e){var n=e[kt];if(n)return n;for(var i=e.parentNode;i;){if(n=i[an]||i[kt]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=Ph(e);e!==null;){if(i=e[kt])return i;e=Ph(e)}return n}e=i,i=e.parentNode}return null}function Jn(e){if(e=e[kt]||e[an]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function ca(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(l(33))}function $n(e){var n=e[Il];return n||(n=e[Il]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function gt(e){e[jn]=!0}var Fl=new Set,Gl={};function An(e,n){Da(e,n),Da(e+"Capture",n)}function Da(e,n){for(Gl[e]=n,e=0;e<n.length;e++)Fl.add(n[e])}var ho=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fr={},jl={};function po(e){return et.call(jl,e)?!0:et.call(Fr,e)?!1:ho.test(e)?jl[e]=!0:(Fr[e]=!0,!1)}function Gr(e,n,i){if(po(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var s=n.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function pr(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function Cn(e,n,i,s){if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+s)}}var zl,fa;function _a(e){if(zl===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);zl=n&&n[1]||"",fa=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zl+e+fa}var Di=!1;function _i(e,n){if(!e||Di)return"";Di=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(n){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(H){var z=H}Reflect.construct(e,[],$)}else{try{$.call()}catch(H){z=H}e.call($.prototype)}}else{try{throw Error()}catch(H){z=H}($=e())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(H){if(H&&z&&typeof H.stack=="string")return[H.stack,z.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=s.DetermineComponentFrameRoot(),y=d[0],b=d[1];if(y&&b){var A=y.split(`
`),B=b.split(`
`);for(c=s=0;s<A.length&&!A[s].includes("DetermineComponentFrameRoot");)s++;for(;c<B.length&&!B[c].includes("DetermineComponentFrameRoot");)c++;if(s===A.length||c===B.length)for(s=A.length-1,c=B.length-1;1<=s&&0<=c&&A[s]!==B[c];)c--;for(;1<=s&&0<=c;s--,c--)if(A[s]!==B[c]){if(s!==1||c!==1)do if(s--,c--,0>c||A[s]!==B[c]){var X=`
`+A[s].replace(" at new "," at ");return e.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",e.displayName)),X}while(1<=s&&0<=c);break}}}finally{Di=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?_a(i):""}function Hl(e){switch(e.tag){case 26:case 27:case 5:return _a(e.type);case 16:return _a("Lazy");case 13:return _a("Suspense");case 19:return _a("SuspenseList");case 0:case 15:return _i(e.type,!1);case 11:return _i(e.type.render,!1);case 1:return _i(e.type,!0);case 31:return _a("Activity");default:return""}}function L(e){try{var n="";do n+=Hl(e),e=e.return;while(e);return n}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function w(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Z(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function F(e){var n=Z(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),s=""+e[n];if(!e.hasOwnProperty(n)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,d=i.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(y){s=""+y,d.call(this,y)}}),Object.defineProperty(e,n,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(y){s=""+y},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function te(e){e._valueTracker||(e._valueTracker=F(e))}function me(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),s="";return e&&(s=Z(e)?e.checked?"true":"false":e.value),e=s,e!==i?(n.setValue(e),!0):!1}function ve(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ke=/[\n"\\]/g;function Ue(e){return e.replace(Ke,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Oe(e,n,i,s,c,d,y,b){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),n!=null?y==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+w(n)):e.value!==""+w(n)&&(e.value=""+w(n)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),n!=null?Wt(e,y,w(n)):i!=null?Wt(e,y,w(i)):s!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+w(b):e.removeAttribute("name")}function ke(e,n,i,s,c,d,y,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),n!=null||i!=null){if(!(d!=="submit"&&d!=="reset"||n!=null))return;i=i!=null?""+w(i):"",n=n!=null?""+w(n):i,b||n===e.value||(e.value=n),e.defaultValue=n}s=s??c,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=b?e.checked:!!s,e.defaultChecked=!!s,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y)}function Wt(e,n,i){n==="number"&&ve(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function qt(e,n,i,s){if(e=e.options,n){n={};for(var c=0;c<i.length;c++)n["$"+i[c]]=!0;for(i=0;i<e.length;i++)c=n.hasOwnProperty("$"+e[i].value),e[i].selected!==c&&(e[i].selected=c),c&&s&&(e[i].defaultSelected=!0)}else{for(i=""+w(i),n=null,c=0;c<e.length;c++){if(e[c].value===i){e[c].selected=!0,s&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function Nn(e,n,i){if(n!=null&&(n=""+w(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+w(i):""}function Mn(e,n,i,s){if(n==null){if(s!=null){if(i!=null)throw Error(l(92));if(ee(s)){if(1<s.length)throw Error(l(93));s=s[0]}i=s}i==null&&(i=""),n=i}i=w(n),e.defaultValue=i,s=e.textContent,s===i&&s!==""&&s!==null&&(e.value=s)}function Ce(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var We=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pe(e,n,i){var s=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?s?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":s?e.setProperty(n,i):typeof i!="number"||i===0||We.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function Ve(e,n,i){if(n!=null&&typeof n!="object")throw Error(l(62));if(e=e.style,i!=null){for(var s in i)!i.hasOwnProperty(s)||n!=null&&n.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var c in n)s=n[c],n.hasOwnProperty(c)&&i[c]!==s&&pe(e,c,s)}else for(var d in n)n.hasOwnProperty(d)&&pe(e,d,n[d])}function Ge(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var He=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Je=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Be(e){return Je.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Xe=null;function it(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var je=null,lt=null;function yt(e){var n=Jn(e);if(n&&(e=n.stateNode)){var i=e[jt]||null;e:switch(e=n.stateNode,n.type){case"input":if(Oe(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Ue(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var s=i[n];if(s!==e&&s.form===e.form){var c=s[jt]||null;if(!c)throw Error(l(90));Oe(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<i.length;n++)s=i[n],s.form===e.form&&me(s)}break e;case"textarea":Nn(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&qt(e,!!i.multiple,n,!1)}}}var Vt=!1;function Rn(e,n,i){if(Vt)return e(n,i);Vt=!0;try{var s=e(n);return s}finally{if(Vt=!1,(je!==null||lt!==null)&&(Cs(),je&&(n=je,e=lt,lt=je=null,yt(n),e)))for(n=0;n<e.length;n++)yt(e[n])}}function Bt(e,n){var i=e.stateNode;if(i===null)return null;var s=i[jt]||null;if(s===null)return null;i=s[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(l(231,n,typeof i));return i}var Tt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jt=!1;if(Tt)try{var Ze={};Object.defineProperty(Ze,"passive",{get:function(){Jt=!0}}),window.addEventListener("test",Ze,Ze),window.removeEventListener("test",Ze,Ze)}catch{Jt=!1}var bt=null,pt=null,Qe=null;function dn(){if(Qe)return Qe;var e,n=pt,i=n.length,s,c="value"in bt?bt.value:bt.textContent,d=c.length;for(e=0;e<i&&n[e]===c[e];e++);var y=i-e;for(s=1;s<=y&&n[i-s]===c[d-s];s++);return Qe=c.slice(e,1<s?1-s:void 0)}function on(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function wn(){return!0}function Pl(){return!1}function St(e){function n(i,s,c,d,y){this._reactName=i,this._targetInst=c,this.type=s,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(i=e[b],this[b]=i?i(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?wn:Pl,this.isPropagationStopped=Pl,this}return v(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=wn)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=wn)},persist:function(){},isPersistent:wn}),n}var Dt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yl=St(Dt),Ui=v({},Dt,{view:0,detail:0}),W0=St(Ui),mo,vo,Li,ql=v({},Ui,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Li&&(Li&&e.type==="mousemove"?(mo=e.screenX-Li.screenX,vo=e.screenY-Li.screenY):vo=mo=0,Li=e),mo)},movementY:function(e){return"movementY"in e?e.movementY:vo}}),Pc=St(ql),J0=v({},ql,{dataTransfer:0}),$0=St(J0),em=v({},Ui,{relatedTarget:0}),go=St(em),tm=v({},Dt,{animationName:0,elapsedTime:0,pseudoElement:0}),nm=St(tm),am=v({},Dt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rm=St(am),im=v({},Dt,{data:0}),Yc=St(im),lm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},om={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function um(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=om[e])?!!n[e]:!1}function yo(){return um}var cm=v({},Ui,{key:function(e){if(e.key){var n=lm[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=on(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yo,charCode:function(e){return e.type==="keypress"?on(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?on(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fm=St(cm),dm=v({},ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qc=St(dm),hm=v({},Ui,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yo}),pm=St(hm),mm=v({},Dt,{propertyName:0,elapsedTime:0,pseudoElement:0}),vm=St(mm),gm=v({},ql,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ym=St(gm),bm=v({},Dt,{newState:0,oldState:0}),Sm=St(bm),xm=[9,13,27,32],bo=Tt&&"CompositionEvent"in window,ki=null;Tt&&"documentMode"in document&&(ki=document.documentMode);var Em=Tt&&"TextEvent"in window&&!ki,Vc=Tt&&(!bo||ki&&8<ki&&11>=ki),Xc=" ",Zc=!1;function Qc(e,n){switch(e){case"keyup":return xm.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jr=!1;function Tm(e,n){switch(e){case"compositionend":return Kc(n);case"keypress":return n.which!==32?null:(Zc=!0,Xc);case"textInput":return e=n.data,e===Xc&&Zc?null:e;default:return null}}function Am(e,n){if(jr)return e==="compositionend"||!bo&&Qc(e,n)?(e=dn(),Qe=pt=bt=null,jr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Vc&&n.locale!=="ko"?null:n.data;default:return null}}var Cm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Cm[e.type]:n==="textarea"}function Jc(e,n,i,s){je?lt?lt.push(s):lt=[s]:je=s,n=Ds(n,"onChange"),0<n.length&&(i=new Yl("onChange","change",null,i,s),e.push({event:i,listeners:n}))}var Bi=null,Ii=null;function Nm(e){Uh(e,0)}function Vl(e){var n=ca(e);if(me(n))return e}function $c(e,n){if(e==="change")return n}var ef=!1;if(Tt){var So;if(Tt){var xo="oninput"in document;if(!xo){var tf=document.createElement("div");tf.setAttribute("oninput","return;"),xo=typeof tf.oninput=="function"}So=xo}else So=!1;ef=So&&(!document.documentMode||9<document.documentMode)}function nf(){Bi&&(Bi.detachEvent("onpropertychange",af),Ii=Bi=null)}function af(e){if(e.propertyName==="value"&&Vl(Ii)){var n=[];Jc(n,Ii,e,it(e)),Rn(Nm,n)}}function Mm(e,n,i){e==="focusin"?(nf(),Bi=n,Ii=i,Bi.attachEvent("onpropertychange",af)):e==="focusout"&&nf()}function Rm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vl(Ii)}function wm(e,n){if(e==="click")return Vl(n)}function Om(e,n){if(e==="input"||e==="change")return Vl(n)}function Dm(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var hn=typeof Object.is=="function"?Object.is:Dm;function Fi(e,n){if(hn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),s=Object.keys(n);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var c=i[s];if(!et.call(n,c)||!hn(e[c],n[c]))return!1}return!0}function rf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lf(e,n){var i=rf(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=n&&s>=n)return{node:i,offset:n-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=rf(i)}}function sf(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?sf(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function of(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ve(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=ve(e.document)}return n}function Eo(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var _m=Tt&&"documentMode"in document&&11>=document.documentMode,zr=null,To=null,Gi=null,Ao=!1;function uf(e,n,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Ao||zr==null||zr!==ve(s)||(s=zr,"selectionStart"in s&&Eo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Gi&&Fi(Gi,s)||(Gi=s,s=Ds(To,"onSelect"),0<s.length&&(n=new Yl("onSelect","select",null,n,i),e.push({event:n,listeners:s}),n.target=zr)))}function mr(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var Hr={animationend:mr("Animation","AnimationEnd"),animationiteration:mr("Animation","AnimationIteration"),animationstart:mr("Animation","AnimationStart"),transitionrun:mr("Transition","TransitionRun"),transitionstart:mr("Transition","TransitionStart"),transitioncancel:mr("Transition","TransitionCancel"),transitionend:mr("Transition","TransitionEnd")},Co={},cf={};Tt&&(cf=document.createElement("div").style,"AnimationEvent"in window||(delete Hr.animationend.animation,delete Hr.animationiteration.animation,delete Hr.animationstart.animation),"TransitionEvent"in window||delete Hr.transitionend.transition);function vr(e){if(Co[e])return Co[e];if(!Hr[e])return e;var n=Hr[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in cf)return Co[e]=n[i];return e}var ff=vr("animationend"),df=vr("animationiteration"),hf=vr("animationstart"),Um=vr("transitionrun"),Lm=vr("transitionstart"),km=vr("transitioncancel"),pf=vr("transitionend"),mf=new Map,No="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");No.push("scrollEnd");function zn(e,n){mf.set(e,n),An(n,[e])}var vf=new WeakMap;function On(e,n){if(typeof e=="object"&&e!==null){var i=vf.get(e);return i!==void 0?i:(n={value:e,source:n,stack:L(n)},vf.set(e,n),n)}return{value:e,source:n,stack:L(n)}}var Dn=[],Pr=0,Mo=0;function Xl(){for(var e=Pr,n=Mo=Pr=0;n<e;){var i=Dn[n];Dn[n++]=null;var s=Dn[n];Dn[n++]=null;var c=Dn[n];Dn[n++]=null;var d=Dn[n];if(Dn[n++]=null,s!==null&&c!==null){var y=s.pending;y===null?c.next=c:(c.next=y.next,y.next=c),s.pending=c}d!==0&&gf(i,c,d)}}function Zl(e,n,i,s){Dn[Pr++]=e,Dn[Pr++]=n,Dn[Pr++]=i,Dn[Pr++]=s,Mo|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Ro(e,n,i,s){return Zl(e,n,i,s),Ql(e)}function Yr(e,n){return Zl(e,null,null,n),Ql(e)}function gf(e,n,i){e.lanes|=i;var s=e.alternate;s!==null&&(s.lanes|=i);for(var c=!1,d=e.return;d!==null;)d.childLanes|=i,s=d.alternate,s!==null&&(s.childLanes|=i),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&n!==null&&(c=31-sn(i),e=d.hiddenUpdates,s=e[c],s===null?e[c]=[n]:s.push(n),n.lane=i|536870912),d):null}function Ql(e){if(50<cl)throw cl=0,Lu=null,Error(l(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var qr={};function Bm(e,n,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pn(e,n,i,s){return new Bm(e,n,i,s)}function wo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function da(e,n){var i=e.alternate;return i===null?(i=pn(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function yf(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Kl(e,n,i,s,c,d){var y=0;if(s=e,typeof e=="function")wo(e)&&(y=1);else if(typeof e=="string")y=Fv(e,i,Te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case J:return e=pn(31,i,n,c),e.elementType=J,e.lanes=d,e;case C:return gr(i.children,c,d,n);case D:y=8,c|=24;break;case j:return e=pn(12,i,n,c|2),e.elementType=j,e.lanes=d,e;case Q:return e=pn(13,i,n,c),e.elementType=Q,e.lanes=d,e;case ue:return e=pn(19,i,n,c),e.elementType=ue,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N:case U:y=10;break e;case V:y=9;break e;case Y:y=11;break e;case Ee:y=14;break e;case Se:y=16,s=null;break e}y=29,i=Error(l(130,e===null?"null":typeof e,"")),s=null}return n=pn(y,i,n,c),n.elementType=e,n.type=s,n.lanes=d,n}function gr(e,n,i,s){return e=pn(7,e,s,n),e.lanes=i,e}function Oo(e,n,i){return e=pn(6,e,null,n),e.lanes=i,e}function Do(e,n,i){return n=pn(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Vr=[],Xr=0,Wl=null,Jl=0,_n=[],Un=0,yr=null,ha=1,pa="";function br(e,n){Vr[Xr++]=Jl,Vr[Xr++]=Wl,Wl=e,Jl=n}function bf(e,n,i){_n[Un++]=ha,_n[Un++]=pa,_n[Un++]=yr,yr=e;var s=ha;e=pa;var c=32-sn(s)-1;s&=~(1<<c),i+=1;var d=32-sn(n)+c;if(30<d){var y=c-c%5;d=(s&(1<<y)-1).toString(32),s>>=y,c-=y,ha=1<<32-sn(n)+c|i<<c|s,pa=d+e}else ha=1<<d|i<<c|s,pa=e}function _o(e){e.return!==null&&(br(e,1),bf(e,1,0))}function Uo(e){for(;e===Wl;)Wl=Vr[--Xr],Vr[Xr]=null,Jl=Vr[--Xr],Vr[Xr]=null;for(;e===yr;)yr=_n[--Un],_n[Un]=null,pa=_n[--Un],_n[Un]=null,ha=_n[--Un],_n[Un]=null}var rn=null,Ct=null,at=!1,Sr=null,ea=!1,Lo=Error(l(519));function xr(e){var n=Error(l(418,""));throw Hi(On(n,e)),Lo}function Sf(e){var n=e.stateNode,i=e.type,s=e.memoizedProps;switch(n[kt]=e,n[jt]=s,i){case"dialog":qe("cancel",n),qe("close",n);break;case"iframe":case"object":case"embed":qe("load",n);break;case"video":case"audio":for(i=0;i<dl.length;i++)qe(dl[i],n);break;case"source":qe("error",n);break;case"img":case"image":case"link":qe("error",n),qe("load",n);break;case"details":qe("toggle",n);break;case"input":qe("invalid",n),ke(n,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),te(n);break;case"select":qe("invalid",n);break;case"textarea":qe("invalid",n),Mn(n,s.value,s.defaultValue,s.children),te(n)}i=s.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||s.suppressHydrationWarning===!0||Ih(n.textContent,i)?(s.popover!=null&&(qe("beforetoggle",n),qe("toggle",n)),s.onScroll!=null&&qe("scroll",n),s.onScrollEnd!=null&&qe("scrollend",n),s.onClick!=null&&(n.onclick=_s),n=!0):n=!1,n||xr(e)}function xf(e){for(rn=e.return;rn;)switch(rn.tag){case 5:case 13:ea=!1;return;case 27:case 3:ea=!0;return;default:rn=rn.return}}function ji(e){if(e!==rn)return!1;if(!at)return xf(e),at=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Ku(e.type,e.memoizedProps)),i=!i),i&&Ct&&xr(e),xf(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(l(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(n===0){Ct=Pn(e.nextSibling);break e}n--}else i!=="$"&&i!=="$!"&&i!=="$?"||n++;e=e.nextSibling}Ct=null}}else n===27?(n=Ct,Za(e.type)?(e=ec,ec=null,Ct=e):Ct=n):Ct=rn?Pn(e.stateNode.nextSibling):null;return!0}function zi(){Ct=rn=null,at=!1}function Ef(){var e=Sr;return e!==null&&(fn===null?fn=e:fn.push.apply(fn,e),Sr=null),e}function Hi(e){Sr===null?Sr=[e]:Sr.push(e)}var ko=G(null),Er=null,ma=null;function Ua(e,n,i){se(ko,n._currentValue),n._currentValue=i}function va(e){e._currentValue=ko.current,ie(ko)}function Bo(e,n,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,s!==null&&(s.childLanes|=n)):s!==null&&(s.childLanes&n)!==n&&(s.childLanes|=n),e===i)break;e=e.return}}function Io(e,n,i,s){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var y=c.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=c;for(var A=0;A<n.length;A++)if(b.context===n[A]){d.lanes|=i,b=d.alternate,b!==null&&(b.lanes|=i),Bo(d.return,i,e),s||(y=null);break e}d=b.next}}else if(c.tag===18){if(y=c.return,y===null)throw Error(l(341));y.lanes|=i,d=y.alternate,d!==null&&(d.lanes|=i),Bo(y,i,e),y=null}else y=c.child;if(y!==null)y.return=c;else for(y=c;y!==null;){if(y===e){y=null;break}if(c=y.sibling,c!==null){c.return=y.return,y=c;break}y=y.return}c=y}}function Pi(e,n,i,s){e=null;for(var c=n,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var y=c.alternate;if(y===null)throw Error(l(387));if(y=y.memoizedProps,y!==null){var b=c.type;hn(c.pendingProps.value,y.value)||(e!==null?e.push(b):e=[b])}}else if(c===dt.current){if(y=c.alternate,y===null)throw Error(l(387));y.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(yl):e=[yl])}c=c.return}e!==null&&Io(n,e,i,s),n.flags|=262144}function $l(e){for(e=e.firstContext;e!==null;){if(!hn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Tr(e){Er=e,ma=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $t(e){return Tf(Er,e)}function es(e,n){return Er===null&&Tr(e),Tf(e,n)}function Tf(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},ma===null){if(e===null)throw Error(l(308));ma=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else ma=ma.next=n;return i}var Im=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,s){e.push(s)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},Fm=a.unstable_scheduleCallback,Gm=a.unstable_NormalPriority,It={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fo(){return{controller:new Im,data:new Map,refCount:0}}function Yi(e){e.refCount--,e.refCount===0&&Fm(Gm,function(){e.controller.abort()})}var qi=null,Go=0,Zr=0,Qr=null;function jm(e,n){if(qi===null){var i=qi=[];Go=0,Zr=zu(),Qr={status:"pending",value:void 0,then:function(s){i.push(s)}}}return Go++,n.then(Af,Af),n}function Af(){if(--Go===0&&qi!==null){Qr!==null&&(Qr.status="fulfilled");var e=qi;qi=null,Zr=0,Qr=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function zm(e,n){var i=[],s={status:"pending",value:null,reason:null,then:function(c){i.push(c)}};return e.then(function(){s.status="fulfilled",s.value=n;for(var c=0;c<i.length;c++)(0,i[c])(n)},function(c){for(s.status="rejected",s.reason=c,c=0;c<i.length;c++)(0,i[c])(void 0)}),s}var Cf=R.S;R.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&jm(e,n),Cf!==null&&Cf(e,n)};var Ar=G(null);function jo(){var e=Ar.current;return e!==null?e:mt.pooledCache}function ts(e,n){n===null?se(Ar,Ar.current):se(Ar,n.pool)}function Nf(){var e=jo();return e===null?null:{parent:It._currentValue,pool:e}}var Vi=Error(l(460)),Mf=Error(l(474)),ns=Error(l(542)),zo={then:function(){}};function Rf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function as(){}function wf(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(as,as),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Df(e),e;default:if(typeof n.status=="string")n.then(as,as);else{if(e=mt,e!==null&&100<e.shellSuspendCounter)throw Error(l(482));e=n,e.status="pending",e.then(function(s){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=s}},function(s){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=s}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Df(e),e}throw Xi=n,Vi}}var Xi=null;function Of(){if(Xi===null)throw Error(l(459));var e=Xi;return Xi=null,e}function Df(e){if(e===Vi||e===ns)throw Error(l(483))}var La=!1;function Ho(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Po(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ka(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ba(e,n,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(st&2)!==0){var c=s.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),s.pending=n,n=Ql(e),gf(e,null,i),n}return Zl(e,s,n,i),Ql(e)}function Zi(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var s=n.lanes;s&=e.pendingLanes,i|=s,n.lanes=i,ua(e,i)}}function Yo(e,n){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var c=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var y={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};d===null?c=d=y:d=d.next=y,i=i.next}while(i!==null);d===null?c=d=n:d=d.next=n}else c=d=n;i={baseState:s.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:s.shared,callbacks:s.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var qo=!1;function Qi(){if(qo){var e=Qr;if(e!==null)throw e}}function Ki(e,n,i,s){qo=!1;var c=e.updateQueue;La=!1;var d=c.firstBaseUpdate,y=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var A=b,B=A.next;A.next=null,y===null?d=B:y.next=B,y=A;var X=e.alternate;X!==null&&(X=X.updateQueue,b=X.lastBaseUpdate,b!==y&&(b===null?X.firstBaseUpdate=B:b.next=B,X.lastBaseUpdate=A))}if(d!==null){var $=c.baseState;y=0,X=B=A=null,b=d;do{var z=b.lane&-536870913,H=z!==b.lane;if(H?($e&z)===z:(s&z)===z){z!==0&&z===Zr&&(qo=!0),X!==null&&(X=X.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var Re=e,Ne=b;z=n;var ft=i;switch(Ne.tag){case 1:if(Re=Ne.payload,typeof Re=="function"){$=Re.call(ft,$,z);break e}$=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ne.payload,z=typeof Re=="function"?Re.call(ft,$,z):Re,z==null)break e;$=v({},$,z);break e;case 2:La=!0}}z=b.callback,z!==null&&(e.flags|=64,H&&(e.flags|=8192),H=c.callbacks,H===null?c.callbacks=[z]:H.push(z))}else H={lane:z,tag:b.tag,payload:b.payload,callback:b.callback,next:null},X===null?(B=X=H,A=$):X=X.next=H,y|=z;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;H=b,b=H.next,H.next=null,c.lastBaseUpdate=H,c.shared.pending=null}}while(!0);X===null&&(A=$),c.baseState=A,c.firstBaseUpdate=B,c.lastBaseUpdate=X,d===null&&(c.shared.lanes=0),Ya|=y,e.lanes=y,e.memoizedState=$}}function _f(e,n){if(typeof e!="function")throw Error(l(191,e));e.call(n)}function Uf(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)_f(i[e],n)}var Kr=G(null),rs=G(0);function Lf(e,n){e=Ta,se(rs,e),se(Kr,n),Ta=e|n.baseLanes}function Vo(){se(rs,Ta),se(Kr,Kr.current)}function Xo(){Ta=rs.current,ie(Kr),ie(rs)}var Ia=0,ze=null,ut=null,_t=null,is=!1,Wr=!1,Cr=!1,ls=0,Wi=0,Jr=null,Hm=0;function Rt(){throw Error(l(321))}function Zo(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!hn(e[i],n[i]))return!1;return!0}function Qo(e,n,i,s,c,d){return Ia=d,ze=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,R.H=e===null||e.memoizedState===null?gd:yd,Cr=!1,d=i(s,c),Cr=!1,Wr&&(d=Bf(n,i,s,c)),kf(e),d}function kf(e){R.H=ds;var n=ut!==null&&ut.next!==null;if(Ia=0,_t=ut=ze=null,is=!1,Wi=0,Jr=null,n)throw Error(l(300));e===null||zt||(e=e.dependencies,e!==null&&$l(e)&&(zt=!0))}function Bf(e,n,i,s){ze=e;var c=0;do{if(Wr&&(Jr=null),Wi=0,Wr=!1,25<=c)throw Error(l(301));if(c+=1,_t=ut=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}R.H=Qm,d=n(i,s)}while(Wr);return d}function Pm(){var e=R.H,n=e.useState()[0];return n=typeof n.then=="function"?Ji(n):n,e=e.useState()[0],(ut!==null?ut.memoizedState:null)!==e&&(ze.flags|=1024),n}function Ko(){var e=ls!==0;return ls=0,e}function Wo(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Jo(e){if(is){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}is=!1}Ia=0,_t=ut=ze=null,Wr=!1,Wi=ls=0,Jr=null}function un(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?ze.memoizedState=_t=e:_t=_t.next=e,_t}function Ut(){if(ut===null){var e=ze.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var n=_t===null?ze.memoizedState:_t.next;if(n!==null)_t=n,ut=e;else{if(e===null)throw ze.alternate===null?Error(l(467)):Error(l(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},_t===null?ze.memoizedState=_t=e:_t=_t.next=e}return _t}function $o(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ji(e){var n=Wi;return Wi+=1,Jr===null&&(Jr=[]),e=wf(Jr,e,n),n=ze,(_t===null?n.memoizedState:_t.next)===null&&(n=n.alternate,R.H=n===null||n.memoizedState===null?gd:yd),e}function ss(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ji(e);if(e.$$typeof===U)return $t(e)}throw Error(l(438,String(e)))}function eu(e){var n=null,i=ze.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var s=ze.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(n={data:s.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=$o(),ze.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),s=0;s<e;s++)i[s]=ae;return n.index++,i}function ga(e,n){return typeof n=="function"?n(e):n}function os(e){var n=Ut();return tu(n,ut,e)}function tu(e,n,i){var s=e.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=i;var c=e.baseQueue,d=s.pending;if(d!==null){if(c!==null){var y=c.next;c.next=d.next,d.next=y}n.baseQueue=c=d,s.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{n=c.next;var b=y=null,A=null,B=n,X=!1;do{var $=B.lane&-536870913;if($!==B.lane?($e&$)===$:(Ia&$)===$){var z=B.revertLane;if(z===0)A!==null&&(A=A.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),$===Zr&&(X=!0);else if((Ia&z)===z){B=B.next,z===Zr&&(X=!0);continue}else $={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},A===null?(b=A=$,y=d):A=A.next=$,ze.lanes|=z,Ya|=z;$=B.action,Cr&&i(d,$),d=B.hasEagerState?B.eagerState:i(d,$)}else z={lane:$,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},A===null?(b=A=z,y=d):A=A.next=z,ze.lanes|=$,Ya|=$;B=B.next}while(B!==null&&B!==n);if(A===null?y=d:A.next=b,!hn(d,e.memoizedState)&&(zt=!0,X&&(i=Qr,i!==null)))throw i;e.memoizedState=d,e.baseState=y,e.baseQueue=A,s.lastRenderedState=d}return c===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function nu(e){var n=Ut(),i=n.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=e;var s=i.dispatch,c=i.pending,d=n.memoizedState;if(c!==null){i.pending=null;var y=c=c.next;do d=e(d,y.action),y=y.next;while(y!==c);hn(d,n.memoizedState)||(zt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),i.lastRenderedState=d}return[d,s]}function If(e,n,i){var s=ze,c=Ut(),d=at;if(d){if(i===void 0)throw Error(l(407));i=i()}else i=n();var y=!hn((ut||c).memoizedState,i);y&&(c.memoizedState=i,zt=!0),c=c.queue;var b=jf.bind(null,s,c,e);if($i(2048,8,b,[e]),c.getSnapshot!==n||y||_t!==null&&_t.memoizedState.tag&1){if(s.flags|=2048,$r(9,us(),Gf.bind(null,s,c,i,n),null),mt===null)throw Error(l(349));d||(Ia&124)!==0||Ff(s,n,i)}return i}function Ff(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=ze.updateQueue,n===null?(n=$o(),ze.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function Gf(e,n,i,s){n.value=i,n.getSnapshot=s,zf(n)&&Hf(e)}function jf(e,n,i){return i(function(){zf(n)&&Hf(e)})}function zf(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!hn(e,i)}catch{return!0}}function Hf(e){var n=Yr(e,2);n!==null&&bn(n,e,2)}function au(e){var n=un();if(typeof e=="function"){var i=e;if(e=i(),Cr){sa(!0);try{i()}finally{sa(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:e},n}function Pf(e,n,i,s){return e.baseState=i,tu(e,ut,typeof s=="function"?s:ga)}function Ym(e,n,i,s,c){if(fs(e))throw Error(l(485));if(e=n.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};R.T!==null?i(!0):d.isTransition=!1,s(d),i=n.pending,i===null?(d.next=n.pending=d,Yf(n,d)):(d.next=i.next,n.pending=i.next=d)}}function Yf(e,n){var i=n.action,s=n.payload,c=e.state;if(n.isTransition){var d=R.T,y={};R.T=y;try{var b=i(c,s),A=R.S;A!==null&&A(y,b),qf(e,n,b)}catch(B){ru(e,n,B)}finally{R.T=d}}else try{d=i(c,s),qf(e,n,d)}catch(B){ru(e,n,B)}}function qf(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(s){Vf(e,n,s)},function(s){return ru(e,n,s)}):Vf(e,n,i)}function Vf(e,n,i){n.status="fulfilled",n.value=i,Xf(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,Yf(e,i)))}function ru(e,n,i){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do n.status="rejected",n.reason=i,Xf(n),n=n.next;while(n!==s)}e.action=null}function Xf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Zf(e,n){return n}function Qf(e,n){if(at){var i=mt.formState;if(i!==null){e:{var s=ze;if(at){if(Ct){t:{for(var c=Ct,d=ea;c.nodeType!==8;){if(!d){c=null;break t}if(c=Pn(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){Ct=Pn(c.nextSibling),s=c.data==="F!";break e}}xr(s)}s=!1}s&&(n=i[0])}}return i=un(),i.memoizedState=i.baseState=n,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zf,lastRenderedState:n},i.queue=s,i=pd.bind(null,ze,s),s.dispatch=i,s=au(!1),d=uu.bind(null,ze,!1,s.queue),s=un(),c={state:n,dispatch:null,action:e,pending:null},s.queue=c,i=Ym.bind(null,ze,c,d,i),c.dispatch=i,s.memoizedState=e,[n,i,!1]}function Kf(e){var n=Ut();return Wf(n,ut,e)}function Wf(e,n,i){if(n=tu(e,n,Zf)[0],e=os(ga)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var s=Ji(n)}catch(y){throw y===Vi?ns:y}else s=n;n=Ut();var c=n.queue,d=c.dispatch;return i!==n.memoizedState&&(ze.flags|=2048,$r(9,us(),qm.bind(null,c,i),null)),[s,d,e]}function qm(e,n){e.action=n}function Jf(e){var n=Ut(),i=ut;if(i!==null)return Wf(n,i,e);Ut(),n=n.memoizedState,i=Ut();var s=i.queue.dispatch;return i.memoizedState=e,[n,s,!1]}function $r(e,n,i,s){return e={tag:e,create:i,deps:s,inst:n,next:null},n=ze.updateQueue,n===null&&(n=$o(),ze.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,n.lastEffect=e),e}function us(){return{destroy:void 0,resource:void 0}}function $f(){return Ut().memoizedState}function cs(e,n,i,s){var c=un();s=s===void 0?null:s,ze.flags|=e,c.memoizedState=$r(1|n,us(),i,s)}function $i(e,n,i,s){var c=Ut();s=s===void 0?null:s;var d=c.memoizedState.inst;ut!==null&&s!==null&&Zo(s,ut.memoizedState.deps)?c.memoizedState=$r(n,d,i,s):(ze.flags|=e,c.memoizedState=$r(1|n,d,i,s))}function ed(e,n){cs(8390656,8,e,n)}function td(e,n){$i(2048,8,e,n)}function nd(e,n){return $i(4,2,e,n)}function ad(e,n){return $i(4,4,e,n)}function rd(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function id(e,n,i){i=i!=null?i.concat([e]):null,$i(4,4,rd.bind(null,n,e),i)}function iu(){}function ld(e,n){var i=Ut();n=n===void 0?null:n;var s=i.memoizedState;return n!==null&&Zo(n,s[1])?s[0]:(i.memoizedState=[e,n],e)}function sd(e,n){var i=Ut();n=n===void 0?null:n;var s=i.memoizedState;if(n!==null&&Zo(n,s[1]))return s[0];if(s=e(),Cr){sa(!0);try{e()}finally{sa(!1)}}return i.memoizedState=[s,n],s}function lu(e,n,i){return i===void 0||(Ia&1073741824)!==0?e.memoizedState=n:(e.memoizedState=i,e=ch(),ze.lanes|=e,Ya|=e,i)}function od(e,n,i,s){return hn(i,n)?i:Kr.current!==null?(e=lu(e,i,s),hn(e,n)||(zt=!0),e):(Ia&42)===0?(zt=!0,e.memoizedState=i):(e=ch(),ze.lanes|=e,Ya|=e,n)}function ud(e,n,i,s,c){var d=P.p;P.p=d!==0&&8>d?d:8;var y=R.T,b={};R.T=b,uu(e,!1,n,i);try{var A=c(),B=R.S;if(B!==null&&B(b,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var X=zm(A,s);el(e,n,X,yn(e))}else el(e,n,s,yn(e))}catch($){el(e,n,{then:function(){},status:"rejected",reason:$},yn())}finally{P.p=d,R.T=y}}function Vm(){}function su(e,n,i,s){if(e.tag!==5)throw Error(l(476));var c=cd(e).queue;ud(e,c,n,I,i===null?Vm:function(){return fd(e),i(s)})}function cd(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:I,baseState:I,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:I},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function fd(e){var n=cd(e).next.queue;el(e,n,{},yn())}function ou(){return $t(yl)}function dd(){return Ut().memoizedState}function hd(){return Ut().memoizedState}function Xm(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=yn();e=ka(i);var s=Ba(n,e,i);s!==null&&(bn(s,n,i),Zi(s,n,i)),n={cache:Fo()},e.payload=n;return}n=n.return}}function Zm(e,n,i){var s=yn();i={lane:s,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},fs(e)?md(n,i):(i=Ro(e,n,i,s),i!==null&&(bn(i,e,s),vd(i,n,s)))}function pd(e,n,i){var s=yn();el(e,n,i,s)}function el(e,n,i,s){var c={lane:s,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(fs(e))md(n,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var y=n.lastRenderedState,b=d(y,i);if(c.hasEagerState=!0,c.eagerState=b,hn(b,y))return Zl(e,n,c,0),mt===null&&Xl(),!1}catch{}finally{}if(i=Ro(e,n,c,s),i!==null)return bn(i,e,s),vd(i,n,s),!0}return!1}function uu(e,n,i,s){if(s={lane:2,revertLane:zu(),action:s,hasEagerState:!1,eagerState:null,next:null},fs(e)){if(n)throw Error(l(479))}else n=Ro(e,i,s,2),n!==null&&bn(n,e,2)}function fs(e){var n=e.alternate;return e===ze||n!==null&&n===ze}function md(e,n){Wr=is=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function vd(e,n,i){if((i&4194048)!==0){var s=n.lanes;s&=e.pendingLanes,i|=s,n.lanes=i,ua(e,i)}}var ds={readContext:$t,use:ss,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},gd={readContext:$t,use:ss,useCallback:function(e,n){return un().memoizedState=[e,n===void 0?null:n],e},useContext:$t,useEffect:ed,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,cs(4194308,4,rd.bind(null,n,e),i)},useLayoutEffect:function(e,n){return cs(4194308,4,e,n)},useInsertionEffect:function(e,n){cs(4,2,e,n)},useMemo:function(e,n){var i=un();n=n===void 0?null:n;var s=e();if(Cr){sa(!0);try{e()}finally{sa(!1)}}return i.memoizedState=[s,n],s},useReducer:function(e,n,i){var s=un();if(i!==void 0){var c=i(n);if(Cr){sa(!0);try{i(n)}finally{sa(!1)}}}else c=n;return s.memoizedState=s.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},s.queue=e,e=e.dispatch=Zm.bind(null,ze,e),[s.memoizedState,e]},useRef:function(e){var n=un();return e={current:e},n.memoizedState=e},useState:function(e){e=au(e);var n=e.queue,i=pd.bind(null,ze,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:iu,useDeferredValue:function(e,n){var i=un();return lu(i,e,n)},useTransition:function(){var e=au(!1);return e=ud.bind(null,ze,e.queue,!0,!1),un().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var s=ze,c=un();if(at){if(i===void 0)throw Error(l(407));i=i()}else{if(i=n(),mt===null)throw Error(l(349));($e&124)!==0||Ff(s,n,i)}c.memoizedState=i;var d={value:i,getSnapshot:n};return c.queue=d,ed(jf.bind(null,s,d,e),[e]),s.flags|=2048,$r(9,us(),Gf.bind(null,s,d,i,n),null),i},useId:function(){var e=un(),n=mt.identifierPrefix;if(at){var i=pa,s=ha;i=(s&~(1<<32-sn(s)-1)).toString(32)+i,n=""+n+"R"+i,i=ls++,0<i&&(n+="H"+i.toString(32)),n+=""}else i=Hm++,n=""+n+"r"+i.toString(32)+"";return e.memoizedState=n},useHostTransitionStatus:ou,useFormState:Qf,useActionState:Qf,useOptimistic:function(e){var n=un();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=uu.bind(null,ze,!0,i),i.dispatch=n,[e,n]},useMemoCache:eu,useCacheRefresh:function(){return un().memoizedState=Xm.bind(null,ze)}},yd={readContext:$t,use:ss,useCallback:ld,useContext:$t,useEffect:td,useImperativeHandle:id,useInsertionEffect:nd,useLayoutEffect:ad,useMemo:sd,useReducer:os,useRef:$f,useState:function(){return os(ga)},useDebugValue:iu,useDeferredValue:function(e,n){var i=Ut();return od(i,ut.memoizedState,e,n)},useTransition:function(){var e=os(ga)[0],n=Ut().memoizedState;return[typeof e=="boolean"?e:Ji(e),n]},useSyncExternalStore:If,useId:dd,useHostTransitionStatus:ou,useFormState:Kf,useActionState:Kf,useOptimistic:function(e,n){var i=Ut();return Pf(i,ut,e,n)},useMemoCache:eu,useCacheRefresh:hd},Qm={readContext:$t,use:ss,useCallback:ld,useContext:$t,useEffect:td,useImperativeHandle:id,useInsertionEffect:nd,useLayoutEffect:ad,useMemo:sd,useReducer:nu,useRef:$f,useState:function(){return nu(ga)},useDebugValue:iu,useDeferredValue:function(e,n){var i=Ut();return ut===null?lu(i,e,n):od(i,ut.memoizedState,e,n)},useTransition:function(){var e=nu(ga)[0],n=Ut().memoizedState;return[typeof e=="boolean"?e:Ji(e),n]},useSyncExternalStore:If,useId:dd,useHostTransitionStatus:ou,useFormState:Jf,useActionState:Jf,useOptimistic:function(e,n){var i=Ut();return ut!==null?Pf(i,ut,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:eu,useCacheRefresh:hd},ei=null,tl=0;function hs(e){var n=tl;return tl+=1,ei===null&&(ei=[]),wf(ei,e,n)}function nl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function ps(e,n){throw n.$$typeof===x?Error(l(525)):(e=Object.prototype.toString.call(n),Error(l(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function bd(e){var n=e._init;return n(e._payload)}function Sd(e){function n(_,M){if(e){var k=_.deletions;k===null?(_.deletions=[M],_.flags|=16):k.push(M)}}function i(_,M){if(!e)return null;for(;M!==null;)n(_,M),M=M.sibling;return null}function s(_){for(var M=new Map;_!==null;)_.key!==null?M.set(_.key,_):M.set(_.index,_),_=_.sibling;return M}function c(_,M){return _=da(_,M),_.index=0,_.sibling=null,_}function d(_,M,k){return _.index=k,e?(k=_.alternate,k!==null?(k=k.index,k<M?(_.flags|=67108866,M):k):(_.flags|=67108866,M)):(_.flags|=1048576,M)}function y(_){return e&&_.alternate===null&&(_.flags|=67108866),_}function b(_,M,k,K){return M===null||M.tag!==6?(M=Oo(k,_.mode,K),M.return=_,M):(M=c(M,k),M.return=_,M)}function A(_,M,k,K){var ge=k.type;return ge===C?X(_,M,k.props.children,K,k.key):M!==null&&(M.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Se&&bd(ge)===M.type)?(M=c(M,k.props),nl(M,k),M.return=_,M):(M=Kl(k.type,k.key,k.props,null,_.mode,K),nl(M,k),M.return=_,M)}function B(_,M,k,K){return M===null||M.tag!==4||M.stateNode.containerInfo!==k.containerInfo||M.stateNode.implementation!==k.implementation?(M=Do(k,_.mode,K),M.return=_,M):(M=c(M,k.children||[]),M.return=_,M)}function X(_,M,k,K,ge){return M===null||M.tag!==7?(M=gr(k,_.mode,K,ge),M.return=_,M):(M=c(M,k),M.return=_,M)}function $(_,M,k){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Oo(""+M,_.mode,k),M.return=_,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case S:return k=Kl(M.type,M.key,M.props,null,_.mode,k),nl(k,M),k.return=_,k;case E:return M=Do(M,_.mode,k),M.return=_,M;case Se:var K=M._init;return M=K(M._payload),$(_,M,k)}if(ee(M)||ce(M))return M=gr(M,_.mode,k,null),M.return=_,M;if(typeof M.then=="function")return $(_,hs(M),k);if(M.$$typeof===U)return $(_,es(_,M),k);ps(_,M)}return null}function z(_,M,k,K){var ge=M!==null?M.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return ge!==null?null:b(_,M,""+k,K);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case S:return k.key===ge?A(_,M,k,K):null;case E:return k.key===ge?B(_,M,k,K):null;case Se:return ge=k._init,k=ge(k._payload),z(_,M,k,K)}if(ee(k)||ce(k))return ge!==null?null:X(_,M,k,K,null);if(typeof k.then=="function")return z(_,M,hs(k),K);if(k.$$typeof===U)return z(_,M,es(_,k),K);ps(_,k)}return null}function H(_,M,k,K,ge){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return _=_.get(k)||null,b(M,_,""+K,ge);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case S:return _=_.get(K.key===null?k:K.key)||null,A(M,_,K,ge);case E:return _=_.get(K.key===null?k:K.key)||null,B(M,_,K,ge);case Se:var Pe=K._init;return K=Pe(K._payload),H(_,M,k,K,ge)}if(ee(K)||ce(K))return _=_.get(k)||null,X(M,_,K,ge,null);if(typeof K.then=="function")return H(_,M,k,hs(K),ge);if(K.$$typeof===U)return H(_,M,k,es(M,K),ge);ps(M,K)}return null}function Re(_,M,k,K){for(var ge=null,Pe=null,xe=M,Me=M=0,Pt=null;xe!==null&&Me<k.length;Me++){xe.index>Me?(Pt=xe,xe=null):Pt=xe.sibling;var nt=z(_,xe,k[Me],K);if(nt===null){xe===null&&(xe=Pt);break}e&&xe&&nt.alternate===null&&n(_,xe),M=d(nt,M,Me),Pe===null?ge=nt:Pe.sibling=nt,Pe=nt,xe=Pt}if(Me===k.length)return i(_,xe),at&&br(_,Me),ge;if(xe===null){for(;Me<k.length;Me++)xe=$(_,k[Me],K),xe!==null&&(M=d(xe,M,Me),Pe===null?ge=xe:Pe.sibling=xe,Pe=xe);return at&&br(_,Me),ge}for(xe=s(xe);Me<k.length;Me++)Pt=H(xe,_,Me,k[Me],K),Pt!==null&&(e&&Pt.alternate!==null&&xe.delete(Pt.key===null?Me:Pt.key),M=d(Pt,M,Me),Pe===null?ge=Pt:Pe.sibling=Pt,Pe=Pt);return e&&xe.forEach(function($a){return n(_,$a)}),at&&br(_,Me),ge}function Ne(_,M,k,K){if(k==null)throw Error(l(151));for(var ge=null,Pe=null,xe=M,Me=M=0,Pt=null,nt=k.next();xe!==null&&!nt.done;Me++,nt=k.next()){xe.index>Me?(Pt=xe,xe=null):Pt=xe.sibling;var $a=z(_,xe,nt.value,K);if($a===null){xe===null&&(xe=Pt);break}e&&xe&&$a.alternate===null&&n(_,xe),M=d($a,M,Me),Pe===null?ge=$a:Pe.sibling=$a,Pe=$a,xe=Pt}if(nt.done)return i(_,xe),at&&br(_,Me),ge;if(xe===null){for(;!nt.done;Me++,nt=k.next())nt=$(_,nt.value,K),nt!==null&&(M=d(nt,M,Me),Pe===null?ge=nt:Pe.sibling=nt,Pe=nt);return at&&br(_,Me),ge}for(xe=s(xe);!nt.done;Me++,nt=k.next())nt=H(xe,_,Me,nt.value,K),nt!==null&&(e&&nt.alternate!==null&&xe.delete(nt.key===null?Me:nt.key),M=d(nt,M,Me),Pe===null?ge=nt:Pe.sibling=nt,Pe=nt);return e&&xe.forEach(function(Kv){return n(_,Kv)}),at&&br(_,Me),ge}function ft(_,M,k,K){if(typeof k=="object"&&k!==null&&k.type===C&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case S:e:{for(var ge=k.key;M!==null;){if(M.key===ge){if(ge=k.type,ge===C){if(M.tag===7){i(_,M.sibling),K=c(M,k.props.children),K.return=_,_=K;break e}}else if(M.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Se&&bd(ge)===M.type){i(_,M.sibling),K=c(M,k.props),nl(K,k),K.return=_,_=K;break e}i(_,M);break}else n(_,M);M=M.sibling}k.type===C?(K=gr(k.props.children,_.mode,K,k.key),K.return=_,_=K):(K=Kl(k.type,k.key,k.props,null,_.mode,K),nl(K,k),K.return=_,_=K)}return y(_);case E:e:{for(ge=k.key;M!==null;){if(M.key===ge)if(M.tag===4&&M.stateNode.containerInfo===k.containerInfo&&M.stateNode.implementation===k.implementation){i(_,M.sibling),K=c(M,k.children||[]),K.return=_,_=K;break e}else{i(_,M);break}else n(_,M);M=M.sibling}K=Do(k,_.mode,K),K.return=_,_=K}return y(_);case Se:return ge=k._init,k=ge(k._payload),ft(_,M,k,K)}if(ee(k))return Re(_,M,k,K);if(ce(k)){if(ge=ce(k),typeof ge!="function")throw Error(l(150));return k=ge.call(k),Ne(_,M,k,K)}if(typeof k.then=="function")return ft(_,M,hs(k),K);if(k.$$typeof===U)return ft(_,M,es(_,k),K);ps(_,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,M!==null&&M.tag===6?(i(_,M.sibling),K=c(M,k),K.return=_,_=K):(i(_,M),K=Oo(k,_.mode,K),K.return=_,_=K),y(_)):i(_,M)}return function(_,M,k,K){try{tl=0;var ge=ft(_,M,k,K);return ei=null,ge}catch(xe){if(xe===Vi||xe===ns)throw xe;var Pe=pn(29,xe,null,_.mode);return Pe.lanes=K,Pe.return=_,Pe}finally{}}}var ti=Sd(!0),xd=Sd(!1),Ln=G(null),ta=null;function Fa(e){var n=e.alternate;se(Ft,Ft.current&1),se(Ln,e),ta===null&&(n===null||Kr.current!==null||n.memoizedState!==null)&&(ta=e)}function Ed(e){if(e.tag===22){if(se(Ft,Ft.current),se(Ln,e),ta===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(ta=e)}}else Ga()}function Ga(){se(Ft,Ft.current),se(Ln,Ln.current)}function ya(e){ie(Ln),ta===e&&(ta=null),ie(Ft)}var Ft=G(0);function ms(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||$u(i)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function cu(e,n,i,s){n=e.memoizedState,i=i(s,n),i=i==null?n:v({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var fu={enqueueSetState:function(e,n,i){e=e._reactInternals;var s=yn(),c=ka(s);c.payload=n,i!=null&&(c.callback=i),n=Ba(e,c,s),n!==null&&(bn(n,e,s),Zi(n,e,s))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var s=yn(),c=ka(s);c.tag=1,c.payload=n,i!=null&&(c.callback=i),n=Ba(e,c,s),n!==null&&(bn(n,e,s),Zi(n,e,s))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=yn(),s=ka(i);s.tag=2,n!=null&&(s.callback=n),n=Ba(e,s,i),n!==null&&(bn(n,e,i),Zi(n,e,i))}};function Td(e,n,i,s,c,d,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,y):n.prototype&&n.prototype.isPureReactComponent?!Fi(i,s)||!Fi(c,d):!0}function Ad(e,n,i,s){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,s),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,s),n.state!==e&&fu.enqueueReplaceState(n,n.state,null)}function Nr(e,n){var i=n;if("ref"in n){i={};for(var s in n)s!=="ref"&&(i[s]=n[s])}if(e=e.defaultProps){i===n&&(i=v({},i));for(var c in e)i[c]===void 0&&(i[c]=e[c])}return i}var vs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Cd(e){vs(e)}function Nd(e){console.error(e)}function Md(e){vs(e)}function gs(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(s){setTimeout(function(){throw s})}}function Rd(e,n,i){try{var s=e.onCaughtError;s(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function du(e,n,i){return i=ka(i),i.tag=3,i.payload={element:null},i.callback=function(){gs(e,n)},i}function wd(e){return e=ka(e),e.tag=3,e}function Od(e,n,i,s){var c=i.type.getDerivedStateFromError;if(typeof c=="function"){var d=s.value;e.payload=function(){return c(d)},e.callback=function(){Rd(n,i,s)}}var y=i.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Rd(n,i,s),typeof c!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var b=s.stack;this.componentDidCatch(s.value,{componentStack:b!==null?b:""})})}function Km(e,n,i,s,c){if(i.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(n=i.alternate,n!==null&&Pi(n,i,c,!0),i=Ln.current,i!==null){switch(i.tag){case 13:return ta===null?Bu():i.alternate===null&&Nt===0&&(Nt=3),i.flags&=-257,i.flags|=65536,i.lanes=c,s===zo?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([s]):n.add(s),Fu(e,s,c)),!1;case 22:return i.flags|=65536,s===zo?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([s]):i.add(s)),Fu(e,s,c)),!1}throw Error(l(435,i.tag))}return Fu(e,s,c),Bu(),!1}if(at)return n=Ln.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,s!==Lo&&(e=Error(l(422),{cause:s}),Hi(On(e,i)))):(s!==Lo&&(n=Error(l(423),{cause:s}),Hi(On(n,i))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,s=On(s,i),c=du(e.stateNode,s,c),Yo(e,c),Nt!==4&&(Nt=2)),!1;var d=Error(l(520),{cause:s});if(d=On(d,i),ul===null?ul=[d]:ul.push(d),Nt!==4&&(Nt=2),n===null)return!0;s=On(s,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=c&-c,i.lanes|=e,e=du(i.stateNode,s,e),Yo(i,e),!1;case 1:if(n=i.type,d=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(qa===null||!qa.has(d))))return i.flags|=65536,c&=-c,i.lanes|=c,c=wd(c),Od(c,e,i,s),Yo(i,c),!1}i=i.return}while(i!==null);return!1}var Dd=Error(l(461)),zt=!1;function Xt(e,n,i,s){n.child=e===null?xd(n,null,i,s):ti(n,e.child,i,s)}function _d(e,n,i,s,c){i=i.render;var d=n.ref;if("ref"in s){var y={};for(var b in s)b!=="ref"&&(y[b]=s[b])}else y=s;return Tr(n),s=Qo(e,n,i,y,d,c),b=Ko(),e!==null&&!zt?(Wo(e,n,c),ba(e,n,c)):(at&&b&&_o(n),n.flags|=1,Xt(e,n,s,c),n.child)}function Ud(e,n,i,s,c){if(e===null){var d=i.type;return typeof d=="function"&&!wo(d)&&d.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=d,Ld(e,n,d,s,c)):(e=Kl(i.type,null,s,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!Su(e,c)){var y=d.memoizedProps;if(i=i.compare,i=i!==null?i:Fi,i(y,s)&&e.ref===n.ref)return ba(e,n,c)}return n.flags|=1,e=da(d,s),e.ref=n.ref,e.return=n,n.child=e}function Ld(e,n,i,s,c){if(e!==null){var d=e.memoizedProps;if(Fi(d,s)&&e.ref===n.ref)if(zt=!1,n.pendingProps=s=d,Su(e,c))(e.flags&131072)!==0&&(zt=!0);else return n.lanes=e.lanes,ba(e,n,c)}return hu(e,n,i,s,c)}function kd(e,n,i){var s=n.pendingProps,c=s.children,d=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if((n.flags&128)!==0){if(s=d!==null?d.baseLanes|i:i,e!==null){for(c=n.child=e.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;n.childLanes=d&~s}else n.childLanes=0,n.child=null;return Bd(e,n,s,i)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&ts(n,d!==null?d.cachePool:null),d!==null?Lf(n,d):Vo(),Ed(n);else return n.lanes=n.childLanes=536870912,Bd(e,n,d!==null?d.baseLanes|i:i,i)}else d!==null?(ts(n,d.cachePool),Lf(n,d),Ga(),n.memoizedState=null):(e!==null&&ts(n,null),Vo(),Ga());return Xt(e,n,c,i),n.child}function Bd(e,n,i,s){var c=jo();return c=c===null?null:{parent:It._currentValue,pool:c},n.memoizedState={baseLanes:i,cachePool:c},e!==null&&ts(n,null),Vo(),Ed(n),e!==null&&Pi(e,n,s,!0),null}function ys(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(l(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function hu(e,n,i,s,c){return Tr(n),i=Qo(e,n,i,s,void 0,c),s=Ko(),e!==null&&!zt?(Wo(e,n,c),ba(e,n,c)):(at&&s&&_o(n),n.flags|=1,Xt(e,n,i,c),n.child)}function Id(e,n,i,s,c,d){return Tr(n),n.updateQueue=null,i=Bf(n,s,i,c),kf(e),s=Ko(),e!==null&&!zt?(Wo(e,n,d),ba(e,n,d)):(at&&s&&_o(n),n.flags|=1,Xt(e,n,i,d),n.child)}function Fd(e,n,i,s,c){if(Tr(n),n.stateNode===null){var d=qr,y=i.contextType;typeof y=="object"&&y!==null&&(d=$t(y)),d=new i(s,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=fu,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=s,d.state=n.memoizedState,d.refs={},Ho(n),y=i.contextType,d.context=typeof y=="object"&&y!==null?$t(y):qr,d.state=n.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(cu(n,i,y,s),d.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&fu.enqueueReplaceState(d,d.state,null),Ki(n,s,d,c),Qi(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),s=!0}else if(e===null){d=n.stateNode;var b=n.memoizedProps,A=Nr(i,b);d.props=A;var B=d.context,X=i.contextType;y=qr,typeof X=="object"&&X!==null&&(y=$t(X));var $=i.getDerivedStateFromProps;X=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=n.pendingProps!==b,X||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||B!==y)&&Ad(n,d,s,y),La=!1;var z=n.memoizedState;d.state=z,Ki(n,s,d,c),Qi(),B=n.memoizedState,b||z!==B||La?(typeof $=="function"&&(cu(n,i,$,s),B=n.memoizedState),(A=La||Td(n,i,A,s,z,B,y))?(X||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=s,n.memoizedState=B),d.props=s,d.state=B,d.context=y,s=A):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),s=!1)}else{d=n.stateNode,Po(e,n),y=n.memoizedProps,X=Nr(i,y),d.props=X,$=n.pendingProps,z=d.context,B=i.contextType,A=qr,typeof B=="object"&&B!==null&&(A=$t(B)),b=i.getDerivedStateFromProps,(B=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==$||z!==A)&&Ad(n,d,s,A),La=!1,z=n.memoizedState,d.state=z,Ki(n,s,d,c),Qi();var H=n.memoizedState;y!==$||z!==H||La||e!==null&&e.dependencies!==null&&$l(e.dependencies)?(typeof b=="function"&&(cu(n,i,b,s),H=n.memoizedState),(X=La||Td(n,i,X,s,z,H,A)||e!==null&&e.dependencies!==null&&$l(e.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(s,H,A),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(s,H,A)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),n.memoizedProps=s,n.memoizedState=H),d.props=s,d.state=H,d.context=A,s=X):(typeof d.componentDidUpdate!="function"||y===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),s=!1)}return d=s,ys(e,n),s=(n.flags&128)!==0,d||s?(d=n.stateNode,i=s&&typeof i.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,e!==null&&s?(n.child=ti(n,e.child,null,c),n.child=ti(n,null,i,c)):Xt(e,n,i,c),n.memoizedState=d.state,e=n.child):e=ba(e,n,c),e}function Gd(e,n,i,s){return zi(),n.flags|=256,Xt(e,n,i,s),n.child}var pu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mu(e){return{baseLanes:e,cachePool:Nf()}}function vu(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=kn),e}function jd(e,n,i){var s=n.pendingProps,c=!1,d=(n.flags&128)!==0,y;if((y=d)||(y=e!==null&&e.memoizedState===null?!1:(Ft.current&2)!==0),y&&(c=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,e===null){if(at){if(c?Fa(n):Ga(),at){var b=Ct,A;if(A=b){e:{for(A=b,b=ea;A.nodeType!==8;){if(!b){b=null;break e}if(A=Pn(A.nextSibling),A===null){b=null;break e}}b=A}b!==null?(n.memoizedState={dehydrated:b,treeContext:yr!==null?{id:ha,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},A=pn(18,null,null,0),A.stateNode=b,A.return=n,n.child=A,rn=n,Ct=null,A=!0):A=!1}A||xr(n)}if(b=n.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return $u(b)?n.lanes=32:n.lanes=536870912,null;ya(n)}return b=s.children,s=s.fallback,c?(Ga(),c=n.mode,b=bs({mode:"hidden",children:b},c),s=gr(s,c,i,null),b.return=n,s.return=n,b.sibling=s,n.child=b,c=n.child,c.memoizedState=mu(i),c.childLanes=vu(e,y,i),n.memoizedState=pu,s):(Fa(n),gu(n,b))}if(A=e.memoizedState,A!==null&&(b=A.dehydrated,b!==null)){if(d)n.flags&256?(Fa(n),n.flags&=-257,n=yu(e,n,i)):n.memoizedState!==null?(Ga(),n.child=e.child,n.flags|=128,n=null):(Ga(),c=s.fallback,b=n.mode,s=bs({mode:"visible",children:s.children},b),c=gr(c,b,i,null),c.flags|=2,s.return=n,c.return=n,s.sibling=c,n.child=s,ti(n,e.child,null,i),s=n.child,s.memoizedState=mu(i),s.childLanes=vu(e,y,i),n.memoizedState=pu,n=c);else if(Fa(n),$u(b)){if(y=b.nextSibling&&b.nextSibling.dataset,y)var B=y.dgst;y=B,s=Error(l(419)),s.stack="",s.digest=y,Hi({value:s,source:null,stack:null}),n=yu(e,n,i)}else if(zt||Pi(e,n,i,!1),y=(i&e.childLanes)!==0,zt||y){if(y=mt,y!==null&&(s=i&-i,s=(s&42)!==0?1:Br(s),s=(s&(y.suspendedLanes|i))!==0?0:s,s!==0&&s!==A.retryLane))throw A.retryLane=s,Yr(e,s),bn(y,e,s),Dd;b.data==="$?"||Bu(),n=yu(e,n,i)}else b.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=A.treeContext,Ct=Pn(b.nextSibling),rn=n,at=!0,Sr=null,ea=!1,e!==null&&(_n[Un++]=ha,_n[Un++]=pa,_n[Un++]=yr,ha=e.id,pa=e.overflow,yr=n),n=gu(n,s.children),n.flags|=4096);return n}return c?(Ga(),c=s.fallback,b=n.mode,A=e.child,B=A.sibling,s=da(A,{mode:"hidden",children:s.children}),s.subtreeFlags=A.subtreeFlags&65011712,B!==null?c=da(B,c):(c=gr(c,b,i,null),c.flags|=2),c.return=n,s.return=n,s.sibling=c,n.child=s,s=c,c=n.child,b=e.child.memoizedState,b===null?b=mu(i):(A=b.cachePool,A!==null?(B=It._currentValue,A=A.parent!==B?{parent:B,pool:B}:A):A=Nf(),b={baseLanes:b.baseLanes|i,cachePool:A}),c.memoizedState=b,c.childLanes=vu(e,y,i),n.memoizedState=pu,s):(Fa(n),i=e.child,e=i.sibling,i=da(i,{mode:"visible",children:s.children}),i.return=n,i.sibling=null,e!==null&&(y=n.deletions,y===null?(n.deletions=[e],n.flags|=16):y.push(e)),n.child=i,n.memoizedState=null,i)}function gu(e,n){return n=bs({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function bs(e,n){return e=pn(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function yu(e,n,i){return ti(n,e.child,null,i),e=gu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function zd(e,n,i){e.lanes|=n;var s=e.alternate;s!==null&&(s.lanes|=n),Bo(e.return,n,i)}function bu(e,n,i,s,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:c}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=i,d.tailMode=c)}function Hd(e,n,i){var s=n.pendingProps,c=s.revealOrder,d=s.tail;if(Xt(e,n,s.children,i),s=Ft.current,(s&2)!==0)s=s&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zd(e,i,n);else if(e.tag===19)zd(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(se(Ft,s),c){case"forwards":for(i=n.child,c=null;i!==null;)e=i.alternate,e!==null&&ms(e)===null&&(c=i),i=i.sibling;i=c,i===null?(c=n.child,n.child=null):(c=i.sibling,i.sibling=null),bu(n,!1,c,i,d);break;case"backwards":for(i=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&ms(e)===null){n.child=c;break}e=c.sibling,c.sibling=i,i=c,c=e}bu(n,!0,i,null,d);break;case"together":bu(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function ba(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Ya|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(Pi(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(l(153));if(n.child!==null){for(e=n.child,i=da(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=da(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function Su(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&$l(e)))}function Wm(e,n,i){switch(n.tag){case 3:Fe(n,n.stateNode.containerInfo),Ua(n,It,e.memoizedState.cache),zi();break;case 27:case 5:nn(n);break;case 4:Fe(n,n.stateNode.containerInfo);break;case 10:Ua(n,n.type,n.memoizedProps.value);break;case 13:var s=n.memoizedState;if(s!==null)return s.dehydrated!==null?(Fa(n),n.flags|=128,null):(i&n.child.childLanes)!==0?jd(e,n,i):(Fa(n),e=ba(e,n,i),e!==null?e.sibling:null);Fa(n);break;case 19:var c=(e.flags&128)!==0;if(s=(i&n.childLanes)!==0,s||(Pi(e,n,i,!1),s=(i&n.childLanes)!==0),c){if(s)return Hd(e,n,i);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),se(Ft,Ft.current),s)break;return null;case 22:case 23:return n.lanes=0,kd(e,n,i);case 24:Ua(n,It,e.memoizedState.cache)}return ba(e,n,i)}function Pd(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)zt=!0;else{if(!Su(e,i)&&(n.flags&128)===0)return zt=!1,Wm(e,n,i);zt=(e.flags&131072)!==0}else zt=!1,at&&(n.flags&1048576)!==0&&bf(n,Jl,n.index);switch(n.lanes=0,n.tag){case 16:e:{e=n.pendingProps;var s=n.elementType,c=s._init;if(s=c(s._payload),n.type=s,typeof s=="function")wo(s)?(e=Nr(s,e),n.tag=1,n=Fd(null,n,s,e,i)):(n.tag=0,n=hu(null,n,s,e,i));else{if(s!=null){if(c=s.$$typeof,c===Y){n.tag=11,n=_d(null,n,s,e,i);break e}else if(c===Ee){n.tag=14,n=Ud(null,n,s,e,i);break e}}throw n=re(s)||s,Error(l(306,n,""))}}return n;case 0:return hu(e,n,n.type,n.pendingProps,i);case 1:return s=n.type,c=Nr(s,n.pendingProps),Fd(e,n,s,c,i);case 3:e:{if(Fe(n,n.stateNode.containerInfo),e===null)throw Error(l(387));s=n.pendingProps;var d=n.memoizedState;c=d.element,Po(e,n),Ki(n,s,null,i);var y=n.memoizedState;if(s=y.cache,Ua(n,It,s),s!==d.cache&&Io(n,[It],i,!0),Qi(),s=y.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=Gd(e,n,s,i);break e}else if(s!==c){c=On(Error(l(424)),n),Hi(c),n=Gd(e,n,s,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ct=Pn(e.firstChild),rn=n,at=!0,Sr=null,ea=!0,i=xd(n,null,s,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(zi(),s===c){n=ba(e,n,i);break e}Xt(e,n,s,i)}n=n.child}return n;case 26:return ys(e,n),e===null?(i=Xh(n.type,null,n.pendingProps,null))?n.memoizedState=i:at||(i=n.type,e=n.pendingProps,s=Us(Ae.current).createElement(i),s[kt]=n,s[jt]=e,Qt(s,i,e),gt(s),n.stateNode=s):n.memoizedState=Xh(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return nn(n),e===null&&at&&(s=n.stateNode=Yh(n.type,n.pendingProps,Ae.current),rn=n,ea=!0,c=Ct,Za(n.type)?(ec=c,Ct=Pn(s.firstChild)):Ct=c),Xt(e,n,n.pendingProps.children,i),ys(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&at&&((c=s=Ct)&&(s=Cv(s,n.type,n.pendingProps,ea),s!==null?(n.stateNode=s,rn=n,Ct=Pn(s.firstChild),ea=!1,c=!0):c=!1),c||xr(n)),nn(n),c=n.type,d=n.pendingProps,y=e!==null?e.memoizedProps:null,s=d.children,Ku(c,d)?s=null:y!==null&&Ku(c,y)&&(n.flags|=32),n.memoizedState!==null&&(c=Qo(e,n,Pm,null,null,i),yl._currentValue=c),ys(e,n),Xt(e,n,s,i),n.child;case 6:return e===null&&at&&((e=i=Ct)&&(i=Nv(i,n.pendingProps,ea),i!==null?(n.stateNode=i,rn=n,Ct=null,e=!0):e=!1),e||xr(n)),null;case 13:return jd(e,n,i);case 4:return Fe(n,n.stateNode.containerInfo),s=n.pendingProps,e===null?n.child=ti(n,null,s,i):Xt(e,n,s,i),n.child;case 11:return _d(e,n,n.type,n.pendingProps,i);case 7:return Xt(e,n,n.pendingProps,i),n.child;case 8:return Xt(e,n,n.pendingProps.children,i),n.child;case 12:return Xt(e,n,n.pendingProps.children,i),n.child;case 10:return s=n.pendingProps,Ua(n,n.type,s.value),Xt(e,n,s.children,i),n.child;case 9:return c=n.type._context,s=n.pendingProps.children,Tr(n),c=$t(c),s=s(c),n.flags|=1,Xt(e,n,s,i),n.child;case 14:return Ud(e,n,n.type,n.pendingProps,i);case 15:return Ld(e,n,n.type,n.pendingProps,i);case 19:return Hd(e,n,i);case 31:return s=n.pendingProps,i=n.mode,s={mode:s.mode,children:s.children},e===null?(i=bs(s,i),i.ref=n.ref,n.child=i,i.return=n,n=i):(i=da(e.child,s),i.ref=n.ref,n.child=i,i.return=n,n=i),n;case 22:return kd(e,n,i);case 24:return Tr(n),s=$t(It),e===null?(c=jo(),c===null&&(c=mt,d=Fo(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=i),c=d),n.memoizedState={parent:s,cache:c},Ho(n),Ua(n,It,c)):((e.lanes&i)!==0&&(Po(e,n),Ki(n,null,null,i),Qi()),c=e.memoizedState,d=n.memoizedState,c.parent!==s?(c={parent:s,cache:s},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),Ua(n,It,s)):(s=d.cache,Ua(n,It,s),s!==c.cache&&Io(n,[It],i,!0))),Xt(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(l(156,n.tag))}function Sa(e){e.flags|=4}function Yd(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Jh(n)){if(n=Ln.current,n!==null&&(($e&4194048)===$e?ta!==null:($e&62914560)!==$e&&($e&536870912)===0||n!==ta))throw Xi=zo,Mf;e.flags|=8192}}function Ss(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Lr():536870912,e.lanes|=n,ii|=n)}function al(e,n){if(!at)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function At(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(n)for(var c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags&65011712,s|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)i|=c.lanes|c.childLanes,s|=c.subtreeFlags,s|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=s,e.childLanes=i,n}function Jm(e,n,i){var s=n.pendingProps;switch(Uo(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(n),null;case 1:return At(n),null;case 3:return i=n.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),va(It),rt(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(ji(n)?Sa(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Ef())),At(n),null;case 26:return i=n.memoizedState,e===null?(Sa(n),i!==null?(At(n),Yd(n,i)):(At(n),n.flags&=-16777217)):i?i!==e.memoizedState?(Sa(n),At(n),Yd(n,i)):(At(n),n.flags&=-16777217):(e.memoizedProps!==s&&Sa(n),At(n),n.flags&=-16777217),null;case 27:tt(n),i=Ae.current;var c=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==s&&Sa(n);else{if(!s){if(n.stateNode===null)throw Error(l(166));return At(n),null}e=Te.current,ji(n)?Sf(n):(e=Yh(c,s,i),n.stateNode=e,Sa(n))}return At(n),null;case 5:if(tt(n),i=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==s&&Sa(n);else{if(!s){if(n.stateNode===null)throw Error(l(166));return At(n),null}if(e=Te.current,ji(n))Sf(n);else{switch(c=Us(Ae.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?c.createElement("select",{is:s.is}):c.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?c.createElement(i,{is:s.is}):c.createElement(i)}}e[kt]=n,e[jt]=s;e:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break e;for(;c.sibling===null;){if(c.return===null||c.return===n)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=e;e:switch(Qt(e,i,s),i){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Sa(n)}}return At(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==s&&Sa(n);else{if(typeof s!="string"&&n.stateNode===null)throw Error(l(166));if(e=Ae.current,ji(n)){if(e=n.stateNode,i=n.memoizedProps,s=null,c=rn,c!==null)switch(c.tag){case 27:case 5:s=c.memoizedProps}e[kt]=n,e=!!(e.nodeValue===i||s!==null&&s.suppressHydrationWarning===!0||Ih(e.nodeValue,i)),e||xr(n)}else e=Us(e).createTextNode(s),e[kt]=n,n.stateNode=e}return At(n),null;case 13:if(s=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=ji(n),s!==null&&s.dehydrated!==null){if(e===null){if(!c)throw Error(l(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(l(317));c[kt]=n}else zi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;At(n),c=!1}else c=Ef(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(ya(n),n):(ya(n),null)}if(ya(n),(n.flags&128)!==0)return n.lanes=i,n;if(i=s!==null,e=e!==null&&e.memoizedState!==null,i){s=n.child,c=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(c=s.alternate.memoizedState.cachePool.pool);var d=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==c&&(s.flags|=2048)}return i!==e&&i&&(n.child.flags|=8192),Ss(n,n.updateQueue),At(n),null;case 4:return rt(),e===null&&qu(n.stateNode.containerInfo),At(n),null;case 10:return va(n.type),At(n),null;case 19:if(ie(Ft),c=n.memoizedState,c===null)return At(n),null;if(s=(n.flags&128)!==0,d=c.rendering,d===null)if(s)al(c,!1);else{if(Nt!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(d=ms(e),d!==null){for(n.flags|=128,al(c,!1),e=d.updateQueue,n.updateQueue=e,Ss(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)yf(i,e),i=i.sibling;return se(Ft,Ft.current&1|2),n.child}e=e.sibling}c.tail!==null&&Lt()>Ts&&(n.flags|=128,s=!0,al(c,!1),n.lanes=4194304)}else{if(!s)if(e=ms(d),e!==null){if(n.flags|=128,s=!0,e=e.updateQueue,n.updateQueue=e,Ss(n,e),al(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!at)return At(n),null}else 2*Lt()-c.renderingStartTime>Ts&&i!==536870912&&(n.flags|=128,s=!0,al(c,!1),n.lanes=4194304);c.isBackwards?(d.sibling=n.child,n.child=d):(e=c.last,e!==null?e.sibling=d:n.child=d,c.last=d)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Lt(),n.sibling=null,e=Ft.current,se(Ft,s?e&1|2:e&1),n):(At(n),null);case 22:case 23:return ya(n),Xo(),s=n.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(n.flags|=8192):s&&(n.flags|=8192),s?(i&536870912)!==0&&(n.flags&128)===0&&(At(n),n.subtreeFlags&6&&(n.flags|=8192)):At(n),i=n.updateQueue,i!==null&&Ss(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),s=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(s=n.memoizedState.cachePool.pool),s!==i&&(n.flags|=2048),e!==null&&ie(Ar),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),va(It),At(n),null;case 25:return null;case 30:return null}throw Error(l(156,n.tag))}function $m(e,n){switch(Uo(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return va(It),rt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return tt(n),null;case 13:if(ya(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(l(340));zi()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ie(Ft),null;case 4:return rt(),null;case 10:return va(n.type),null;case 22:case 23:return ya(n),Xo(),e!==null&&ie(Ar),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return va(It),null;case 25:return null;default:return null}}function qd(e,n){switch(Uo(n),n.tag){case 3:va(It),rt();break;case 26:case 27:case 5:tt(n);break;case 4:rt();break;case 13:ya(n);break;case 19:ie(Ft);break;case 10:va(n.type);break;case 22:case 23:ya(n),Xo(),e!==null&&ie(Ar);break;case 24:va(It)}}function rl(e,n){try{var i=n.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var c=s.next;i=c;do{if((i.tag&e)===e){s=void 0;var d=i.create,y=i.inst;s=d(),y.destroy=s}i=i.next}while(i!==c)}}catch(b){ht(n,n.return,b)}}function ja(e,n,i){try{var s=n.updateQueue,c=s!==null?s.lastEffect:null;if(c!==null){var d=c.next;s=d;do{if((s.tag&e)===e){var y=s.inst,b=y.destroy;if(b!==void 0){y.destroy=void 0,c=n;var A=i,B=b;try{B()}catch(X){ht(c,A,X)}}}s=s.next}while(s!==d)}}catch(X){ht(n,n.return,X)}}function Vd(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{Uf(n,i)}catch(s){ht(e,e.return,s)}}}function Xd(e,n,i){i.props=Nr(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(s){ht(e,n,s)}}function il(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof i=="function"?e.refCleanup=i(s):i.current=s}}catch(c){ht(e,n,c)}}function na(e,n){var i=e.ref,s=e.refCleanup;if(i!==null)if(typeof s=="function")try{s()}catch(c){ht(e,n,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(c){ht(e,n,c)}else i.current=null}function Zd(e){var n=e.type,i=e.memoizedProps,s=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break e;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(c){ht(e,e.return,c)}}function xu(e,n,i){try{var s=e.stateNode;Sv(s,e.type,i,n),s[jt]=n}catch(c){ht(e,e.return,c)}}function Qd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Za(e.type)||e.tag===4}function Eu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Qd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Za(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Tu(e,n,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=_s));else if(s!==4&&(s===27&&Za(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(Tu(e,n,i),e=e.sibling;e!==null;)Tu(e,n,i),e=e.sibling}function xs(e,n,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(s!==4&&(s===27&&Za(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(xs(e,n,i),e=e.sibling;e!==null;)xs(e,n,i),e=e.sibling}function Kd(e){var n=e.stateNode,i=e.memoizedProps;try{for(var s=e.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);Qt(n,s,i),n[kt]=e,n[jt]=i}catch(d){ht(e,e.return,d)}}var xa=!1,wt=!1,Au=!1,Wd=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function ev(e,n){if(e=e.containerInfo,Zu=Gs,e=of(e),Eo(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var c=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var y=0,b=-1,A=-1,B=0,X=0,$=e,z=null;t:for(;;){for(var H;$!==i||c!==0&&$.nodeType!==3||(b=y+c),$!==d||s!==0&&$.nodeType!==3||(A=y+s),$.nodeType===3&&(y+=$.nodeValue.length),(H=$.firstChild)!==null;)z=$,$=H;for(;;){if($===e)break t;if(z===i&&++B===c&&(b=y),z===d&&++X===s&&(A=y),(H=$.nextSibling)!==null)break;$=z,z=$.parentNode}$=H}i=b===-1||A===-1?null:{start:b,end:A}}else i=null}i=i||{start:0,end:0}}else i=null;for(Qu={focusedElem:e,selectionRange:i},Gs=!1,Ht=n;Ht!==null;)if(n=Ht,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,Ht=e;else for(;Ht!==null;){switch(n=Ht,d=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,i=n,c=d.memoizedProps,d=d.memoizedState,s=i.stateNode;try{var Re=Nr(i.type,c,i.elementType===i.type);e=s.getSnapshotBeforeUpdate(Re,d),s.__reactInternalSnapshotBeforeUpdate=e}catch(Ne){ht(i,i.return,Ne)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Ju(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ju(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(l(163))}if(e=n.sibling,e!==null){e.return=n.return,Ht=e;break}Ht=n.return}}function Jd(e,n,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:za(e,i),s&4&&rl(5,i);break;case 1:if(za(e,i),s&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(y){ht(i,i.return,y)}else{var c=Nr(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(c,n,e.__reactInternalSnapshotBeforeUpdate)}catch(y){ht(i,i.return,y)}}s&64&&Vd(i),s&512&&il(i,i.return);break;case 3:if(za(e,i),s&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{Uf(e,n)}catch(y){ht(i,i.return,y)}}break;case 27:n===null&&s&4&&Kd(i);case 26:case 5:za(e,i),n===null&&s&4&&Zd(i),s&512&&il(i,i.return);break;case 12:za(e,i);break;case 13:za(e,i),s&4&&th(e,i),s&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=uv.bind(null,i),Mv(e,i))));break;case 22:if(s=i.memoizedState!==null||xa,!s){n=n!==null&&n.memoizedState!==null||wt,c=xa;var d=wt;xa=s,(wt=n)&&!d?Ha(e,i,(i.subtreeFlags&8772)!==0):za(e,i),xa=c,wt=d}break;case 30:break;default:za(e,i)}}function $d(e){var n=e.alternate;n!==null&&(e.alternate=null,$d(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Tn(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var xt=null,cn=!1;function Ea(e,n,i){for(i=i.child;i!==null;)eh(e,n,i),i=i.sibling}function eh(e,n,i){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Kt,i)}catch{}switch(i.tag){case 26:wt||na(i,n),Ea(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:wt||na(i,n);var s=xt,c=cn;Za(i.type)&&(xt=i.stateNode,cn=!1),Ea(e,n,i),pl(i.stateNode),xt=s,cn=c;break;case 5:wt||na(i,n);case 6:if(s=xt,c=cn,xt=null,Ea(e,n,i),xt=s,cn=c,xt!==null)if(cn)try{(xt.nodeType===9?xt.body:xt.nodeName==="HTML"?xt.ownerDocument.body:xt).removeChild(i.stateNode)}catch(d){ht(i,n,d)}else try{xt.removeChild(i.stateNode)}catch(d){ht(i,n,d)}break;case 18:xt!==null&&(cn?(e=xt,Hh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),El(e)):Hh(xt,i.stateNode));break;case 4:s=xt,c=cn,xt=i.stateNode.containerInfo,cn=!0,Ea(e,n,i),xt=s,cn=c;break;case 0:case 11:case 14:case 15:wt||ja(2,i,n),wt||ja(4,i,n),Ea(e,n,i);break;case 1:wt||(na(i,n),s=i.stateNode,typeof s.componentWillUnmount=="function"&&Xd(i,n,s)),Ea(e,n,i);break;case 21:Ea(e,n,i);break;case 22:wt=(s=wt)||i.memoizedState!==null,Ea(e,n,i),wt=s;break;default:Ea(e,n,i)}}function th(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{El(e)}catch(i){ht(n,n.return,i)}}function tv(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Wd),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Wd),n;default:throw Error(l(435,e.tag))}}function Cu(e,n){var i=tv(e);n.forEach(function(s){var c=cv.bind(null,e,s);i.has(s)||(i.add(s),s.then(c,c))})}function mn(e,n){var i=n.deletions;if(i!==null)for(var s=0;s<i.length;s++){var c=i[s],d=e,y=n,b=y;e:for(;b!==null;){switch(b.tag){case 27:if(Za(b.type)){xt=b.stateNode,cn=!1;break e}break;case 5:xt=b.stateNode,cn=!1;break e;case 3:case 4:xt=b.stateNode.containerInfo,cn=!0;break e}b=b.return}if(xt===null)throw Error(l(160));eh(d,y,c),xt=null,cn=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)nh(n,e),n=n.sibling}var Hn=null;function nh(e,n){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:mn(n,e),vn(e),s&4&&(ja(3,e,e.return),rl(3,e),ja(5,e,e.return));break;case 1:mn(n,e),vn(e),s&512&&(wt||i===null||na(i,i.return)),s&64&&xa&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?s:i.concat(s))));break;case 26:var c=Hn;if(mn(n,e),vn(e),s&512&&(wt||i===null||na(i,i.return)),s&4){var d=i!==null?i.memoizedState:null;if(s=e.memoizedState,i===null)if(s===null)if(e.stateNode===null){e:{s=e.type,i=e.memoizedProps,c=c.ownerDocument||c;t:switch(s){case"title":d=c.getElementsByTagName("title")[0],(!d||d[jn]||d[kt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(s),c.head.insertBefore(d,c.querySelector("head > title"))),Qt(d,s,i),d[kt]=e,gt(d),s=d;break e;case"link":var y=Kh("link","href",c).get(s+(i.href||""));if(y){for(var b=0;b<y.length;b++)if(d=y[b],d.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&d.getAttribute("rel")===(i.rel==null?null:i.rel)&&d.getAttribute("title")===(i.title==null?null:i.title)&&d.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){y.splice(b,1);break t}}d=c.createElement(s),Qt(d,s,i),c.head.appendChild(d);break;case"meta":if(y=Kh("meta","content",c).get(s+(i.content||""))){for(b=0;b<y.length;b++)if(d=y[b],d.getAttribute("content")===(i.content==null?null:""+i.content)&&d.getAttribute("name")===(i.name==null?null:i.name)&&d.getAttribute("property")===(i.property==null?null:i.property)&&d.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&d.getAttribute("charset")===(i.charSet==null?null:i.charSet)){y.splice(b,1);break t}}d=c.createElement(s),Qt(d,s,i),c.head.appendChild(d);break;default:throw Error(l(468,s))}d[kt]=e,gt(d),s=d}e.stateNode=s}else Wh(c,e.type,e.stateNode);else e.stateNode=Qh(c,s,e.memoizedProps);else d!==s?(d===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):d.count--,s===null?Wh(c,e.type,e.stateNode):Qh(c,s,e.memoizedProps)):s===null&&e.stateNode!==null&&xu(e,e.memoizedProps,i.memoizedProps)}break;case 27:mn(n,e),vn(e),s&512&&(wt||i===null||na(i,i.return)),i!==null&&s&4&&xu(e,e.memoizedProps,i.memoizedProps);break;case 5:if(mn(n,e),vn(e),s&512&&(wt||i===null||na(i,i.return)),e.flags&32){c=e.stateNode;try{Ce(c,"")}catch(H){ht(e,e.return,H)}}s&4&&e.stateNode!=null&&(c=e.memoizedProps,xu(e,c,i!==null?i.memoizedProps:c)),s&1024&&(Au=!0);break;case 6:if(mn(n,e),vn(e),s&4){if(e.stateNode===null)throw Error(l(162));s=e.memoizedProps,i=e.stateNode;try{i.nodeValue=s}catch(H){ht(e,e.return,H)}}break;case 3:if(Bs=null,c=Hn,Hn=Ls(n.containerInfo),mn(n,e),Hn=c,vn(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{El(n.containerInfo)}catch(H){ht(e,e.return,H)}Au&&(Au=!1,ah(e));break;case 4:s=Hn,Hn=Ls(e.stateNode.containerInfo),mn(n,e),vn(e),Hn=s;break;case 12:mn(n,e),vn(e);break;case 13:mn(n,e),vn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Du=Lt()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Cu(e,s)));break;case 22:c=e.memoizedState!==null;var A=i!==null&&i.memoizedState!==null,B=xa,X=wt;if(xa=B||c,wt=X||A,mn(n,e),wt=X,xa=B,vn(e),s&8192)e:for(n=e.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(i===null||A||xa||wt||Mr(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){A=i=n;try{if(d=A.stateNode,c)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{b=A.stateNode;var $=A.memoizedProps.style,z=$!=null&&$.hasOwnProperty("display")?$.display:null;b.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(H){ht(A,A.return,H)}}}else if(n.tag===6){if(i===null){A=n;try{A.stateNode.nodeValue=c?"":A.memoizedProps}catch(H){ht(A,A.return,H)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}s&4&&(s=e.updateQueue,s!==null&&(i=s.retryQueue,i!==null&&(s.retryQueue=null,Cu(e,i))));break;case 19:mn(n,e),vn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Cu(e,s)));break;case 30:break;case 21:break;default:mn(n,e),vn(e)}}function vn(e){var n=e.flags;if(n&2){try{for(var i,s=e.return;s!==null;){if(Qd(s)){i=s;break}s=s.return}if(i==null)throw Error(l(160));switch(i.tag){case 27:var c=i.stateNode,d=Eu(e);xs(e,d,c);break;case 5:var y=i.stateNode;i.flags&32&&(Ce(y,""),i.flags&=-33);var b=Eu(e);xs(e,b,y);break;case 3:case 4:var A=i.stateNode.containerInfo,B=Eu(e);Tu(e,B,A);break;default:throw Error(l(161))}}catch(X){ht(e,e.return,X)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function ah(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;ah(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function za(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Jd(e,n.alternate,n),n=n.sibling}function Mr(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:ja(4,n,n.return),Mr(n);break;case 1:na(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&Xd(n,n.return,i),Mr(n);break;case 27:pl(n.stateNode);case 26:case 5:na(n,n.return),Mr(n);break;case 22:n.memoizedState===null&&Mr(n);break;case 30:Mr(n);break;default:Mr(n)}e=e.sibling}}function Ha(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var s=n.alternate,c=e,d=n,y=d.flags;switch(d.tag){case 0:case 11:case 15:Ha(c,d,i),rl(4,d);break;case 1:if(Ha(c,d,i),s=d,c=s.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(B){ht(s,s.return,B)}if(s=d,c=s.updateQueue,c!==null){var b=s.stateNode;try{var A=c.shared.hiddenCallbacks;if(A!==null)for(c.shared.hiddenCallbacks=null,c=0;c<A.length;c++)_f(A[c],b)}catch(B){ht(s,s.return,B)}}i&&y&64&&Vd(d),il(d,d.return);break;case 27:Kd(d);case 26:case 5:Ha(c,d,i),i&&s===null&&y&4&&Zd(d),il(d,d.return);break;case 12:Ha(c,d,i);break;case 13:Ha(c,d,i),i&&y&4&&th(c,d);break;case 22:d.memoizedState===null&&Ha(c,d,i),il(d,d.return);break;case 30:break;default:Ha(c,d,i)}n=n.sibling}}function Nu(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Yi(i))}function Mu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Yi(e))}function aa(e,n,i,s){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)rh(e,n,i,s),n=n.sibling}function rh(e,n,i,s){var c=n.flags;switch(n.tag){case 0:case 11:case 15:aa(e,n,i,s),c&2048&&rl(9,n);break;case 1:aa(e,n,i,s);break;case 3:aa(e,n,i,s),c&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Yi(e)));break;case 12:if(c&2048){aa(e,n,i,s),e=n.stateNode;try{var d=n.memoizedProps,y=d.id,b=d.onPostCommit;typeof b=="function"&&b(y,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){ht(n,n.return,A)}}else aa(e,n,i,s);break;case 13:aa(e,n,i,s);break;case 23:break;case 22:d=n.stateNode,y=n.alternate,n.memoizedState!==null?d._visibility&2?aa(e,n,i,s):ll(e,n):d._visibility&2?aa(e,n,i,s):(d._visibility|=2,ni(e,n,i,s,(n.subtreeFlags&10256)!==0)),c&2048&&Nu(y,n);break;case 24:aa(e,n,i,s),c&2048&&Mu(n.alternate,n);break;default:aa(e,n,i,s)}}function ni(e,n,i,s,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var d=e,y=n,b=i,A=s,B=y.flags;switch(y.tag){case 0:case 11:case 15:ni(d,y,b,A,c),rl(8,y);break;case 23:break;case 22:var X=y.stateNode;y.memoizedState!==null?X._visibility&2?ni(d,y,b,A,c):ll(d,y):(X._visibility|=2,ni(d,y,b,A,c)),c&&B&2048&&Nu(y.alternate,y);break;case 24:ni(d,y,b,A,c),c&&B&2048&&Mu(y.alternate,y);break;default:ni(d,y,b,A,c)}n=n.sibling}}function ll(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,s=n,c=s.flags;switch(s.tag){case 22:ll(i,s),c&2048&&Nu(s.alternate,s);break;case 24:ll(i,s),c&2048&&Mu(s.alternate,s);break;default:ll(i,s)}n=n.sibling}}var sl=8192;function ai(e){if(e.subtreeFlags&sl)for(e=e.child;e!==null;)ih(e),e=e.sibling}function ih(e){switch(e.tag){case 26:ai(e),e.flags&sl&&e.memoizedState!==null&&jv(Hn,e.memoizedState,e.memoizedProps);break;case 5:ai(e);break;case 3:case 4:var n=Hn;Hn=Ls(e.stateNode.containerInfo),ai(e),Hn=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=sl,sl=16777216,ai(e),sl=n):ai(e));break;default:ai(e)}}function lh(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function ol(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];Ht=s,oh(s,e)}lh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)sh(e),e=e.sibling}function sh(e){switch(e.tag){case 0:case 11:case 15:ol(e),e.flags&2048&&ja(9,e,e.return);break;case 3:ol(e);break;case 12:ol(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Es(e)):ol(e);break;default:ol(e)}}function Es(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];Ht=s,oh(s,e)}lh(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:ja(8,n,n.return),Es(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Es(n));break;default:Es(n)}e=e.sibling}}function oh(e,n){for(;Ht!==null;){var i=Ht;switch(i.tag){case 0:case 11:case 15:ja(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var s=i.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:Yi(i.memoizedState.cache)}if(s=i.child,s!==null)s.return=i,Ht=s;else e:for(i=e;Ht!==null;){s=Ht;var c=s.sibling,d=s.return;if($d(s),s===i){Ht=null;break e}if(c!==null){c.return=d,Ht=c;break e}Ht=d}}}var nv={getCacheForType:function(e){var n=$t(It),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i}},av=typeof WeakMap=="function"?WeakMap:Map,st=0,mt=null,Ye=null,$e=0,ot=0,gn=null,Pa=!1,ri=!1,Ru=!1,Ta=0,Nt=0,Ya=0,Rr=0,wu=0,kn=0,ii=0,ul=null,fn=null,Ou=!1,Du=0,Ts=1/0,As=null,qa=null,Zt=0,Va=null,li=null,si=0,_u=0,Uu=null,uh=null,cl=0,Lu=null;function yn(){if((st&2)!==0&&$e!==0)return $e&-$e;if(R.T!==null){var e=Zr;return e!==0?e:zu()}return Oi()}function ch(){kn===0&&(kn=($e&536870912)===0||at?Ri():536870912);var e=Ln.current;return e!==null&&(e.flags|=32),kn}function bn(e,n,i){(e===mt&&(ot===2||ot===9)||e.cancelPendingCommit!==null)&&(oi(e,0),Xa(e,$e,kn,!1)),oa(e,i),((st&2)===0||e!==mt)&&(e===mt&&((st&2)===0&&(Rr|=i),Nt===4&&Xa(e,$e,kn,!1)),ra(e))}function fh(e,n,i){if((st&6)!==0)throw Error(l(327));var s=!i&&(n&124)===0&&(n&e.expiredLanes)===0||wa(e,n),c=s?lv(e,n):Iu(e,n,!0),d=s;do{if(c===0){ri&&!s&&Xa(e,n,0,!1);break}else{if(i=e.current.alternate,d&&!rv(i)){c=Iu(e,n,!1),d=!1;continue}if(c===2){if(d=n,e.errorRecoveryDisabledLanes&d)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var b=e;c=ul;var A=b.current.memoizedState.isDehydrated;if(A&&(oi(b,y).flags|=256),y=Iu(b,y,!1),y!==2){if(Ru&&!A){b.errorRecoveryDisabledLanes|=d,Rr|=d,c=4;break e}d=fn,fn=c,d!==null&&(fn===null?fn=d:fn.push.apply(fn,d))}c=y}if(d=!1,c!==2)continue}}if(c===1){oi(e,0),Xa(e,n,0,!0);break}e:{switch(s=e,d=c,d){case 0:case 1:throw Error(l(345));case 4:if((n&4194048)!==n)break;case 6:Xa(s,n,kn,!Pa);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(l(329))}if((n&62914560)===n&&(c=Du+300-Lt(),10<c)){if(Xa(s,n,kn,!Pa),dr(s,0,!0)!==0)break e;s.timeoutHandle=jh(dh.bind(null,s,i,fn,As,Ou,n,kn,Rr,ii,Pa,d,2,-0,0),c);break e}dh(s,i,fn,As,Ou,n,kn,Rr,ii,Pa,d,0,-0,0)}}break}while(!0);ra(e)}function dh(e,n,i,s,c,d,y,b,A,B,X,$,z,H){if(e.timeoutHandle=-1,$=n.subtreeFlags,($&8192||($&16785408)===16785408)&&(gl={stylesheets:null,count:0,unsuspend:Gv},ih(n),$=zv(),$!==null)){e.cancelPendingCommit=$(bh.bind(null,e,n,d,i,s,c,y,b,A,X,1,z,H)),Xa(e,d,y,!B);return}bh(e,n,d,i,s,c,y,b,A)}function rv(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var s=0;s<i.length;s++){var c=i[s],d=c.getSnapshot;c=c.value;try{if(!hn(d(),c))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Xa(e,n,i,s){n&=~wu,n&=~Rr,e.suspendedLanes|=n,e.pingedLanes&=~n,s&&(e.warmLanes|=n),s=e.expirationTimes;for(var c=n;0<c;){var d=31-sn(c),y=1<<d;s[d]=-1,c&=~y}i!==0&&hr(e,i,n)}function Cs(){return(st&6)===0?(fl(0),!1):!0}function ku(){if(Ye!==null){if(ot===0)var e=Ye.return;else e=Ye,ma=Er=null,Jo(e),ei=null,tl=0,e=Ye;for(;e!==null;)qd(e.alternate,e),e=e.return;Ye=null}}function oi(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Ev(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),ku(),mt=e,Ye=i=da(e.current,null),$e=n,ot=0,gn=null,Pa=!1,ri=wa(e,n),Ru=!1,ii=kn=wu=Rr=Ya=Nt=0,fn=ul=null,Ou=!1,(n&8)!==0&&(n|=n&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=n;0<s;){var c=31-sn(s),d=1<<c;n|=e[c],s&=~d}return Ta=n,Xl(),i}function hh(e,n){ze=null,R.H=ds,n===Vi||n===ns?(n=Of(),ot=3):n===Mf?(n=Of(),ot=4):ot=n===Dd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,gn=n,Ye===null&&(Nt=1,gs(e,On(n,e.current)))}function ph(){var e=R.H;return R.H=ds,e===null?ds:e}function mh(){var e=R.A;return R.A=nv,e}function Bu(){Nt=4,Pa||($e&4194048)!==$e&&Ln.current!==null||(ri=!0),(Ya&134217727)===0&&(Rr&134217727)===0||mt===null||Xa(mt,$e,kn,!1)}function Iu(e,n,i){var s=st;st|=2;var c=ph(),d=mh();(mt!==e||$e!==n)&&(As=null,oi(e,n)),n=!1;var y=Nt;e:do try{if(ot!==0&&Ye!==null){var b=Ye,A=gn;switch(ot){case 8:ku(),y=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(n=!0);var B=ot;if(ot=0,gn=null,ui(e,b,A,B),i&&ri){y=0;break e}break;default:B=ot,ot=0,gn=null,ui(e,b,A,B)}}iv(),y=Nt;break}catch(X){hh(e,X)}while(!0);return n&&e.shellSuspendCounter++,ma=Er=null,st=s,R.H=c,R.A=d,Ye===null&&(mt=null,$e=0,Xl()),y}function iv(){for(;Ye!==null;)vh(Ye)}function lv(e,n){var i=st;st|=2;var s=ph(),c=mh();mt!==e||$e!==n?(As=null,Ts=Lt()+500,oi(e,n)):ri=wa(e,n);e:do try{if(ot!==0&&Ye!==null){n=Ye;var d=gn;t:switch(ot){case 1:ot=0,gn=null,ui(e,n,d,1);break;case 2:case 9:if(Rf(d)){ot=0,gn=null,gh(n);break}n=function(){ot!==2&&ot!==9||mt!==e||(ot=7),ra(e)},d.then(n,n);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:Rf(d)?(ot=0,gn=null,gh(n)):(ot=0,gn=null,ui(e,n,d,7));break;case 5:var y=null;switch(Ye.tag){case 26:y=Ye.memoizedState;case 5:case 27:var b=Ye;if(!y||Jh(y)){ot=0,gn=null;var A=b.sibling;if(A!==null)Ye=A;else{var B=b.return;B!==null?(Ye=B,Ns(B)):Ye=null}break t}}ot=0,gn=null,ui(e,n,d,5);break;case 6:ot=0,gn=null,ui(e,n,d,6);break;case 8:ku(),Nt=6;break e;default:throw Error(l(462))}}sv();break}catch(X){hh(e,X)}while(!0);return ma=Er=null,R.H=s,R.A=c,st=i,Ye!==null?0:(mt=null,$e=0,Xl(),Nt)}function sv(){for(;Ye!==null&&!xi();)vh(Ye)}function vh(e){var n=Pd(e.alternate,e,Ta);e.memoizedProps=e.pendingProps,n===null?Ns(e):Ye=n}function gh(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=Id(i,n,n.pendingProps,n.type,void 0,$e);break;case 11:n=Id(i,n,n.pendingProps,n.type.render,n.ref,$e);break;case 5:Jo(n);default:qd(i,n),n=Ye=yf(n,Ta),n=Pd(i,n,Ta)}e.memoizedProps=e.pendingProps,n===null?Ns(e):Ye=n}function ui(e,n,i,s){ma=Er=null,Jo(n),ei=null,tl=0;var c=n.return;try{if(Km(e,c,n,i,$e)){Nt=1,gs(e,On(i,e.current)),Ye=null;return}}catch(d){if(c!==null)throw Ye=c,d;Nt=1,gs(e,On(i,e.current)),Ye=null;return}n.flags&32768?(at||s===1?e=!0:ri||($e&536870912)!==0?e=!1:(Pa=e=!0,(s===2||s===9||s===3||s===6)&&(s=Ln.current,s!==null&&s.tag===13&&(s.flags|=16384))),yh(n,e)):Ns(n)}function Ns(e){var n=e;do{if((n.flags&32768)!==0){yh(n,Pa);return}e=n.return;var i=Jm(n.alternate,n,Ta);if(i!==null){Ye=i;return}if(n=n.sibling,n!==null){Ye=n;return}Ye=n=e}while(n!==null);Nt===0&&(Nt=5)}function yh(e,n){do{var i=$m(e.alternate,e);if(i!==null){i.flags&=32767,Ye=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){Ye=e;return}Ye=e=i}while(e!==null);Nt=6,Ye=null}function bh(e,n,i,s,c,d,y,b,A){e.cancelPendingCommit=null;do Ms();while(Zt!==0);if((st&6)!==0)throw Error(l(327));if(n!==null){if(n===e.current)throw Error(l(177));if(d=n.lanes|n.childLanes,d|=Mo,Oa(e,i,d,y,b,A),e===mt&&(Ye=mt=null,$e=0),li=n,Va=e,si=i,_u=d,Uu=c,uh=s,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,fv(ur,function(){return Ah(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||s){s=R.T,R.T=null,c=P.p,P.p=2,y=st,st|=4;try{ev(e,n,i)}finally{st=y,P.p=c,R.T=s}}Zt=1,Sh(),xh(),Eh()}}function Sh(){if(Zt===1){Zt=0;var e=Va,n=li,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=R.T,R.T=null;var s=P.p;P.p=2;var c=st;st|=4;try{nh(n,e);var d=Qu,y=of(e.containerInfo),b=d.focusedElem,A=d.selectionRange;if(y!==b&&b&&b.ownerDocument&&sf(b.ownerDocument.documentElement,b)){if(A!==null&&Eo(b)){var B=A.start,X=A.end;if(X===void 0&&(X=B),"selectionStart"in b)b.selectionStart=B,b.selectionEnd=Math.min(X,b.value.length);else{var $=b.ownerDocument||document,z=$&&$.defaultView||window;if(z.getSelection){var H=z.getSelection(),Re=b.textContent.length,Ne=Math.min(A.start,Re),ft=A.end===void 0?Ne:Math.min(A.end,Re);!H.extend&&Ne>ft&&(y=ft,ft=Ne,Ne=y);var _=lf(b,Ne),M=lf(b,ft);if(_&&M&&(H.rangeCount!==1||H.anchorNode!==_.node||H.anchorOffset!==_.offset||H.focusNode!==M.node||H.focusOffset!==M.offset)){var k=$.createRange();k.setStart(_.node,_.offset),H.removeAllRanges(),Ne>ft?(H.addRange(k),H.extend(M.node,M.offset)):(k.setEnd(M.node,M.offset),H.addRange(k))}}}}for($=[],H=b;H=H.parentNode;)H.nodeType===1&&$.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<$.length;b++){var K=$[b];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}Gs=!!Zu,Qu=Zu=null}finally{st=c,P.p=s,R.T=i}}e.current=n,Zt=2}}function xh(){if(Zt===2){Zt=0;var e=Va,n=li,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=R.T,R.T=null;var s=P.p;P.p=2;var c=st;st|=4;try{Jd(e,n.alternate,n)}finally{st=c,P.p=s,R.T=i}}Zt=3}}function Eh(){if(Zt===4||Zt===3){Zt=0,Hc();var e=Va,n=li,i=si,s=uh;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Zt=5:(Zt=0,li=Va=null,Th(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(qa=null),wi(i),n=n.stateNode,Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Kt,n,void 0,(n.current.flags&128)===128)}catch{}if(s!==null){n=R.T,c=P.p,P.p=2,R.T=null;try{for(var d=e.onRecoverableError,y=0;y<s.length;y++){var b=s[y];d(b.value,{componentStack:b.stack})}}finally{R.T=n,P.p=c}}(si&3)!==0&&Ms(),ra(e),c=e.pendingLanes,(i&4194090)!==0&&(c&42)!==0?e===Lu?cl++:(cl=0,Lu=e):cl=0,fl(0)}}function Th(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Yi(n)))}function Ms(e){return Sh(),xh(),Eh(),Ah()}function Ah(){if(Zt!==5)return!1;var e=Va,n=_u;_u=0;var i=wi(si),s=R.T,c=P.p;try{P.p=32>i?32:i,R.T=null,i=Uu,Uu=null;var d=Va,y=si;if(Zt=0,li=Va=null,si=0,(st&6)!==0)throw Error(l(331));var b=st;if(st|=4,sh(d.current),rh(d,d.current,y,i),st=b,fl(0,!1),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Kt,d)}catch{}return!0}finally{P.p=c,R.T=s,Th(e,n)}}function Ch(e,n,i){n=On(i,n),n=du(e.stateNode,n,2),e=Ba(e,n,2),e!==null&&(oa(e,2),ra(e))}function ht(e,n,i){if(e.tag===3)Ch(e,e,i);else for(;n!==null;){if(n.tag===3){Ch(n,e,i);break}else if(n.tag===1){var s=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(qa===null||!qa.has(s))){e=On(i,e),i=wd(2),s=Ba(n,i,2),s!==null&&(Od(i,s,n,e),oa(s,2),ra(s));break}}n=n.return}}function Fu(e,n,i){var s=e.pingCache;if(s===null){s=e.pingCache=new av;var c=new Set;s.set(n,c)}else c=s.get(n),c===void 0&&(c=new Set,s.set(n,c));c.has(i)||(Ru=!0,c.add(i),e=ov.bind(null,e,n,i),n.then(e,e))}function ov(e,n,i){var s=e.pingCache;s!==null&&s.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,mt===e&&($e&i)===i&&(Nt===4||Nt===3&&($e&62914560)===$e&&300>Lt()-Du?(st&2)===0&&oi(e,0):wu|=i,ii===$e&&(ii=0)),ra(e)}function Nh(e,n){n===0&&(n=Lr()),e=Yr(e,n),e!==null&&(oa(e,n),ra(e))}function uv(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Nh(e,i)}function cv(e,n){var i=0;switch(e.tag){case 13:var s=e.stateNode,c=e.memoizedState;c!==null&&(i=c.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(l(314))}s!==null&&s.delete(n),Nh(e,i)}function fv(e,n){return or(e,n)}var Rs=null,ci=null,Gu=!1,ws=!1,ju=!1,wr=0;function ra(e){e!==ci&&e.next===null&&(ci===null?Rs=ci=e:ci=ci.next=e),ws=!0,Gu||(Gu=!0,hv())}function fl(e,n){if(!ju&&ws){ju=!0;do for(var i=!1,s=Rs;s!==null;){if(e!==0){var c=s.pendingLanes;if(c===0)var d=0;else{var y=s.suspendedLanes,b=s.pingedLanes;d=(1<<31-sn(42|e)+1)-1,d&=c&~(y&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(i=!0,Oh(s,d))}else d=$e,d=dr(s,s===mt?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(d&3)===0||wa(s,d)||(i=!0,Oh(s,d));s=s.next}while(i);ju=!1}}function dv(){Mh()}function Mh(){ws=Gu=!1;var e=0;wr!==0&&(xv()&&(e=wr),wr=0);for(var n=Lt(),i=null,s=Rs;s!==null;){var c=s.next,d=Rh(s,n);d===0?(s.next=null,i===null?Rs=c:i.next=c,c===null&&(ci=i)):(i=s,(e!==0||(d&3)!==0)&&(ws=!0)),s=c}fl(e)}function Rh(e,n){for(var i=e.suspendedLanes,s=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var y=31-sn(d),b=1<<y,A=c[y];A===-1?((b&i)===0||(b&s)!==0)&&(c[y]=Mi(b,n)):A<=n&&(e.expiredLanes|=b),d&=~b}if(n=mt,i=$e,i=dr(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,i===0||e===n&&(ot===2||ot===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Gn(s),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||wa(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(s!==null&&Gn(s),wi(i)){case 2:case 8:i=Ai;break;case 32:i=ur;break;case 268435456:i=Ci;break;default:i=ur}return s=wh.bind(null,e),i=or(i,s),e.callbackPriority=n,e.callbackNode=i,n}return s!==null&&s!==null&&Gn(s),e.callbackPriority=2,e.callbackNode=null,2}function wh(e,n){if(Zt!==0&&Zt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Ms()&&e.callbackNode!==i)return null;var s=$e;return s=dr(e,e===mt?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(fh(e,s,n),Rh(e,Lt()),e.callbackNode!=null&&e.callbackNode===i?wh.bind(null,e):null)}function Oh(e,n){if(Ms())return null;fh(e,n,!0)}function hv(){Tv(function(){(st&6)!==0?or(Ti,dv):Mh()})}function zu(){return wr===0&&(wr=Ri()),wr}function Dh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Be(""+e)}function _h(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function pv(e,n,i,s,c){if(n==="submit"&&i&&i.stateNode===c){var d=Dh((c[jt]||null).action),y=s.submitter;y&&(n=(n=y[jt]||null)?Dh(n.formAction):y.getAttribute("formAction"),n!==null&&(d=n,y=null));var b=new Yl("action","action",null,s,c);e.push({event:b,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(wr!==0){var A=y?_h(c,y):new FormData(c);su(i,{pending:!0,data:A,method:c.method,action:d},null,A)}}else typeof d=="function"&&(b.preventDefault(),A=y?_h(c,y):new FormData(c),su(i,{pending:!0,data:A,method:c.method,action:d},d,A))},currentTarget:c}]})}}for(var Hu=0;Hu<No.length;Hu++){var Pu=No[Hu],mv=Pu.toLowerCase(),vv=Pu[0].toUpperCase()+Pu.slice(1);zn(mv,"on"+vv)}zn(ff,"onAnimationEnd"),zn(df,"onAnimationIteration"),zn(hf,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(Um,"onTransitionRun"),zn(Lm,"onTransitionStart"),zn(km,"onTransitionCancel"),zn(pf,"onTransitionEnd"),Da("onMouseEnter",["mouseout","mouseover"]),Da("onMouseLeave",["mouseout","mouseover"]),Da("onPointerEnter",["pointerout","pointerover"]),Da("onPointerLeave",["pointerout","pointerover"]),An("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),An("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),An("onBeforeInput",["compositionend","keypress","textInput","paste"]),An("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),An("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),An("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(dl));function Uh(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],c=s.event;s=s.listeners;e:{var d=void 0;if(n)for(var y=s.length-1;0<=y;y--){var b=s[y],A=b.instance,B=b.currentTarget;if(b=b.listener,A!==d&&c.isPropagationStopped())break e;d=b,c.currentTarget=B;try{d(c)}catch(X){vs(X)}c.currentTarget=null,d=A}else for(y=0;y<s.length;y++){if(b=s[y],A=b.instance,B=b.currentTarget,b=b.listener,A!==d&&c.isPropagationStopped())break e;d=b,c.currentTarget=B;try{d(c)}catch(X){vs(X)}c.currentTarget=null,d=A}}}}function qe(e,n){var i=n[Ir];i===void 0&&(i=n[Ir]=new Set);var s=e+"__bubble";i.has(s)||(Lh(n,e,2,!1),i.add(s))}function Yu(e,n,i){var s=0;n&&(s|=4),Lh(i,e,s,n)}var Os="_reactListening"+Math.random().toString(36).slice(2);function qu(e){if(!e[Os]){e[Os]=!0,Fl.forEach(function(i){i!=="selectionchange"&&(gv.has(i)||Yu(i,!1,e),Yu(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Os]||(n[Os]=!0,Yu("selectionchange",!1,n))}}function Lh(e,n,i,s){switch(rp(n)){case 2:var c=Yv;break;case 8:c=qv;break;default:c=ic}i=c.bind(null,n,i,e),c=void 0,!Jt||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),s?c!==void 0?e.addEventListener(n,i,{capture:!0,passive:c}):e.addEventListener(n,i,!0):c!==void 0?e.addEventListener(n,i,{passive:c}):e.addEventListener(n,i,!1)}function Vu(e,n,i,s,c){var d=s;if((n&1)===0&&(n&2)===0&&s!==null)e:for(;;){if(s===null)return;var y=s.tag;if(y===3||y===4){var b=s.stateNode.containerInfo;if(b===c)break;if(y===4)for(y=s.return;y!==null;){var A=y.tag;if((A===3||A===4)&&y.stateNode.containerInfo===c)return;y=y.return}for(;b!==null;){if(y=Wn(b),y===null)return;if(A=y.tag,A===5||A===6||A===26||A===27){s=d=y;continue e}b=b.parentNode}}s=s.return}Rn(function(){var B=d,X=it(i),$=[];e:{var z=mf.get(e);if(z!==void 0){var H=Yl,Re=e;switch(e){case"keypress":if(on(i)===0)break e;case"keydown":case"keyup":H=fm;break;case"focusin":Re="focus",H=go;break;case"focusout":Re="blur",H=go;break;case"beforeblur":case"afterblur":H=go;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Pc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=$0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=pm;break;case ff:case df:case hf:H=nm;break;case pf:H=vm;break;case"scroll":case"scrollend":H=W0;break;case"wheel":H=ym;break;case"copy":case"cut":case"paste":H=rm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=qc;break;case"toggle":case"beforetoggle":H=Sm}var Ne=(n&4)!==0,ft=!Ne&&(e==="scroll"||e==="scrollend"),_=Ne?z!==null?z+"Capture":null:z;Ne=[];for(var M=B,k;M!==null;){var K=M;if(k=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||k===null||_===null||(K=Bt(M,_),K!=null&&Ne.push(hl(M,K,k))),ft)break;M=M.return}0<Ne.length&&(z=new H(z,Re,null,i,X),$.push({event:z,listeners:Ne}))}}if((n&7)===0){e:{if(z=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",z&&i!==Xe&&(Re=i.relatedTarget||i.fromElement)&&(Wn(Re)||Re[an]))break e;if((H||z)&&(z=X.window===X?X:(z=X.ownerDocument)?z.defaultView||z.parentWindow:window,H?(Re=i.relatedTarget||i.toElement,H=B,Re=Re?Wn(Re):null,Re!==null&&(ft=u(Re),Ne=Re.tag,Re!==ft||Ne!==5&&Ne!==27&&Ne!==6)&&(Re=null)):(H=null,Re=B),H!==Re)){if(Ne=Pc,K="onMouseLeave",_="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(Ne=qc,K="onPointerLeave",_="onPointerEnter",M="pointer"),ft=H==null?z:ca(H),k=Re==null?z:ca(Re),z=new Ne(K,M+"leave",H,i,X),z.target=ft,z.relatedTarget=k,K=null,Wn(X)===B&&(Ne=new Ne(_,M+"enter",Re,i,X),Ne.target=k,Ne.relatedTarget=ft,K=Ne),ft=K,H&&Re)t:{for(Ne=H,_=Re,M=0,k=Ne;k;k=fi(k))M++;for(k=0,K=_;K;K=fi(K))k++;for(;0<M-k;)Ne=fi(Ne),M--;for(;0<k-M;)_=fi(_),k--;for(;M--;){if(Ne===_||_!==null&&Ne===_.alternate)break t;Ne=fi(Ne),_=fi(_)}Ne=null}else Ne=null;H!==null&&kh($,z,H,Ne,!1),Re!==null&&ft!==null&&kh($,ft,Re,Ne,!0)}}e:{if(z=B?ca(B):window,H=z.nodeName&&z.nodeName.toLowerCase(),H==="select"||H==="input"&&z.type==="file")var ge=$c;else if(Wc(z))if(ef)ge=Om;else{ge=Rm;var Pe=Mm}else H=z.nodeName,!H||H.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?B&&Ge(B.elementType)&&(ge=$c):ge=wm;if(ge&&(ge=ge(e,B))){Jc($,ge,i,X);break e}Pe&&Pe(e,z,B),e==="focusout"&&B&&z.type==="number"&&B.memoizedProps.value!=null&&Wt(z,"number",z.value)}switch(Pe=B?ca(B):window,e){case"focusin":(Wc(Pe)||Pe.contentEditable==="true")&&(zr=Pe,To=B,Gi=null);break;case"focusout":Gi=To=zr=null;break;case"mousedown":Ao=!0;break;case"contextmenu":case"mouseup":case"dragend":Ao=!1,uf($,i,X);break;case"selectionchange":if(_m)break;case"keydown":case"keyup":uf($,i,X)}var xe;if(bo)e:{switch(e){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else jr?Qc(e,i)&&(Me="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(Me="onCompositionStart");Me&&(Vc&&i.locale!=="ko"&&(jr||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&jr&&(xe=dn()):(bt=X,pt="value"in bt?bt.value:bt.textContent,jr=!0)),Pe=Ds(B,Me),0<Pe.length&&(Me=new Yc(Me,e,null,i,X),$.push({event:Me,listeners:Pe}),xe?Me.data=xe:(xe=Kc(i),xe!==null&&(Me.data=xe)))),(xe=Em?Tm(e,i):Am(e,i))&&(Me=Ds(B,"onBeforeInput"),0<Me.length&&(Pe=new Yc("onBeforeInput","beforeinput",null,i,X),$.push({event:Pe,listeners:Me}),Pe.data=xe)),pv($,e,B,i,X)}Uh($,n)})}function hl(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Ds(e,n){for(var i=n+"Capture",s=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=Bt(e,i),c!=null&&s.unshift(hl(e,c,d)),c=Bt(e,n),c!=null&&s.push(hl(e,c,d))),e.tag===3)return s;e=e.return}return[]}function fi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function kh(e,n,i,s,c){for(var d=n._reactName,y=[];i!==null&&i!==s;){var b=i,A=b.alternate,B=b.stateNode;if(b=b.tag,A!==null&&A===s)break;b!==5&&b!==26&&b!==27||B===null||(A=B,c?(B=Bt(i,d),B!=null&&y.unshift(hl(i,B,A))):c||(B=Bt(i,d),B!=null&&y.push(hl(i,B,A)))),i=i.return}y.length!==0&&e.push({event:n,listeners:y})}var yv=/\r\n?/g,bv=/\u0000|\uFFFD/g;function Bh(e){return(typeof e=="string"?e:""+e).replace(yv,`
`).replace(bv,"")}function Ih(e,n){return n=Bh(n),Bh(e)===n}function _s(){}function ct(e,n,i,s,c,d){switch(i){case"children":typeof s=="string"?n==="body"||n==="textarea"&&s===""||Ce(e,s):(typeof s=="number"||typeof s=="bigint")&&n!=="body"&&Ce(e,""+s);break;case"className":pr(e,"class",s);break;case"tabIndex":pr(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":pr(e,i,s);break;case"style":Ve(e,s,d);break;case"data":if(n!=="object"){pr(e,"data",s);break}case"src":case"href":if(s===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Be(""+s),e.setAttribute(i,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(i==="formAction"?(n!=="input"&&ct(e,n,"name",c.name,c,null),ct(e,n,"formEncType",c.formEncType,c,null),ct(e,n,"formMethod",c.formMethod,c,null),ct(e,n,"formTarget",c.formTarget,c,null)):(ct(e,n,"encType",c.encType,c,null),ct(e,n,"method",c.method,c,null),ct(e,n,"target",c.target,c,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Be(""+s),e.setAttribute(i,s);break;case"onClick":s!=null&&(e.onclick=_s);break;case"onScroll":s!=null&&qe("scroll",e);break;case"onScrollEnd":s!=null&&qe("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(l(61));if(i=s.__html,i!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=i}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}i=Be(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""+s):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":s===!0?e.setAttribute(i,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,s):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(i,s):e.removeAttribute(i);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(i):e.setAttribute(i,s);break;case"popover":qe("beforetoggle",e),qe("toggle",e),Gr(e,"popover",s);break;case"xlinkActuate":Cn(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Cn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Cn(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Cn(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Cn(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Cn(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Cn(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Cn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Cn(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Gr(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=He.get(i)||i,Gr(e,i,s))}}function Xu(e,n,i,s,c,d){switch(i){case"style":Ve(e,s,d);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(l(61));if(i=s.__html,i!=null){if(c.children!=null)throw Error(l(60));e.innerHTML=i}}break;case"children":typeof s=="string"?Ce(e,s):(typeof s=="number"||typeof s=="bigint")&&Ce(e,""+s);break;case"onScroll":s!=null&&qe("scroll",e);break;case"onScrollEnd":s!=null&&qe("scrollend",e);break;case"onClick":s!=null&&(e.onclick=_s);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Gl.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(c=i.endsWith("Capture"),n=i.slice(2,c?i.length-7:void 0),d=e[jt]||null,d=d!=null?d[i]:null,typeof d=="function"&&e.removeEventListener(n,d,c),typeof s=="function")){typeof d!="function"&&d!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,s,c);break e}i in e?e[i]=s:s===!0?e.setAttribute(i,""):Gr(e,i,s)}}}function Qt(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",e),qe("load",e);var s=!1,c=!1,d;for(d in i)if(i.hasOwnProperty(d)){var y=i[d];if(y!=null)switch(d){case"src":s=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:ct(e,n,d,y,i,null)}}c&&ct(e,n,"srcSet",i.srcSet,i,null),s&&ct(e,n,"src",i.src,i,null);return;case"input":qe("invalid",e);var b=d=y=c=null,A=null,B=null;for(s in i)if(i.hasOwnProperty(s)){var X=i[s];if(X!=null)switch(s){case"name":c=X;break;case"type":y=X;break;case"checked":A=X;break;case"defaultChecked":B=X;break;case"value":d=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(l(137,n));break;default:ct(e,n,s,X,i,null)}}ke(e,d,b,A,B,y,c,!1),te(e);return;case"select":qe("invalid",e),s=y=d=null;for(c in i)if(i.hasOwnProperty(c)&&(b=i[c],b!=null))switch(c){case"value":d=b;break;case"defaultValue":y=b;break;case"multiple":s=b;default:ct(e,n,c,b,i,null)}n=d,i=y,e.multiple=!!s,n!=null?qt(e,!!s,n,!1):i!=null&&qt(e,!!s,i,!0);return;case"textarea":qe("invalid",e),d=c=s=null;for(y in i)if(i.hasOwnProperty(y)&&(b=i[y],b!=null))switch(y){case"value":s=b;break;case"defaultValue":c=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(l(91));break;default:ct(e,n,y,b,i,null)}Mn(e,s,c,d),te(e);return;case"option":for(A in i)if(i.hasOwnProperty(A)&&(s=i[A],s!=null))switch(A){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:ct(e,n,A,s,i,null)}return;case"dialog":qe("beforetoggle",e),qe("toggle",e),qe("cancel",e),qe("close",e);break;case"iframe":case"object":qe("load",e);break;case"video":case"audio":for(s=0;s<dl.length;s++)qe(dl[s],e);break;case"image":qe("error",e),qe("load",e);break;case"details":qe("toggle",e);break;case"embed":case"source":case"link":qe("error",e),qe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in i)if(i.hasOwnProperty(B)&&(s=i[B],s!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,n));default:ct(e,n,B,s,i,null)}return;default:if(Ge(n)){for(X in i)i.hasOwnProperty(X)&&(s=i[X],s!==void 0&&Xu(e,n,X,s,i,void 0));return}}for(b in i)i.hasOwnProperty(b)&&(s=i[b],s!=null&&ct(e,n,b,s,i,null))}function Sv(e,n,i,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,y=null,b=null,A=null,B=null,X=null;for(H in i){var $=i[H];if(i.hasOwnProperty(H)&&$!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":A=$;default:s.hasOwnProperty(H)||ct(e,n,H,null,s,$)}}for(var z in s){var H=s[z];if($=i[z],s.hasOwnProperty(z)&&(H!=null||$!=null))switch(z){case"type":d=H;break;case"name":c=H;break;case"checked":B=H;break;case"defaultChecked":X=H;break;case"value":y=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(l(137,n));break;default:H!==$&&ct(e,n,z,H,s,$)}}Oe(e,y,b,A,B,X,d,c);return;case"select":H=y=b=z=null;for(d in i)if(A=i[d],i.hasOwnProperty(d)&&A!=null)switch(d){case"value":break;case"multiple":H=A;default:s.hasOwnProperty(d)||ct(e,n,d,null,s,A)}for(c in s)if(d=s[c],A=i[c],s.hasOwnProperty(c)&&(d!=null||A!=null))switch(c){case"value":z=d;break;case"defaultValue":b=d;break;case"multiple":y=d;default:d!==A&&ct(e,n,c,d,s,A)}n=b,i=y,s=H,z!=null?qt(e,!!i,z,!1):!!s!=!!i&&(n!=null?qt(e,!!i,n,!0):qt(e,!!i,i?[]:"",!1));return;case"textarea":H=z=null;for(b in i)if(c=i[b],i.hasOwnProperty(b)&&c!=null&&!s.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ct(e,n,b,null,s,c)}for(y in s)if(c=s[y],d=i[y],s.hasOwnProperty(y)&&(c!=null||d!=null))switch(y){case"value":z=c;break;case"defaultValue":H=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(l(91));break;default:c!==d&&ct(e,n,y,c,s,d)}Nn(e,z,H);return;case"option":for(var Re in i)if(z=i[Re],i.hasOwnProperty(Re)&&z!=null&&!s.hasOwnProperty(Re))switch(Re){case"selected":e.selected=!1;break;default:ct(e,n,Re,null,s,z)}for(A in s)if(z=s[A],H=i[A],s.hasOwnProperty(A)&&z!==H&&(z!=null||H!=null))switch(A){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:ct(e,n,A,z,s,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in i)z=i[Ne],i.hasOwnProperty(Ne)&&z!=null&&!s.hasOwnProperty(Ne)&&ct(e,n,Ne,null,s,z);for(B in s)if(z=s[B],H=i[B],s.hasOwnProperty(B)&&z!==H&&(z!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(l(137,n));break;default:ct(e,n,B,z,s,H)}return;default:if(Ge(n)){for(var ft in i)z=i[ft],i.hasOwnProperty(ft)&&z!==void 0&&!s.hasOwnProperty(ft)&&Xu(e,n,ft,void 0,s,z);for(X in s)z=s[X],H=i[X],!s.hasOwnProperty(X)||z===H||z===void 0&&H===void 0||Xu(e,n,X,z,s,H);return}}for(var _ in i)z=i[_],i.hasOwnProperty(_)&&z!=null&&!s.hasOwnProperty(_)&&ct(e,n,_,null,s,z);for($ in s)z=s[$],H=i[$],!s.hasOwnProperty($)||z===H||z==null&&H==null||ct(e,n,$,z,s,H)}var Zu=null,Qu=null;function Us(e){return e.nodeType===9?e:e.ownerDocument}function Fh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gh(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Ku(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Wu=null;function xv(){var e=window.event;return e&&e.type==="popstate"?e===Wu?!1:(Wu=e,!0):(Wu=null,!1)}var jh=typeof setTimeout=="function"?setTimeout:void 0,Ev=typeof clearTimeout=="function"?clearTimeout:void 0,zh=typeof Promise=="function"?Promise:void 0,Tv=typeof queueMicrotask=="function"?queueMicrotask:typeof zh<"u"?function(e){return zh.resolve(null).then(e).catch(Av)}:jh;function Av(e){setTimeout(function(){throw e})}function Za(e){return e==="head"}function Hh(e,n){var i=n,s=0,c=0;do{var d=i.nextSibling;if(e.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"){if(0<s&&8>s){i=s;var y=e.ownerDocument;if(i&1&&pl(y.documentElement),i&2&&pl(y.body),i&4)for(i=y.head,pl(i),y=i.firstChild;y;){var b=y.nextSibling,A=y.nodeName;y[jn]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&y.rel.toLowerCase()==="stylesheet"||i.removeChild(y),y=b}}if(c===0){e.removeChild(d),El(n);return}c--}else i==="$"||i==="$?"||i==="$!"?c++:s=i.charCodeAt(0)-48;else s=0;i=d}while(i);El(n)}function Ju(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Ju(i),Tn(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Cv(e,n,i,s){for(;e.nodeType===1;){var c=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[jn])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Pn(e.nextSibling),e===null)break}return null}function Nv(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Pn(e.nextSibling),e===null))return null;return e}function $u(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Mv(e,n){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")n();else{var s=function(){n(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Pn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var ec=null;function Ph(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(n===0)return e;n--}else i==="/$"&&n++}e=e.previousSibling}return null}function Yh(e,n,i){switch(n=Us(i),e){case"html":if(e=n.documentElement,!e)throw Error(l(452));return e;case"head":if(e=n.head,!e)throw Error(l(453));return e;case"body":if(e=n.body,!e)throw Error(l(454));return e;default:throw Error(l(451))}}function pl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Tn(e)}var Bn=new Map,qh=new Set;function Ls(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Aa=P.d;P.d={f:Rv,r:wv,D:Ov,C:Dv,L:_v,m:Uv,X:kv,S:Lv,M:Bv};function Rv(){var e=Aa.f(),n=Cs();return e||n}function wv(e){var n=Jn(e);n!==null&&n.tag===5&&n.type==="form"?fd(n):Aa.r(e)}var di=typeof document>"u"?null:document;function Vh(e,n,i){var s=di;if(s&&typeof n=="string"&&n){var c=Ue(n);c='link[rel="'+e+'"][href="'+c+'"]',typeof i=="string"&&(c+='[crossorigin="'+i+'"]'),qh.has(c)||(qh.add(c),e={rel:e,crossOrigin:i,href:n},s.querySelector(c)===null&&(n=s.createElement("link"),Qt(n,"link",e),gt(n),s.head.appendChild(n)))}}function Ov(e){Aa.D(e),Vh("dns-prefetch",e,null)}function Dv(e,n){Aa.C(e,n),Vh("preconnect",e,n)}function _v(e,n,i){Aa.L(e,n,i);var s=di;if(s&&e&&n){var c='link[rel="preload"][as="'+Ue(n)+'"]';n==="image"&&i&&i.imageSrcSet?(c+='[imagesrcset="'+Ue(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(c+='[imagesizes="'+Ue(i.imageSizes)+'"]')):c+='[href="'+Ue(e)+'"]';var d=c;switch(n){case"style":d=hi(e);break;case"script":d=pi(e)}Bn.has(d)||(e=v({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),Bn.set(d,e),s.querySelector(c)!==null||n==="style"&&s.querySelector(ml(d))||n==="script"&&s.querySelector(vl(d))||(n=s.createElement("link"),Qt(n,"link",e),gt(n),s.head.appendChild(n)))}}function Uv(e,n){Aa.m(e,n);var i=di;if(i&&e){var s=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+Ue(s)+'"][href="'+Ue(e)+'"]',d=c;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=pi(e)}if(!Bn.has(d)&&(e=v({rel:"modulepreload",href:e},n),Bn.set(d,e),i.querySelector(c)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(vl(d)))return}s=i.createElement("link"),Qt(s,"link",e),gt(s),i.head.appendChild(s)}}}function Lv(e,n,i){Aa.S(e,n,i);var s=di;if(s&&e){var c=$n(s).hoistableStyles,d=hi(e);n=n||"default";var y=c.get(d);if(!y){var b={loading:0,preload:null};if(y=s.querySelector(ml(d)))b.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":n},i),(i=Bn.get(d))&&tc(e,i);var A=y=s.createElement("link");gt(A),Qt(A,"link",e),A._p=new Promise(function(B,X){A.onload=B,A.onerror=X}),A.addEventListener("load",function(){b.loading|=1}),A.addEventListener("error",function(){b.loading|=2}),b.loading|=4,ks(y,n,s)}y={type:"stylesheet",instance:y,count:1,state:b},c.set(d,y)}}}function kv(e,n){Aa.X(e,n);var i=di;if(i&&e){var s=$n(i).hoistableScripts,c=pi(e),d=s.get(c);d||(d=i.querySelector(vl(c)),d||(e=v({src:e,async:!0},n),(n=Bn.get(c))&&nc(e,n),d=i.createElement("script"),gt(d),Qt(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(c,d))}}function Bv(e,n){Aa.M(e,n);var i=di;if(i&&e){var s=$n(i).hoistableScripts,c=pi(e),d=s.get(c);d||(d=i.querySelector(vl(c)),d||(e=v({src:e,async:!0,type:"module"},n),(n=Bn.get(c))&&nc(e,n),d=i.createElement("script"),gt(d),Qt(d,"link",e),i.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},s.set(c,d))}}function Xh(e,n,i,s){var c=(c=Ae.current)?Ls(c):null;if(!c)throw Error(l(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=hi(i.href),i=$n(c).hoistableStyles,s=i.get(n),s||(s={type:"style",instance:null,count:0,state:null},i.set(n,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=hi(i.href);var d=$n(c).hoistableStyles,y=d.get(e);if(y||(c=c.ownerDocument||c,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,y),(d=c.querySelector(ml(e)))&&!d._p&&(y.instance=d,y.state.loading=5),Bn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Bn.set(e,i),d||Iv(c,e,i,y.state))),n&&s===null)throw Error(l(528,""));return y}if(n&&s!==null)throw Error(l(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=pi(i),i=$n(c).hoistableScripts,s=i.get(n),s||(s={type:"script",instance:null,count:0,state:null},i.set(n,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,e))}}function hi(e){return'href="'+Ue(e)+'"'}function ml(e){return'link[rel="stylesheet"]['+e+"]"}function Zh(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function Iv(e,n,i,s){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?s.loading=1:(n=e.createElement("link"),s.preload=n,n.addEventListener("load",function(){return s.loading|=1}),n.addEventListener("error",function(){return s.loading|=2}),Qt(n,"link",i),gt(n),e.head.appendChild(n))}function pi(e){return'[src="'+Ue(e)+'"]'}function vl(e){return"script[async]"+e}function Qh(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var s=e.querySelector('style[data-href~="'+Ue(i.href)+'"]');if(s)return n.instance=s,gt(s),s;var c=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),gt(s),Qt(s,"style",c),ks(s,i.precedence,e),n.instance=s;case"stylesheet":c=hi(i.href);var d=e.querySelector(ml(c));if(d)return n.state.loading|=4,n.instance=d,gt(d),d;s=Zh(i),(c=Bn.get(c))&&tc(s,c),d=(e.ownerDocument||e).createElement("link"),gt(d);var y=d;return y._p=new Promise(function(b,A){y.onload=b,y.onerror=A}),Qt(d,"link",s),n.state.loading|=4,ks(d,i.precedence,e),n.instance=d;case"script":return d=pi(i.src),(c=e.querySelector(vl(d)))?(n.instance=c,gt(c),c):(s=i,(c=Bn.get(d))&&(s=v({},i),nc(s,c)),e=e.ownerDocument||e,c=e.createElement("script"),gt(c),Qt(c,"link",s),e.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(l(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(s=n.instance,n.state.loading|=4,ks(s,i.precedence,e));return n.instance}function ks(e,n,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=s.length?s[s.length-1]:null,d=c,y=0;y<s.length;y++){var b=s[y];if(b.dataset.precedence===n)d=b;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function tc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function nc(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Bs=null;function Kh(e,n,i){if(Bs===null){var s=new Map,c=Bs=new Map;c.set(i,s)}else c=Bs,s=c.get(i),s||(s=new Map,c.set(i,s));if(s.has(e))return s;for(s.set(e,null),i=i.getElementsByTagName(e),c=0;c<i.length;c++){var d=i[c];if(!(d[jn]||d[kt]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(n)||"";y=e+y;var b=s.get(y);b?b.push(d):s.set(y,[d])}}return s}function Wh(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function Fv(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Jh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var gl=null;function Gv(){}function jv(e,n,i){if(gl===null)throw Error(l(475));var s=gl;if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=hi(i.href),d=e.querySelector(ml(c));if(d){e=d._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=Is.bind(s),e.then(s,s)),n.state.loading|=4,n.instance=d,gt(d);return}d=e.ownerDocument||e,i=Zh(i),(c=Bn.get(c))&&tc(i,c),d=d.createElement("link"),gt(d);var y=d;y._p=new Promise(function(b,A){y.onload=b,y.onerror=A}),Qt(d,"link",i),n.instance=d}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(s.count++,n=Is.bind(s),e.addEventListener("load",n),e.addEventListener("error",n))}}function zv(){if(gl===null)throw Error(l(475));var e=gl;return e.stylesheets&&e.count===0&&ac(e,e.stylesheets),0<e.count?function(n){var i=setTimeout(function(){if(e.stylesheets&&ac(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i)}}:null}function Is(){if(this.count--,this.count===0){if(this.stylesheets)ac(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fs=null;function ac(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fs=new Map,n.forEach(Hv,e),Fs=null,Is.call(e))}function Hv(e,n){if(!(n.state.loading&4)){var i=Fs.get(e);if(i)var s=i.get(null);else{i=new Map,Fs.set(e,i);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var y=c[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(i.set(y.dataset.precedence,y),s=y)}s&&i.set(null,s)}c=n.instance,y=c.getAttribute("data-precedence"),d=i.get(y)||s,d===s&&i.set(null,c),i.set(y,c),this.count++,s=Is.bind(this),c.addEventListener("load",s),c.addEventListener("error",s),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),n.state.loading|=4}}var yl={$$typeof:U,Provider:null,Consumer:null,_currentValue:I,_currentValue2:I,_threadCount:0};function Pv(e,n,i,s,c,d,y,b){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=kr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kr(0),this.hiddenUpdates=kr(null),this.identifierPrefix=s,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function $h(e,n,i,s,c,d,y,b,A,B,X,$){return e=new Pv(e,n,i,y,b,A,B,$),n=1,d===!0&&(n|=24),d=pn(3,null,null,n),e.current=d,d.stateNode=e,n=Fo(),n.refCount++,e.pooledCache=n,n.refCount++,d.memoizedState={element:s,isDehydrated:i,cache:n},Ho(d),e}function ep(e){return e?(e=qr,e):qr}function tp(e,n,i,s,c,d){c=ep(c),s.context===null?s.context=c:s.pendingContext=c,s=ka(n),s.payload={element:i},d=d===void 0?null:d,d!==null&&(s.callback=d),i=Ba(e,s,n),i!==null&&(bn(i,e,n),Zi(i,e,n))}function np(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function rc(e,n){np(e,n),(e=e.alternate)&&np(e,n)}function ap(e){if(e.tag===13){var n=Yr(e,67108864);n!==null&&bn(n,e,67108864),rc(e,67108864)}}var Gs=!0;function Yv(e,n,i,s){var c=R.T;R.T=null;var d=P.p;try{P.p=2,ic(e,n,i,s)}finally{P.p=d,R.T=c}}function qv(e,n,i,s){var c=R.T;R.T=null;var d=P.p;try{P.p=8,ic(e,n,i,s)}finally{P.p=d,R.T=c}}function ic(e,n,i,s){if(Gs){var c=lc(s);if(c===null)Vu(e,n,s,js,i),ip(e,s);else if(Xv(c,e,n,i,s))s.stopPropagation();else if(ip(e,s),n&4&&-1<Vv.indexOf(e)){for(;c!==null;){var d=Jn(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=Qn(d.pendingLanes);if(y!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;y;){var A=1<<31-sn(y);b.entanglements[1]|=A,y&=~A}ra(d),(st&6)===0&&(Ts=Lt()+500,fl(0))}}break;case 13:b=Yr(d,2),b!==null&&bn(b,d,2),Cs(),rc(d,2)}if(d=lc(s),d===null&&Vu(e,n,s,js,i),d===c)break;c=d}c!==null&&s.stopPropagation()}else Vu(e,n,s,null,i)}}function lc(e){return e=it(e),sc(e)}var js=null;function sc(e){if(js=null,e=Wn(e),e!==null){var n=u(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=f(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return js=e,null}function rp(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ei()){case Ti:return 2;case Ai:return 8;case ur:case Ra:return 32;case Ci:return 268435456;default:return 32}default:return 32}}var oc=!1,Qa=null,Ka=null,Wa=null,bl=new Map,Sl=new Map,Ja=[],Vv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ip(e,n){switch(e){case"focusin":case"focusout":Qa=null;break;case"dragenter":case"dragleave":Ka=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":bl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(n.pointerId)}}function xl(e,n,i,s,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:i,eventSystemFlags:s,nativeEvent:d,targetContainers:[c]},n!==null&&(n=Jn(n),n!==null&&ap(n)),e):(e.eventSystemFlags|=s,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function Xv(e,n,i,s,c){switch(n){case"focusin":return Qa=xl(Qa,e,n,i,s,c),!0;case"dragenter":return Ka=xl(Ka,e,n,i,s,c),!0;case"mouseover":return Wa=xl(Wa,e,n,i,s,c),!0;case"pointerover":var d=c.pointerId;return bl.set(d,xl(bl.get(d)||null,e,n,i,s,c)),!0;case"gotpointercapture":return d=c.pointerId,Sl.set(d,xl(Sl.get(d)||null,e,n,i,s,c)),!0}return!1}function lp(e){var n=Wn(e.target);if(n!==null){var i=u(n);if(i!==null){if(n=i.tag,n===13){if(n=f(i),n!==null){e.blockedOn=n,uo(e.priority,function(){if(i.tag===13){var s=yn();s=Br(s);var c=Yr(i,s);c!==null&&bn(c,i,s),rc(i,s)}});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zs(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=lc(e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);Xe=s,i.target.dispatchEvent(s),Xe=null}else return n=Jn(i),n!==null&&ap(n),e.blockedOn=i,!1;n.shift()}return!0}function sp(e,n,i){zs(e)&&i.delete(n)}function Zv(){oc=!1,Qa!==null&&zs(Qa)&&(Qa=null),Ka!==null&&zs(Ka)&&(Ka=null),Wa!==null&&zs(Wa)&&(Wa=null),bl.forEach(sp),Sl.forEach(sp)}function Hs(e,n){e.blockedOn===n&&(e.blockedOn=null,oc||(oc=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Zv)))}var Ps=null;function op(e){Ps!==e&&(Ps=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Ps===e&&(Ps=null);for(var n=0;n<e.length;n+=3){var i=e[n],s=e[n+1],c=e[n+2];if(typeof s!="function"){if(sc(s||i)===null)continue;break}var d=Jn(i);d!==null&&(e.splice(n,3),n-=3,su(d,{pending:!0,data:c,method:i.method,action:s},s,c))}}))}function El(e){function n(A){return Hs(A,e)}Qa!==null&&Hs(Qa,e),Ka!==null&&Hs(Ka,e),Wa!==null&&Hs(Wa,e),bl.forEach(n),Sl.forEach(n);for(var i=0;i<Ja.length;i++){var s=Ja[i];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Ja.length&&(i=Ja[0],i.blockedOn===null);)lp(i),i.blockedOn===null&&Ja.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(s=0;s<i.length;s+=3){var c=i[s],d=i[s+1],y=c[jt]||null;if(typeof d=="function")y||op(i);else if(y){var b=null;if(d&&d.hasAttribute("formAction")){if(c=d,y=d[jt]||null)b=y.formAction;else if(sc(c)!==null)continue}else b=y.action;typeof b=="function"?i[s+1]=b:(i.splice(s,3),s-=3),op(i)}}}function uc(e){this._internalRoot=e}Ys.prototype.render=uc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(l(409));var i=n.current,s=yn();tp(i,s,e,n,null,null)},Ys.prototype.unmount=uc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;tp(e.current,2,null,e,null,null),Cs(),n[an]=null}};function Ys(e){this._internalRoot=e}Ys.prototype.unstable_scheduleHydration=function(e){if(e){var n=Oi();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Ja.length&&n!==0&&n<Ja[i].priority;i++);Ja.splice(i,0,e),i===0&&lp(e)}};var up=t.version;if(up!=="19.1.1")throw Error(l(527,up,"19.1.1"));P.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(l(188)):(e=Object.keys(e).join(","),Error(l(268,e)));return e=h(n),e=e!==null?m(e):null,e=e===null?null:e.stateNode,e};var Qv={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qs.isDisabled&&qs.supportsFiber)try{Kt=qs.inject(Qv),Ot=qs}catch{}}return Al.createRoot=function(e,n){if(!o(e))throw Error(l(299));var i=!1,s="",c=Cd,d=Nd,y=Md,b=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(b=n.unstable_transitionCallbacks)),n=$h(e,1,!1,null,null,i,s,c,d,y,b,null),e[an]=n.current,qu(e),new uc(n)},Al.hydrateRoot=function(e,n,i){if(!o(e))throw Error(l(299));var s=!1,c="",d=Cd,y=Nd,b=Md,A=null,B=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(A=i.unstable_transitionCallbacks),i.formState!==void 0&&(B=i.formState)),n=$h(e,1,!0,n,i??null,s,c,d,y,b,A,B),n.context=ep(null),i=n.current,s=yn(),s=Br(s),c=ka(s),c.callback=null,Ba(i,c,s),i=s,n.current.lanes=i,oa(n,i),ra(n),e[an]=n.current,qu(e),new Ys(n)},Al.version="19.1.1",Al}var bp;function rg(){if(bp)return dc.exports;bp=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),dc.exports=ag(),dc.exports}var ig=rg();const lg=_c(ig);class Yn{constructor(t=!1){this.eventMap={},this.eventsSuspended=t==!0}addListener(t,r,l={}){if(typeof t=="string"&&t.length<1||t instanceof String&&t.length<1||typeof t!="string"&&!(t instanceof String)&&t!==Yn.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof r!="function")throw new TypeError("The callback must be a function.");const o=new Sp(t,this,r,l);return this.eventMap[t]||(this.eventMap[t]=[]),l.prepend?this.eventMap[t].unshift(o):this.eventMap[t].push(o),o}addOneTimeListener(t,r,l={}){l.remaining=1,this.addListener(t,r,l)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(t,r){return t===void 0?this.eventMap[Yn.ANY_EVENT]&&this.eventMap[Yn.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,l])=>l.length>0):this.eventMap[t]&&this.eventMap[t].length>0?r instanceof Sp?this.eventMap[t].filter(o=>o===r).length>0:typeof r=="function"?this.eventMap[t].filter(o=>o.callback===r).length>0:r==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(t){return this.eventMap[t]||[]}suspendEvent(t){this.getListeners(t).forEach(r=>{r.suspended=!0})}unsuspendEvent(t){this.getListeners(t).forEach(r=>{r.suspended=!1})}getListenerCount(t){return this.getListeners(t).length}emit(t,...r){if(typeof t!="string"&&!(t instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let l=[],o=this.eventMap[Yn.ANY_EVENT]||[];return this.eventMap[t]&&(o=o.concat(this.eventMap[t])),o.forEach(u=>{if(u.suspended)return;let f=[...r];Array.isArray(u.arguments)&&(f=f.concat(u.arguments)),u.remaining>0&&(l.push(u.callback.apply(u.context,f)),u.count++),--u.remaining<1&&u.remove()}),l}removeListener(t,r,l={}){if(t===void 0){this.eventMap={};return}else if(!this.eventMap[t])return;let o=this.eventMap[t].filter(u=>r&&u.callback!==r||l.remaining&&l.remaining!==u.remaining||l.context&&l.context!==u.context);o.length?this.eventMap[t]=o:delete this.eventMap[t]}async waitFor(t,r={}){return r.duration=parseInt(r.duration),(isNaN(r.duration)||r.duration<=0)&&(r.duration=1/0),new Promise((l,o)=>{let u,f=this.addListener(t,()=>{clearTimeout(u),l()},{remaining:1});r.duration!==1/0&&(u=setTimeout(()=>{f.remove(),o("The duration expired before the event was emitted.")},r.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class Sp{constructor(t,r,l,o={}){if(typeof t!="string"&&!(t instanceof String)&&t!==Yn.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!r)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof l!="function")throw new TypeError("The 'callback' must be a function.");o.arguments!==void 0&&!Array.isArray(o.arguments)&&(o.arguments=[o.arguments]),o=Object.assign({context:r,remaining:1/0,arguments:void 0,duration:1/0},o),o.duration!==1/0&&setTimeout(()=>this.remove(),o.duration),this.arguments=o.arguments,this.callback=l,this.context=o.context,this.count=0,this.event=t,this.remaining=parseInt(o.remaining)>=1?parseInt(o.remaining):1/0,this.suspended=!1,this.target=r}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class W{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),W.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),W.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),W.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),W.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class vi{constructor(t,r={}){this.duration=le.defaults.note.duration,this.attack=le.defaults.note.attack,this.release=le.defaults.note.release,r.duration!=null&&(this.duration=r.duration),r.attack!=null&&(this.attack=r.attack),r.rawAttack!=null&&(this.attack=oe.from7bitToFloat(r.rawAttack)),r.release!=null&&(this.release=r.release),r.rawRelease!=null&&(this.release=oe.from7bitToFloat(r.rawRelease)),Number.isInteger(t)?this.identifier=oe.toNoteIdentifier(t):this.identifier=t}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(t){const r=oe.getNoteDetails(t);if(le.validation&&!t)throw new Error("Invalid note identifier");this._name=r.name,this._accidental=r.accidental,this._octave=r.octave}get name(){return this._name}set name(t){if(le.validation&&(t=t.toUpperCase(),!["C","D","E","F","G","A","B"].includes(t)))throw new Error("Invalid name value");this._name=t}get accidental(){return this._accidental}set accidental(t){if(le.validation&&(t=t.toLowerCase(),!["#","##","b","bb"].includes(t)))throw new Error("Invalid accidental value");this._accidental=t}get octave(){return this._octave}set octave(t){if(le.validation&&(t=parseInt(t),isNaN(t)))throw new Error("Invalid octave value");this._octave=t}get duration(){return this._duration}set duration(t){if(le.validation&&(t=parseFloat(t),isNaN(t)||t===null||t<0))throw new RangeError("Invalid duration value.");this._duration=t}get attack(){return this._attack}set attack(t){if(le.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid attack value.");this._attack=t}get release(){return this._release}set release(t){if(le.validation&&(t=parseFloat(t),isNaN(t)||!(t>=0&&t<=1)))throw new RangeError("Invalid release value.");this._release=t}get rawAttack(){return oe.fromFloatTo7Bit(this._attack)}set rawAttack(t){this._attack=oe.from7bitToFloat(t)}get rawRelease(){return oe.fromFloatTo7Bit(this._release)}set rawRelease(t){this._release=oe.from7bitToFloat(t)}get number(){return oe.toNoteNumber(this.identifier)}getOffsetNumber(t=0,r=0){return le.validation&&(t=parseInt(t)||0,r=parseInt(r)||0),Math.min(Math.max(this.number+t*12+r,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class oe{static toNoteNumber(t,r=0){if(r=r==null?0:parseInt(r),isNaN(r))throw new RangeError("Invalid 'octaveOffset' value");typeof t!="string"&&(t="");const l=this.getNoteDetails(t);if(!l)throw new TypeError("Invalid note identifier");const o={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let u=(l.octave+1+r)*12;if(u+=o[l.name],l.accidental&&(l.accidental.startsWith("b")?u-=l.accidental.length:u+=l.accidental.length),u<0||u>127)throw new RangeError("Invalid octaveOffset value");return u}static getNoteDetails(t){Number.isInteger(t)&&(t=this.toNoteIdentifier(t));const r=t.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!r)throw new TypeError("Invalid note identifier");const l=r[1].toUpperCase(),o=parseInt(r[3]);let u=r[2].toLowerCase();return u=u===""?void 0:u,{accidental:u,identifier:l+(u||"")+o,name:l,octave:o}}static sanitizeChannels(t){let r;if(le.validation){if(t==="all")r=["all"];else if(t==="none")return[]}return Array.isArray(t)?r=t:r=[t],r.indexOf("all")>-1&&(r=W.MIDI_CHANNEL_NUMBERS),r.map(function(l){return parseInt(l)}).filter(function(l){return l>=1&&l<=16})}static toTimestamp(t){let r=!1;const l=parseFloat(t);return isNaN(l)?!1:(typeof t=="string"&&t.substring(0,1)==="+"?l>=0&&(r=le.time+l):l>=0&&(r=l),r)}static guessNoteNumber(t,r){r=parseInt(r)||0;let l=!1;if(Number.isInteger(t)&&t>=0&&t<=127)l=parseInt(t);else if(parseInt(t)>=0&&parseInt(t)<=127)l=parseInt(t);else if(typeof t=="string"||t instanceof String)try{l=this.toNoteNumber(t.trim(),r)}catch{return!1}return l}static toNoteIdentifier(t,r){if(t=parseInt(t),isNaN(t)||t<0||t>127)throw new RangeError("Invalid note number");if(r=r==null?0:parseInt(r),isNaN(r))throw new RangeError("Invalid octaveOffset value");const l=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],o=Math.floor(t/12-1)+r;return l[t%12]+o.toString()}static buildNote(t,r={}){if(r.octaveOffset=parseInt(r.octaveOffset)||0,t instanceof vi)return t;let l=this.guessNoteNumber(t,r.octaveOffset);if(l===!1)throw new TypeError(`The input could not be parsed as a note (${t})`);return r.octaveOffset=void 0,new vi(l,r)}static buildNoteArray(t,r={}){let l=[];return Array.isArray(t)||(t=[t]),t.forEach(o=>{l.push(this.buildNote(o,r))}),l}static from7bitToFloat(t){return t===1/0&&(t=127),t=parseInt(t)||0,Math.min(Math.max(t/127,0),1)}static fromFloatTo7Bit(t){return t===1/0&&(t=1),t=parseFloat(t)||0,Math.min(Math.max(Math.round(t*127),0),127)}static fromMsbLsbToFloat(t,r=0){le.validation&&(t=Math.min(Math.max(parseInt(t)||0,0),127),r=Math.min(Math.max(parseInt(r)||0,0),127));const l=((t<<7)+r)/16383;return Math.min(Math.max(l,0),1)}static fromFloatToMsbLsb(t){le.validation&&(t=Math.min(Math.max(parseFloat(t)||0,0),1));const r=Math.round(t*16383);return{msb:r>>7,lsb:r&127}}static offsetNumber(t,r=0,l=0){if(le.validation){if(t=parseInt(t),isNaN(t))throw new Error("Invalid note number");r=parseInt(r)||0,l=parseInt(l)||0}return Math.min(Math.max(t+r*12+l,0),127)}static getPropertyByValue(t,r){return Object.keys(t).find(l=>t[l]===r)}static getCcNameByNumber(t){if(!(le.validation&&(t=parseInt(t),!(t>=0&&t<=127))))return W.CONTROL_CHANGE_MESSAGES[t].name}static getCcNumberByName(t){let r=W.CONTROL_CHANGE_MESSAGES.find(l=>l.name===t);return r?r.number:W.MIDI_CONTROL_CHANGE_MESSAGES[t]}static getChannelModeByNumber(t){if(!(t>=120&&t<=127))return!1;for(let r in W.CHANNEL_MODE_MESSAGES)if(W.CHANNEL_MODE_MESSAGES.hasOwnProperty(r)&&t===W.CHANNEL_MODE_MESSAGES[r])return r;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class sg extends Yn{constructor(t,r){super(),this._output=t,this._number=r,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(t,r={time:0}){return this.output.send(t,r),this}sendKeyAftertouch(t,r,l={}){if(le.validation){if(l.useRawValue&&(l.rawValue=l.useRawValue),isNaN(parseFloat(r)))throw new RangeError("Invalid key aftertouch value.");if(l.rawValue){if(!(r>=0&&r<=127&&Number.isInteger(r)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(r>=0&&r<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}l.rawValue||(r=oe.fromFloatTo7Bit(r));const o=le.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(t)||(t=[t]),oe.buildNoteArray(t).forEach(u=>{this.send([(W.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),u.getOffsetNumber(o),r],{time:oe.toTimestamp(l.time)})}),this}sendControlChange(t,r,l={}){if(typeof t=="string"&&(t=oe.getCcNumberByName(t)),Array.isArray(r)||(r=[r]),le.validation){if(t===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(r=r.map(o=>{const u=Math.min(Math.max(parseInt(o),0),127);if(isNaN(u))throw new TypeError("Values must be integers between 0 and 127");return u}),r.length===2&&t>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return r.forEach((o,u)=>{this.send([(W.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t+u*32,r[u]],{time:oe.toTimestamp(l.time)})}),this}_selectNonRegisteredParameter(t,r={}){return this.sendControlChange(99,t[0],r),this.sendControlChange(98,t[1],r),this}_deselectRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_deselectNonRegisteredParameter(t={}){return this.sendControlChange(101,127,t),this.sendControlChange(100,127,t),this}_selectRegisteredParameter(t,r={}){return this.sendControlChange(101,t[0],r),this.sendControlChange(100,t[1],r),this}_setCurrentParameter(t,r={}){return t=[].concat(t),this.sendControlChange(6,t[0],r),t.length<2?this:(this.sendControlChange(38,t[1],r),this)}sendRpnDecrement(t,r={}){if(Array.isArray(t)||(t=W.REGISTERED_PARAMETERS[t]),le.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let l=!1;if(Object.getOwnPropertyNames(W.REGISTERED_PARAMETERS).forEach(o=>{W.REGISTERED_PARAMETERS[o][0]===t[0]&&W.REGISTERED_PARAMETERS[o][1]===t[1]&&(l=!0)}),!l)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,r),this.sendControlChange(97,0,r),this._deselectRegisteredParameter(r),this}sendRpnIncrement(t,r={}){if(Array.isArray(t)||(t=W.REGISTERED_PARAMETERS[t]),le.validation){if(t===void 0)throw new TypeError("The specified registered parameter is invalid.");let l=!1;if(Object.getOwnPropertyNames(W.REGISTERED_PARAMETERS).forEach(o=>{W.REGISTERED_PARAMETERS[o][0]===t[0]&&W.REGISTERED_PARAMETERS[o][1]===t[1]&&(l=!0)}),!l)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(t,r),this.sendControlChange(96,0,r),this._deselectRegisteredParameter(r),this}playNote(t,r={}){this.sendNoteOn(t,r);const l=Array.isArray(t)?t:[t];for(let o of l)if(parseInt(o.duration)>0){const u={time:(oe.toTimestamp(r.time)||le.time)+parseInt(o.duration),release:o.release,rawRelease:o.rawRelease};this.sendNoteOff(o,u)}else if(parseInt(r.duration)>0){const u={time:(oe.toTimestamp(r.time)||le.time)+parseInt(r.duration),release:r.release,rawRelease:r.rawRelease};this.sendNoteOff(o,u)}return this}sendNoteOff(t,r={}){if(le.validation){if(r.rawRelease!=null&&!(r.rawRelease>=0&&r.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(r.release!=null&&!(r.release>=0&&r.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");r.rawVelocity&&(r.rawRelease=r.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),r.velocity&&(r.release=r.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let l=64;r.rawRelease!=null?l=r.rawRelease:isNaN(r.release)||(l=Math.round(r.release*127));const o=le.octaveOffset+this.output.octaveOffset+this.octaveOffset;return oe.buildNoteArray(t,{rawRelease:parseInt(l)}).forEach(u=>{this.send([(W.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),u.getOffsetNumber(o),u.rawRelease],{time:oe.toTimestamp(r.time)})}),this}stopNote(t,r={}){return this.sendNoteOff(t,r)}sendNoteOn(t,r={}){if(le.validation){if(r.rawAttack!=null&&!(r.rawAttack>=0&&r.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(r.attack!=null&&!(r.attack>=0&&r.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");r.rawVelocity&&(r.rawAttack=r.velocity,r.rawRelease=r.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),r.velocity&&(r.attack=r.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let l=64;r.rawAttack!=null?l=r.rawAttack:isNaN(r.attack)||(l=Math.round(r.attack*127));const o=le.octaveOffset+this.output.octaveOffset+this.octaveOffset;return oe.buildNoteArray(t,{rawAttack:l}).forEach(u=>{this.send([(W.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),u.getOffsetNumber(o),u.rawAttack],{time:oe.toTimestamp(r.time)})}),this}sendChannelMode(t,r=0,l={}){if(typeof t=="string"&&(t=W.CHANNEL_MODE_MESSAGES[t]),le.validation){if(t===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(t)||!(t>=120&&t<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(r))||r<0||r>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(W.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),t,r],{time:oe.toTimestamp(l.time)}),this}sendOmniMode(t,r={}){return t===void 0||t?this.sendChannelMode("omnimodeon",0,r):this.sendChannelMode("omnimodeoff",0,r),this}sendChannelAftertouch(t,r={}){if(le.validation){if(isNaN(parseFloat(t)))throw new RangeError("Invalid channel aftertouch value.");if(r.rawValue){if(!(t>=0&&t<=127&&Number.isInteger(t)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(t>=0&&t<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return r.rawValue||(t=oe.fromFloatTo7Bit(t)),this.send([(W.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(t)],{time:oe.toTimestamp(r.time)}),this}sendMasterTuning(t,r={}){if(t=parseFloat(t)||0,le.validation&&!(t>-65&&t<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let l=Math.floor(t)+64,o=t-Math.floor(t);o=Math.round((o+1)/2*16383);let u=o>>7&127,f=o&127;return this.sendRpnValue("channelcoarsetuning",l,r),this.sendRpnValue("channelfinetuning",[u,f],r),this}sendModulationRange(t,r,l={}){if(le.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(r!=null&&(!Number.isInteger(r)||!(r>=0&&r<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return r>=0&&r<=127||(r=0),this.sendRpnValue("modulationrange",[t,r],l),this}sendNrpnValue(t,r,l={}){if(r=[].concat(r),le.validation){if(!Array.isArray(t)||!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");r.forEach(o=>{if(!(o>=0&&o<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(t,l),this._setCurrentParameter(r,l),this._deselectNonRegisteredParameter(l),this}sendPitchBend(t,r={}){if(le.validation)if(r.rawValue&&Array.isArray(t)){if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(r.rawValue&&!Array.isArray(t)){if(!(t>=0&&t<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(t)||t===null)throw new RangeError("Invalid pitch bend value.");if(!(t>=-1&&t<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let l=0,o=0;if(r.rawValue&&Array.isArray(t))l=t[0],o=t[1];else if(r.rawValue&&!Array.isArray(t))l=t;else{const u=oe.fromFloatToMsbLsb((t+1)/2);l=u.msb,o=u.lsb}return this.send([(W.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),o,l],{time:oe.toTimestamp(r.time)}),this}sendPitchBendRange(t,r,l={}){if(le.validation){if(!Number.isInteger(t)||!(t>=0&&t<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(r)||!(r>=0&&r<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[t,r],l),this}sendProgramChange(t,r={}){if(t=parseInt(t)||0,le.validation&&!(t>=0&&t<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(W.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),t],{time:oe.toTimestamp(r.time)}),this}sendRpnValue(t,r,l={}){if(Array.isArray(t)||(t=W.REGISTERED_PARAMETERS[t]),le.validation){if(!Number.isInteger(t[0])||!Number.isInteger(t[1]))throw new TypeError("The specified NRPN is invalid.");if(!(t[0]>=0&&t[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(t[1]>=0&&t[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(r).forEach(o=>{if(!(o>=0&&o<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(t,l),this._setCurrentParameter(r,l),this._deselectRegisteredParameter(l),this}sendTuningBank(t,r={}){if(le.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",t,r),this}sendTuningProgram(t,r={}){if(le.validation&&(!Number.isInteger(t)||!(t>=0&&t<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",t,r),this}sendLocalControl(t,r={}){return t?this.sendChannelMode("localcontrol",127,r):this.sendChannelMode("localcontrol",0,r)}sendAllNotesOff(t={}){return this.sendChannelMode("allnotesoff",0,t)}sendAllSoundOff(t={}){return this.sendChannelMode("allsoundoff",0,t)}sendResetAllControllers(t={}){return this.sendChannelMode("resetallcontrollers",0,t)}sendPolyphonicMode(t,r={}){return t==="mono"?this.sendChannelMode("monomodeon",0,r):this.sendChannelMode("polymodeon",0,r)}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class Ac extends Yn{constructor(t){super(),this._midiOutput=t,this._octaveOffset=0,this.channels=[];for(let r=1;r<=16;r++)this.channels[r]=new sg(this,r);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(t){let r={timestamp:le.time};t.port.connection==="open"?(r.type="opened",r.target=this,r.port=r.target,this.emit("opened",r)):t.port.connection==="closed"&&t.port.state==="connected"?(r.type="closed",r.target=this,r.port=r.target,this.emit("closed",r)):t.port.connection==="closed"&&t.port.state==="disconnected"?(r.type="disconnected",r.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",r)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught:",t.port.connection,t.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(t){return Promise.reject(t)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(t,r={time:0},l=0){if(t instanceof u0&&(t=oe.isNode?t.data:t.rawData),t instanceof Uint8Array&&oe.isNode&&(t=Array.from(t)),le.validation){if(!Array.isArray(t)&&!(t instanceof Uint8Array)&&(t=[t],Array.isArray(r)&&(t=t.concat(r)),r=isNaN(l)?{time:0}:{time:l}),!(parseInt(t[0])>=128&&parseInt(t[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");t.slice(1).forEach(o=>{if(o=parseInt(o),!(o>=0&&o<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),r||(r={time:0})}return this._midiOutput.send(t,oe.toTimestamp(r.time)),this}sendSysex(t,r=[],l={}){if(t=[].concat(t),r instanceof Uint8Array){const o=new Uint8Array(1+t.length+r.length+1);o[0]=W.SYSTEM_MESSAGES.sysex,o.set(Uint8Array.from(t),1),o.set(r,1+t.length),o[o.length-1]=W.SYSTEM_MESSAGES.sysexend,this.send(o,{time:l.time})}else{const o=t.concat(r,W.SYSTEM_MESSAGES.sysexend);this.send([W.SYSTEM_MESSAGES.sysex].concat(o),{time:l.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():le.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(t,r={}){if(le.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([W.SYSTEM_MESSAGES.timecode,t],{time:r.time}),this}sendSongPosition(t=0,r={}){t=Math.floor(t)||0;var l=t>>7&127,o=t&127;return this.send([W.SYSTEM_MESSAGES.songposition,l,o],{time:r.time}),this}sendSongSelect(t=0,r={}){if(le.validation&&(t=parseInt(t),isNaN(t)||!(t>=0&&t<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([W.SYSTEM_MESSAGES.songselect,t],{time:r.time}),this}sendTuneRequest(t={}){return this.send([W.SYSTEM_MESSAGES.tunerequest],{time:t.time}),this}sendClock(t={}){return this.send([W.SYSTEM_MESSAGES.clock],{time:t.time}),this}sendStart(t={}){return this.send([W.SYSTEM_MESSAGES.start],{time:t.time}),this}sendContinue(t={}){return this.send([W.SYSTEM_MESSAGES.continue],{time:t.time}),this}sendStop(t={}){return this.send([W.SYSTEM_MESSAGES.stop],{time:t.time}),this}sendActiveSensing(t={}){return this.send([W.SYSTEM_MESSAGES.activesensing],{time:t.time}),this}sendReset(t={}){return this.send([W.SYSTEM_MESSAGES.reset],{time:t.time}),this}sendTuningRequest(t={}){return le.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(t)}sendKeyAftertouch(t,r,l={}){return l.channels==null&&(l.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(l.channels).forEach(o=>{this.channels[o].sendKeyAftertouch(t,r,l)}),this}sendControlChange(t,r,l={},o={}){if(le.validation&&(Array.isArray(l)||Number.isInteger(l)||l==="all")){const u=l;l=o,l.channels=u,l.channels==="all"&&(l.channels=W.MIDI_CHANNEL_NUMBERS)}return l.channels==null&&(l.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(l.channels).forEach(u=>{this.channels[u].sendControlChange(t,r,l)}),this}sendPitchBendRange(t=0,r=0,l={}){return l.channels==null&&(l.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(l.channels).forEach(o=>{this.channels[o].sendPitchBendRange(t,r,l)}),this}setPitchBendRange(t=0,r=0,l="all",o={}){return le.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),o.channels=l,o.channels==="all"&&(o.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(t,r,o)}sendRpnValue(t,r,l={}){return l.channels==null&&(l.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(l.channels).forEach(o=>{this.channels[o].sendRpnValue(t,r,l)}),this}setRegisteredParameter(t,r=[],l="all",o={}){return le.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),o.channels=l,o.channels==="all"&&(o.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(t,r,o)}sendChannelAftertouch(t,r={},l={}){if(le.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=W.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendChannelAftertouch(t,r)}),this}sendPitchBend(t,r={},l={}){if(le.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=W.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendPitchBend(t,r)}),this}sendProgramChange(t=0,r={},l={}){if(le.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=W.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendProgramChange(t,r)}),this}sendModulationRange(t,r,l={}){return l.channels==null&&(l.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(l.channels).forEach(o=>{this.channels[o].sendModulationRange(t,r,l)}),this}setModulationRange(t=0,r=0,l="all",o={}){return le.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),o.channels=l,o.channels==="all"&&(o.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(t,r,o)}sendMasterTuning(t,r={}){return r.channels==null&&(r.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(r.channels).forEach(l=>{this.channels[l].sendMasterTuning(t,r)}),this}setMasterTuning(t,r={},l={}){return le.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),l.channels=r,l.channels==="all"&&(l.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(t,l)}sendTuningProgram(t,r={}){return r.channels==null&&(r.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(r.channels).forEach(l=>{this.channels[l].sendTuningProgram(t,r)}),this}setTuningProgram(t,r="all",l={}){return le.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),l.channels=r,l.channels==="all"&&(l.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(t,l)}sendTuningBank(t=0,r={}){return r.channels==null&&(r.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(r.channels).forEach(l=>{this.channels[l].sendTuningBank(t,r)}),this}setTuningBank(t,r="all",l={}){return le.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),l.channels=r,l.channels==="all"&&(l.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(t,l)}sendChannelMode(t,r=0,l={},o={}){if(le.validation&&(Array.isArray(l)||Number.isInteger(l)||l==="all")){const u=l;l=o,l.channels=u,l.channels==="all"&&(l.channels=W.MIDI_CHANNEL_NUMBERS)}return l.channels==null&&(l.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(l.channels).forEach(u=>{this.channels[u].sendChannelMode(t,r,l)}),this}sendAllSoundOff(t={}){return t.channels==null&&(t.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendAllSoundOff(t)}),this}sendAllNotesOff(t={}){return t.channels==null&&(t.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(t.channels).forEach(r=>{this.channels[r].sendAllNotesOff(t)}),this}sendResetAllControllers(t={},r={}){if(le.validation&&(Array.isArray(t)||Number.isInteger(t)||t==="all")){const l=t;t=r,t.channels=l,t.channels==="all"&&(t.channels=W.MIDI_CHANNEL_NUMBERS)}return t.channels==null&&(t.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(t.channels).forEach(l=>{this.channels[l].sendResetAllControllers(t)}),this}sendPolyphonicMode(t,r={},l={}){if(le.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=W.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendPolyphonicMode(t,r)}),this}sendLocalControl(t,r={},l={}){if(le.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=W.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendLocalControl(t,r)}),this}sendOmniMode(t,r={},l={}){if(le.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=W.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendOmniMode(t,r)}),this}sendNrpnValue(t,r,l={}){return l.channels==null&&(l.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(l.channels).forEach(o=>{this.channels[o].sendNrpnValue(t,r,l)}),this}setNonRegisteredParameter(t,r=[],l="all",o={}){return le.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),o.channels=l,o.channels==="all"&&(o.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(t,r,o)}sendRpnIncrement(t,r={}){return r.channels==null&&(r.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(r.channels).forEach(l=>{this.channels[l].sendRpnIncrement(t,r)}),this}incrementRegisteredParameter(t,r="all",l={}){return le.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),l.channels=r,l.channels==="all"&&(l.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(t,l)}sendRpnDecrement(t,r={}){return r.channels==null&&(r.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(r.channels).forEach(l=>{this.channels[l].sendRpnDecrement(t,r)}),this}decrementRegisteredParameter(t,r="all",l={}){return le.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),l.channels=r,l.channels==="all"&&(l.channels=W.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(t,l)}sendNoteOff(t,r={},l={}){if(le.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=W.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendNoteOff(t,r)}),this}stopNote(t,r){return this.sendNoteOff(t,r)}playNote(t,r={},l={}){if(le.validation&&(r.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),r.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=W.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].playNote(t,r)}),this}sendNoteOn(t,r={},l={}){if(le.validation&&(Array.isArray(r)||Number.isInteger(r)||r==="all")){const o=r;r=l,r.channels=o,r.channels==="all"&&(r.channels=W.MIDI_CHANNEL_NUMBERS)}return r.channels==null&&(r.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendNoteOn(t,r)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class xp{constructor(t=[],r={}){this.destinations=[],this.types=[...Object.keys(W.SYSTEM_MESSAGES),...Object.keys(W.CHANNEL_MESSAGES)],this.channels=W.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(t)||(t=[t]),r.types&&!Array.isArray(r.types)&&(r.types=[r.types]),r.channels&&!Array.isArray(r.channels)&&(r.channels=[r.channels]),le.validation&&(t.forEach(l=>{if(!(l instanceof Ac))throw new TypeError("Destinations must be of type 'Output'.")}),r.types!==void 0&&r.types.forEach(l=>{if(!W.SYSTEM_MESSAGES.hasOwnProperty(l)&&!W.CHANNEL_MESSAGES.hasOwnProperty(l))throw new TypeError("Type must be a valid message type.")}),r.channels!==void 0&&r.channels.forEach(l=>{if(!W.MIDI_CHANNEL_NUMBERS.includes(l))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=t,r.types&&(this.types=r.types),r.channels&&(this.channels=r.channels)}forward(t){this.suspended||this.types.includes(t.type)&&(t.channel&&!this.channels.includes(t.channel)||this.destinations.forEach(r=>{le.validation&&!(r instanceof Ac)||r.send(t)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class og extends Yn{constructor(t,r){super(),this._input=t,this._number=r,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(t){const r=Object.assign({},t);r.port=this.input,r.target=this,r.type="midimessage",this.emit(r.type,r),this._parseEventForStandardMessages(r)}_parseEventForStandardMessages(t){const r=Object.assign({},t);r.type=r.message.type||"unknownmessage";const l=t.message.dataBytes[0],o=t.message.dataBytes[1];if(r.type==="noteoff"||r.type==="noteon"&&o===0)this.notesState[l]=!1,r.type="noteoff",r.note=new vi(oe.offsetNumber(l,this.octaveOffset+this.input.octaveOffset+le.octaveOffset),{rawAttack:0,rawRelease:o}),r.value=oe.from7bitToFloat(o),r.rawValue=o,r.velocity=r.note.release,r.rawVelocity=r.note.rawRelease;else if(r.type==="noteon")this.notesState[l]=!0,r.note=new vi(oe.offsetNumber(l,this.octaveOffset+this.input.octaveOffset+le.octaveOffset),{rawAttack:o}),r.value=oe.from7bitToFloat(o),r.rawValue=o,r.velocity=r.note.attack,r.rawVelocity=r.note.rawAttack;else if(r.type==="keyaftertouch")r.note=new vi(oe.offsetNumber(l,this.octaveOffset+this.input.octaveOffset+le.octaveOffset)),r.value=oe.from7bitToFloat(o),r.rawValue=o,r.identifier=r.note.identifier,r.key=r.note.number,r.rawKey=l;else if(r.type==="controlchange"){r.controller={number:l,name:W.CONTROL_CHANGE_MESSAGES[l].name,description:W.CONTROL_CHANGE_MESSAGES[l].description,position:W.CONTROL_CHANGE_MESSAGES[l].position},r.subtype=r.controller.name||"controller"+l,r.value=oe.from7bitToFloat(o),r.rawValue=o;const u=Object.assign({},r);u.type=`${r.type}-controller${l}`,delete u.subtype,this.emit(u.type,u);const f=Object.assign({},r);f.type=`${r.type}-`+W.CONTROL_CHANGE_MESSAGES[l].name,delete f.subtype,f.type.indexOf("controller")!==0&&this.emit(f.type,f),r.message.dataBytes[0]>=120&&this._parseChannelModeMessage(r),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(r.message.dataBytes[0])&&this._parseEventForParameterNumber(r)}else r.type==="programchange"?(r.value=l,r.rawValue=r.value):r.type==="channelaftertouch"?(r.value=oe.from7bitToFloat(l),r.rawValue=l):r.type==="pitchbend"?(r.value=((o<<7)+l-8192)/8192,r.rawValue=(o<<7)+l):r.type="unknownmessage";this.emit(r.type,r)}_parseChannelModeMessage(t){const r=Object.assign({},t);r.type=r.controller.name,r.type==="localcontrol"&&(r.value=r.message.data[2]===127,r.rawValue=r.message.data[2]),r.type==="omnimodeon"?(r.type="omnimode",r.value=!0,r.rawValue=r.message.data[2]):r.type==="omnimodeoff"&&(r.type="omnimode",r.value=!1,r.rawValue=r.message.data[2]),r.type==="monomodeon"?(r.type="monomode",r.value=!0,r.rawValue=r.message.data[2]):r.type==="polymodeon"&&(r.type="monomode",r.value=!1,r.rawValue=r.message.data[2]),this.emit(r.type,r)}_parseEventForParameterNumber(t){const r=t.message.dataBytes[0],l=t.message.dataBytes[1];r===99||r===101?(this._nrpnBuffer=[],this._rpnBuffer=[],r===99?this._nrpnBuffer=[t.message]:l!==127&&(this._rpnBuffer=[t.message])):r===98||r===100?r===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(t.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&l!==127?this._rpnBuffer.push(t.message):this._rpnBuffer=[]):(r===6||r===38||r===96||r===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],t):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],t):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(t){return t===6||t===38||t===96||t===97||t===98||t===99||t===100||t===101}_dispatchParameterNumberEvent(t,r,l,o){t=t==="nrpn"?"nrpn":"rpn";const u={target:o.target,timestamp:o.timestamp,message:o.message,parameterMsb:r,parameterLsb:l,value:oe.from7bitToFloat(o.message.dataBytes[1]),rawValue:o.message.dataBytes[1]};t==="rpn"?u.parameter=Object.keys(W.REGISTERED_PARAMETERS).find(h=>W.REGISTERED_PARAMETERS[h][0]===r&&W.REGISTERED_PARAMETERS[h][1]===l):u.parameter=(r<<7)+l;const f=W.CONTROL_CHANGE_MESSAGES[o.message.dataBytes[0]].name;u.type=`${t}-${f}`,this.emit(u.type,u);const p=Object.assign({},u);p.type==="nrpn-dataincrement"?p.type="nrpn-databuttonincrement":p.type==="nrpn-datadecrement"?p.type="nrpn-databuttondecrement":p.type==="rpn-dataincrement"?p.type="rpn-databuttonincrement":p.type==="rpn-datadecrement"&&(p.type="rpn-databuttondecrement"),this.emit(p.type,p),u.type=t,u.subtype=f,this.emit(u.type,u)}getChannelModeByNumber(t){return le.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),t=Math.floor(t)),oe.getChannelModeByNumber(t)}getCcNameByNumber(t){if(le.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),t=parseInt(t),!(t>=0&&t<=127)))throw new RangeError("Invalid control change number.");return oe.getCcNameByNumber(t)}getNoteState(t){t instanceof vi&&(t=t.identifier);const r=oe.guessNoteNumber(t,le.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[r]}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(t){this.validation&&(t=!!t),this.parameterNumberEventsEnabled=t}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class u0{constructor(t){this.rawData=t,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=oe.getPropertyByValue(W.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=oe.getPropertyByValue(W.SYSTEM_MESSAGES,this.command)),this.statusByte===W.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class ug extends Yn{constructor(t){super(),this._midiInput=t,this._octaveOffset=0,this.channels=[];for(let r=1;r<=16;r++)this.channels[r]=new og(this,r);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(t=>t.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(t){let r={timestamp:le.time,target:this,port:this};t.port.connection==="open"?(r.type="opened",this.emit("opened",r)):t.port.connection==="closed"&&t.port.state==="connected"?(r.type="closed",this.emit("closed",r)):t.port.connection==="closed"&&t.port.state==="disconnected"?(r.type="disconnected",r.port={connection:t.port.connection,id:t.port.id,manufacturer:t.port.manufacturer,name:t.port.name,state:t.port.state,type:t.port.type},this.emit("disconnected",r)):t.port.connection==="pending"&&t.port.state==="disconnected"||console.warn("This statechange event was not caught: ",t.port.connection,t.port.state)}_onMidiMessage(t){const r=new u0(t.data),l={port:this,target:this,message:r,timestamp:t.timeStamp,type:"midimessage",data:r.data,rawData:r.data,statusByte:r.data[0],dataBytes:r.dataBytes};this.emit("midimessage",l),r.isSystemMessage?this._parseEvent(l):r.isChannelMessage&&this.channels[r.channel]._processMidiMessageEvent(l),this._forwarders.forEach(o=>o.forward(r))}_parseEvent(t){const r=Object.assign({},t);r.type=r.message.type||"unknownmidimessage",r.type==="songselect"&&(r.song=t.data[1]+1,r.value=t.data[1],r.rawValue=r.value),this.emit(r.type,r)}async open(){try{await this._midiInput.open()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(t){return Promise.reject(t)}return Promise.resolve(this)}getChannelModeByNumber(){le.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(t,r,l={}){if(le.validation&&typeof l=="function"){let o=r!=null?[].concat(r):void 0;r=l,l={channels:o}}if(W.CHANNEL_EVENTS.includes(t)){l.channels===void 0&&(l.channels=W.MIDI_CHANNEL_NUMBERS);let o=[];return oe.sanitizeChannels(l.channels).forEach(u=>{o.push(this.channels[u].addListener(t,r,l))}),o}else return super.addListener(t,r,l)}addOneTimeListener(t,r,l={}){return l.remaining=1,this.addListener(t,r,l)}on(t,r,l,o){return this.addListener(t,r,l,o)}hasListener(t,r,l={}){if(le.validation&&typeof l=="function"){let o=[].concat(r);r=l,l={channels:o}}return W.CHANNEL_EVENTS.includes(t)?(l.channels===void 0&&(l.channels=W.MIDI_CHANNEL_NUMBERS),oe.sanitizeChannels(l.channels).every(o=>this.channels[o].hasListener(t,r))):super.hasListener(t,r)}removeListener(t,r,l={}){if(le.validation&&typeof l=="function"){let o=[].concat(r);r=l,l={channels:o}}if(l.channels===void 0&&(l.channels=W.MIDI_CHANNEL_NUMBERS),t==null)return oe.sanitizeChannels(l.channels).forEach(o=>{this.channels[o]&&this.channels[o].removeListener()}),super.removeListener();W.CHANNEL_EVENTS.includes(t)?oe.sanitizeChannels(l.channels).forEach(o=>{this.channels[o].removeListener(t,r,l)}):super.removeListener(t,r,l)}addForwarder(t,r={}){let l;return t instanceof xp?l=t:l=new xp(t,r),this._forwarders.push(l),l}removeForwarder(t){this._forwarders=this._forwarders.filter(r=>r!==t)}hasForwarder(t){return this._forwarders.includes(t)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return le.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class cg extends Yn{constructor(){super(),this.defaults={note:{attack:oe.from7bitToFloat(64),release:oe.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(t={},r=!1){if(oe.isNode)try{window.navigator}catch{let p=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,p)}if(this.validation=t.validation!==!1,this.validation&&(typeof t=="function"&&(t={callback:t,sysex:r}),r&&(t.sysex=!0)),this.enabled)return typeof t.callback=="function"&&t.callback(),Promise.resolve();const l={timestamp:this.time,target:this,type:"error",error:void 0},o={timestamp:this.time,target:this,type:"midiaccessgranted"},u={timestamp:this.time,target:this,type:"enabled"};try{typeof t.requestMIDIAccessFunction=="function"?this.interface=await t.requestMIDIAccessFunction({sysex:t.sysex,software:t.software}):this.interface=await navigator.requestMIDIAccess({sysex:t.sysex,software:t.software})}catch(f){return l.error=f,this.emit("error",l),typeof t.callback=="function"&&t.callback(f),Promise.reject(f)}this.emit("midiaccessgranted",o),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(f){return l.error=f,this.emit("error",l),typeof t.callback=="function"&&t.callback(f),Promise.reject(f)}return this.emit("enabled",u),typeof t.callback=="function"&&t.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let t={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",t),this.removeListener()})}getInputById(t,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(r.disconnected){for(let l=0;l<this._disconnectedInputs.length;l++)if(this._disconnectedInputs[l]._midiInput&&this._disconnectedInputs[l].id===t.toString())return this._disconnectedInputs[l]}else for(let l=0;l<this.inputs.length;l++)if(this.inputs[l]._midiInput&&this.inputs[l].id===t.toString())return this.inputs[l]}getInputByName(t,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(r.disconnected){for(let l=0;l<this._disconnectedInputs.length;l++)if(~this._disconnectedInputs[l].name.indexOf(t))return this._disconnectedInputs[l]}else for(let l=0;l<this.inputs.length;l++)if(~this.inputs[l].name.indexOf(t))return this.inputs[l]}getOutputByName(t,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(r.disconnected){for(let l=0;l<this._disconnectedOutputs.length;l++)if(~this._disconnectedOutputs[l].name.indexOf(t))return this._disconnectedOutputs[l]}else for(let l=0;l<this.outputs.length;l++)if(~this.outputs[l].name.indexOf(t))return this.outputs[l]}getOutputById(t,r={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(r.disconnected){for(let l=0;l<this._disconnectedOutputs.length;l++)if(this._disconnectedOutputs[l]._midiOutput&&this._disconnectedOutputs[l].id===t.toString())return this._disconnectedOutputs[l]}else for(let l=0;l<this.outputs.length;l++)if(this.outputs[l]._midiOutput&&this.outputs[l].id===t.toString())return this.outputs[l]}noteNameToNumber(t){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),oe.toNoteNumber(t,this.octaveOffset)}getOctave(t){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),t=parseInt(t)),!isNaN(t)&&t>=0&&t<=127?oe.getNoteDetails(oe.offsetNumber(t,this.octaveOffset)).octave:!1}sanitizeChannels(t){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),oe.sanitizeChannels(t)}toMIDIChannels(t){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),oe.sanitizeChannels(t)}guessNoteNumber(t){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),oe.guessNoteNumber(t,this.octaveOffset)}getValidNoteArray(t,r={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),oe.buildNoteArray(t,r)}convertToTimestamp(t){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),oe.toTimestamp(t)}async _destroyInputsAndOutputs(){let t=[];return this.inputs.forEach(r=>t.push(r.destroy())),this.outputs.forEach(r=>t.push(r.destroy())),Promise.all(t).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(t){this._updateInputsAndOutputs();let r={timestamp:t.timeStamp,type:t.port.state,target:this};if(t.port.state==="connected"&&t.port.connection==="open"){t.port.type==="output"?r.port=this.getOutputById(t.port.id):t.port.type==="input"&&(r.port=this.getInputById(t.port.id)),this.emit(t.port.state,r);const l=Object.assign({},r);l.type="portschanged",this.emit(l.type,l)}else if(t.port.state==="disconnected"&&t.port.connection==="pending"){t.port.type==="input"?r.port=this.getInputById(t.port.id,{disconnected:!0}):t.port.type==="output"&&(r.port=this.getOutputById(t.port.id,{disconnected:!0})),this.emit(t.port.state,r);const l=Object.assign({},r);l.type="portschanged",this.emit(l.type,l)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let r=this._inputs.length-1;r>=0;r--){const l=this._inputs[r];Array.from(this.interface.inputs.values()).find(u=>u===l._midiInput)||(this._disconnectedInputs.push(l),this._inputs.splice(r,1))}let t=[];return this.interface.inputs.forEach(r=>{if(!this._inputs.find(l=>l._midiInput===r)){let l=this._disconnectedInputs.find(o=>o._midiInput===r);l||(l=new ug(r)),this._inputs.push(l),t.push(l.open())}}),Promise.all(t)}async _updateOutputs(){if(!this.interface)return;for(let r=this._outputs.length-1;r>=0;r--){const l=this._outputs[r];Array.from(this.interface.outputs.values()).find(u=>u===l._midiOutput)||(this._disconnectedOutputs.push(l),this._outputs.splice(r,1))}let t=[];return this.interface.outputs.forEach(r=>{if(!this._outputs.find(l=>l._midiOutput===r)){let l=this._disconnectedOutputs.find(o=>o._midiOutput===r);l||(l=new Ac(r)),this._outputs.push(l),t.push(l.open())}}),Promise.all(t)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),oe.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),oe.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.14"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),W.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),W.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),W.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),W.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),W.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const le=new cg;le.constructor=null;const fg=async()=>{if(le.enabled)return le;try{return await le.enable({sysex:!0}),console.log("WebMidi is enabled with SysEx support!"),le}catch(a){throw console.error("WebMidi could not be enabled.",a),a}},dg=()=>le.enabled?le.inputs.map(a=>({id:a.id,name:a.name})):[],hg=(a,t)=>{if(le.enabled){const r=le.getInputById(a);if(r){const l=f=>{t({type:"noteon",note:f.note.identifier,velocity:f.velocity,controller:null,channel:f.message.channel})},o=f=>{t({type:"noteoff",note:f.note.identifier,velocity:0,controller:null,channel:f.message.channel})},u=f=>{t({type:"controlchange",controller:f.controller.number,value:f.rawValue,note:null,channel:f.message.channel})};return r.addListener("noteon",l),r.addListener("noteoff",o),r.addListener("controlchange",u),()=>{r.removeListener("noteon",l),r.removeListener("noteoff",o),r.removeListener("controlchange",u)}}}return()=>{}},pg=(a,t)=>{if(le.enabled){const r=le.getInputById(a);if(r){const l=le.outputs.find(o=>o.name===r.name);l?(l.sendSysex(71,t),console.log(`Sent SysEx to ${l.name}`)):console.warn("Could not find matching MIDI Output for SysEx")}}},Ws=(a,t,r,l)=>{if(le.enabled){const o=le.getInputById(a);if(o){const u=le.outputs.find(f=>f.name===o.name);u&&u.sendNoteOn(t,{attack:r/127,channels:l})}}},c0=O.createContext(null),lo=()=>O.useContext(c0),mg=({children:a,onMidiCommand:t})=>{const[r,l]=O.useState(!1),[o,u]=O.useState([]),[f,p]=O.useState(""),[h,m]=O.useState(!1),[v,x]=O.useState(null),[S,E]=O.useState({}),[C,D]=O.useState(null),[j,N]=O.useState(!1),V=O.useRef(!1),U=O.useRef(t);O.useEffect(()=>{U.current=t},[t]),O.useEffect(()=>{(async()=>{try{await fg(),l(!0);const ee=dg();if(u(ee),window.electronAPI&&window.electronAPI.getSelectedMidiInput){const R=await window.electronAPI.getSelectedMidiInput();R&&ee.some(P=>P.id===R)?p(R):ee.length>0&&(f||p(ee[0].id))}else ee.length>0&&(f||p(ee[0].id));if(window.electronAPI&&window.electronAPI.getMidiMappings){const R=await window.electronAPI.getMidiMappings();R&&(console.log("Loaded saved MIDI mappings:",R),E(R))}}catch(ee){console.error("MIDI Init Failed:",ee)}})()},[]);const Y=async()=>{window.electronAPI&&window.electronAPI.saveMidiMappings&&(await window.electronAPI.saveMidiMappings(S),console.log("MIDI mappings saved to default."))},Q=async()=>{window.electronAPI&&window.electronAPI.exportMappings&&await window.electronAPI.exportMappings(S,"midi")},ue=async()=>{if(window.electronAPI&&window.electronAPI.importMappings){const re=await window.electronAPI.importMappings("midi");re.success&&re.mappings&&(E(re.mappings),console.log("MIDI mappings imported."))}},Ee=re=>{const ee=o.find(R=>R.id===re);ee&&ee.name.toLowerCase().includes("apc40")&&(console.log("Detected APC40, sending initialization SysEx..."),pg(re,[127,41,96,0,4,65,1,1,1]))};O.useEffect(()=>{f&&window.electronAPI&&window.electronAPI.saveSelectedMidiInput&&window.electronAPI.saveSelectedMidiInput(f),f&&r&&Ee(f)},[f,r,o]);const Se=O.useCallback((re,ee,R=null)=>{if(!f||!r)return;const P=S[re];if(P&&P.type==="note"){let I=0;typeof ee=="number"?I=ee:I=ee?127:0;const fe=R!==null?R:P.channel;Ws(f,P.address,I,fe)}},[f,r,S]);O.useEffect(()=>{let re=()=>{};return f&&(re=hg(f,ee=>{J.current&&D(ee),ae(ee)})),re},[f,h,v,S]);const J=O.useRef(h);O.useEffect(()=>{J.current=h},[h]);const ae=re=>{if(re.channel===1&&re.note==="D7"){const R=re.type==="noteon";N(R),V.current=R,console.log(`Shift ${R?"Down":"Up"}`);return}if(h&&v){if(re.type==="noteoff")return;const R=re.note||re.controller,P=V.current,I={type:re.type==="noteon"||re.type==="noteoff"?"note":"cc",channel:re.channel,address:R,requiresShift:P,label:`${P?"":""}CH${re.channel}:${R}`};console.log(`Mapped ${v} to:`,I),E(fe=>({...fe,[v]:I})),x(null);return}Object.entries(S).forEach(([R,P])=>{const I=(re.type==="noteon"||re.type==="noteoff")&&P.type==="note"&&re.note===P.address&&re.channel===P.channel,fe=re.type==="controlchange"&&P.type==="cc"&&re.controller===P.address&&re.channel===P.channel,T=P.type==="cc"||!!P.requiresShift===V.current;if((I||fe)&&T&&U.current){const G=re.type==="controlchange"?re.value??0:re.velocity??0;U.current(R,G,127,re.type)}})},de={midiInitialized:r,midiInputs:o,selectedMidiInputId:f,setSelectedMidiInputId:p,isMapping:h,startMapping:()=>m(!0),stopMapping:()=>{m(!1),x(null)},learningId:v,setLearningId:x,mappings:S,setMappings:E,saveMappings:Y,exportMappings:Q,importMappings:ue,initializeApc40:Ee,sendFeedback:Se,lastMidiEvent:C,isShiftDown:j};return g.jsx(c0.Provider,{value:de,children:a})},f0=O.createContext(null),Lc=()=>O.useContext(f0),vg=({children:a,onArtnetCommand:t})=>{const[r,l]=O.useState(!1),[o,u]=O.useState(!1),[f,p]=O.useState(null),[h,m]=O.useState({}),[v,x]=O.useState(null),S=O.useRef(t);O.useEffect(()=>{S.current=t},[t]),O.useEffect(()=>{(async()=>{try{if(window.electronAPI&&window.electronAPI.initializeArtnet&&(await window.electronAPI.initializeArtnet()).success&&(l(!0),console.log("Art-Net initialized for mapping")),window.electronAPI&&window.electronAPI.getArtnetMappings){const ue=await window.electronAPI.getArtnetMappings();ue&&(console.log("Loaded saved Art-Net mappings:",ue),m(ue))}}catch(ue){console.error("Art-Net Init Failed:",ue)}})()},[]);const E=async()=>{window.electronAPI&&window.electronAPI.saveArtnetMappings&&(await window.electronAPI.saveArtnetMappings(h),console.log("Art-Net mappings saved."))},C=async()=>{window.electronAPI&&window.electronAPI.exportMappings&&await window.electronAPI.exportMappings(h,"artnet")},D=async()=>{if(window.electronAPI&&window.electronAPI.importMappings){const Q=await window.electronAPI.importMappings("artnet");Q.success&&Q.mappings&&(m(Q.mappings),console.log("Art-Net mappings imported."))}};O.useEffect(()=>{if(window.electronAPI&&window.electronAPI.onArtnetDataReceived)return window.electronAPI.onArtnetDataReceived(ue=>{j.current&&x(ue),N(ue)})},[o,f,h]);const j=O.useRef(o);O.useEffect(()=>{j.current=o},[o]);const N=Q=>{const{universe:ue,channel:Ee,value:Se}=Q;if(o&&f){if(Se===0)return;const J={universe:ue,channel:Ee,label:`U${ue}:CH${Ee+1}`};console.log(`Mapped ${f} to Art-Net:`,J),m(ae=>({...ae,[f]:J})),p(null);return}Object.entries(h).forEach(([J,ae])=>{ae.universe===ue&&ae.channel===Ee&&S.current&&S.current(J,Se)})},Y={artnetInitialized:r,isMapping:o,startMapping:()=>u(!0),stopMapping:()=>{u(!1),p(null)},learningId:f,setLearningId:p,mappings:h,setMappings:m,saveMappings:E,exportMappings:C,importMappings:D,lastDmxEvent:v};return g.jsx(f0.Provider,{value:Y,children:a})},Et=({id:a,children:t})=>{const{isMapping:r,setLearningId:l}=lo(),{isMapping:o,setLearningId:u}=Lc()||{},f=r||o,p=m=>{f&&(m.preventDefault(),m.stopPropagation(),r&&l(a),o&&u(a))},h=ir.Children.only(t);return ir.cloneElement(h,{"data-mappable-id":a,onClickCapture:f?p:h.props.onClickCapture,className:`${h.props.className||""} ${f?"mappable-target":""}`.trim()})},gg=({masterIntensity:a,onMasterIntensityChange:t})=>g.jsx("div",{className:"master-intensity-slider",children:g.jsx(Et,{id:"master_intensity",children:g.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:a,className:"slider_hor",id:"masterIntensityRange",onChange:r=>t(parseFloat(r.target.value))})})}),yg=({masterIntensity:a,onMasterIntensityChange:t,onClearAllActive:r,isGlobalBlackout:l,onToggleGlobalBlackout:o})=>g.jsxs("div",{className:"composition-controls",children:[g.jsx("span",{className:"layer-control-button",children:"Comp"}),g.jsx(Et,{id:"comp_clear",children:g.jsx("span",{className:"layer-control-button",onClick:r,style:{cursor:"pointer"},children:"X"})}),g.jsx(Et,{id:"comp_blackout",style:{width:"100%",display:"flex"},children:g.jsx("span",{className:"layer-control-button",onClick:o,style:{cursor:"pointer",backgroundColor:l?"red":""},children:"B"})}),g.jsx(gg,{masterIntensity:a,onMasterIntensityChange:t})]}),bg=({name:a,index:t,onTrigger:r,onShowColumnHeaderContextMenu:l})=>{const o=f=>{f.preventDefault(),l&&l(t)},u=f=>{f.button===0&&r&&r()};return g.jsx(Et,{id:`column_${t}`,children:g.jsx("div",{className:"column-header trigger-button",onClick:u,onContextMenu:o,style:{cursor:"pointer"},children:a})})},d0=({frame:a})=>{const t=O.useRef(null);return O.useEffect(()=>{if(!t.current||!a||!a.points||a.points.length===0)return;const r=t.current,l=r.getContext("2d"),{width:o,height:u}=r;l.fillStyle="black",l.fillRect(0,0,o,u),l.lineWidth=1.5;const f=o/2,p=u/2,h=o/2,m=u/2,v=a.points,x=v instanceof Float32Array||a.isTypedArray,S=x?v.length/8:v.length,E=C=>{if(x){const D=C*8;return{x:v[D],y:v[D+1],r:v[D+3],g:v[D+4],b:v[D+5],blanking:v[D+6]===1}}else return v[C]};for(let C=0;C<S;C++){const D=E(C),j=C>0?E(C-1):null;if(D.blanking)continue;const N=Math.abs(D.x)<=1&&Math.abs(D.y)<=1,V=(N?D.x:D.x/32767)*f+h,U=(N?-D.y:-D.y/32767)*p+m,Y=`rgb(${D.r}, ${D.g}, ${D.b})`;let Q,ue;if(j&&!j.blanking){const Ee=Math.abs(j.x)<=1&&Math.abs(j.y)<=1;Q=(Ee?j.x:j.x/32767)*f+h,ue=(Ee?-j.y:-j.y/32767)*p+m,l.beginPath(),l.moveTo(Q,ue),l.lineTo(V,U),l.strokeStyle=Y,l.stroke()}else l.beginPath(),l.moveTo(V,U),l.lineTo(V+1,U+1),l.strokeStyle=Y,l.stroke()}},[a]),g.jsx("canvas",{ref:t,width:"100",height:"100",style:{backgroundColor:"black"}})},Sg=({layerName:a,index:t,onDropEffect:r,layerEffects:l,activeClipData:o,onDeactivateLayerClips:u,onShowLayerFullContextMenu:f,thumbnailRenderMode:p,intensity:h,onIntensityChange:m,liveFrame:v,isBlackout:x,isSolo:S,onToggleBlackout:E,onToggleSolo:C})=>{const[D,j]=O.useState(l||[]);O.useEffect(()=>{j(l||[])},[l]);const N=Y=>{Y.preventDefault(),console.log(`Right-clicked LayerControls at index: ${t}`),f&&f(t)},V=Y=>{Y.preventDefault(),Y.dataTransfer.dropEffect="copy"},U=Y=>{Y.preventDefault();const Q=Y.dataTransfer.getData("text/plain");if(Q.startsWith("effect_")){const ue=Q.replace("effect_","");r&&r(ue)}};return g.jsxs("div",{className:"layer-controls",onContextMenu:N,onDragOver:V,onDrop:U,children:[g.jsxs("div",{className:"grid-layer",children:[g.jsx(Et,{id:`layer_${t}_clear`,children:g.jsx("span",{className:"layer-control-button full-height",onClick:()=>u(t),children:"X"})}),g.jsxs("div",{className:"layer-control-group",children:[g.jsx(Et,{id:`layer_${t}_blackout`,children:g.jsx("span",{className:"layer-control-button half-height",onClick:E,style:{backgroundColor:x?"red":""},children:"B"})}),g.jsx(Et,{id:`layer_${t}_solo`,children:g.jsx("span",{className:"layer-control-button half-height",onClick:C,style:{backgroundColor:S?"var(--theme-color)":"",color:S?"black":""},children:"S"})})]}),g.jsxs("select",{className:"layer-blend-dropdown",children:[g.jsx("option",{children:"Normal"}),g.jsx("option",{children:"Add"}),g.jsx("option",{children:"Subtract"})]})]}),g.jsx("div",{className:"layer-control-row",children:g.jsx(Et,{id:`layer_${t}_intensity`,children:g.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:h,className:"slider_ver",id:"layer-intensity-slider",onChange:Y=>m(parseFloat(Y.target.value))})})}),g.jsx("div",{className:"layer-preview-thumbnail",children:o?g.jsx(d0,{frame:p==="still"?o.stillFrame:v}):D.length>0&&g.jsx("div",{className:"applied-effects",children:D.map(Y=>g.jsx("span",{className:"effect-tag",children:Y.substring(0,3).toUpperCase()},Y))})}),g.jsx("span",{className:"layer-name-label",children:a})]})},tn=[{id:"rotate",name:"Rotate",type:"transform",description:"Rotates the shape around its center.",defaultParams:{angle:0,speed:0,direction:"CW"},paramControls:[{id:"angle",label:"Angle",type:"range",min:0,max:360,step:1},{id:"speed",label:"Speed",type:"range",min:0,max:10,step:.1},{id:"direction",label:"Direction",type:"select",options:["CW","CCW"]}]},{id:"scale",name:"Scale",type:"transform",description:"Scales the shape.",defaultParams:{scaleX:1,scaleY:1},paramControls:[{id:"scaleX",label:"Scale X",type:"range",min:.01,max:5,step:.01},{id:"scaleY",label:"Scale Y",type:"range",min:.01,max:5,step:.01}]},{id:"translate",name:"Translate",type:"transform",description:"Moves the shape.",defaultParams:{translateX:0,translateY:0},paramControls:[{id:"translateX",label:"Translate X",type:"range",min:-1,max:1,step:.01},{id:"translateY",label:"Translate Y",type:"range",min:-1,max:1,step:.01}]},{id:"color",name:"Color",type:"color",description:"Changes the color of the shape with solid or rainbow modes.",defaultParams:{mode:"solid",r:255,g:255,b:255,cycleSpeed:0,rainbowSpread:1,rainbowOffset:0},paramControls:[{id:"mode",label:"Mode",type:"select",options:["solid","rainbow"]},{id:"r",label:"Red",type:"range",min:0,max:255,step:1,showIf:{mode:"solid"}},{id:"g",label:"Green",type:"range",min:0,max:255,step:1,showIf:{mode:"solid"}},{id:"b",label:"Blue",type:"range",min:0,max:255,step:1,showIf:{mode:"solid"}},{id:"cycleSpeed",label:"Cycle Speed",type:"range",min:0,max:10,step:.1},{id:"rainbowSpread",label:"Rainbow Spread",type:"range",min:.1,max:10,step:.1,showIf:{mode:"rainbow"}},{id:"rainbowOffset",label:"Rainbow Offset",type:"range",min:0,max:360,step:1,showIf:{mode:"rainbow"}},{id:"rainbowPalette",label:"Palette",type:"select",options:["rainbow","fire","ice","cyber"],showIf:{mode:"rainbow"}}]},{id:"wave",name:"Wave",type:"animation",description:"Applies a wave distortion to the shape.",defaultParams:{amplitude:.1,frequency:10,speed:1,direction:"x"},paramControls:[{id:"amplitude",label:"Amplitude",type:"range",min:.01,max:1,step:.01},{id:"frequency",label:"Frequency",type:"range",min:1,max:50,step:1},{id:"speed",label:"Speed",type:"range",min:.1,max:10,step:.1},{id:"direction",label:"Direction",type:"select",options:["x","y"]}]},{id:"warp",name:"Warp",type:"animation",description:"Symmetrical chaotic wave distortion.",defaultParams:{amount:.1,chaos:.5,speed:1},paramControls:[{id:"amount",label:"Amount",type:"range",min:0,max:1,step:.01},{id:"chaos",label:"Chaos",type:"range",min:0,max:1,step:.01},{id:"speed",label:"Speed",type:"range",min:.1,max:10,step:.1}]},{id:"distortion",name:"Distortion",type:"transform",description:"Distorts the point data.",defaultParams:{amount:.1,scale:10,speed:.5},paramControls:[{id:"amount",label:"Amount",type:"range",min:0,max:1,step:.01},{id:"scale",label:"Scale",type:"range",min:1,max:50,step:1},{id:"speed",label:"Speed",type:"range",min:0,max:5,step:.1}]},{id:"move",name:"Move (Bounce)",type:"transform",description:"Moves points and bounces them off the borders.",defaultParams:{speedX:.1,speedY:.1},paramControls:[{id:"speedX",label:"Speed X",type:"range",min:0,max:2,step:.01},{id:"speedY",label:"Speed Y",type:"range",min:0,max:2,step:.01}]},{id:"delay",name:"Delay / Chase",type:"effect",description:"Creates a trailing chaser effect.",defaultParams:{delayAmount:5,decay:.8,mode:"linear",target:"intensity",direction:"out"},paramControls:[{id:"delayAmount",label:"Delay",type:"range",min:1,max:60,step:1},{id:"decay",label:"Decay",type:"range",min:0,max:1,step:.01},{id:"mode",label:"Mode",type:"select",options:["linear","symmetric"]},{id:"target",label:"Target",type:"select",options:["intensity","color","effect"]},{id:"direction",label:"Direction",type:"select",options:["out","in"]}]},{id:"blanking",name:"Blanking",type:"animation",description:"Controls the blanking of the laser output.",defaultParams:{blankingInterval:0},paramControls:[{id:"blankingInterval",label:"Blanking Interval",type:"range",min:0,max:10,step:1}]},{id:"strobe",name:"Strobe",type:"animation",description:"Applies a strobe effect to the laser output.",defaultParams:{strobeSpeed:100,strobeAmount:.5},paramControls:[{id:"strobeSpeed",label:"Strobe Speed (ms)",type:"range",min:10,max:1e3,step:10},{id:"strobeAmount",label:"Strobe Amount (0-1)",type:"range",min:0,max:1,step:.01}]},{id:"mirror",name:"Mirror",type:"transform",description:"Mirrors the shape from the center.",defaultParams:{mode:"none"},paramControls:[{id:"mode",label:"Mirror Mode",type:"select",options:["none","x+","x-","y+","y-"]}]}],In=(a,t)=>({...t,...a});function h0(a,t,r={}){const{progress:l=0,time:o=performance.now(),effectStates:u}=r;if(!t||t.length===0)return a;let f;if(Array.isArray(a.points)){f=new Float32Array(a.points.length*8);for(let m=0;m<a.points.length;m++){const v=a.points[m],x=m*8;f[x]=v.x,f[x+1]=v.y,f[x+2]=v.z||0,f[x+3]=v.r,f[x+4]=v.g,f[x+5]=v.b,f[x+6]=v.blanking?1:0,f[x+7]=v.lastPoint?1:0}}else f=new Float32Array(a.points);let p=f;const h=()=>p.length/8;for(const m of t)if(tn.find(x=>x.id===m.id))switch(m.id){case"rotate":xg(p,h(),m.params,l,o);break;case"scale":Eg(p,h(),m.params);break;case"translate":Tg(p,h(),m.params);break;case"color":Ag(p,h(),m.params,o);break;case"wave":Ng(p,h(),m.params,o);break;case"blanking":Mg(p,h(),m.params);break;case"strobe":Rg(p,h(),m.params,o);break;case"mirror":wg(p,h(),m.params);break;case"warp":Og(p,h(),m.params,o);break;case"distortion":Dg(p,h(),m.params,o);break;case"move":_g(p,h(),m.params,o);break;case"delay":u&&m.instanceId&&(p=Ug(p,h(),m.params,u,m.instanceId));break}return{...a,points:p,isTypedArray:!0}}function xg(a,t,r,l,o){const{angle:u,speed:f,direction:p}=In(r,tn.find(E=>E.id==="rotate").defaultParams),h=p==="CCW"?-1:1,m=o*.001*f*h,v=u*Math.PI/180+m,x=Math.sin(v),S=Math.cos(v);for(let E=0;E<t;E++){const C=E*8,D=a[C],j=a[C+1];a[C]=D*S-j*x,a[C+1]=D*x+j*S}}function Eg(a,t,r){const{scaleX:l,scaleY:o}=In(r,tn.find(u=>u.id==="scale").defaultParams);for(let u=0;u<t;u++){const f=u*8;a[f]*=l,a[f+1]*=o}}function Tg(a,t,r){const{translateX:l,translateY:o}=In(r,tn.find(u=>u.id==="translate").defaultParams);for(let u=0;u<t;u++){const f=u*8;a[f]+=l,a[f+1]+=o}}function Ag(a,t,r,l){const{mode:o,r:u,g:f,b:p,cycleSpeed:h,rainbowSpread:m,rainbowOffset:v,rainbowPalette:x}=In(r,tn.find(E=>E.id==="color").defaultParams),S=l*.001*h;if(o==="rainbow"){const E=x||"rainbow";for(let C=0;C<t;C++){const D=C*8,j=(C/t*m+S*.5+v/360)%1;let N,V,U;E==="rainbow"?[N,V,U]=Ep(j,1,.5):[N,V,U]=Cg(E,j),a[D+3]=N,a[D+4]=V,a[D+5]=U}}else if(h>0){const E=S*50%360,[C,D,j]=Ep(E/360,1,.5);for(let N=0;N<t;N++){const V=N*8;a[V+3]=C,a[V+4]=D,a[V+5]=j}}else for(let E=0;E<t;E++){const C=E*8;a[C+3]=u,a[C+4]=f,a[C+5]=p}}function Cg(a,t){const r={fire:[{r:255,g:0,b:0},{r:255,g:128,b:0},{r:255,g:255,b:0},{r:255,g:0,b:0}],ice:[{r:0,g:0,b:255},{r:0,g:255,b:255},{r:255,g:255,b:255},{r:0,g:0,b:255}],cyber:[{r:255,g:0,b:255},{r:0,g:255,b:255},{r:0,g:0,b:255},{r:255,g:0,b:255}]},l=r[a]||r.fire,o=t*(l.length-1),u=Math.floor(o),f=o-u,p=l[u],h=l[u+1]||l[u];return[Math.round(p.r+(h.r-p.r)*f),Math.round(p.g+(h.g-p.g)*f),Math.round(p.b+(h.b-p.b)*f)]}function Ep(a,t,r){let l,o,u;{const f=(m,v,x)=>(x<0&&(x+=1),x>1&&(x-=1),x<.16666666666666666?m+(v-m)*6*x:x<.5?v:x<.6666666666666666?m+(v-m)*(.6666666666666666-x)*6:m),p=r+t-r*t,h=2*r-p;l=f(h,p,a+1/3),o=f(h,p,a),u=f(h,p,a-1/3)}return[Math.round(l*255),Math.round(o*255),Math.round(u*255)]}function Ng(a,t,r,l){const{amplitude:o,frequency:u,speed:f,direction:p}=In(r,tn.find(m=>m.id==="wave").defaultParams),h=l*.001*f;for(let m=0;m<t;m++){const v=m*8;p==="x"?a[v+1]+=o*Math.sin(a[v]*u+h):p==="y"&&(a[v]+=o*Math.sin(a[v+1]*u+h))}}function Mg(a,t,r){const{blankingInterval:l}=In(r,tn.find(o=>o.id==="blanking").defaultParams);if(!(l<=0))for(let o=0;o<t;o++)o%(l+1)===l&&(a[o*8+6]=1)}function Rg(a,t,r,l){const{strobeSpeed:o,strobeAmount:u}=In(r,tn.find(p=>p.id==="strobe").defaultParams);if(l%o/o<u)for(let p=0;p<t;p++)a[p*8+6]=1}function wg(a,t,r){const{mode:l}=In(r,tn.find(o=>o.id==="mirror").defaultParams);if(l!=="none")for(let o=0;o<t;o++){const u=o*8,f=a[u],p=a[u+1];l==="x+"?a[u]=Math.abs(f):l==="x-"?a[u]=-Math.abs(f):l==="y+"?a[u+1]=Math.abs(p):l==="y-"&&(a[u+1]=-Math.abs(p))}}function Og(a,t,r,l){const{amount:o,chaos:u,speed:f}=In(r,tn.find(h=>h.id==="warp").defaultParams),p=l*.001*f;for(let h=0;h<t;h++){const m=h*8,v=a[m],x=a[m+1],S=Math.abs(x);a[m]+=Math.sin(S*10*(1+u)+p)*o*Math.cos(p*u),a[m+1]+=Math.cos(Math.abs(v)*10*(1+u)+p)*o*Math.sin(p*u)}}function Dg(a,t,r,l){const{amount:o,scale:u,speed:f}=In(r,tn.find(h=>h.id==="distortion").defaultParams),p=l*.001*f;for(let h=0;h<t;h++){const m=h*8,v=Math.sin(a[m]*u+p)*Math.cos(a[m+1]*u-p),x=Math.cos(a[m]*u-p)*Math.sin(a[m+1]*u+p);a[m]+=v*o,a[m+1]+=x*o}}function _g(a,t,r,l){const{speedX:o,speedY:u}=In(r,tn.find(v=>v.id==="move").defaultParams),f=l*.001,p=f*o,h=f*u,m=4;for(let v=0;v<t;v++){const x=v*8;let S=a[x]+p,E=a[x+1]+h,C=(S+1)%m;C<0&&(C+=m),C>2&&(C=4-C),S=C-1;let D=(E+1)%m;D<0&&(D+=m),D>2&&(D=4-D),E=D-1,a[x]=S,a[x+1]=E}}function Ug(a,t,r,l,o){const{delayAmount:u,decay:f}=In(r,tn.find(C=>C.id==="delay").defaultParams);l.has(o)||l.set(o,[]);const p=l.get(o),h=new Float32Array(a);p.unshift(h);const m=u*4+1;p.length>m&&(p.length=m);const v=[];for(let C=1;C<=4;C++){const D=C*u;if(D<p.length){const j=p[D];j.length===a.length&&v.push({points:j,factor:Math.pow(f,C)})}}if(v.length===0)return a;const x=t+v.reduce((C,D)=>C+D.points.length/8,0),S=new Float32Array(x*8);S.set(a,0);let E=a.length;for(const C of v){const D=C.points,j=D.length/8,N=C.factor;for(let V=0;V<j;V++){const U=V*8,Y=E+V*8;S[Y]=D[U],S[Y+1]=D[U+1],S[Y+2]=D[U+2],S[Y+3]=D[U+3]*N,S[Y+4]=D[U+4]*N,S[Y+5]=D[U+5]*N,S[Y+6]=D[U+6],S[Y+7]=D[U+7]}E+=D.length}return S}const Lg=({clipName:a,layerIndex:t,colIndex:r,onDropGenerator:l,onDropEffect:o,clipContent:u,thumbnailFrameIndex:f,onUnsupportedFile:p,onActivateClick:h,onLabelClick:m,isSelected:v,isActive:x,ildaParserWorker:S,onDropDac:E,thumbnailRenderMode:C,liveFrame:D,stillFrame:j})=>{const[N,V]=O.useState(!1),U=a,Y=C==="active"?D:j,Q=O.useMemo(()=>Y&&u&&u.effects&&u.effects.length>0?h0(Y,u.effects):Y,[Y,u]),ue=de=>{de.preventDefault(),de.stopPropagation(),V(!0),de.dataTransfer.dropEffect="copy"},Ee=de=>{de.preventDefault(),de.stopPropagation(),de.currentTarget.contains(de.relatedTarget)||V(!1)},Se=async de=>{const re=de.name;if(!S){p("ILDA parser not available.");return}if(re.toLowerCase().endsWith(".ild"))try{const ee=await de.arrayBuffer();console.log(`[Clip.jsx] ArrayBuffer byteLength before posting to worker (handleFileDrop): ${ee.byteLength}`),S.postMessage({type:"parse-ilda",arrayBuffer:ee,fileName:re,filePath:de.path,layerIndex:t,colIndex:r},[ee])}catch(ee){console.error("[Clip.jsx] handleFileDrop - Error reading file:",ee),p(`Error reading file: ${ee.message}`)}else p("Please drop a valid .ild file")},J=async(de,re)=>{if(!re.toLowerCase().endsWith(".ild")){console.log("Unsupported file type:",re),p("Please drop a valid .ild file");return}if(!S){p("ILDA parser not available.");return}try{if(window.electronAPI&&window.electronAPI.readFileAsBinary){const R=(await window.electronAPI.readFileAsBinary(de)).slice().buffer;console.log(`[Clip.jsx] ArrayBuffer byteLength before posting to worker (handleFilePathDrop): ${R.byteLength}`),S.postMessage({type:"parse-ilda",arrayBuffer:R,fileName:re,filePath:de,layerIndex:t,colIndex:r},[R])}else p("Binary file access not available")}catch(ee){console.error("Error processing file path:",ee),console.error("Error stack:",ee.stack),p(`Error processing file: ${ee.message}`)}},ae=de=>{de.preventDefault(),de.stopPropagation(),V(!1);const re=de.dataTransfer.getData("application/json");if(re)try{const R=JSON.parse(re);if(R.filePath&&R.fileName){J(R.filePath,R.fileName);return}if(R.type==="transform"||R.type==="animation"||R.type==="color"){if(o){o(R),m();return}}else if(R.name){if(l){l(t,r,R);return}}else if(R.ip&&typeof R.channel=="number"&&E){E(t,r,R);return}}catch(R){console.error("Error parsing dropped data:",R)}const ee=de.dataTransfer.files;if(ee&&ee.length>0){Se(ee[0]);return}console.log("No recognized data format found in drop"),p("No valid ILD file, effect, or generator dropped.")},ne=de=>{de.preventDefault(),de.stopPropagation()},ce=de=>{de.preventDefault(),window.electronAPI&&window.electronAPI.showClipContextMenu&&window.electronAPI.showClipContextMenu(t,r,u?.triggerStyle||"normal")};return g.jsxs("div",{className:`clip ${N?"dragging":""} ${x?"active-clip":""} `,onDragEnter:ne,onDragOver:ue,onDragLeave:Ee,onDrop:ae,onContextMenu:ce,children:[g.jsx(Et,{id:`clip_${t}_${r}`,children:g.jsx("div",{className:"clip-thumbnail",onMouseDown:()=>h(!0),onMouseUp:()=>h(!1),onMouseLeave:()=>h(!1),children:u&&u.parsing?g.jsx("div",{className:"clip-loading-spinner"}):Q?g.jsx(d0,{frame:Q}):g.jsx("p",{})})}),g.jsx(Et,{id:`clip_${t}_${r}_preview`,children:g.jsx("span",{className:`clip-label ${v?"selected-clip":""}`,onClick:m,children:U})})]})},kg=ir.memo(Lg),Bg=()=>{const[a,t]=O.useState(""),[r,l]=O.useState([]),o=async()=>{if(window.electronAPI){const u=await window.electronAPI.openFileExplorer();if(u){t(u);const f=await window.electronAPI.readIldFiles(u);l(f)}}};return g.jsxs("div",{className:"file-browser",children:[g.jsx("h3",{children:"ILD File Browser"}),g.jsx("button",{onClick:o,children:"Open Folder"}),a&&g.jsxs("p",{className:"fileBrowser",children:["Selected Directory: ",a.split("\\").filter(Boolean).pop()]}),g.jsx("div",{className:"ild-file-list",children:r.length>0?r.map((u,f)=>{const p=u.split("\\").pop();return g.jsx("div",{className:"ild-file-item",draggable:!0,onDragStart:h=>h.dataTransfer.setData("application/json",JSON.stringify({filePath:u,fileName:p})),children:p},f)}):g.jsx("p",{children:"No ILD files found in selected directory."})})]})},p0=[{id:"circle",name:"Circle",description:"Generates a simple circle.",defaultParams:{radius:.5,numPoints:100,x:0,y:0,r:255,g:255,b:255},paramControls:[{id:"radius",label:"Radius",type:"range",min:.01,max:1,step:.01},{id:"numPoints",label:"Number of Points",type:"range",min:3,max:360,step:1},{id:"x",label:"X Position",type:"range",min:-1,max:1,step:.01},{id:"y",label:"Y Position",type:"range",min:-1,max:1,step:.01},{id:"r",label:"Red",type:"range",min:0,max:255,step:1},{id:"g",label:"Green",type:"range",min:0,max:255,step:1},{id:"b",label:"Blue",type:"range",min:0,max:255,step:1}]},{id:"square",name:"Square",description:"Generates a simple square.",defaultParams:{width:1,height:1,pointDensity:25,x:0,y:0,r:255,g:255,b:255},paramControls:[{id:"width",label:"Width",type:"range",min:.01,max:2,step:.01},{id:"height",label:"Height",type:"range",min:.01,max:2,step:.01},{id:"pointDensity",label:"Point Density",type:"range",min:1,max:100,step:1},{id:"x",label:"X Position",type:"range",min:-1,max:1,step:.01},{id:"y",label:"Y Position",type:"range",min:-1,max:1,step:.01},{id:"r",label:"Red",type:"range",min:0,max:255,step:1},{id:"g",label:"Green",type:"range",min:0,max:255,step:1},{id:"b",label:"Blue",type:"range",min:0,max:255,step:1}]},{id:"line",name:"Line",description:"Generates a straight line.",defaultParams:{x1:-.5,y1:0,x2:.5,y2:0,pointDensity:50,r:255,g:255,b:255},paramControls:[{id:"x1",label:"X1",type:"range",min:-1,max:1,step:.01},{id:"y1",label:"Y1",type:"range",min:-1,max:1,step:.01},{id:"x2",label:"X2",type:"range",min:-1,max:1,step:.01},{id:"y2",label:"Y2",type:"range",min:-1,max:1,step:.01},{id:"pointDensity",label:"Point Density",type:"range",min:2,max:200,step:1},{id:"r",label:"Red",type:"range",min:0,max:255,step:1},{id:"g",label:"Green",type:"range",min:0,max:255,step:1},{id:"b",label:"Blue",type:"range",min:0,max:255,step:1}]},{id:"text",name:"Text",description:"Generates text.",defaultParams:{text:"TrueLazer",x:0,y:0,fontSize:72,numPoints:200,fontUrl:"src/fonts/arial.ttf",r:255,g:255,b:255},paramControls:[{id:"text",label:"Text Content",type:"text"},{id:"x",label:"X Position",type:"range",min:-1,max:1,step:.01},{id:"y",label:"Y Position",type:"range",min:-1,max:1,step:.01},{id:"fontSize",label:"Font Size",type:"range",min:10,max:200,step:1},{id:"numPoints",label:"Target Points",type:"range",min:10,max:1e3,step:1},{id:"fontUrl",label:"Font URL",type:"text"},{id:"r",label:"Red",type:"range",min:0,max:255,step:1},{id:"g",label:"Green",type:"range",min:0,max:255,step:1},{id:"b",label:"Blue",type:"range",min:0,max:255,step:1}]},{id:"star",name:"Star",description:"Generates a star shape.",defaultParams:{outerRadius:.5,innerRadius:.2,numSpikes:5,pointDensity:10,x:0,y:0,r:255,g:255,b:255},paramControls:[{id:"outerRadius",label:"Outer Radius",type:"range",min:.01,max:1,step:.01},{id:"innerRadius",label:"Inner Radius",type:"range",min:.01,max:1,step:.01},{id:"numSpikes",label:"Number of Spikes",type:"range",min:3,max:20,step:1},{id:"pointDensity",label:"Point Density",type:"range",min:1,max:50,step:1},{id:"x",label:"X Position",type:"range",min:-1,max:1,step:.01},{id:"y",label:"Y Position",type:"range",min:-1,max:1,step:.01},{id:"r",label:"Red",type:"range",min:0,max:255,step:1},{id:"g",label:"Green",type:"range",min:0,max:255,step:1},{id:"b",label:"Blue",type:"range",min:0,max:255,step:1}]}],Ig=()=>{const a=(t,r)=>{t.dataTransfer.setData("application/json",JSON.stringify(r))};return g.jsxs("div",{className:"generator-panel",children:[g.jsx("h3",{children:"Generators"}),p0.map(t=>g.jsx("div",{className:"generator-item",draggable:!0,onDragStart:r=>a(r,t),children:t.name},t.id))]})},Fg=()=>{const a=(t,r)=>{t.dataTransfer.setData("application/json",JSON.stringify(r))};return g.jsxs("div",{className:"effect-panel",children:[g.jsx("h3",{children:"Effects"}),tn.map(t=>g.jsx("div",{draggable:!0,onDragStart:r=>a(r,t),className:"effect-item",children:t.name},t.id))]})},m0=({value:a,onChange:t,label:r,onDrop:l,size:o=30})=>{const u=m=>{l&&(m.preventDefault(),m.dataTransfer.dropEffect="link")},f=m=>{if(l){m.preventDefault();try{const v=JSON.parse(m.dataTransfer.getData("application/x-truelazer-param"));v&&v.type==="range"&&l(v)}catch(v){console.error("Invalid drop data",v)}}},p=-135+a*270,h=m=>{const v=m.clientY,x=a,S=C=>{const j=(v-C.clientY)/200;let N=Math.max(0,Math.min(1,x+j));t(N)},E=()=>{window.removeEventListener("mousemove",S),window.removeEventListener("mouseup",E)};window.addEventListener("mousemove",S),window.addEventListener("mouseup",E)};return g.jsxs("div",{className:"quick-assign-knob",style:{width:o},onDragOver:u,onDrop:f,onMouseDown:h,children:[g.jsx("div",{className:"knob-circle",style:{width:o*.66,height:o*.66},children:g.jsx("div",{className:"knob-indicator",style:{transform:`rotate(${p}deg)`}})}),r&&g.jsx("div",{className:"knob-label",title:r,children:r})]})},Gg=({dacs:a=[],onDacSelected:t,onDacsDiscovered:r,dacSettings:l={},onUpdateDacSettings:o})=>{const[u,f]=O.useState(!1),[p,h]=O.useState(null),[m,v]=O.useState([]),[x,S]=O.useState(null),E=ir.useRef(!1);O.useEffect(()=>{window.electronAPI&&window.electronAPI.getNetworkInterfaces().then(N=>{v(N),N.length>0&&S(N[0])})},[]),O.useEffect(()=>{u&&!E.current&&(E.current=!0,console.log("Starting DAC scan on:",x?.address),window.electronAPI?window.electronAPI.discoverDacs(2e3,x?.address).then(async N=>{console.log("DACs discovered:",N);const V=await Promise.all(N.map(async U=>{try{const Q=(await window.electronAPI.getDacServices(U.ip,x?.address)).filter(ue=>ue.serviceID!==0);return{...U,channels:Q}}catch(Y){return console.error(`Error fetching services for DAC ${U.ip}:`,Y),{...U,channels:[]}}}));r&&r(V)}).catch(N=>{console.error("Error discovering DACs:",N)}).finally(()=>{f(!1),E.current=!1}):(console.warn("electronAPI is not available. Cannot discover DACs."),f(!1),E.current=!1))},[u,x,r]);const C=(N,V)=>{const U={...N,channel:V};h(U),t&&t(U)},D=(N,V,U)=>{const Y={...V,channel:U};N.dataTransfer.setData("application/json",JSON.stringify(Y))},j=N=>{const V=N.target.value,U=m.find(Y=>Y.address===V);S(U)};return g.jsxs("div",{className:"dac-panel",children:[g.jsx("h3",{children:"DACs"}),g.jsxs("div",{className:"network-interface-selector",children:[g.jsx("select",{onChange:j,value:x?.address||"",children:m.map(N=>g.jsxs("option",{value:N.address,children:[N.name," (",N.address,")"]},N.address))}),g.jsxs("label",{children:[g.jsx("input",{type:"checkbox",checked:u,onChange:N=>f(N.target.checked),disabled:u}),"Scan"]})]}),g.jsx("div",{className:"dac-list",children:a.map(N=>g.jsxs("div",{className:"dac-group",children:[g.jsxs("div",{className:"dac-ip",children:[N.hostName||N.ip," (",N.ip,")"]}),g.jsx("div",{className:"dac-channels",children:N.channels&&N.channels.length>0?N.channels.map(V=>g.jsxs("div",{className:`dac-channel-item ${p&&p.unitID===N.unitID&&p.channel===V.serviceID?"selected":""}`,onClick:()=>C(N,V.serviceID),draggable:!0,onDragStart:U=>D(U,N,V.serviceID),children:["Channel ",V.serviceID," (",V.name,")"]},`${N.unitID}-${V.serviceID}`)):g.jsx("div",{className:"dac-channel-item no-channels",children:"No channels found"})})]},N.unitID||N.ip))}),a.length>0&&g.jsxs("div",{className:"dac-dimmers-section",children:[g.jsx("h4",{children:"Channel Dimmers"}),g.jsx("div",{className:"dac-dimmers-grid",children:a.flatMap(N=>(N.channels||[]).map(V=>({dac:N,ch:V}))).map(({dac:N,ch:V})=>{const U=`${N.ip}:${V.serviceID}`,Y=l[U]||{},Q=Y.dimmer!==void 0?Y.dimmer:1;return g.jsx(Et,{id:`dimmer_${U.replace(/\./g,"_")}`,children:g.jsx(m0,{label:`${N.hostName||N.ip} Ch${V.serviceID}`,value:Q,onChange:ue=>{o&&o(U,{...Y,dimmer:ue})}})},`dimmer_${U}`)})})]})]})},jg=({animSettings:a,onChange:t,controlDef:r})=>{const{range:l=[r.min,r.max],direction:o="forward",style:u="loop",syncMode:f=null}=a||{},p=(h,m)=>t({...a,[h]:m});return g.jsxs("div",{className:"animation-controls-grid",children:[g.jsxs("div",{className:"anim-row range-row",children:[g.jsx("label",{children:"Range"}),g.jsx("input",{type:"number",value:l[0],onChange:h=>p("range",[parseFloat(h.target.value),l[1]]),className:"tiny-input"}),g.jsx("input",{type:"range",min:r.min,max:r.max,step:r.step,value:l[0],onChange:h=>p("range",[parseFloat(h.target.value),l[1]]),className:"tiny-slider"}),g.jsx("span",{children:"-"}),g.jsx("input",{type:"range",min:r.min,max:r.max,step:r.step,value:l[1],onChange:h=>p("range",[l[0],parseFloat(h.target.value)]),className:"tiny-slider"}),g.jsx("input",{type:"number",value:l[1],onChange:h=>p("range",[l[0],parseFloat(h.target.value)]),className:"tiny-input"})]}),g.jsxs("div",{className:"anim-row controls-row",children:[g.jsxs("div",{className:"btn-group",children:[g.jsx("button",{className:o==="backward"?"active":"",onClick:()=>p("direction","backward"),children:"<|"}),g.jsx("button",{className:o==="pause"?"active":"",onClick:()=>p("direction","pause"),children:"||"}),g.jsx("button",{className:o==="forward"?"active":"",onClick:()=>p("direction","forward"),children:"|>"})]}),g.jsxs("div",{className:"btn-group",children:[g.jsx("button",{className:u==="once"?"active":"",onClick:()=>p("style","once"),children:"->|"}),g.jsx("button",{className:u==="bounce"?"active":"",onClick:()=>p("style","bounce"),children:"|<->|"}),g.jsx("button",{className:u==="loop"?"active":"",onClick:()=>p("style","loop"),children:"Loop"})]}),g.jsxs("div",{className:"btn-group",children:[g.jsx("button",{className:f==="fps"?"active":"",onClick:()=>p("syncMode",f==="fps"?null:"fps"),children:"F"}),g.jsx("button",{className:f==="timeline"?"active":"",onClick:()=>p("syncMode",f==="timeline"?null:"timeline"),children:"T"}),g.jsx("button",{className:f==="bpm"?"active":"",onClick:()=>p("syncMode",f==="bpm"?null:"bpm"),children:"B"})]})]})]})},zg=({control:a,value:t,onChange:r,animSettings:l,onAnimChange:o,effectId:u})=>{const[f,p]=O.useState(!1),h=m=>{m.dataTransfer.setData("application/x-truelazer-param",JSON.stringify({type:a.type,paramId:a.id,effectId:u}))};return g.jsxs("div",{className:"param-editor",children:[g.jsxs("div",{className:"param-header",children:[g.jsx("button",{className:`anim-toggle-btn ${f?"active":""}`,onClick:()=>p(!f),title:"Animate",children:"A"}),g.jsx("label",{className:"param-label",draggable:!0,onDragStart:h,children:a.label})]}),g.jsxs("div",{className:"control-row",children:[a.type==="range"&&g.jsxs(g.Fragment,{children:[g.jsx(Et,{id:`${u}_${a.id}`,children:g.jsx("input",{type:"range",min:a.min,max:a.max,step:a.step,value:t,onChange:m=>r(parseFloat(m.target.value)),className:"param-slider"})}),g.jsx("input",{type:"number",value:t,onChange:m=>r(parseFloat(m.target.value)||0),className:"param-number-input",step:a.step})]}),a.type==="text"&&g.jsx("input",{type:"text",value:t,onChange:m=>r(m.target.value),className:"param-text-input"}),a.type==="checkbox"&&g.jsx(Et,{id:`${u}_${a.id}`,children:g.jsx("input",{type:"checkbox",checked:t,onChange:m=>r(m.target.checked),className:"param-checkbox"})}),a.type==="select"&&g.jsx("select",{value:t,onChange:m=>r(m.target.value),className:"param-select",children:a.options.map(m=>g.jsx("option",{value:m,children:m},m))})]}),f&&g.jsx(jg,{animSettings:l,onChange:o,controlDef:a})]})},Hg=({effect:a,onParamChange:t,onRemove:r,syncSettings:l={},onSetParamSync:o})=>{if(!a)return null;const u=tn.find(f=>f.id===a.id);return u?g.jsxs("div",{className:"effect-editor settings-card",children:[g.jsxs("div",{className:"effect-header settings-card-header",children:[g.jsx("h4",{children:a.name}),g.jsx("button",{className:"remove-effect-btn",onClick:r,children:""})]}),g.jsx("div",{className:"settings-card-content",children:u.paramControls.map(f=>{if(f.showIf&&!Object.entries(f.showIf).every(([v,x])=>a.params[v]===x))return null;const p=`${a.id}.${f.id}`,h=typeof l[p]=="object"?l[p]:{syncMode:l[p]};return g.jsx(zg,{control:f,value:a.params[f.id],onChange:m=>t(f.id,m),animSettings:h,onAnimChange:m=>o(p,m),effectId:a.id},f.id)})})]}):null},Pg=({paramId:a,currentSyncMode:t,onSetSyncMode:r})=>g.jsxs("div",{className:"sync-controls",children:[g.jsx("button",{className:`sync-btn ${t==="fps"?"active":""}`,onClick:()=>r(a,"fps"),title:"Sync to Global FPS",children:"F"}),g.jsx("button",{className:`sync-btn ${t==="timeline"?"active":""}`,onClick:()=>r(a,"timeline"),title:"Sync to Timeline",children:"T"}),g.jsx("button",{className:`sync-btn ${t==="bpm"?"active":""}`,onClick:()=>r(a,"bpm"),title:"Sync to BPM",children:"B"})]}),Yg=({selectedGeneratorId:a,selectedGeneratorParams:t,onParameterChange:r,syncSettings:l={},onSetParamSync:o})=>{if(!a)return g.jsx("div",{className:"generator-settings-panel",children:"No generator selected."});const u=p0.find(h=>h.id===a);if(!u)return g.jsxs("div",{className:"generator-settings-panel",children:["Generator definition not found for ID: ",a]});const f=(h,m)=>{const v=u.paramControls.find(S=>S.id===h);let x=m;v&&(v.type==="range"||v.type==="number")?x=parseFloat(m):v&&v.type==="checkbox"&&(x=m),r(h,x)},p=async h=>{const m=h.target.value;if(m==="browse")if(window.electronAPI&&window.electronAPI.showFontFileDialog){const v=await window.electronAPI.showFontFileDialog();v&&r("fontUrl",v)}else console.error("Font file dialog API not available.");else r("fontUrl",m)};return g.jsxs("div",{className:"generator-settings-panel settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsxs("h4",{children:[u.name," Settings"]})}),g.jsx("div",{className:"settings-card-content",children:u.paramControls.map(h=>g.jsxs("div",{className:"param-editor",children:[g.jsxs("div",{className:"param-label-row",style:{display:"flex",alignItems:"center"},children:[g.jsx("label",{htmlFor:h.id,children:h.label}),g.jsx(Pg,{paramId:`${a}.${h.id}`,currentSyncMode:l[`${a}.${h.id}`],onSetSyncMode:o})]}),g.jsx("div",{className:"control-row",children:h.id==="fontUrl"?g.jsxs("div",{className:"font-selector-container",children:[g.jsxs("select",{className:"param-select",onChange:p,value:t[h.id]||"src/fonts/arial.ttf",children:[g.jsx("option",{value:"src/fonts/arial.ttf",children:"Arial"}),g.jsx("option",{value:"src/fonts/impact.ttf",children:"Impact"}),g.jsx("option",{value:"src/fonts/Geometr415 Blk BT Black.ttf",children:"Geometric 415"}),g.jsx("option",{value:"src/fonts/STENCIL.TTF",children:"Stencil"}),g.jsx("option",{value:"browse",children:"Browse..."})]}),g.jsx("span",{className:"font-path-tiny",children:t[h.id]?.split(/[\\/]/).pop()})]}):h.type==="range"?g.jsxs(g.Fragment,{children:[g.jsx("input",{type:"range",id:h.id,min:h.min,max:h.max,step:h.step,value:t[h.id]||"",onChange:m=>f(h.id,m.target.value),className:"param-slider"}),g.jsx("input",{type:"number",value:t[h.id]||0,onChange:m=>f(h.id,m.target.value),className:"param-number-input",step:h.step})]}):h.type==="number"?g.jsx("input",{type:"number",id:h.id,min:h.min,max:h.max,step:h.step,value:t[h.id]||"",onChange:m=>f(h.id,m.target.value),className:"param-number-input"}):h.type==="text"?g.jsx("input",{type:"text",id:h.id,value:t[h.id]||"",onChange:m=>f(h.id,m.target.value),className:"param-text-input"}):h.type==="checkbox"?g.jsx("input",{type:"checkbox",id:h.id,checked:t[h.id]||!1,onChange:m=>f(h.id,m.target.checked),className:"param-checkbox"}):null})]},h.id))})]})},qg=({settings:a,onUpdate:t})=>{const{mode:r="fps",duration:l=1,beats:o=8,speedMultiplier:u=1}=a||{},f=h=>{t({mode:h})},p=(h,m,v=!1)=>{let x=a[h]||(h==="beats"?8:1);v?x=m>1?x*2:x/2:x+=m,x<.01&&(x=.01),t({[h]:x})};return g.jsxs("div",{className:"clip-playback-settings settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"Clip Playback"})}),g.jsxs("div",{className:"settings-card-content",children:[g.jsxs("div",{className:"playback-mode-selector",children:[g.jsx("button",{className:r==="fps"?"active":"",onClick:()=>f("fps"),children:"FPS"}),g.jsx("button",{className:r==="timeline"?"active":"",onClick:()=>f("timeline"),children:"Timeline"}),g.jsx("button",{className:r==="bpm"?"active":"",onClick:()=>f("bpm"),children:"BPM Sync"})]}),g.jsxs("div",{className:"playback-controls",children:[r==="timeline"&&g.jsxs("div",{className:"control-group",children:[g.jsx("label",{children:"Duration (s)"}),g.jsxs("div",{className:"value-adjuster",children:[g.jsx("button",{onClick:()=>p("duration",-1),children:"-1"}),g.jsx("input",{type:"number",value:l.toFixed(2),onChange:h=>t({duration:parseFloat(h.target.value)||1})}),g.jsx("button",{onClick:()=>p("duration",1),children:"+1"}),g.jsx("button",{onClick:()=>p("duration",.5,!0),children:"/2"}),g.jsx("button",{onClick:()=>p("duration",2,!0),children:"*2"})]})]}),r==="bpm"&&g.jsxs("div",{className:"control-group",children:[g.jsx("label",{children:"Beats"}),g.jsxs("div",{className:"value-adjuster",children:[g.jsx("button",{onClick:()=>p("beats",-1),children:"-1"}),g.jsx("input",{type:"number",value:o,onChange:h=>t({beats:parseInt(h.target.value)||1})}),g.jsx("button",{onClick:()=>p("beats",1),children:"+1"}),g.jsx("button",{onClick:()=>p("beats",.5,!0),children:"/2"}),g.jsx("button",{onClick:()=>p("beats",2,!0),children:"*2"})]})]}),(r==="timeline"||r==="bpm")&&g.jsxs("div",{className:"control-group",children:[g.jsx("label",{children:"Speed Multiplier"}),g.jsxs("div",{className:"value-adjuster",children:[g.jsx("button",{onClick:()=>p("speedMultiplier",-.1),children:"-0.1"}),g.jsx("input",{type:"number",value:u.toFixed(2),onChange:h=>t({speedMultiplier:parseFloat(h.target.value)||1})}),g.jsx("button",{onClick:()=>p("speedMultiplier",.1),children:"+0.1"})]})]})]})]})]})},Vg=({selectedLayerIndex:a,selectedColIndex:t,clip:r,audioInfo:l,onAssignAudio:o,onRemoveAudio:u,onUpdatePlaybackSettings:f,onSetParamSync:p,onToggleDacMirror:h,onRemoveDac:m,onRemoveEffect:v,onParameterChange:x,onGeneratorParameterChange:S})=>{if(a===null||t===null)return g.jsxs("div",{className:"clip-settings-panel settings-panel-base",children:[g.jsx("h3",{children:"Clip Settings"}),g.jsx("p",{className:"info-text",children:"Select a clip to view settings."})]});const{effects:E=[],assignedDacs:C=[],playbackSettings:D={},syncSettings:j={},audioFile:N=null,type:V=null,generatorDefinition:U=null,currentParams:Y={}}=r||{},Q=E.length>0,ue=V==="generator"&&!!U,Ee=C.length>0,Se=l&&l.duration?l.currentTime/l.duration*100:0;return g.jsxs("div",{className:"clip-settings-panel settings-panel-base",children:[g.jsx("h3",{children:"Clip Settings"}),g.jsxs("div",{className:"audio-settings-section settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"Audio"})}),g.jsx("div",{className:"settings-card-content",children:N?g.jsxs("div",{className:"assigned-audio-info",children:[g.jsx("div",{className:"audio-file-name",title:N.path,children:N.name}),g.jsx("div",{className:"audio-progress-container",children:g.jsx("div",{className:"audio-progress-bar",style:{width:`${Se}%`}})}),g.jsx("div",{className:"audio-time-info",children:l?`${l.currentTime.toFixed(1)}s / ${l.duration.toFixed(1)}s`:"0.0s / 0.0s"}),g.jsx("button",{className:"remove-audio-btn",onClick:u,children:"Remove Audio"})]}):g.jsx("button",{className:"assign-audio-btn",onClick:o,children:"Assign Audio File"})})]}),g.jsx(qg,{settings:D,onUpdate:J=>f(a,t,J)}),Ee&&g.jsxs("div",{className:"assigned-dacs-settings settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"Assigned DACs"})}),g.jsx("div",{className:"settings-card-content",children:g.jsx("ul",{className:"assigned-dacs-list",children:C.map((J,ae)=>g.jsxs("li",{className:"assigned-dac-item",children:[g.jsxs("span",{className:"dac-name-tiny",children:[J.hostName||J.ip," - Ch ",J.channel]}),g.jsxs("div",{className:"dac-mirror-controls",children:[g.jsx("button",{className:`mirror-btn ${J.mirrorX?"active":""}`,onClick:()=>h(a,t,ae,"x"),title:"Mirror X Axis",children:"X"}),g.jsx("button",{className:`mirror-btn ${J.mirrorY?"active":""}`,onClick:()=>h(a,t,ae,"y"),title:"Mirror Y Axis",children:"Y"})]}),g.jsx("button",{className:"remove-dac-btn",onClick:()=>m(ae),children:""})]},`${J.unitID||J.ip}-${J.channel}-${ae}`))})})]}),ue&&g.jsx(Yg,{selectedGeneratorId:U.id,selectedGeneratorParams:Y,onParameterChange:S,syncSettings:j,onSetParamSync:p}),Q&&E.map((J,ae)=>g.jsx(Hg,{effect:J,syncSettings:j,onSetParamSync:p,onParamChange:(ne,ce)=>x(a,t,ae,ne,ce),onRemove:()=>v(a,t,ae)},J.id+ae)),!ue&&!Q&&g.jsx("p",{className:"info-text",children:"No generators or effects applied."})]})},Xg=({selectedLayerIndex:a,autopilotMode:t,onAutopilotChange:r})=>a===null?g.jsxs("div",{className:"settings-panel-base",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"Layer Settings"})}),g.jsx("div",{className:"settings-card-content",children:g.jsx("p",{className:"info-text",children:"Select a layer to edit settings"})})]}):g.jsxs("div",{className:"settings-panel-base",children:[g.jsx("div",{className:"settings-card-header",children:g.jsxs("h4",{children:["Layer ",a+1," Settings"]})}),g.jsx("div",{className:"settings-card-content",children:g.jsxs("div",{className:"param-editor",children:[g.jsx("label",{children:"Autopilot"}),g.jsx("div",{className:"clip-playback-settings",children:g.jsxs("div",{className:"playback-mode-selector",children:[g.jsx("button",{className:t==="off"?"active":"",onClick:()=>r("off"),children:"OFF"}),g.jsx("button",{className:t==="forward"?"active":"",onClick:()=>r("forward"),children:"ON"}),g.jsx("button",{className:t==="random"?"active":"",onClick:()=>r("random"),children:"RND"})]})})]})})]}),Zg=({message:a,visible:t})=>t?g.jsx("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"#333",color:"white",padding:"10px 20px",borderRadius:"5px",zIndex:1e3,opacity:t?1:0,transition:"opacity 0.5s ease-in-out"},children:a}):null,v0=O.createContext(null),g0=()=>O.useContext(v0),Qg=({children:a,onWorkerMessage:t})=>{const r=O.useRef(null);return r.current===null&&(r.current=new Worker(new URL(""+new URL("rendering.worker-CSdiujTz.js",import.meta.url).href,import.meta.url),{type:"module"})),O.useEffect(()=>{const l=r.current;return t&&(l.onmessage=t),()=>{l.terminate(),t&&(l.onmessage=null)}},[t]),g.jsx(v0.Provider,{value:r.current,children:a})},Kg=({frame:a,effects:t,showBeamEffect:r,beamAlpha:l,fadeAlpha:o,previewScanRate:u,beamRenderMode:f,intensity:p})=>{const h=O.useRef(null),m=g0(),v=O.useRef(`ilda-player-${Math.random()}`);return O.useEffect(()=>{const x=h.current;if(!x||!m)return;const S=x.transferControlToOffscreen();return m.postMessage({action:"register",payload:{id:v.current,canvas:S,type:"single",data:{showBeamEffect:r,beamAlpha:l,fadeAlpha:o,previewScanRate:u,beamRenderMode:f,intensity:p}}},[S]),()=>{m.postMessage({action:"deregister",payload:{id:v.current}})}},[]),O.useEffect(()=>{if(!m)return;const x=a?[a]:[];m.postMessage({action:"update",payload:{id:v.current,data:{ildaFrames:x,effects:t,showBeamEffect:r,beamAlpha:l,fadeAlpha:o,previewScanRate:u,beamRenderMode:f,intensity:p}}})},[m,a,t,r,l,o,u,f,p]),g.jsxs("div",{className:"ilda-player",children:[g.jsx("h3",{children:"Selected Preview"}),g.jsx("canvas",{ref:h,width:"300",height:"300",style:{backgroundColor:"black"}})]})},Wg=ir.memo(Kg),Jg=({activeFrames:a,showBeamEffect:t,beamAlpha:r,fadeAlpha:l,previewScanRate:o,beamRenderMode:u,layerIntensities:f,masterIntensity:p})=>{const h=O.useRef(null),m=g0(),v=O.useRef(`world-preview-${Math.random()}`);return O.useEffect(()=>{const x=h.current;if(!x||!m)return;const S=x.transferControlToOffscreen();return m.postMessage({action:"register",payload:{id:v.current,canvas:S,type:"world",data:{showBeamEffect:t,beamAlpha:r,fadeAlpha:l,previewScanRate:o,beamRenderMode:u}}},[S]),()=>{m.postMessage({action:"deregister",payload:{id:v.current}})}},[]),O.useEffect(()=>{if(!m)return;const x=Object.entries(a).map(([S,{frame:E,effects:C,layerIndex:D}])=>({frames:[E],effects:C,workerId:S,layerIndex:D}));m.postMessage({action:"update",payload:{id:v.current,data:{worldData:x,showBeamEffect:t,beamAlpha:r,fadeAlpha:l,previewScanRate:o,beamRenderMode:u,layerIntensities:f,masterIntensity:p}}})},[m,a,t,r,l,o,u,f,p]),g.jsxs("div",{className:"world-preview",children:[g.jsx("h3",{children:"World Preview"}),g.jsx("canvas",{ref:h,width:"300",height:"300",style:{backgroundColor:"black"}})]})},$g=({bpm:a,onBpmChange:t})=>{const[r,l]=O.useState([]),[o,u]=O.useState(a);O.useEffect(()=>{u(a)},[a]);const f=()=>{const h=Date.now(),m=[...r,h].slice(-4);if(l(m),m.length>=2){const v=[];for(let E=1;E<m.length;E++)v.push(m[E]-m[E-1]);const x=v.reduce((E,C)=>E+C)/v.length,S=Math.round(6e4/x);t(S)}},p=h=>{const m=parseFloat(h.target.value);u(h.target.value),!isNaN(m)&&m>0&&m<999&&t(m)};return g.jsx("div",{className:"bpm-controls",children:g.jsxs("div",{className:"bpm-display",children:[g.jsx(Et,{id:"bpm_tap",children:g.jsx("button",{className:"bpm-tap-btn",onClick:f,children:"TAP"})}),g.jsxs("div",{className:"bpm-fine-controls",children:[g.jsx(Et,{id:"bpm_fine_down",children:g.jsx("button",{className:"bpm-fine-btn",onClick:()=>t(Math.max(1,a-.1)),children:"-"})}),g.jsx(Et,{id:"bpm_value",children:g.jsx("input",{type:"number",className:"bpm-input",value:o,onChange:p,min:"1",max:"999",step:"0.1"})}),g.jsx(Et,{id:"bpm_fine_up",children:g.jsx("button",{className:"bpm-fine-btn",onClick:()=>t(Math.min(999,a+.1)),children:"+"})})]}),g.jsx("span",{className:"bpm-label",children:"BPM"})]})})},ey=({onPlay:a,onPause:t,onStop:r,isPlaying:l,isStopped:o})=>g.jsxs("div",{className:"transport-controls",children:[g.jsx(Et,{id:"transport_play",children:g.jsx("button",{className:`speed-control-button ${l?"active":""}`,onClick:a,children:""})}),g.jsx(Et,{id:"transport_pause",children:g.jsx("button",{className:`speed-control-button ${!l&&!o?"active":""}`,onClick:t,children:""})}),g.jsx(Et,{id:"transport_stop",children:g.jsx("button",{className:`speed-control-button ${o?"active":""}`,onClick:r,children:""})})]}),ty=({value:a,onToggle:t,label:r,onDrop:l})=>{const o=f=>{f.preventDefault(),f.dataTransfer.dropEffect="link"},u=f=>{f.preventDefault();try{const p=JSON.parse(f.dataTransfer.getData("application/x-truelazer-param"));p&&(p.type==="toggle"||p.type==="checkbox")&&l(p)}catch(p){console.error("Invalid drop data",p)}};return g.jsx("div",{className:`quick-assign-button ${a?"active":""}`,onClick:t,onDragOver:o,onDrop:u,children:g.jsx("div",{className:"button-label",title:r||"Empty",children:r||"Assign"})})},ny=({assigns:a,onUpdateKnob:t,onToggleButton:r,onAssign:l})=>g.jsxs("div",{className:"global-quick-assigns-panel",children:[g.jsx("div",{className:"quick-assigns-row knobs-row",children:Array.from({length:8}).map((o,u)=>g.jsx(Et,{id:`quick_knob_${u}`,children:g.jsx(m0,{value:a.knobs[u]?.value||0,label:a.knobs[u]?.label,onChange:f=>t(u,f),onDrop:f=>l("knob",u,f)})},`knob-${u}`))}),g.jsx("div",{className:"quick-assigns-row buttons-row",children:Array.from({length:8}).map((o,u)=>g.jsx(Et,{id:`quick_btn_${u}`,children:g.jsx(ty,{value:a.buttons[u]?.value||!1,label:a.buttons[u]?.label,onToggle:()=>r(u),onDrop:f=>l("button",u,f)})},`btn-${u}`))})]}),ay=({enabledShortcuts:a={},onOpenOutputSettings:t,quickAssigns:r,onUpdateKnob:l,onToggleButton:o,onAssign:u})=>{const{midiInitialized:f,midiInputs:p,selectedMidiInputId:h,setSelectedMidiInputId:m,isMapping:v,startMapping:x,stopMapping:S,learningId:E,lastMidiEvent:C,setMappings:D,saveMappings:j,exportMappings:N,importMappings:V}=lo(),{artnetInitialized:U,isMapping:Y,startMapping:Q,stopMapping:ue,setMappings:Ee,saveMappings:Se,exportMappings:J,importMappings:ae,lastDmxEvent:ne}=Lc()||{},[ce,de]=O.useState([]),[re,ee]=O.useState(""),[R,P]=O.useState(!1),[I,fe]=O.useState(57121),[T,G]=O.useState("127.0.0.1"),[ie,se]=O.useState(57120),[Te,_e]=O.useState(null);O.useEffect(()=>{const rt=async()=>{if(a.artnet)try{const et=await window.electronAPI.getArtnetUniverses();de(et),et.length>0&&ee(et[0].id)}catch(et){console.error("Failed to fetch Art-Net universes:",et)}},nn=async()=>{if(a.osc)try{if((await window.electronAPI.initializeOsc({localPort:I,remoteAddress:T,remotePort:ie})).success)return P(!0),window.electronAPI.onOscMessageReceived(({oscMessage:Gn})=>{_e(Gn)})}catch(et){console.error("Failed to initialize OSC:",et)}};let tt=()=>{};return rt(),nn().then(et=>{typeof et=="function"&&(tt=et)}),()=>{typeof tt=="function"&&tt()}},[a]);const Ae=rt=>m(rt.target.value),dt=()=>v?S():x(),Fe=()=>Y?ue():Q();return g.jsxs("div",{className:"settings-panel settings-panel-base",children:[g.jsx("h3",{children:"Global Settings"}),r&&g.jsxs("div",{className:"settings-card quick-assigns-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"Quick Assigns"})}),g.jsx("div",{className:"settings-card-content",children:g.jsx(ny,{assigns:r,onUpdateKnob:l,onToggleButton:o,onAssign:u})})]}),g.jsxs("div",{className:"settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"Channel/DAC Settings"})}),g.jsxs("div",{className:"settings-card-content",children:[g.jsx("p",{className:"info-text",children:"Output routing and safety zones configuration."}),g.jsx("button",{className:"small-btn",style:{width:"100%",marginTop:"5px"},onClick:t,children:"Open Output Settings"})]})]}),(a.midi||a.artnet||a.osc)&&g.jsxs("div",{className:"shortcuts-settings-panel",children:[a.midi&&g.jsxs("div",{className:"settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"MIDI Shortcuts"})}),g.jsx("div",{className:"settings-card-content",children:f?g.jsxs("div",{className:"midi-config",children:[g.jsx("select",{className:"param-select",value:h,onChange:Ae,style:{marginBottom:"8px",width:"100%"},children:p.map(rt=>g.jsx("option",{value:rt.id,children:rt.name},rt.id))}),g.jsxs("div",{className:"button-grid",children:[g.jsx("button",{className:`mapping-btn ${v?"active":""}`,onClick:dt,style:{backgroundColor:v?"var(--theme-color)":"",gridColumn:"span 2"},children:v?"Stop Mapping":"Start Mapping"}),g.jsx("button",{className:"small-btn",onClick:j,children:"Save Default"}),g.jsx("button",{className:"small-btn",onClick:N,children:"Export"}),g.jsx("button",{className:"small-btn",onClick:V,children:"Import"}),g.jsx("button",{className:"small-btn clear",onClick:()=>D({}),children:"Clear"})]}),C&&g.jsxs("div",{className:"last-event-status",children:[C.type," ",C.note||C.controller," (CH",C.channel,")"]})]}):g.jsx("p",{className:"loading-text",children:"Initializing MIDI..."})})]}),a.artnet&&g.jsxs("div",{className:"settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"ArtNet Shortcuts"})}),g.jsx("div",{className:"settings-card-content",children:U?g.jsxs("div",{className:"artnet-config",children:[g.jsx("select",{className:"param-select",value:re,onChange:rt=>{ee(rt.target.value);const nn=parseInt(rt.target.value.replace("universe-",""));window.electronAPI&&window.electronAPI.listenArtnetUniverse&&window.electronAPI.listenArtnetUniverse(nn)},style:{marginBottom:"8px",width:"100%"},children:ce.map(rt=>g.jsx("option",{value:rt.id,children:rt.name},rt.id))}),g.jsxs("div",{className:"button-grid",children:[g.jsx("button",{className:`mapping-btn ${Y?"active":""}`,onClick:Fe,style:{backgroundColor:Y?"var(--theme-color)":"",gridColumn:"span 2"},children:Y?"Stop Mapping":"Start Mapping"}),g.jsx("button",{className:"small-btn",onClick:Se,children:"Save Default"}),g.jsx("button",{className:"small-btn",onClick:J,children:"Export"}),g.jsx("button",{className:"small-btn",onClick:ae,children:"Import"}),g.jsx("button",{className:"small-btn clear",onClick:()=>Ee({}),children:"Clear"})]}),ne&&g.jsxs("div",{className:"last-event-status",children:["UNIV ",ne.universe," CH ",ne.channel+1," (Val: ",ne.value,")"]})]}):g.jsx("p",{className:"loading-text",children:"Initializing Art-Net..."})})]}),a.osc&&g.jsxs("div",{className:"settings-card",children:[g.jsx("div",{className:"settings-card-header",children:g.jsx("h4",{children:"OSC Shortcuts"})}),g.jsx("div",{className:"settings-card-content",children:g.jsx("div",{className:"osc-config",children:g.jsxs("p",{className:"info-text",children:["Listening on port: ",I]})})})]})]})]})},ry=({show:a,title:t,initialValue:r,onSave:l,onClose:o})=>{const[u,f]=O.useState(r||"");if(O.useEffect(()=>{a&&f(r||"")},[a,r]),!a)return null;const p=()=>{l(u),o()},h=m=>{m.key==="Enter"&&p(),m.key==="Escape"&&o()};return g.jsx("div",{className:"shortcuts-modal-overlay",style:{pointerEvents:"auto"},children:g.jsxs("div",{className:"shortcuts-modal-content",style:{maxWidth:"400px"},children:[g.jsx("h3",{children:t||"Rename"}),g.jsxs("div",{className:"settings-section",style:{border:"none"},children:[g.jsx("input",{type:"text",value:u,onChange:m=>f(m.target.value),onKeyDown:h,autoFocus:!0,style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",color:"white",border:"1px solid var(--theme-color)",borderRadius:"4px",marginBottom:"15px"}}),g.jsxs("div",{className:"button-row",style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[g.jsx("button",{onClick:o,children:"Cancel"}),g.jsx("button",{onClick:p,style:{backgroundColor:"var(--theme-color)",color:"black"},children:"Save"})]})]})]})})},iy=({safetyZones:a,outputArea:t,testLineY:r,testLineEnabled:l,transformationEnabled:o,transformationMode:u,onUpdateSafetyZones:f,onUpdateOutputArea:p,selectedZoneIndex:h,onSelectZone:m,gridSize:v=20,snapToGrid:x=!1})=>{const S=O.useRef(null),[E,C]=O.useState(null),D=(J,ae,ne)=>{J.strokeStyle="#333",J.lineWidth=1,J.beginPath();for(let ce=0;ce<=v;ce++){const de=ce/v,re=de*ae,ee=de*ne;J.moveTo(re,0),J.lineTo(re,ne),J.moveTo(0,ee),J.lineTo(ae,ee)}J.stroke(),J.strokeStyle="#666",J.lineWidth=2,J.beginPath(),J.moveTo(ae/2,0),J.lineTo(ae/2,ne),J.moveTo(0,ne/2),J.lineTo(ae,ne/2),J.stroke(),J.fillStyle="#aaa",J.font="10px monospace",J.fillText("0,0",5,12),J.fillText("1,0",ae-25,12),J.fillText("0,1",5,ne-5),J.fillText("1,1",ae-25,ne-5)},j=(J,ae,ne,ce=!1,de=!1)=>{const{x:re,y:ee,w:R,h:P}=ae;if(J.fillStyle=ne,J.fillRect(re,ee,R,P),J.strokeStyle=ce?"#fff":de?"#0089ff":"#ff0000",J.lineWidth=ce?2:1,J.strokeRect(re,ee,R,P),ce||de){J.fillStyle="#fff";const fe=(ie,se)=>J.fillRect(ie-6/2,se-6/2,6,6);fe(re,ee),fe(re+R,ee),fe(re,ee+P),fe(re+R,ee+P);const T=4;J.fillStyle="#ccc";const G=(ie,se)=>J.fillRect(ie-T/2,se-T/2,T,T);G(re+R/2,ee),G(re+R/2,ee+P),G(re,ee+P/2),G(re+R,ee+P/2)}},N=()=>{const J=S.current;if(!J)return;const ae=J.getContext("2d"),{width:ne,height:ce}=J;if(ae.clearRect(0,0,ne,ce),D(ae,ne,ce),o&&t&&j(ae,{x:t.x*ne,y:t.y*ce,w:t.w*ne,h:t.h*ce},"rgba(0, 137, 255, 0.2)",!1,!0),a.forEach((de,re)=>{j(ae,{x:de.x*ne,y:de.y*ce,w:de.w*ne,h:de.h*ce},"rgba(255, 0, 0, 0.3)",re===h)}),l){ae.strokeStyle="#00ff00",ae.lineWidth=2,ae.beginPath();const de=r*ce;ae.moveTo(0,de),ae.lineTo(ne,de),ae.stroke()}};O.useEffect(()=>{N()},[a,t,r,l,o,h,v]);const V=J=>{const ae=S.current.getBoundingClientRect();return{x:(J.clientX-ae.left)/ae.width,y:(J.clientY-ae.top)/ae.height}},U=(J,ae,ne)=>{if(!ne)return null;const ce=.03;return Math.abs(J-ne.x)<ce&&Math.abs(ae-ne.y)<ce?"nw":Math.abs(J-(ne.x+ne.w))<ce&&Math.abs(ae-ne.y)<ce?"ne":Math.abs(J-ne.x)<ce&&Math.abs(ae-(ne.y+ne.h))<ce?"sw":Math.abs(J-(ne.x+ne.w))<ce&&Math.abs(ae-(ne.y+ne.h))<ce?"se":Math.abs(ae-ne.y)<ce&&J>=ne.x&&J<=ne.x+ne.w?"n":Math.abs(ae-(ne.y+ne.h))<ce&&J>=ne.x&&J<=ne.x+ne.w?"s":Math.abs(J-ne.x)<ce&&ae>=ne.y&&ae<=ne.y+ne.h?"w":Math.abs(J-(ne.x+ne.w))<ce&&ae>=ne.y&&ae<=ne.y+ne.h?"e":null},Y=(J,ae,ne)=>ne?J>=ne.x&&J<=ne.x+ne.w&&ae>=ne.y&&ae<=ne.y+ne.h:!1,Q=J=>{const{x:ae,y:ne}=V(J);if(h!==null&&a[h]){const ce=a[h],de=U(ae,ne,ce);if(de){C({type:"zone",index:h,handle:de,startX:ae,startY:ne,originalRect:{...ce}});return}}for(let ce=a.length-1;ce>=0;ce--){const de=a[ce];if(de&&Y(ae,ne,de)){m(ce);const re=U(ae,ne,de);C({type:"zone",index:ce,handle:re||"move",startX:ae,startY:ne,originalRect:{...de}});return}}if(o&&t){const ce=U(ae,ne,t);if(ce){C({type:"output",handle:ce,startX:ae,startY:ne,originalRect:{...t}}),m(null);return}if(Y(ae,ne,t)){C({type:"output",handle:"move",startX:ae,startY:ne,originalRect:{...t}}),m(null);return}}m(null)},ue=J=>{if(!x)return J;const ae=1/v;return Math.round(J/ae)*ae},Ee=J=>{if(!E)return;const{x:ae,y:ne}=V(J),ce=ae-E.startX,de=ne-E.startY,re=(ee,R,P,I)=>{let fe={...ee};if(R==="move")fe.x=ue(ee.x+P),fe.y=ue(ee.y+I);else{if(R.includes("w")){const T=ue(ee.x+P);fe.w=ee.x+ee.w-T,fe.x=T}if(R.includes("e")){const T=ue(ee.x+ee.w+P);fe.w=T-fe.x}if(R.includes("n")){const T=ue(ee.y+I);fe.h=ee.y+ee.h-T,fe.y=T}if(R.includes("s")){const T=ue(ee.y+ee.h+I);fe.h=T-fe.y}}return fe.w<.01&&(fe.w=.01),fe.h<.01&&(fe.h=.01),fe};if(E.type==="zone"){const ee=re(E.originalRect,E.handle,ce,de);f(E.index,ee)}else if(E.type==="output"){const ee=re(E.originalRect,E.handle,ce,de);p(ee)}},Se=()=>{C(null)};return g.jsx("div",{className:"output-canvas-container",style:{width:"100%",height:"100%"},children:g.jsx("canvas",{ref:S,width:600,height:600,style:{width:"100%",height:"100%",display:"block"},className:"output-canvas",onMouseDown:Q,onMouseMove:Ee,onMouseUp:Se,onMouseLeave:Se})})},ly=({show:a,onClose:t,dacs:r=[],dacSettings:l={},onUpdateDacSettings:o})=>{const[u,f]=O.useState(null),[p,h]=O.useState(null),[m,v]=O.useState(20),[x,S]=O.useState(!1),E=O.useMemo(()=>{const U=[];return r.forEach(Y=>{Y.channels&&Y.channels.length>0?Y.channels.forEach(Q=>{U.push({id:`${Y.ip}:${Q.serviceID}`,displayName:`${Y.hostName||Y.unitID||"DAC"} : ${Q.name||`CH ${Q.serviceID}`}`,ip:Y.ip,channel:Q.serviceID,dacName:Y.hostName||Y.unitID})}):U.push({id:`${Y.ip}:0`,displayName:Y.hostName||Y.unitID||`DAC ${Y.ip}`,ip:Y.ip,channel:0,dacName:Y.hostName||Y.unitID})}),U},[r]);if(O.useEffect(()=>{E.length>0&&!u&&f(E[0].id)},[E,u]),!a)return null;const C=l[u]||{safetyZones:[],outputArea:{x:.1,y:.1,w:.8,h:.8},transformationEnabled:!1,transformationMode:"crop",testLineEnabled:!1,testLineY:.5},D=U=>{u&&o(u,{...C,...U})},j=()=>{const U={x:.4,y:.4,w:.2,h:.2};D({safetyZones:[...C.safetyZones,U]}),h(C.safetyZones.length)},N=()=>{D({safetyZones:[]}),h(null)},V=(U,Y)=>{const Q=[...C.safetyZones];Q[U]=Y,D({safetyZones:Q})};return g.jsx("div",{className:"output-settings-modal-overlay",children:g.jsxs("div",{className:"output-settings-modal-content",children:[g.jsxs("div",{className:"output-settings-header",children:[g.jsx("h2",{children:"Output Settings"}),g.jsx("button",{className:"close-btn",onClick:t,children:"Close"})]}),g.jsxs("div",{className:"output-settings-body",children:[g.jsx("div",{className:"output-settings-col",children:g.jsxs("div",{className:"settings-group",children:[g.jsx("h4",{children:"Available Outputs"}),g.jsxs("ul",{className:"dac-list",children:[E.length===0?g.jsx("li",{style:{color:"#666",fontStyle:"italic"},children:"No Outputs detected"}):null,E.map((U,Y)=>g.jsxs("li",{className:`dac-list-item ${u===U.id?"selected":""}`,onClick:()=>f(U.id),children:[g.jsx("span",{style:{fontWeight:"bold",fontSize:"0.9em"},children:U.displayName}),g.jsx("span",{style:{fontSize:"0.7em",color:"#888"},children:U.ip})]},U.id))]})]})}),g.jsxs("div",{className:"output-settings-col canvas-col",children:[g.jsxs("div",{className:"canvas-toolbar",children:[g.jsx("button",{className:"tool-btn",onClick:j,title:"Add Safety Zone",children:"+ Zone"}),g.jsx("button",{className:`tool-btn ${C.transformationEnabled?"active":""}`,onClick:()=>D({transformationEnabled:!C.transformationEnabled}),title:"Toggle Output Transformation",children:""}),g.jsx("button",{className:`tool-btn ${C.testLineEnabled?"active":""}`,onClick:()=>D({testLineEnabled:!C.testLineEnabled}),title:"Toggle Test Line",children:"_"}),g.jsx("span",{style:{width:1,background:"#555",margin:"0 5px"}}),g.jsx("button",{className:`tool-btn ${x?"active":""}`,onClick:()=>S(!x),title:"Snap to Grid",children:""}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:5,marginLeft:5},children:[g.jsx("span",{style:{fontSize:10,color:"#aaa"},children:"Grid:"}),g.jsx("input",{type:"number",min:"5",max:"100",value:m,onChange:U=>v(parseInt(U.target.value)),className:"param-number-input",style:{width:40}})]})]}),g.jsx(iy,{safetyZones:C.safetyZones,outputArea:C.outputArea,testLineY:C.testLineY,testLineEnabled:C.testLineEnabled,transformationEnabled:C.transformationEnabled,transformationMode:C.transformationMode,onUpdateSafetyZones:V,onUpdateOutputArea:U=>D({outputArea:U}),selectedZoneIndex:p,onSelectZone:h,gridSize:m,snapToGrid:x})]}),g.jsx("div",{className:"output-settings-col",children:u?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"settings-group",children:[g.jsx("h4",{children:"Output Transformation"}),g.jsxs("div",{className:"control-row",style:{marginBottom:10},children:[g.jsx("label",{style:{flex:1},children:"Enable Editing"}),g.jsx("input",{type:"checkbox",checked:C.transformationEnabled,onChange:U=>D({transformationEnabled:U.target.checked})})]}),C.transformationEnabled&&g.jsxs("div",{className:"control-row",children:[g.jsx("label",{style:{flex:1},children:"Mode"}),g.jsxs("select",{className:"param-select",value:C.transformationMode,onChange:U=>D({transformationMode:U.target.value}),children:[g.jsx("option",{value:"crop",children:"Crop"}),g.jsx("option",{value:"scale",children:"Scale"})]})]})]}),g.jsxs("div",{className:"settings-group",children:[g.jsx("h4",{children:"Safety Zones"}),g.jsxs("div",{className:"control-row",style:{justifyContent:"space-between",marginBottom:5},children:[g.jsx("button",{className:"small-btn",onClick:j,children:"Add New"}),g.jsx("button",{className:"small-btn clear",onClick:N,children:"Clear All"})]}),g.jsx("div",{className:"zone-list",children:C.safetyZones.map((U,Y)=>g.jsxs("div",{className:`zone-item ${p===Y?"selected":""}`,onClick:()=>h(Y),children:[g.jsxs("span",{children:["Zone ",Y+1]}),g.jsx("button",{className:"delete-zone-btn",onClick:Q=>{Q.stopPropagation(),p===Y&&h(null);const ue=C.safetyZones.filter((Ee,Se)=>Se!==Y);D({safetyZones:ue})},children:""})]},Y))}),p!==null&&g.jsxs("div",{style:{marginTop:10,borderTop:"1px solid #333",paddingTop:5},children:[g.jsx("label",{children:"Selected Zone Properties"}),g.jsx("div",{style:{fontSize:"0.8em",color:"#aaa"},children:"Select and drag zone on canvas to resize."})]})]}),g.jsxs("div",{className:"settings-group",children:[g.jsx("h4",{children:"Test Output"}),g.jsxs("div",{className:"control-row",style:{marginBottom:10},children:[g.jsx("label",{style:{flex:1},children:"Enable Test Line"}),g.jsx("input",{type:"checkbox",checked:C.testLineEnabled,onChange:U=>D({testLineEnabled:U.target.checked})})]}),C.testLineEnabled&&g.jsxs("div",{className:"control-row",children:[g.jsx("label",{children:"Y Position"}),g.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:C.testLineY,onChange:U=>D({testLineY:parseFloat(U.target.value)}),className:"param-slider"})]})]})]}):g.jsx("div",{style:{padding:20,textAlign:"center",color:"#666"},children:"Select an Output to configure settings"})})]})]})})};class sy extends ir.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){console.error("Uncaught error:",t,r)}render(){return this.state.hasError?g.jsx("h1",{children:"Something went wrong."}):this.props.children}}const y0=O.createContext(null),oy=()=>O.useContext(y0),uy=({children:a})=>{const[t,r]=O.useState(null);return O.useEffect(()=>{if(!t){const l=new Worker(new URL(""+new URL("ilda-parser.worker-VgVoWU9i.js",import.meta.url).href,import.meta.url));r(l)}return()=>{t&&t.terminate()}},[t]),g.jsx(y0.Provider,{value:t,children:a})},b0=O.createContext(null),cy=({children:a})=>{const t=O.useMemo(()=>{try{const r=new Worker(new URL(""+new URL("generators.worker-6MtbyBrw.js",import.meta.url).href,import.meta.url),{type:"module"});return r.onerror=l=>{console.error("Generator Worker instantiation or internal error:",l)},r}catch(r){return console.error("Failed to create Generator Worker:",r),null}},[]);return O.useEffect(()=>{if(t)return()=>{t.terminate()}},[t]),g.jsx(b0.Provider,{value:t,children:a})},fy=()=>{const a=O.useContext(b0);if(a===void 0)throw new Error("useGeneratorWorker must be used within a GeneratorWorkerProvider");return a},dy=()=>{const[a,t]=O.useState([]),[r,l]=O.useState("default"),o=O.useRef({}),u=O.useCallback(async()=>{try{const V=(await navigator.mediaDevices.enumerateDevices()).filter(U=>U.kind==="audiooutput");if(t(V),window.electronAPI&&window.electronAPI.setAudioDevices){const U=V.map(Y=>({deviceId:Y.deviceId,label:Y.label,groupId:Y.groupId}));window.electronAPI.setAudioDevices(U)}}catch(N){console.error("Error enumerating audio devices:",N)}},[]);O.useEffect(()=>{u();let N;return window.electronAPI&&window.electronAPI.onUpdateAudioDeviceId&&(N=window.electronAPI.onUpdateAudioDeviceId(V=>{l(V)})),navigator.mediaDevices.addEventListener("devicechange",u),()=>{navigator.mediaDevices.removeEventListener("devicechange",u),N&&N()}},[u]);const f=O.useCallback(async(N,V,U=!0)=>{if(o.current[N]&&(o.current[N].pause(),o.current[N].src="",delete o.current[N]),!V)return;const Y=new Audio(`file://${V}`);if(r&&Y.setSinkId)try{await Y.setSinkId(r)}catch(Q){console.error("Error setting audio sink ID:",Q)}if(o.current[N]=Y,U)try{await Y.play()}catch(Q){console.error("Error playing audio:",Q)}return Y},[r]),p=O.useCallback(N=>{o.current[N]&&(o.current[N].pause(),o.current[N].src="",delete o.current[N])},[]),h=O.useCallback(N=>{o.current[N]&&o.current[N].pause()},[]),m=O.useCallback(async N=>{if(o.current[N]&&o.current[N].paused)try{await o.current[N].play()}catch(V){console.error("Error resuming audio:",V)}},[]),v=O.useCallback(N=>{const V=Math.max(.0625,Math.min(N,16));Object.values(o.current).forEach(U=>{try{U.playbackRate=V}catch(Y){console.warn("Failed to set playbackRate:",Y)}})},[]),x=O.useCallback(N=>{o.current[N]&&(o.current[N].currentTime=0)},[]),S=O.useCallback(()=>{Object.keys(o.current).forEach(N=>{p(N)})},[p]),E=O.useCallback(()=>{Object.keys(o.current).forEach(N=>{h(N)})},[h]),C=O.useCallback(()=>{Object.keys(o.current).forEach(N=>{m(N)})},[m]),D=O.useCallback(()=>{Object.keys(o.current).forEach(N=>{x(N)})},[x]),j=O.useCallback(N=>{const V=o.current[N];return V?{currentTime:V.currentTime,duration:V.duration,paused:V.paused}:null},[]);return{devices:a,selectedDeviceId:r,setSelectedDeviceId:l,playAudio:f,stopAudio:p,pauseAudio:h,resumeAudio:m,setPlaybackRate:v,resetAudio:x,stopAllAudio:S,pauseAllAudio:E,resumeAllAudio:C,resetAllAudio:D,getAudioInfo:j}};var hy=o0();const py=_c(hy),my=()=>{const{isMapping:a,mappings:t,learningId:r}=lo(),{isMapping:l,mappings:o,learningId:u}=Lc()||{},f=a||l,[p,h]=O.useState([]),m=O.useCallback(()=>{if(!f)return;const v=document.querySelectorAll("[data-mappable-id]"),x=Array.from(v).map(S=>{const E=S.getBoundingClientRect();return{id:S.getAttribute("data-mappable-id"),rect:{top:E.top,left:E.left,width:E.width,height:E.height}}});h(x)},[f]);return O.useEffect(()=>{if(f){m(),window.addEventListener("resize",m);const v=setTimeout(m,100);return()=>{window.removeEventListener("resize",m),clearTimeout(v)}}else h([])},[f,m]),f?py.createPortal(g.jsx("div",{className:"midi-mapping-global-overlay-container",children:p.map(v=>{const x=t[v.id],S=o?o[v.id]:null,E=a&&r===v.id||l&&u===v.id;let C=null;return a?C=x?x.label:null:l&&(C=S?S.label:null),g.jsx("div",{className:`midi-mapping-label-box ${E?"learning":""} ${C?"mapped":""} ${l?"artnet-mapping":""}`,style:{position:"fixed",top:v.rect.top,left:v.rect.left,width:v.rect.width,height:v.rect.height,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:g.jsx("div",{className:"mapping-label",children:C||"+"})},v.id)})}),document.body):null};/*! https://mths.be/codepointat v0.2.0 by @mathias */String.prototype.codePointAt||(function(){var a=(function(){try{var r={},l=Object.defineProperty,o=l(r,r,r)&&l}catch{}return o})(),t=function(r){if(this==null)throw TypeError();var l=String(this),o=l.length,u=r?Number(r):0;if(u!=u&&(u=0),!(u<0||u>=o)){var f=l.charCodeAt(u),p;return f>=55296&&f<=56319&&o>u+1&&(p=l.charCodeAt(u+1),p>=56320&&p<=57343)?(f-55296)*1024+p-56320+65536:f}};a?a(String.prototype,"codePointAt",{value:t,configurable:!0,writable:!0}):String.prototype.codePointAt=t})();function S0(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}var vy=new S0,gy=new S0,x0=new Uint8Array(30),E0=new Uint16Array(30),yy=new Uint8Array(30),by=new Uint16Array(30);function T0(a,t,r,l){var o,u;for(o=0;o<r;++o)a[o]=0;for(o=0;o<30-r;++o)a[o+r]=o/r|0;for(u=l,o=0;o<30;++o)t[o]=u,u+=1<<a[o]}function Sy(a,t){var r;for(r=0;r<7;++r)a.table[r]=0;for(a.table[7]=24,a.table[8]=152,a.table[9]=112,r=0;r<24;++r)a.trans[r]=256+r;for(r=0;r<144;++r)a.trans[24+r]=r;for(r=0;r<8;++r)a.trans[168+r]=280+r;for(r=0;r<112;++r)a.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}Sy(vy,gy);T0(x0,E0,4,3);T0(yy,by,2,1);x0[28]=0;E0[28]=258;function mi(a,t,r,l,o){return Math.pow(1-o,3)*a+3*Math.pow(1-o,2)*o*t+3*(1-o)*Math.pow(o,2)*r+Math.pow(o,3)*l}function sr(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}sr.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};sr.prototype.addPoint=function(a,t){typeof a=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=a,this.x2=a),a<this.x1&&(this.x1=a),a>this.x2&&(this.x2=a)),typeof t=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))};sr.prototype.addX=function(a){this.addPoint(a,null)};sr.prototype.addY=function(a){this.addPoint(null,a)};sr.prototype.addBezier=function(a,t,r,l,o,u,f,p){var h=[a,t],m=[r,l],v=[o,u],x=[f,p];this.addPoint(a,t),this.addPoint(f,p);for(var S=0;S<=1;S++){var E=6*h[S]-12*m[S]+6*v[S],C=-3*h[S]+9*m[S]-9*v[S]+3*x[S],D=3*m[S]-3*h[S];if(C===0){if(E===0)continue;var j=-D/E;0<j&&j<1&&(S===0&&this.addX(mi(h[S],m[S],v[S],x[S],j)),S===1&&this.addY(mi(h[S],m[S],v[S],x[S],j)));continue}var N=Math.pow(E,2)-4*D*C;if(!(N<0)){var V=(-E+Math.sqrt(N))/(2*C);0<V&&V<1&&(S===0&&this.addX(mi(h[S],m[S],v[S],x[S],V)),S===1&&this.addY(mi(h[S],m[S],v[S],x[S],V)));var U=(-E-Math.sqrt(N))/(2*C);0<U&&U<1&&(S===0&&this.addX(mi(h[S],m[S],v[S],x[S],U)),S===1&&this.addY(mi(h[S],m[S],v[S],x[S],U)))}}};sr.prototype.addQuad=function(a,t,r,l,o,u){var f=a+.6666666666666666*(r-a),p=t+2/3*(l-t),h=f+1/3*(o-a),m=p+1/3*(u-t);this.addBezier(a,t,f,p,h,m,o,u)};function Gt(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}Gt.prototype.moveTo=function(a,t){this.commands.push({type:"M",x:a,y:t})};Gt.prototype.lineTo=function(a,t){this.commands.push({type:"L",x:a,y:t})};Gt.prototype.curveTo=Gt.prototype.bezierCurveTo=function(a,t,r,l,o,u){this.commands.push({type:"C",x1:a,y1:t,x2:r,y2:l,x:o,y:u})};Gt.prototype.quadTo=Gt.prototype.quadraticCurveTo=function(a,t,r,l){this.commands.push({type:"Q",x1:a,y1:t,x:r,y:l})};Gt.prototype.close=Gt.prototype.closePath=function(){this.commands.push({type:"Z"})};Gt.prototype.extend=function(a){if(a.commands)a=a.commands;else if(a instanceof sr){var t=a;this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),this.close();return}Array.prototype.push.apply(this.commands,a)};Gt.prototype.getBoundingBox=function(){for(var a=new sr,t=0,r=0,l=0,o=0,u=0;u<this.commands.length;u++){var f=this.commands[u];switch(f.type){case"M":a.addPoint(f.x,f.y),t=l=f.x,r=o=f.y;break;case"L":a.addPoint(f.x,f.y),l=f.x,o=f.y;break;case"Q":a.addQuad(l,o,f.x1,f.y1,f.x,f.y),l=f.x,o=f.y;break;case"C":a.addBezier(l,o,f.x1,f.y1,f.x2,f.y2,f.x,f.y),l=f.x,o=f.y;break;case"Z":l=t,o=r;break;default:throw new Error("Unexpected path command "+f.type)}}return a.isEmpty()&&a.addPoint(0,0),a};Gt.prototype.draw=function(a){a.beginPath();for(var t=0;t<this.commands.length;t+=1){var r=this.commands[t];r.type==="M"?a.moveTo(r.x,r.y):r.type==="L"?a.lineTo(r.x,r.y):r.type==="C"?a.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):r.type==="Q"?a.quadraticCurveTo(r.x1,r.y1,r.x,r.y):r.type==="Z"&&a.closePath()}this.fill&&(a.fillStyle=this.fill,a.fill()),this.stroke&&(a.strokeStyle=this.stroke,a.lineWidth=this.strokeWidth,a.stroke())};Gt.prototype.toPathData=function(a){a=a!==void 0?a:2;function t(f){return Math.round(f)===f?""+Math.round(f):f.toFixed(a)}function r(){for(var f=arguments,p="",h=0;h<arguments.length;h+=1){var m=f[h];m>=0&&h>0&&(p+=" "),p+=t(m)}return p}for(var l="",o=0;o<this.commands.length;o+=1){var u=this.commands[o];u.type==="M"?l+="M"+r(u.x,u.y):u.type==="L"?l+="L"+r(u.x,u.y):u.type==="C"?l+="C"+r(u.x1,u.y1,u.x2,u.y2,u.x,u.y):u.type==="Q"?l+="Q"+r(u.x1,u.y1,u.x,u.y):u.type==="Z"&&(l+="Z")}return l};Gt.prototype.toSVG=function(a){var t='<path d="';return t+=this.toPathData(a),t+='"',this.fill&&this.fill!=="black"&&(this.fill===null?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>",t};Gt.prototype.toDOMElement=function(a){var t=this.toPathData(a),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r};function A0(a){throw new Error(a)}function Tp(a,t){a||A0(t)}var De={fail:A0,argument:Tp,assert:Tp},Ap=32768,Cp=2147483648,yi={},he={},we={};function Xn(a){return function(){return a}}he.BYTE=function(a){return De.argument(a>=0&&a<=255,"Byte value should be between 0 and 255."),[a]};we.BYTE=Xn(1);he.CHAR=function(a){return[a.charCodeAt(0)]};we.CHAR=Xn(1);he.CHARARRAY=function(a){typeof a>"u"&&(a="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var t=[],r=0;r<a.length;r+=1)t[r]=a.charCodeAt(r);return t};we.CHARARRAY=function(a){return typeof a>"u"?0:a.length};he.USHORT=function(a){return[a>>8&255,a&255]};we.USHORT=Xn(2);he.SHORT=function(a){return a>=Ap&&(a=-(2*Ap-a)),[a>>8&255,a&255]};we.SHORT=Xn(2);he.UINT24=function(a){return[a>>16&255,a>>8&255,a&255]};we.UINT24=Xn(3);he.ULONG=function(a){return[a>>24&255,a>>16&255,a>>8&255,a&255]};we.ULONG=Xn(4);he.LONG=function(a){return a>=Cp&&(a=-(2*Cp-a)),[a>>24&255,a>>16&255,a>>8&255,a&255]};we.LONG=Xn(4);he.FIXED=he.ULONG;we.FIXED=we.ULONG;he.FWORD=he.SHORT;we.FWORD=we.SHORT;he.UFWORD=he.USHORT;we.UFWORD=we.USHORT;he.LONGDATETIME=function(a){return[0,0,0,0,a>>24&255,a>>16&255,a>>8&255,a&255]};we.LONGDATETIME=Xn(8);he.TAG=function(a){return De.argument(a.length===4,"Tag should be exactly 4 ASCII characters."),[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]};we.TAG=Xn(4);he.Card8=he.BYTE;we.Card8=we.BYTE;he.Card16=he.USHORT;we.Card16=we.USHORT;he.OffSize=he.BYTE;we.OffSize=we.BYTE;he.SID=he.USHORT;we.SID=we.USHORT;he.NUMBER=function(a){return a>=-107&&a<=107?[a+139]:a>=108&&a<=1131?(a=a-108,[(a>>8)+247,a&255]):a>=-1131&&a<=-108?(a=-a-108,[(a>>8)+251,a&255]):a>=-32768&&a<=32767?he.NUMBER16(a):he.NUMBER32(a)};we.NUMBER=function(a){return he.NUMBER(a).length};he.NUMBER16=function(a){return[28,a>>8&255,a&255]};we.NUMBER16=Xn(3);he.NUMBER32=function(a){return[29,a>>24&255,a>>16&255,a>>8&255,a&255]};we.NUMBER32=Xn(5);he.REAL=function(a){var t=a.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(r){var l=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));t=(Math.round(a*l)/l).toString()}for(var o="",u=0,f=t.length;u<f;u+=1){var p=t[u];p==="e"?o+=t[++u]==="-"?"c":"b":p==="."?o+="a":p==="-"?o+="e":o+=p}o+=o.length&1?"f":"ff";for(var h=[30],m=0,v=o.length;m<v;m+=2)h.push(parseInt(o.substr(m,2),16));return h};we.REAL=function(a){return he.REAL(a).length};he.NAME=he.CHARARRAY;we.NAME=we.CHARARRAY;he.STRING=he.CHARARRAY;we.STRING=we.CHARARRAY;yi.UTF8=function(a,t,r){for(var l=[],o=r,u=0;u<o;u++,t+=1)l[u]=a.getUint8(t);return String.fromCharCode.apply(null,l)};yi.UTF16=function(a,t,r){for(var l=[],o=r/2,u=0;u<o;u++,t+=2)l[u]=a.getUint16(t);return String.fromCharCode.apply(null,l)};he.UTF16=function(a){for(var t=[],r=0;r<a.length;r+=1){var l=a.charCodeAt(r);t[t.length]=l>>8&255,t[t.length]=l&255}return t};we.UTF16=function(a){return a.length*2};var Cc={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};yi.MACSTRING=function(a,t,r,l){var o=Cc[l];if(o!==void 0){for(var u="",f=0;f<r;f++){var p=a.getUint8(t+f);p<=127?u+=String.fromCharCode(p):u+=o[p&127]}return u}};var Vs=typeof WeakMap=="function"&&new WeakMap,Xs,xy=function(a){if(!Xs){Xs={};for(var t in Cc)Xs[t]=new String(t)}var r=Xs[a];if(r!==void 0){if(Vs){var l=Vs.get(r);if(l!==void 0)return l}var o=Cc[a];if(o!==void 0){for(var u={},f=0;f<o.length;f++)u[o.charCodeAt(f)]=f+128;return Vs&&Vs.set(r,u),u}}};he.MACSTRING=function(a,t){var r=xy(t);if(r!==void 0){for(var l=[],o=0;o<a.length;o++){var u=a.charCodeAt(o);if(u>=128&&(u=r[u],u===void 0))return;l[o]=u}return l}};we.MACSTRING=function(a,t){var r=he.MACSTRING(a,t);return r!==void 0?r.length:0};function Nc(a){return a>=-128&&a<=127}function Ey(a,t,r){for(var l=0,o=a.length;t<o&&l<64&&a[t]===0;)++t,++l;return r.push(128|l-1),t}function Ty(a,t,r){for(var l=0,o=a.length,u=t;u<o&&l<64;){var f=a[u];if(!Nc(f)||f===0&&u+1<o&&a[u+1]===0)break;++u,++l}r.push(l-1);for(var p=t;p<u;++p)r.push(a[p]+256&255);return u}function Ay(a,t,r){for(var l=0,o=a.length,u=t;u<o&&l<64;){var f=a[u];if(f===0||Nc(f)&&u+1<o&&Nc(a[u+1]))break;++u,++l}r.push(64|l-1);for(var p=t;p<u;++p){var h=a[p];r.push(h+65536>>8&255,h+256&255)}return u}he.VARDELTAS=function(a){for(var t=0,r=[];t<a.length;){var l=a[t];l===0?t=Ey(a,t,r):l>=-128&&l<=127?t=Ty(a,t,r):t=Ay(a,t,r)}return r};he.INDEX=function(a){for(var t=1,r=[t],l=[],o=0;o<a.length;o+=1){var u=he.OBJECT(a[o]);Array.prototype.push.apply(l,u),t+=u.length,r.push(t)}if(l.length===0)return[0,0];for(var f=[],p=1+Math.floor(Math.log(t)/Math.log(2))/8|0,h=[void 0,he.BYTE,he.USHORT,he.UINT24,he.ULONG][p],m=0;m<r.length;m+=1){var v=h(r[m]);Array.prototype.push.apply(f,v)}return Array.prototype.concat(he.Card16(a.length),he.OffSize(p),f,l)};we.INDEX=function(a){return he.INDEX(a).length};he.DICT=function(a){for(var t=[],r=Object.keys(a),l=r.length,o=0;o<l;o+=1){var u=parseInt(r[o],0),f=a[u];t=t.concat(he.OPERAND(f.value,f.type)),t=t.concat(he.OPERATOR(u))}return t};we.DICT=function(a){return he.DICT(a).length};he.OPERATOR=function(a){return a<1200?[a]:[12,a-1200]};he.OPERAND=function(a,t){var r=[];if(Array.isArray(t))for(var l=0;l<t.length;l+=1)De.argument(a.length===t.length,"Not enough arguments given for type"+t),r=r.concat(he.OPERAND(a[l],t[l]));else if(t==="SID")r=r.concat(he.NUMBER(a));else if(t==="offset")r=r.concat(he.NUMBER32(a));else if(t==="number")r=r.concat(he.NUMBER(a));else if(t==="real")r=r.concat(he.REAL(a));else throw new Error("Unknown operand type "+t);return r};he.OP=he.BYTE;we.OP=we.BYTE;var Zs=typeof WeakMap=="function"&&new WeakMap;he.CHARSTRING=function(a){if(Zs){var t=Zs.get(a);if(t!==void 0)return t}for(var r=[],l=a.length,o=0;o<l;o+=1){var u=a[o];r=r.concat(he[u.type](u.value))}return Zs&&Zs.set(a,r),r};we.CHARSTRING=function(a){return he.CHARSTRING(a).length};he.OBJECT=function(a){var t=he[a.type];return De.argument(t!==void 0,"No encoding function for type "+a.type),t(a.value)};we.OBJECT=function(a){var t=we[a.type];return De.argument(t!==void 0,"No sizeOf function for type "+a.type),t(a.value)};he.TABLE=function(a){for(var t=[],r=a.fields.length,l=[],o=[],u=0;u<r;u+=1){var f=a.fields[u],p=he[f.type];De.argument(p!==void 0,"No encoding function for field type "+f.type+" ("+f.name+")");var h=a[f.name];h===void 0&&(h=f.value);var m=p(h);f.type==="TABLE"?(o.push(t.length),t=t.concat([0,0]),l.push(m)):t=t.concat(m)}for(var v=0;v<l.length;v+=1){var x=o[v],S=t.length;De.argument(S<65536,"Table "+a.tableName+" too big."),t[x]=S>>8,t[x+1]=S&255,t=t.concat(l[v])}return t};we.TABLE=function(a){for(var t=0,r=a.fields.length,l=0;l<r;l+=1){var o=a.fields[l],u=we[o.type];De.argument(u!==void 0,"No sizeOf function for field type "+o.type+" ("+o.name+")");var f=a[o.name];f===void 0&&(f=o.value),t+=u(f),o.type==="TABLE"&&(t+=2)}return t};he.RECORD=he.TABLE;we.RECORD=we.TABLE;he.LITERAL=function(a){return a};we.LITERAL=function(a){return a.length};function Yt(a,t,r){if(t.length&&(t[0].name!=="coverageFormat"||t[0].value===1))for(var l=0;l<t.length;l+=1){var o=t[l];this[o.name]=o.value}if(this.tableName=a,this.fields=t,r)for(var u=Object.keys(r),f=0;f<u.length;f+=1){var p=u[f],h=r[p];this[p]!==void 0&&(this[p]=h)}}Yt.prototype.encode=function(){return he.TABLE(this)};Yt.prototype.sizeOf=function(){return we.TABLE(this)};function Rl(a,t,r){r===void 0&&(r=t.length);var l=new Array(t.length+1);l[0]={name:a+"Count",type:"USHORT",value:r};for(var o=0;o<t.length;o++)l[o+1]={name:a+o,type:"USHORT",value:t[o]};return l}function Mc(a,t,r){var l=t.length,o=new Array(l+1);o[0]={name:a+"Count",type:"USHORT",value:l};for(var u=0;u<l;u++)o[u+1]={name:a+u,type:"TABLE",value:r(t[u],u)};return o}function wl(a,t,r){var l=t.length,o=[];o[0]={name:a+"Count",type:"USHORT",value:l};for(var u=0;u<l;u++)o=o.concat(r(t[u],u));return o}function eo(a){a.format===1?Yt.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Rl("glyph",a.glyphs))):a.format===2?Yt.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(wl("rangeRecord",a.ranges,function(t){return[{name:"startGlyphID",type:"USHORT",value:t.start},{name:"endGlyphID",type:"USHORT",value:t.end},{name:"startCoverageIndex",type:"USHORT",value:t.index}]}))):De.assert(!1,"Coverage format must be 1 or 2.")}eo.prototype=Object.create(Yt.prototype);eo.prototype.constructor=eo;function to(a){Yt.call(this,"scriptListTable",wl("scriptRecord",a,function(t,r){var l=t.script,o=l.defaultLangSys;return De.assert(!!o,"Unable to write GSUB: script "+t.tag+" has no default language system."),[{name:"scriptTag"+r,type:"TAG",value:t.tag},{name:"script"+r,type:"TABLE",value:new Yt("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Yt("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:o.reqFeatureIndex}].concat(Rl("featureIndex",o.featureIndexes)))}].concat(wl("langSys",l.langSysRecords,function(u,f){var p=u.langSys;return[{name:"langSysTag"+f,type:"TAG",value:u.tag},{name:"langSys"+f,type:"TABLE",value:new Yt("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:p.reqFeatureIndex}].concat(Rl("featureIndex",p.featureIndexes)))}]})))}]}))}to.prototype=Object.create(Yt.prototype);to.prototype.constructor=to;function no(a){Yt.call(this,"featureListTable",wl("featureRecord",a,function(t,r){var l=t.feature;return[{name:"featureTag"+r,type:"TAG",value:t.tag},{name:"feature"+r,type:"TABLE",value:new Yt("featureTable",[{name:"featureParams",type:"USHORT",value:l.featureParams}].concat(Rl("lookupListIndex",l.lookupListIndexes)))}]}))}no.prototype=Object.create(Yt.prototype);no.prototype.constructor=no;function ao(a,t){Yt.call(this,"lookupListTable",Mc("lookup",a,function(r){var l=t[r.lookupType];return De.assert(!!l,"Unable to write GSUB lookup type "+r.lookupType+" tables."),new Yt("lookupTable",[{name:"lookupType",type:"USHORT",value:r.lookupType},{name:"lookupFlag",type:"USHORT",value:r.lookupFlag}].concat(Mc("subtable",r.subtables,l)))}))}ao.prototype=Object.create(Yt.prototype);ao.prototype.constructor=ao;var be={Table:Yt,Record:Yt,Coverage:eo,ScriptList:to,FeatureList:no,LookupList:ao,ushortList:Rl,tableList:Mc,recordList:wl};function Np(a,t){return a.getUint8(t)}function ro(a,t){return a.getUint16(t,!1)}function Cy(a,t){return a.getInt16(t,!1)}function kc(a,t){return a.getUint32(t,!1)}function C0(a,t){var r=a.getInt16(t,!1),l=a.getUint16(t+2,!1);return r+l/65535}function Ny(a,t){for(var r="",l=t;l<t+4;l+=1)r+=String.fromCharCode(a.getInt8(l));return r}function My(a,t,r){for(var l=0,o=0;o<r;o+=1)l<<=8,l+=a.getUint8(t+o);return l}function Ry(a,t,r){for(var l=[],o=t;o<r;o+=1)l.push(a.getUint8(o));return l}function wy(a){for(var t="",r=0;r<a.length;r+=1)t+=String.fromCharCode(a[r]);return t}var Oy={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function q(a,t){this.data=a,this.offset=t,this.relativeOffset=0}q.prototype.parseByte=function(){var a=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,a};q.prototype.parseChar=function(){var a=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,a};q.prototype.parseCard8=q.prototype.parseByte;q.prototype.parseUShort=function(){var a=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,a};q.prototype.parseCard16=q.prototype.parseUShort;q.prototype.parseSID=q.prototype.parseUShort;q.prototype.parseOffset16=q.prototype.parseUShort;q.prototype.parseShort=function(){var a=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,a};q.prototype.parseF2Dot14=function(){var a=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,a};q.prototype.parseULong=function(){var a=kc(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a};q.prototype.parseOffset32=q.prototype.parseULong;q.prototype.parseFixed=function(){var a=C0(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,a};q.prototype.parseString=function(a){var t=this.data,r=this.offset+this.relativeOffset,l="";this.relativeOffset+=a;for(var o=0;o<a;o++)l+=String.fromCharCode(t.getUint8(r+o));return l};q.prototype.parseTag=function(){return this.parseString(4)};q.prototype.parseLongDateTime=function(){var a=kc(this.data,this.offset+this.relativeOffset+4);return a-=2082844800,this.relativeOffset+=8,a};q.prototype.parseVersion=function(a){var t=ro(this.data,this.offset+this.relativeOffset),r=ro(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,a===void 0&&(a=4096),t+r/a/10};q.prototype.skip=function(a,t){t===void 0&&(t=1),this.relativeOffset+=Oy[a]*t};q.prototype.parseULongList=function(a){a===void 0&&(a=this.parseULong());for(var t=new Array(a),r=this.data,l=this.offset+this.relativeOffset,o=0;o<a;o++)t[o]=r.getUint32(l),l+=4;return this.relativeOffset+=a*4,t};q.prototype.parseOffset16List=q.prototype.parseUShortList=function(a){a===void 0&&(a=this.parseUShort());for(var t=new Array(a),r=this.data,l=this.offset+this.relativeOffset,o=0;o<a;o++)t[o]=r.getUint16(l),l+=2;return this.relativeOffset+=a*2,t};q.prototype.parseShortList=function(a){for(var t=new Array(a),r=this.data,l=this.offset+this.relativeOffset,o=0;o<a;o++)t[o]=r.getInt16(l),l+=2;return this.relativeOffset+=a*2,t};q.prototype.parseByteList=function(a){for(var t=new Array(a),r=this.data,l=this.offset+this.relativeOffset,o=0;o<a;o++)t[o]=r.getUint8(l++);return this.relativeOffset+=a,t};q.prototype.parseList=function(a,t){t||(t=a,a=this.parseUShort());for(var r=new Array(a),l=0;l<a;l++)r[l]=t.call(this);return r};q.prototype.parseList32=function(a,t){t||(t=a,a=this.parseULong());for(var r=new Array(a),l=0;l<a;l++)r[l]=t.call(this);return r};q.prototype.parseRecordList=function(a,t){t||(t=a,a=this.parseUShort());for(var r=new Array(a),l=Object.keys(t),o=0;o<a;o++){for(var u={},f=0;f<l.length;f++){var p=l[f],h=t[p];u[p]=h.call(this)}r[o]=u}return r};q.prototype.parseRecordList32=function(a,t){t||(t=a,a=this.parseULong());for(var r=new Array(a),l=Object.keys(t),o=0;o<a;o++){for(var u={},f=0;f<l.length;f++){var p=l[f],h=t[p];u[p]=h.call(this)}r[o]=u}return r};q.prototype.parseStruct=function(a){if(typeof a=="function")return a.call(this);for(var t=Object.keys(a),r={},l=0;l<t.length;l++){var o=t[l],u=a[o];r[o]=u.call(this)}return r};q.prototype.parseValueRecord=function(a){if(a===void 0&&(a=this.parseUShort()),a!==0){var t={};return a&1&&(t.xPlacement=this.parseShort()),a&2&&(t.yPlacement=this.parseShort()),a&4&&(t.xAdvance=this.parseShort()),a&8&&(t.yAdvance=this.parseShort()),a&16&&(t.xPlaDevice=void 0,this.parseShort()),a&32&&(t.yPlaDevice=void 0,this.parseShort()),a&64&&(t.xAdvDevice=void 0,this.parseShort()),a&128&&(t.yAdvDevice=void 0,this.parseShort()),t}};q.prototype.parseValueRecordList=function(){for(var a=this.parseUShort(),t=this.parseUShort(),r=new Array(t),l=0;l<t;l++)r[l]=this.parseValueRecord(a);return r};q.prototype.parsePointer=function(a){var t=this.parseOffset16();if(t>0)return new q(this.data,this.offset+t).parseStruct(a)};q.prototype.parsePointer32=function(a){var t=this.parseOffset32();if(t>0)return new q(this.data,this.offset+t).parseStruct(a)};q.prototype.parseListOfLists=function(a){for(var t=this.parseOffset16List(),r=t.length,l=this.relativeOffset,o=new Array(r),u=0;u<r;u++){var f=t[u];if(f===0){o[u]=void 0;continue}if(this.relativeOffset=f,a){for(var p=this.parseOffset16List(),h=new Array(p.length),m=0;m<p.length;m++)this.relativeOffset=f+p[m],h[m]=a.call(this);o[u]=h}else o[u]=this.parseUShortList()}return this.relativeOffset=l,o};q.prototype.parseCoverage=function(){var a=this.offset+this.relativeOffset,t=this.parseUShort(),r=this.parseUShort();if(t===1)return{format:1,glyphs:this.parseUShortList(r)};if(t===2){for(var l=new Array(r),o=0;o<r;o++)l[o]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:l}}throw new Error("0x"+a.toString(16)+": Coverage format must be 1 or 2.")};q.prototype.parseClassDef=function(){var a=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(t===2)return{format:2,ranges:this.parseRecordList({start:q.uShort,end:q.uShort,classId:q.uShort})};throw new Error("0x"+a.toString(16)+": ClassDef format must be 1 or 2.")};q.list=function(a,t){return function(){return this.parseList(a,t)}};q.list32=function(a,t){return function(){return this.parseList32(a,t)}};q.recordList=function(a,t){return function(){return this.parseRecordList(a,t)}};q.recordList32=function(a,t){return function(){return this.parseRecordList32(a,t)}};q.pointer=function(a){return function(){return this.parsePointer(a)}};q.pointer32=function(a){return function(){return this.parsePointer32(a)}};q.tag=q.prototype.parseTag;q.byte=q.prototype.parseByte;q.uShort=q.offset16=q.prototype.parseUShort;q.uShortList=q.prototype.parseUShortList;q.uLong=q.offset32=q.prototype.parseULong;q.uLongList=q.prototype.parseULongList;q.struct=q.prototype.parseStruct;q.coverage=q.prototype.parseCoverage;q.classDef=q.prototype.parseClassDef;var Mp={reserved:q.uShort,reqFeatureIndex:q.uShort,featureIndexes:q.uShortList};q.prototype.parseScriptList=function(){return this.parsePointer(q.recordList({tag:q.tag,script:q.pointer({defaultLangSys:q.pointer(Mp),langSysRecords:q.recordList({tag:q.tag,langSys:q.pointer(Mp)})})}))||[]};q.prototype.parseFeatureList=function(){return this.parsePointer(q.recordList({tag:q.tag,feature:q.pointer({featureParams:q.offset16,lookupListIndexes:q.uShortList})}))||[]};q.prototype.parseLookupList=function(a){return this.parsePointer(q.list(q.pointer(function(){var t=this.parseUShort();De.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var r=this.parseUShort(),l=r&16;return{lookupType:t,lookupFlag:r,subtables:this.parseList(q.pointer(a[t])),markFilteringSet:l?this.parseUShort():void 0}})))||[]};q.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var a=this.parseUShort(),t=this.parseUShort();De.argument(a===1&&t<1,"GPOS/GSUB feature variations table unknown.");var r=this.parseRecordList32({conditionSetOffset:q.offset32,featureTableSubstitutionOffset:q.offset32});return r})||[]};var Le={getByte:Np,getCard8:Np,getUShort:ro,getCard16:ro,getShort:Cy,getULong:kc,getFixed:C0,getTag:Ny,getOffset:My,getBytes:Ry,bytesToString:wy,Parser:q};function Dy(a,t){t.parseUShort(),a.length=t.parseULong(),a.language=t.parseULong();var r;a.groupCount=r=t.parseULong(),a.glyphIndexMap={};for(var l=0;l<r;l+=1)for(var o=t.parseULong(),u=t.parseULong(),f=t.parseULong(),p=o;p<=u;p+=1)a.glyphIndexMap[p]=f,f++}function _y(a,t,r,l,o){a.length=t.parseUShort(),a.language=t.parseUShort();var u;a.segCount=u=t.parseUShort()>>1,t.skip("uShort",3),a.glyphIndexMap={};for(var f=new Le.Parser(r,l+o+14),p=new Le.Parser(r,l+o+16+u*2),h=new Le.Parser(r,l+o+16+u*4),m=new Le.Parser(r,l+o+16+u*6),v=l+o+16+u*8,x=0;x<u-1;x+=1)for(var S=void 0,E=f.parseUShort(),C=p.parseUShort(),D=h.parseShort(),j=m.parseUShort(),N=C;N<=E;N+=1)j!==0?(v=m.offset+m.relativeOffset-2,v+=j,v+=(N-C)*2,S=Le.getUShort(r,v),S!==0&&(S=S+D&65535)):S=N+D&65535,a.glyphIndexMap[N]=S}function Uy(a,t){var r={};r.version=Le.getUShort(a,t),De.argument(r.version===0,"cmap table version should be 0."),r.numTables=Le.getUShort(a,t+2);for(var l=-1,o=r.numTables-1;o>=0;o-=1){var u=Le.getUShort(a,t+4+o*8),f=Le.getUShort(a,t+4+o*8+2);if(u===3&&(f===0||f===1||f===10)||u===0&&(f===0||f===1||f===2||f===3||f===4)){l=Le.getULong(a,t+4+o*8+4);break}}if(l===-1)throw new Error("No valid cmap sub-tables found.");var p=new Le.Parser(a,t+l);if(r.format=p.parseUShort(),r.format===12)Dy(r,p);else if(r.format===4)_y(r,p,a,t,l);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+r.format+").");return r}function Ly(a,t,r){a.segments.push({end:t,start:t,delta:-(t-r),offset:0,glyphIndex:r})}function ky(a){a.segments.push({end:65535,start:65535,delta:1,offset:0})}function By(a){var t=!0,r;for(r=a.length-1;r>0;r-=1){var l=a.get(r);if(l.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),t=!1;break}}var o=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:t?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:t?12:20}];t||(o=o.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),o=o.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var u=new be.Table("cmap",o);for(u.segments=[],r=0;r<a.length;r+=1){for(var f=a.get(r),p=0;p<f.unicodes.length;p+=1)Ly(u,f.unicodes[p],r);u.segments=u.segments.sort(function(V,U){return V.start-U.start})}ky(u);var h=u.segments.length,m=0,v=[],x=[],S=[],E=[],C=[],D=[];for(r=0;r<h;r+=1){var j=u.segments[r];j.end<=65535&&j.start<=65535?(v=v.concat({name:"end_"+r,type:"USHORT",value:j.end}),x=x.concat({name:"start_"+r,type:"USHORT",value:j.start}),S=S.concat({name:"idDelta_"+r,type:"SHORT",value:j.delta}),E=E.concat({name:"idRangeOffset_"+r,type:"USHORT",value:j.offset}),j.glyphId!==void 0&&(C=C.concat({name:"glyph_"+r,type:"USHORT",value:j.glyphId}))):m+=1,!t&&j.glyphIndex!==void 0&&(D=D.concat({name:"cmap12Start_"+r,type:"ULONG",value:j.start}),D=D.concat({name:"cmap12End_"+r,type:"ULONG",value:j.end}),D=D.concat({name:"cmap12Glyph_"+r,type:"ULONG",value:j.glyphIndex}))}if(u.segCountX2=(h-m)*2,u.searchRange=Math.pow(2,Math.floor(Math.log(h-m)/Math.log(2)))*2,u.entrySelector=Math.log(u.searchRange/2)/Math.log(2),u.rangeShift=u.segCountX2-u.searchRange,u.fields=u.fields.concat(v),u.fields.push({name:"reservedPad",type:"USHORT",value:0}),u.fields=u.fields.concat(x),u.fields=u.fields.concat(S),u.fields=u.fields.concat(E),u.fields=u.fields.concat(C),u.cmap4Length=14+v.length*2+2+x.length*2+S.length*2+E.length*2+C.length*2,!t){var N=16+D.length*4;u.cmap12Offset=20+u.cmap4Length,u.fields=u.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:N},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:D.length/3}]),u.fields=u.fields.concat(D)}return u}var Iy={parse:Uy,make:By},Js=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Fy=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Gy=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Rp=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function N0(a){this.font=a}N0.prototype.charToGlyphIndex=function(a){var t=a.codePointAt(0),r=this.font.glyphs;if(r){for(var l=0;l<r.length;l+=1)for(var o=r.get(l),u=0;u<o.unicodes.length;u+=1)if(o.unicodes[u]===t)return l}return null};function io(a,t){this.encoding=a,this.charset=t}io.prototype.charToGlyphIndex=function(a){var t=a.codePointAt(0),r=this.encoding[t];return this.charset.indexOf(r)};function jy(a,t,r,l,o){a.beginPath(),a.moveTo(t,r),a.lineTo(l,o),a.stroke()}var Or={line:jy};function zy(a,t){var r=t||new Gt;return{configurable:!0,get:function(){return typeof r=="function"&&(r=r()),r},set:function(l){r=l}}}function Fn(a){this.bindConstructorValues(a)}Fn.prototype.bindConstructorValues=function(a){this.index=a.index||0,this.name=a.name||null,this.unicode=a.unicode||void 0,this.unicodes=a.unicodes||a.unicode!==void 0?[a.unicode]:[],"xMin"in a&&(this.xMin=a.xMin),"yMin"in a&&(this.yMin=a.yMin),"xMax"in a&&(this.xMax=a.xMax),"yMax"in a&&(this.yMax=a.yMax),"advanceWidth"in a&&(this.advanceWidth=a.advanceWidth),Object.defineProperty(this,"path",zy(this,a.path))};Fn.prototype.addUnicode=function(a){this.unicodes.length===0&&(this.unicode=a),this.unicodes.push(a)};Fn.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};Fn.prototype.getPath=function(a,t,r,l,o){a=a!==void 0?a:0,t=t!==void 0?t:0,r=r!==void 0?r:72;var u,f;l||(l={});var p=l.xScale,h=l.yScale;if(l.hinting&&o&&o.hinting&&(f=this.path&&o.hinting.exec(this,r)),f)u=o.hinting.getCommands(f),a=Math.round(a),t=Math.round(t),p=h=1;else{u=this.path.commands;var m=1/(this.path.unitsPerEm||1e3)*r;p===void 0&&(p=m),h===void 0&&(h=m)}for(var v=new Gt,x=0;x<u.length;x+=1){var S=u[x];S.type==="M"?v.moveTo(a+S.x*p,t+-S.y*h):S.type==="L"?v.lineTo(a+S.x*p,t+-S.y*h):S.type==="Q"?v.quadraticCurveTo(a+S.x1*p,t+-S.y1*h,a+S.x*p,t+-S.y*h):S.type==="C"?v.curveTo(a+S.x1*p,t+-S.y1*h,a+S.x2*p,t+-S.y2*h,a+S.x*p,t+-S.y*h):S.type==="Z"&&v.closePath()}return v};Fn.prototype.getContours=function(){if(this.points===void 0)return[];for(var a=[],t=[],r=0;r<this.points.length;r+=1){var l=this.points[r];t.push(l),l.lastPointOfContour&&(a.push(t),t=[])}return De.argument(t.length===0,"There are still points left in the current contour."),a};Fn.prototype.getMetrics=function(){for(var a=this.path.commands,t=[],r=[],l=0;l<a.length;l+=1){var o=a[l];o.type!=="Z"&&(t.push(o.x),r.push(o.y)),(o.type==="Q"||o.type==="C")&&(t.push(o.x1),r.push(o.y1)),o.type==="C"&&(t.push(o.x2),r.push(o.y2))}var u={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:this.leftSideBearing};return isFinite(u.xMin)||(u.xMin=0),isFinite(u.xMax)||(u.xMax=this.advanceWidth),isFinite(u.yMin)||(u.yMin=0),isFinite(u.yMax)||(u.yMax=0),u.rightSideBearing=this.advanceWidth-u.leftSideBearing-(u.xMax-u.xMin),u};Fn.prototype.draw=function(a,t,r,l,o){this.getPath(t,r,l,o).draw(a)};Fn.prototype.drawPoints=function(a,t,r,l){function o(x,S,E,C){a.beginPath();for(var D=0;D<x.length;D+=1)a.moveTo(S+x[D].x*C,E+x[D].y*C),a.arc(S+x[D].x*C,E+x[D].y*C,2,0,Math.PI*2,!1);a.closePath(),a.fill()}t=t!==void 0?t:0,r=r!==void 0?r:0,l=l!==void 0?l:24;for(var u=1/this.path.unitsPerEm*l,f=[],p=[],h=this.path,m=0;m<h.commands.length;m+=1){var v=h.commands[m];v.x!==void 0&&f.push({x:v.x,y:-v.y}),v.x1!==void 0&&p.push({x:v.x1,y:-v.y1}),v.x2!==void 0&&p.push({x:v.x2,y:-v.y2})}a.fillStyle="blue",o(f,t,r,u),a.fillStyle="red",o(p,t,r,u)};Fn.prototype.drawMetrics=function(a,t,r,l){var o;t=t!==void 0?t:0,r=r!==void 0?r:0,l=l!==void 0?l:24,o=1/this.path.unitsPerEm*l,a.lineWidth=1,a.strokeStyle="black",Or.line(a,t,-1e4,t,1e4),Or.line(a,-1e4,r,1e4,r);var u=this.xMin||0,f=this.yMin||0,p=this.xMax||0,h=this.yMax||0,m=this.advanceWidth||0;a.strokeStyle="blue",Or.line(a,t+u*o,-1e4,t+u*o,1e4),Or.line(a,t+p*o,-1e4,t+p*o,1e4),Or.line(a,-1e4,r+-f*o,1e4,r+-f*o),Or.line(a,-1e4,r+-h*o,1e4,r+-h*o),a.strokeStyle="green",Or.line(a,t+m*o,-1e4,t+m*o,1e4)};function Qs(a,t,r){Object.defineProperty(a,t,{get:function(){return a.path,a[r]},set:function(l){a[r]=l},enumerable:!0,configurable:!0})}function Bc(a,t){if(this.font=a,this.glyphs={},Array.isArray(t))for(var r=0;r<t.length;r++){var l=t[r];l.path.unitsPerEm=a.unitsPerEm,this.glyphs[r]=l}this.length=t&&t.length||0}Bc.prototype.get=function(a){if(this.glyphs[a]===void 0){this.font._push(a),typeof this.glyphs[a]=="function"&&(this.glyphs[a]=this.glyphs[a]());var t=this.glyphs[a],r=this.font._IndexToUnicodeMap[a];if(r)for(var l=0;l<r.unicodes.length;l++)t.addUnicode(r.unicodes[l]);this.font.cffEncoding?this.font.isCIDFont?t.name="gid"+a:t.name=this.font.cffEncoding.charset[a]:this.font.glyphNames.names&&(t.name=this.font.glyphNames.glyphIndexToName(a)),this.glyphs[a].advanceWidth=this.font._hmtxTableData[a].advanceWidth,this.glyphs[a].leftSideBearing=this.font._hmtxTableData[a].leftSideBearing}else typeof this.glyphs[a]=="function"&&(this.glyphs[a]=this.glyphs[a]());return this.glyphs[a]};Bc.prototype.push=function(a,t){this.glyphs[a]=t,this.length++};function Hy(a,t){return new Fn({index:t,font:a})}function Py(a,t,r,l,o,u){return function(){var f=new Fn({index:t,font:a});return f.path=function(){r(f,l,o);var p=u(a.glyphs,f);return p.unitsPerEm=a.unitsPerEm,p},Qs(f,"xMin","_xMin"),Qs(f,"xMax","_xMax"),Qs(f,"yMin","_yMin"),Qs(f,"yMax","_yMax"),f}}function Yy(a,t,r,l){return function(){var o=new Fn({index:t,font:a});return o.path=function(){var u=r(a,o,l);return u.unitsPerEm=a.unitsPerEm,u},o}}var la={GlyphSet:Bc,glyphLoader:Hy,ttfGlyphLoader:Py,cffGlyphLoader:Yy};function M0(a,t){if(a===t)return!0;if(Array.isArray(a)&&Array.isArray(t)){if(a.length!==t.length)return!1;for(var r=0;r<a.length;r+=1)if(!M0(a[r],t[r]))return!1;return!0}else return!1}function Rc(a){var t;return a.length<1240?t=107:a.length<33900?t=1131:t=32768,t}function nr(a,t,r){var l=[],o=[],u=Le.getCard16(a,t),f,p;if(u!==0){var h=Le.getByte(a,t+2);f=t+(u+1)*h+2;for(var m=t+3,v=0;v<u+1;v+=1)l.push(Le.getOffset(a,m,h)),m+=h;p=f+l[u]}else p=t+2;for(var x=0;x<l.length-1;x+=1){var S=Le.getBytes(a,f+l[x],f+l[x+1]);r&&(S=r(S)),o.push(S)}return{objects:o,startOffset:t,endOffset:p}}function qy(a,t){var r=[],l=Le.getCard16(a,t),o,u;if(l!==0){var f=Le.getByte(a,t+2);o=t+(l+1)*f+2;for(var p=t+3,h=0;h<l+1;h+=1)r.push(Le.getOffset(a,p,f)),p+=f;u=o+r[l]}else u=t+2;return{offsets:r,startOffset:t,endOffset:u}}function Vy(a,t,r,l,o){var u=Le.getCard16(r,l),f=0;if(u!==0){var p=Le.getByte(r,l+2);f=l+(u+1)*p+2}var h=Le.getBytes(r,f+t[a],f+t[a+1]);return h}function Xy(a){for(var t="",r=15,l=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var o=a.parseByte(),u=o>>4,f=o&15;if(u===r||(t+=l[u],f===r))break;t+=l[f]}return parseFloat(t)}function Zy(a,t){var r,l,o,u;if(t===28)return r=a.parseByte(),l=a.parseByte(),r<<8|l;if(t===29)return r=a.parseByte(),l=a.parseByte(),o=a.parseByte(),u=a.parseByte(),r<<24|l<<16|o<<8|u;if(t===30)return Xy(a);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return r=a.parseByte(),(t-247)*256+r+108;if(t>=251&&t<=254)return r=a.parseByte(),-(t-251)*256-r-108;throw new Error("Invalid b0 "+t)}function Qy(a){for(var t={},r=0;r<a.length;r+=1){var l=a[r][0],o=a[r][1],u=void 0;if(o.length===1?u=o[0]:u=o,t.hasOwnProperty(l)&&!isNaN(t[l]))throw new Error("Object "+t+" already has key "+l);t[l]=u}return t}function R0(a,t,r){t=t!==void 0?t:0;var l=new Le.Parser(a,t),o=[],u=[];for(r=r!==void 0?r:a.length;l.relativeOffset<r;){var f=l.parseByte();f<=21?(f===12&&(f=1200+l.parseByte()),o.push([f,u]),u=[]):u.push(Zy(l,f))}return Qy(o)}function Nl(a,t){return t<=390?t=Js[t]:t=a[t-391],t}function w0(a,t,r){for(var l={},o,u=0;u<t.length;u+=1){var f=t[u];if(Array.isArray(f.type)){var p=[];p.length=f.type.length;for(var h=0;h<f.type.length;h++)o=a[f.op]!==void 0?a[f.op][h]:void 0,o===void 0&&(o=f.value!==void 0&&f.value[h]!==void 0?f.value[h]:null),f.type[h]==="SID"&&(o=Nl(r,o)),p[h]=o;l[f.name]=p}else o=a[f.op],o===void 0&&(o=f.value!==void 0?f.value:null),f.type==="SID"&&(o=Nl(r,o)),l[f.name]=o}return l}function Ky(a,t){var r={};return r.formatMajor=Le.getCard8(a,t),r.formatMinor=Le.getCard8(a,t+1),r.size=Le.getCard8(a,t+2),r.offsetSize=Le.getCard8(a,t+3),r.startOffset=t,r.endOffset=t+4,r}var O0=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],D0=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function Wy(a,t){var r=R0(a,0,a.byteLength);return w0(r,O0,t)}function _0(a,t,r,l){var o=R0(a,t,r);return w0(o,D0,l)}function wp(a,t,r,l){for(var o=[],u=0;u<r.length;u+=1){var f=new DataView(new Uint8Array(r[u]).buffer),p=Wy(f,l);p._subrs=[],p._subrsBias=0,p._defaultWidthX=0,p._nominalWidthX=0;var h=p.private[0],m=p.private[1];if(h!==0&&m!==0){var v=_0(a,m+t,h,l);if(p._defaultWidthX=v.defaultWidthX,p._nominalWidthX=v.nominalWidthX,v.subrs!==0){var x=m+v.subrs,S=nr(a,x+t);p._subrs=S.objects,p._subrsBias=Rc(p._subrs)}p._privateDict=v}o.push(p)}return o}function Jy(a,t,r,l){var o,u,f=new Le.Parser(a,t);r-=1;var p=[".notdef"],h=f.parseCard8();if(h===0)for(var m=0;m<r;m+=1)o=f.parseSID(),p.push(Nl(l,o));else if(h===1)for(;p.length<=r;){o=f.parseSID(),u=f.parseCard8();for(var v=0;v<=u;v+=1)p.push(Nl(l,o)),o+=1}else if(h===2)for(;p.length<=r;){o=f.parseSID(),u=f.parseCard16();for(var x=0;x<=u;x+=1)p.push(Nl(l,o)),o+=1}else throw new Error("Unknown charset format "+h);return p}function $y(a,t,r){var l,o={},u=new Le.Parser(a,t),f=u.parseCard8();if(f===0)for(var p=u.parseCard8(),h=0;h<p;h+=1)l=u.parseCard8(),o[l]=h;else if(f===1){var m=u.parseCard8();l=1;for(var v=0;v<m;v+=1)for(var x=u.parseCard8(),S=u.parseCard8(),E=x;E<=x+S;E+=1)o[E]=l,l+=1}else throw new Error("Unknown encoding format "+f);return new io(o,r)}function Op(a,t,r){var l,o,u,f,p=new Gt,h=[],m=0,v=!1,x=!1,S=0,E=0,C,D,j,N;if(a.isCIDFont){var V=a.tables.cff.topDict._fdSelect[t.index],U=a.tables.cff.topDict._fdArray[V];C=U._subrs,D=U._subrsBias,j=U._defaultWidthX,N=U._nominalWidthX}else C=a.tables.cff.topDict._subrs,D=a.tables.cff.topDict._subrsBias,j=a.tables.cff.topDict._defaultWidthX,N=a.tables.cff.topDict._nominalWidthX;var Y=j;function Q(Se,J){x&&p.closePath(),p.moveTo(Se,J),x=!0}function ue(){var Se;Se=h.length%2!==0,Se&&!v&&(Y=h.shift()+N),m+=h.length>>1,h.length=0,v=!0}function Ee(Se){for(var J,ae,ne,ce,de,re,ee,R,P,I,fe,T,G=0;G<Se.length;){var ie=Se[G];switch(G+=1,ie){case 1:ue();break;case 3:ue();break;case 4:h.length>1&&!v&&(Y=h.shift()+N,v=!0),E+=h.pop(),Q(S,E);break;case 5:for(;h.length>0;)S+=h.shift(),E+=h.shift(),p.lineTo(S,E);break;case 6:for(;h.length>0&&(S+=h.shift(),p.lineTo(S,E),h.length!==0);)E+=h.shift(),p.lineTo(S,E);break;case 7:for(;h.length>0&&(E+=h.shift(),p.lineTo(S,E),h.length!==0);)S+=h.shift(),p.lineTo(S,E);break;case 8:for(;h.length>0;)l=S+h.shift(),o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),S=u+h.shift(),E=f+h.shift(),p.curveTo(l,o,u,f,S,E);break;case 10:de=h.pop()+D,re=C[de],re&&Ee(re);break;case 11:return;case 12:switch(ie=Se[G],G+=1,ie){case 35:l=S+h.shift(),o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),ee=u+h.shift(),R=f+h.shift(),P=ee+h.shift(),I=R+h.shift(),fe=P+h.shift(),T=I+h.shift(),S=fe+h.shift(),E=T+h.shift(),h.shift(),p.curveTo(l,o,u,f,ee,R),p.curveTo(P,I,fe,T,S,E);break;case 34:l=S+h.shift(),o=E,u=l+h.shift(),f=o+h.shift(),ee=u+h.shift(),R=f,P=ee+h.shift(),I=f,fe=P+h.shift(),T=E,S=fe+h.shift(),p.curveTo(l,o,u,f,ee,R),p.curveTo(P,I,fe,T,S,E);break;case 36:l=S+h.shift(),o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),ee=u+h.shift(),R=f,P=ee+h.shift(),I=f,fe=P+h.shift(),T=I+h.shift(),S=fe+h.shift(),p.curveTo(l,o,u,f,ee,R),p.curveTo(P,I,fe,T,S,E);break;case 37:l=S+h.shift(),o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),ee=u+h.shift(),R=f+h.shift(),P=ee+h.shift(),I=R+h.shift(),fe=P+h.shift(),T=I+h.shift(),Math.abs(fe-S)>Math.abs(T-E)?S=fe+h.shift():E=T+h.shift(),p.curveTo(l,o,u,f,ee,R),p.curveTo(P,I,fe,T,S,E);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+ie),h.length=0}break;case 14:h.length>0&&!v&&(Y=h.shift()+N,v=!0),x&&(p.closePath(),x=!1);break;case 18:ue();break;case 19:case 20:ue(),G+=m+7>>3;break;case 21:h.length>2&&!v&&(Y=h.shift()+N,v=!0),E+=h.pop(),S+=h.pop(),Q(S,E);break;case 22:h.length>1&&!v&&(Y=h.shift()+N,v=!0),S+=h.pop(),Q(S,E);break;case 23:ue();break;case 24:for(;h.length>2;)l=S+h.shift(),o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),S=u+h.shift(),E=f+h.shift(),p.curveTo(l,o,u,f,S,E);S+=h.shift(),E+=h.shift(),p.lineTo(S,E);break;case 25:for(;h.length>6;)S+=h.shift(),E+=h.shift(),p.lineTo(S,E);l=S+h.shift(),o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),S=u+h.shift(),E=f+h.shift(),p.curveTo(l,o,u,f,S,E);break;case 26:for(h.length%2&&(S+=h.shift());h.length>0;)l=S,o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),S=u,E=f+h.shift(),p.curveTo(l,o,u,f,S,E);break;case 27:for(h.length%2&&(E+=h.shift());h.length>0;)l=S+h.shift(),o=E,u=l+h.shift(),f=o+h.shift(),S=u+h.shift(),E=f,p.curveTo(l,o,u,f,S,E);break;case 28:J=Se[G],ae=Se[G+1],h.push((J<<24|ae<<16)>>16),G+=2;break;case 29:de=h.pop()+a.gsubrsBias,re=a.gsubrs[de],re&&Ee(re);break;case 30:for(;h.length>0&&(l=S,o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),S=u+h.shift(),E=f+(h.length===1?h.shift():0),p.curveTo(l,o,u,f,S,E),h.length!==0);)l=S+h.shift(),o=E,u=l+h.shift(),f=o+h.shift(),E=f+h.shift(),S=u+(h.length===1?h.shift():0),p.curveTo(l,o,u,f,S,E);break;case 31:for(;h.length>0&&(l=S+h.shift(),o=E,u=l+h.shift(),f=o+h.shift(),E=f+h.shift(),S=u+(h.length===1?h.shift():0),p.curveTo(l,o,u,f,S,E),h.length!==0);)l=S,o=E+h.shift(),u=l+h.shift(),f=o+h.shift(),S=u+h.shift(),E=f+(h.length===1?h.shift():0),p.curveTo(l,o,u,f,S,E);break;default:ie<32?console.log("Glyph "+t.index+": unknown operator "+ie):ie<247?h.push(ie-139):ie<251?(J=Se[G],G+=1,h.push((ie-247)*256+J+108)):ie<255?(J=Se[G],G+=1,h.push(-(ie-251)*256-J-108)):(J=Se[G],ae=Se[G+1],ne=Se[G+2],ce=Se[G+3],G+=4,h.push((J<<24|ae<<16|ne<<8|ce)/65536))}}}return Ee(r),t.advanceWidth=Y,p}function e1(a,t,r,l){var o=[],u,f=new Le.Parser(a,t),p=f.parseCard8();if(p===0)for(var h=0;h<r;h++){if(u=f.parseCard8(),u>=l)throw new Error("CFF table CID Font FDSelect has bad FD index value "+u+" (FD count "+l+")");o.push(u)}else if(p===3){var m=f.parseCard16(),v=f.parseCard16();if(v!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+v);for(var x,S=0;S<m;S++){if(u=f.parseCard8(),x=f.parseCard16(),u>=l)throw new Error("CFF table CID Font FDSelect has bad FD index value "+u+" (FD count "+l+")");if(x>r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+x);for(;v<x;v++)o.push(u);v=x}if(x!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+x)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+p);return o}function t1(a,t,r,l){r.tables.cff={};var o=Ky(a,t),u=nr(a,o.endOffset,Le.bytesToString),f=nr(a,u.endOffset),p=nr(a,f.endOffset,Le.bytesToString),h=nr(a,p.endOffset);r.gsubrs=h.objects,r.gsubrsBias=Rc(r.gsubrs);var m=wp(a,t,f.objects,p.objects);if(m.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+m.length);var v=m[0];if(r.tables.cff.topDict=v,v._privateDict&&(r.defaultWidthX=v._privateDict.defaultWidthX,r.nominalWidthX=v._privateDict.nominalWidthX),v.ros[0]!==void 0&&v.ros[1]!==void 0&&(r.isCIDFont=!0),r.isCIDFont){var x=v.fdArray,S=v.fdSelect;if(x===0||S===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");x+=t;var E=nr(a,x),C=wp(a,t,E.objects,p.objects);v._fdArray=C,S+=t,v._fdSelect=e1(a,S,r.numGlyphs,C.length)}var D=t+v.private[1],j=_0(a,D,v.private[0],p.objects);if(r.defaultWidthX=j.defaultWidthX,r.nominalWidthX=j.nominalWidthX,j.subrs!==0){var N=D+j.subrs,V=nr(a,N);r.subrs=V.objects,r.subrsBias=Rc(r.subrs)}else r.subrs=[],r.subrsBias=0;var U;l.lowMemory?(U=qy(a,t+v.charStrings),r.nGlyphs=U.offsets.length):(U=nr(a,t+v.charStrings),r.nGlyphs=U.objects.length);var Y=Jy(a,t+v.charset,r.nGlyphs,p.objects);if(v.encoding===0?r.cffEncoding=new io(Fy,Y):v.encoding===1?r.cffEncoding=new io(Gy,Y):r.cffEncoding=$y(a,t+v.encoding,Y),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new la.GlyphSet(r),l.lowMemory)r._push=function(Ee){var Se=Vy(Ee,U.offsets,a,t+v.charStrings);r.glyphs.push(Ee,la.cffGlyphLoader(r,Ee,Op,Se))};else for(var Q=0;Q<r.nGlyphs;Q+=1){var ue=U.objects[Q];r.glyphs.push(Q,la.cffGlyphLoader(r,Q,Op,ue))}}function U0(a,t){var r,l=Js.indexOf(a);return l>=0&&(r=l),l=t.indexOf(a),l>=0?r=l+Js.length:(r=Js.length+t.length,t.push(a)),r}function n1(){return new be.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function a1(a){var t=new be.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<a.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:a[r]});return t}function L0(a,t,r){for(var l={},o=0;o<a.length;o+=1){var u=a[o],f=t[u.name];f!==void 0&&!M0(f,u.value)&&(u.type==="SID"&&(f=U0(f,r)),l[u.op]={name:u.name,type:u.type,value:f})}return l}function Dp(a,t){var r=new be.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=L0(O0,a,t),r}function _p(a){var t=new be.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:a}],t}function r1(a){var t=new be.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<a.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:a[r]});return t}function i1(){return new be.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function l1(a,t){for(var r=new be.Record("Charsets",[{name:"format",type:"Card8",value:0}]),l=0;l<a.length;l+=1){var o=a[l],u=U0(o,t);r.fields.push({name:"glyph_"+l,type:"SID",value:u})}return r}function s1(a){var t=[],r=a.path;t.push({name:"width",type:"NUMBER",value:a.advanceWidth});for(var l=0,o=0,u=0;u<r.commands.length;u+=1){var f=void 0,p=void 0,h=r.commands[u];if(h.type==="Q"){var m=.3333333333333333,v=2/3;h={type:"C",x:h.x,y:h.y,x1:Math.round(m*l+v*h.x1),y1:Math.round(m*o+v*h.y1),x2:Math.round(m*h.x+v*h.x1),y2:Math.round(m*h.y+v*h.y1)}}if(h.type==="M")f=Math.round(h.x-l),p=Math.round(h.y-o),t.push({name:"dx",type:"NUMBER",value:f}),t.push({name:"dy",type:"NUMBER",value:p}),t.push({name:"rmoveto",type:"OP",value:21}),l=Math.round(h.x),o=Math.round(h.y);else if(h.type==="L")f=Math.round(h.x-l),p=Math.round(h.y-o),t.push({name:"dx",type:"NUMBER",value:f}),t.push({name:"dy",type:"NUMBER",value:p}),t.push({name:"rlineto",type:"OP",value:5}),l=Math.round(h.x),o=Math.round(h.y);else if(h.type==="C"){var x=Math.round(h.x1-l),S=Math.round(h.y1-o),E=Math.round(h.x2-h.x1),C=Math.round(h.y2-h.y1);f=Math.round(h.x-h.x2),p=Math.round(h.y-h.y2),t.push({name:"dx1",type:"NUMBER",value:x}),t.push({name:"dy1",type:"NUMBER",value:S}),t.push({name:"dx2",type:"NUMBER",value:E}),t.push({name:"dy2",type:"NUMBER",value:C}),t.push({name:"dx",type:"NUMBER",value:f}),t.push({name:"dy",type:"NUMBER",value:p}),t.push({name:"rrcurveto",type:"OP",value:8}),l=Math.round(h.x),o=Math.round(h.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}function o1(a){for(var t=new be.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<a.length;r+=1){var l=a.get(r),o=s1(l);t.charStrings.push({name:l.name,type:"CHARSTRING",value:o})}return t}function u1(a,t){var r=new be.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=L0(D0,a,t),r}function c1(a,t){for(var r=new be.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),l=1/t.unitsPerEm,o={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[l,0,0,l,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},u={},f=[],p,h=1;h<a.length;h+=1)p=a.get(h),f.push(p.name);var m=[];r.header=n1(),r.nameIndex=a1([t.postScriptName]);var v=Dp(o,m);r.topDictIndex=_p(v),r.globalSubrIndex=i1(),r.charsets=l1(f,m),r.charStringsIndex=o1(a),r.privateDict=u1(u,m),r.stringIndex=r1(m);var x=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();return o.charset=x,o.encoding=0,o.charStrings=o.charset+r.charsets.sizeOf(),o.private[1]=o.charStrings+r.charStringsIndex.sizeOf(),v=Dp(o,m),r.topDictIndex=_p(v),r}var f1={parse:t1,make:c1};function d1(a,t){var r={},l=new Le.Parser(a,t);return r.version=l.parseVersion(),r.fontRevision=Math.round(l.parseFixed()*1e3)/1e3,r.checkSumAdjustment=l.parseULong(),r.magicNumber=l.parseULong(),De.argument(r.magicNumber===1594834165,"Font header has wrong magic number."),r.flags=l.parseUShort(),r.unitsPerEm=l.parseUShort(),r.created=l.parseLongDateTime(),r.modified=l.parseLongDateTime(),r.xMin=l.parseShort(),r.yMin=l.parseShort(),r.xMax=l.parseShort(),r.yMax=l.parseShort(),r.macStyle=l.parseUShort(),r.lowestRecPPEM=l.parseUShort(),r.fontDirectionHint=l.parseShort(),r.indexToLocFormat=l.parseShort(),r.glyphDataFormat=l.parseShort(),r}function h1(a){var t=Math.round(new Date().getTime()/1e3)+2082844800,r=t;return a.createdTimestamp&&(r=a.createdTimestamp+2082844800),new be.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],a)}var p1={parse:d1,make:h1};function m1(a,t){var r={},l=new Le.Parser(a,t);return r.version=l.parseVersion(),r.ascender=l.parseShort(),r.descender=l.parseShort(),r.lineGap=l.parseShort(),r.advanceWidthMax=l.parseUShort(),r.minLeftSideBearing=l.parseShort(),r.minRightSideBearing=l.parseShort(),r.xMaxExtent=l.parseShort(),r.caretSlopeRise=l.parseShort(),r.caretSlopeRun=l.parseShort(),r.caretOffset=l.parseShort(),l.relativeOffset+=8,r.metricDataFormat=l.parseShort(),r.numberOfHMetrics=l.parseUShort(),r}function v1(a){return new be.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],a)}var g1={parse:m1,make:v1};function y1(a,t,r,l,o){for(var u,f,p=new Le.Parser(a,t),h=0;h<l;h+=1){h<r&&(u=p.parseUShort(),f=p.parseShort());var m=o.get(h);m.advanceWidth=u,m.leftSideBearing=f}}function b1(a,t,r,l,o){a._hmtxTableData={};for(var u,f,p=new Le.Parser(t,r),h=0;h<o;h+=1)h<l&&(u=p.parseUShort(),f=p.parseShort()),a._hmtxTableData[h]={advanceWidth:u,leftSideBearing:f}}function S1(a,t,r,l,o,u,f){f.lowMemory?b1(a,t,r,l,o):y1(t,r,l,o,u)}function x1(a){for(var t=new be.Table("hmtx",[]),r=0;r<a.length;r+=1){var l=a.get(r),o=l.advanceWidth||0,u=l.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:o}),t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:u})}return t}var E1={parse:S1,make:x1};function T1(a){for(var t=new be.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:a.length}]),r="",l=12+a.length*4,o=0;o<a.length;++o){var u=r.indexOf(a[o]);u<0&&(u=r.length,r+=a[o]),t.fields.push({name:"offset "+o,type:"USHORT",value:l+u}),t.fields.push({name:"length "+o,type:"USHORT",value:a[o].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),t}function A1(a,t){var r=new Le.Parser(a,t),l=r.parseULong();De.argument(l===1,"Unsupported ltag table version."),r.skip("uLong",1);for(var o=r.parseULong(),u=[],f=0;f<o;f++){for(var p="",h=t+r.parseUShort(),m=r.parseUShort(),v=h;v<h+m;++v)p+=String.fromCharCode(a.getInt8(v));u.push(p)}return u}var C1={make:T1,parse:A1};function N1(a,t){var r={},l=new Le.Parser(a,t);return r.version=l.parseVersion(),r.numGlyphs=l.parseUShort(),r.version===1&&(r.maxPoints=l.parseUShort(),r.maxContours=l.parseUShort(),r.maxCompositePoints=l.parseUShort(),r.maxCompositeContours=l.parseUShort(),r.maxZones=l.parseUShort(),r.maxTwilightPoints=l.parseUShort(),r.maxStorage=l.parseUShort(),r.maxFunctionDefs=l.parseUShort(),r.maxInstructionDefs=l.parseUShort(),r.maxStackElements=l.parseUShort(),r.maxSizeOfInstructions=l.parseUShort(),r.maxComponentElements=l.parseUShort(),r.maxComponentDepth=l.parseUShort()),r}function M1(a){return new be.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:a}])}var R1={parse:N1,make:M1},k0=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],B0={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},w1={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},I0={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function O1(a,t,r){switch(a){case 0:if(t===65535)return"und";if(r)return r[t];break;case 1:return B0[t];case 3:return I0[t]}}var wc="utf-16",D1={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},_1={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function F0(a,t,r){switch(a){case 0:return wc;case 1:return _1[r]||D1[t];case 3:if(t===1||t===10)return wc;break}}function U1(a,t,r){for(var l={},o=new Le.Parser(a,t),u=o.parseUShort(),f=o.parseUShort(),p=o.offset+o.parseUShort(),h=0;h<f;h++){var m=o.parseUShort(),v=o.parseUShort(),x=o.parseUShort(),S=o.parseUShort(),E=k0[S]||S,C=o.parseUShort(),D=o.parseUShort(),j=O1(m,x,r),N=F0(m,v,x);if(N!==void 0&&j!==void 0){var V=void 0;if(N===wc?V=yi.UTF16(a,p+D,C):V=yi.MACSTRING(a,p+D,C,N),V){var U=l[E];U===void 0&&(U=l[E]={}),U[j]=V}}}return u===1&&o.parseUShort(),l}function vc(a){var t={};for(var r in a)t[a[r]]=parseInt(r);return t}function Up(a,t,r,l,o,u){return new be.Record("NameRecord",[{name:"platformID",type:"USHORT",value:a},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:l},{name:"length",type:"USHORT",value:o},{name:"offset",type:"USHORT",value:u}])}function L1(a,t){var r=a.length,l=t.length-r+1;e:for(var o=0;o<l;o++)for(;o<l;o++){for(var u=0;u<r;u++)if(t[o+u]!==a[u])continue e;return o}return-1}function Lp(a,t){var r=L1(a,t);if(r<0){r=t.length;for(var l=0,o=a.length;l<o;++l)t.push(a[l])}return r}function k1(a,t){var r,l=[],o={},u=vc(k0);for(var f in a){var p=u[f];if(p===void 0&&(p=f),r=parseInt(p),isNaN(r))throw new Error('Name table entry "'+f+'" does not exist, see nameTableNames for complete list.');o[r]=a[f],l.push(r)}for(var h=vc(B0),m=vc(I0),v=[],x=[],S=0;S<l.length;S++){r=l[S];var E=o[r];for(var C in E){var D=E[C],j=1,N=h[C],V=w1[N],U=F0(j,V,N),Y=he.MACSTRING(D,U);Y===void 0&&(j=0,N=t.indexOf(C),N<0&&(N=t.length,t.push(C)),V=4,Y=he.UTF16(D));var Q=Lp(Y,x);v.push(Up(j,V,N,r,Y.length,Q));var ue=m[C];if(ue!==void 0){var Ee=he.UTF16(D),Se=Lp(Ee,x);v.push(Up(3,1,ue,r,Ee.length,Se))}}}v.sort(function(ne,ce){return ne.platformID-ce.platformID||ne.encodingID-ce.encodingID||ne.languageID-ce.languageID||ne.nameID-ce.nameID});for(var J=new be.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:v.length},{name:"stringOffset",type:"USHORT",value:6+v.length*12}]),ae=0;ae<v.length;ae++)J.fields.push({name:"record_"+ae,type:"RECORD",value:v[ae]});return J.fields.push({name:"strings",type:"LITERAL",value:x}),J}var B1={parse:U1,make:k1},Oc=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function I1(a){for(var t=0;t<Oc.length;t+=1){var r=Oc[t];if(a>=r.begin&&a<r.end)return t}return-1}function F1(a,t){var r={},l=new Le.Parser(a,t);r.version=l.parseUShort(),r.xAvgCharWidth=l.parseShort(),r.usWeightClass=l.parseUShort(),r.usWidthClass=l.parseUShort(),r.fsType=l.parseUShort(),r.ySubscriptXSize=l.parseShort(),r.ySubscriptYSize=l.parseShort(),r.ySubscriptXOffset=l.parseShort(),r.ySubscriptYOffset=l.parseShort(),r.ySuperscriptXSize=l.parseShort(),r.ySuperscriptYSize=l.parseShort(),r.ySuperscriptXOffset=l.parseShort(),r.ySuperscriptYOffset=l.parseShort(),r.yStrikeoutSize=l.parseShort(),r.yStrikeoutPosition=l.parseShort(),r.sFamilyClass=l.parseShort(),r.panose=[];for(var o=0;o<10;o++)r.panose[o]=l.parseByte();return r.ulUnicodeRange1=l.parseULong(),r.ulUnicodeRange2=l.parseULong(),r.ulUnicodeRange3=l.parseULong(),r.ulUnicodeRange4=l.parseULong(),r.achVendID=String.fromCharCode(l.parseByte(),l.parseByte(),l.parseByte(),l.parseByte()),r.fsSelection=l.parseUShort(),r.usFirstCharIndex=l.parseUShort(),r.usLastCharIndex=l.parseUShort(),r.sTypoAscender=l.parseShort(),r.sTypoDescender=l.parseShort(),r.sTypoLineGap=l.parseShort(),r.usWinAscent=l.parseUShort(),r.usWinDescent=l.parseUShort(),r.version>=1&&(r.ulCodePageRange1=l.parseULong(),r.ulCodePageRange2=l.parseULong()),r.version>=2&&(r.sxHeight=l.parseShort(),r.sCapHeight=l.parseShort(),r.usDefaultChar=l.parseUShort(),r.usBreakChar=l.parseUShort(),r.usMaxContent=l.parseUShort()),r}function G1(a){return new be.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],a)}var kp={parse:F1,make:G1,unicodeRanges:Oc,getUnicodeRange:I1};function j1(a,t){var r={},l=new Le.Parser(a,t);switch(r.version=l.parseVersion(),r.italicAngle=l.parseFixed(),r.underlinePosition=l.parseShort(),r.underlineThickness=l.parseShort(),r.isFixedPitch=l.parseULong(),r.minMemType42=l.parseULong(),r.maxMemType42=l.parseULong(),r.minMemType1=l.parseULong(),r.maxMemType1=l.parseULong(),r.version){case 1:r.names=Rp.slice();break;case 2:r.numberOfGlyphs=l.parseUShort(),r.glyphNameIndex=new Array(r.numberOfGlyphs);for(var o=0;o<r.numberOfGlyphs;o++)r.glyphNameIndex[o]=l.parseUShort();r.names=[];for(var u=0;u<r.numberOfGlyphs;u++)if(r.glyphNameIndex[u]>=Rp.length){var f=l.parseChar();r.names.push(l.parseString(f))}break;case 2.5:r.numberOfGlyphs=l.parseUShort(),r.offset=new Array(r.numberOfGlyphs);for(var p=0;p<r.numberOfGlyphs;p++)r.offset[p]=l.parseChar();break}return r}function z1(){return new be.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var H1={parse:j1,make:z1},qn=new Array(9);qn[1]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{substFormat:1,coverage:this.parsePointer(q.coverage),deltaGlyphId:this.parseUShort()};if(r===2)return{substFormat:2,coverage:this.parsePointer(q.coverage),substitute:this.parseOffset16List()};De.assert(!1,"0x"+t.toString(16)+": lookup type 1 format must be 1 or 2.")};qn[2]=function(){var t=this.parseUShort();return De.argument(t===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(q.coverage),sequences:this.parseListOfLists()}};qn[3]=function(){var t=this.parseUShort();return De.argument(t===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(q.coverage),alternateSets:this.parseListOfLists()}};qn[4]=function(){var t=this.parseUShort();return De.argument(t===1,"GSUB ligature table identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(q.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var gi={sequenceIndex:q.uShort,lookupListIndex:q.uShort};qn[5]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{substFormat:r,coverage:this.parsePointer(q.coverage),ruleSets:this.parseListOfLists(function(){var u=this.parseUShort(),f=this.parseUShort();return{input:this.parseUShortList(u-1),lookupRecords:this.parseRecordList(f,gi)}})};if(r===2)return{substFormat:r,coverage:this.parsePointer(q.coverage),classDef:this.parsePointer(q.classDef),classSets:this.parseListOfLists(function(){var u=this.parseUShort(),f=this.parseUShort();return{classes:this.parseUShortList(u-1),lookupRecords:this.parseRecordList(f,gi)}})};if(r===3){var l=this.parseUShort(),o=this.parseUShort();return{substFormat:r,coverages:this.parseList(l,q.pointer(q.coverage)),lookupRecords:this.parseRecordList(o,gi)}}De.assert(!1,"0x"+t.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};qn[6]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{substFormat:1,coverage:this.parsePointer(q.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(gi)}})};if(r===2)return{substFormat:2,coverage:this.parsePointer(q.coverage),backtrackClassDef:this.parsePointer(q.classDef),inputClassDef:this.parsePointer(q.classDef),lookaheadClassDef:this.parsePointer(q.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(gi)}})};if(r===3)return{substFormat:3,backtrackCoverage:this.parseList(q.pointer(q.coverage)),inputCoverage:this.parseList(q.pointer(q.coverage)),lookaheadCoverage:this.parseList(q.pointer(q.coverage)),lookupRecords:this.parseRecordList(gi)};De.assert(!1,"0x"+t.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};qn[7]=function(){var t=this.parseUShort();De.argument(t===1,"GSUB Extension Substitution subtable identifier-format must be 1");var r=this.parseUShort(),l=new q(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:r,extension:qn[r].call(l)}};qn[8]=function(){var t=this.parseUShort();return De.argument(t===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:t,coverage:this.parsePointer(q.coverage),backtrackCoverage:this.parseList(q.pointer(q.coverage)),lookaheadCoverage:this.parseList(q.pointer(q.coverage)),substitutes:this.parseUShortList()}};function P1(a,t){t=t||0;var r=new q(a,t),l=r.parseVersion(1);return De.argument(l===1||l===1.1,"Unsupported GSUB table version."),l===1?{version:l,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(qn)}:{version:l,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(qn),variations:r.parseFeatureVariationsList()}}var bi=new Array(9);bi[1]=function(t){return t.substFormat===1?new be.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new be.Coverage(t.coverage)},{name:"deltaGlyphID",type:"USHORT",value:t.deltaGlyphId}]):new be.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new be.Coverage(t.coverage)}].concat(be.ushortList("substitute",t.substitute)))};bi[2]=function(t){return De.assert(t.substFormat===1,"Lookup type 2 substFormat must be 1."),new be.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new be.Coverage(t.coverage)}].concat(be.tableList("seqSet",t.sequences,function(r){return new be.Table("sequenceSetTable",be.ushortList("sequence",r))})))};bi[3]=function(t){return De.assert(t.substFormat===1,"Lookup type 3 substFormat must be 1."),new be.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new be.Coverage(t.coverage)}].concat(be.tableList("altSet",t.alternateSets,function(r){return new be.Table("alternateSetTable",be.ushortList("alternate",r))})))};bi[4]=function(t){return De.assert(t.substFormat===1,"Lookup type 4 substFormat must be 1."),new be.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new be.Coverage(t.coverage)}].concat(be.tableList("ligSet",t.ligatureSets,function(r){return new be.Table("ligatureSetTable",be.tableList("ligature",r,function(l){return new be.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:l.ligGlyph}].concat(be.ushortList("component",l.components,l.components.length+1)))}))})))};bi[6]=function(t){if(t.substFormat===1){var r=new be.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:t.substFormat},{name:"coverage",type:"TABLE",value:new be.Coverage(t.coverage)}].concat(be.tableList("chainRuleSet",t.chainRuleSets,function(u){return new be.Table("chainRuleSetTable",be.tableList("chainRule",u,function(f){var p=be.ushortList("backtrackGlyph",f.backtrack,f.backtrack.length).concat(be.ushortList("inputGlyph",f.input,f.input.length+1)).concat(be.ushortList("lookaheadGlyph",f.lookahead,f.lookahead.length)).concat(be.ushortList("substitution",[],f.lookupRecords.length));return f.lookupRecords.forEach(function(h,m){p=p.concat({name:"sequenceIndex"+m,type:"USHORT",value:h.sequenceIndex}).concat({name:"lookupListIndex"+m,type:"USHORT",value:h.lookupListIndex})}),new be.Table("chainRuleTable",p)}))})));return r}else if(t.substFormat===2)De.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(t.substFormat===3){var l=[{name:"substFormat",type:"USHORT",value:t.substFormat}];l.push({name:"backtrackGlyphCount",type:"USHORT",value:t.backtrackCoverage.length}),t.backtrackCoverage.forEach(function(u,f){l.push({name:"backtrackCoverage"+f,type:"TABLE",value:new be.Coverage(u)})}),l.push({name:"inputGlyphCount",type:"USHORT",value:t.inputCoverage.length}),t.inputCoverage.forEach(function(u,f){l.push({name:"inputCoverage"+f,type:"TABLE",value:new be.Coverage(u)})}),l.push({name:"lookaheadGlyphCount",type:"USHORT",value:t.lookaheadCoverage.length}),t.lookaheadCoverage.forEach(function(u,f){l.push({name:"lookaheadCoverage"+f,type:"TABLE",value:new be.Coverage(u)})}),l.push({name:"substitutionCount",type:"USHORT",value:t.lookupRecords.length}),t.lookupRecords.forEach(function(u,f){l=l.concat({name:"sequenceIndex"+f,type:"USHORT",value:u.sequenceIndex}).concat({name:"lookupListIndex"+f,type:"USHORT",value:u.lookupListIndex})});var o=new be.Table("chainContextTable",l);return o}De.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};function Y1(a){return new be.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new be.ScriptList(a.scripts)},{name:"features",type:"TABLE",value:new be.FeatureList(a.features)},{name:"lookups",type:"TABLE",value:new be.LookupList(a.lookups,bi)}])}var q1={parse:P1,make:Y1};function V1(a,t){var r=new Le.Parser(a,t),l=r.parseULong();De.argument(l===1,"Unsupported META table version."),r.parseULong(),r.parseULong();for(var o=r.parseULong(),u={},f=0;f<o;f++){var p=r.parseTag(),h=r.parseULong(),m=r.parseULong(),v=yi.UTF8(a,t+h,m);u[p]=v}return u}function X1(a){var t=Object.keys(a).length,r="",l=16+t*12,o=new be.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:l},{name:"numTags",type:"ULONG",value:t}]);for(var u in a){var f=r.length;r+=a[u],o.fields.push({name:"tag "+u,type:"TAG",value:u}),o.fields.push({name:"offset "+u,type:"ULONG",value:l+f}),o.fields.push({name:"length "+u,type:"ULONG",value:a[u].length})}return o.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),o}var Z1={parse:V1,make:X1};function Bp(a){return Math.log(a)/Math.log(2)|0}function Ic(a){for(;a.length%4!==0;)a.push(0);for(var t=0,r=0;r<a.length;r+=4)t+=(a[r]<<24)+(a[r+1]<<16)+(a[r+2]<<8)+a[r+3];return t%=Math.pow(2,32),t}function Ip(a,t,r,l){return new be.Record("Table Record",[{name:"tag",type:"TAG",value:a!==void 0?a:""},{name:"checkSum",type:"ULONG",value:t!==void 0?t:0},{name:"offset",type:"ULONG",value:r!==void 0?r:0},{name:"length",type:"ULONG",value:l!==void 0?l:0}])}function G0(a){var t=new be.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=a,t.numTables=a.length;var r=Math.pow(2,Bp(t.numTables));t.searchRange=16*r,t.entrySelector=Bp(r),t.rangeShift=t.numTables*16-t.searchRange;for(var l=[],o=[],u=t.sizeOf()+Ip().sizeOf()*t.numTables;u%4!==0;)u+=1,o.push({name:"padding",type:"BYTE",value:0});for(var f=0;f<a.length;f+=1){var p=a[f];De.argument(p.tableName.length===4,"Table name"+p.tableName+" is invalid.");var h=p.sizeOf(),m=Ip(p.tableName,Ic(p.encode()),u,h);for(l.push({name:m.tag+" Table Record",type:"RECORD",value:m}),o.push({name:p.tableName+" table",type:"RECORD",value:p}),u+=h,De.argument(!isNaN(u),"Something went wrong calculating the offset.");u%4!==0;)u+=1,o.push({name:"padding",type:"BYTE",value:0})}return l.sort(function(v,x){return v.value.tag>x.value.tag?1:-1}),t.fields=t.fields.concat(l),t.fields=t.fields.concat(o),t}function Fp(a,t,r){for(var l=0;l<t.length;l+=1){var o=a.charToGlyphIndex(t[l]);if(o>0){var u=a.glyphs.get(o);return u.getMetrics()}}return r}function Q1(a){for(var t=0,r=0;r<a.length;r+=1)t+=a[r];return t/a.length}function K1(a){for(var t=[],r=[],l=[],o=[],u=[],f=[],p=[],h,m=0,v=0,x=0,S=0,E=0,C=0;C<a.glyphs.length;C+=1){var D=a.glyphs.get(C),j=D.unicode|0;if(isNaN(D.advanceWidth))throw new Error("Glyph "+D.name+" ("+C+"): advanceWidth is not a number.");(h>j||h===void 0)&&j>0&&(h=j),m<j&&(m=j);var N=kp.getUnicodeRange(j);if(N<32)v|=1<<N;else if(N<64)x|=1<<N-32;else if(N<96)S|=1<<N-64;else if(N<123)E|=1<<N-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(D.name!==".notdef"){var V=D.getMetrics();t.push(V.xMin),r.push(V.yMin),l.push(V.xMax),o.push(V.yMax),f.push(V.leftSideBearing),p.push(V.rightSideBearing),u.push(D.advanceWidth)}}var U={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,l),yMax:Math.max.apply(null,o),advanceWidthMax:Math.max.apply(null,u),advanceWidthAvg:Q1(u),minLeftSideBearing:Math.min.apply(null,f),maxLeftSideBearing:Math.max.apply(null,f),minRightSideBearing:Math.min.apply(null,p)};U.ascender=a.ascender,U.descender=a.descender;var Y=p1.make({flags:3,unitsPerEm:a.unitsPerEm,xMin:U.xMin,yMin:U.yMin,xMax:U.xMax,yMax:U.yMax,lowestRecPPEM:3,createdTimestamp:a.createdTimestamp}),Q=g1.make({ascender:U.ascender,descender:U.descender,advanceWidthMax:U.advanceWidthMax,minLeftSideBearing:U.minLeftSideBearing,minRightSideBearing:U.minRightSideBearing,xMaxExtent:U.maxLeftSideBearing+(U.xMax-U.xMin),numberOfHMetrics:a.glyphs.length}),ue=R1.make(a.glyphs.length),Ee=kp.make(Object.assign({xAvgCharWidth:Math.round(U.advanceWidthAvg),usFirstCharIndex:h,usLastCharIndex:m,ulUnicodeRange1:v,ulUnicodeRange2:x,ulUnicodeRange3:S,ulUnicodeRange4:E,sTypoAscender:U.ascender,sTypoDescender:U.descender,sTypoLineGap:0,usWinAscent:U.yMax,usWinDescent:Math.abs(U.yMin),ulCodePageRange1:1,sxHeight:Fp(a,"xyvw",{yMax:Math.round(U.ascender/2)}).yMax,sCapHeight:Fp(a,"HIKLEFJMNTZBDPRAGOQSUVWXY",U).yMax,usDefaultChar:a.hasChar(" ")?32:0,usBreakChar:a.hasChar(" ")?32:0},a.tables.os2)),Se=E1.make(a.glyphs),J=Iy.make(a.glyphs),ae=a.getEnglishName("fontFamily"),ne=a.getEnglishName("fontSubfamily"),ce=ae+" "+ne,de=a.getEnglishName("postScriptName");de||(de=ae.replace(/\s/g,"")+"-"+ne);var re={};for(var ee in a.names)re[ee]=a.names[ee];re.uniqueID||(re.uniqueID={en:a.getEnglishName("manufacturer")+":"+ce}),re.postScriptName||(re.postScriptName={en:de}),re.preferredFamily||(re.preferredFamily=a.names.fontFamily),re.preferredSubfamily||(re.preferredSubfamily=a.names.fontSubfamily);var R=[],P=B1.make(re,R),I=R.length>0?C1.make(R):void 0,fe=H1.make(),T=f1.make(a.glyphs,{version:a.getEnglishName("version"),fullName:ce,familyName:ae,weightName:ne,postScriptName:de,unitsPerEm:a.unitsPerEm,fontBBox:[0,U.yMin,U.ascender,U.advanceWidthMax]}),G=a.metas&&Object.keys(a.metas).length>0?Z1.make(a.metas):void 0,ie=[Y,Q,ue,Ee,P,J,fe,T,Se];I&&ie.push(I),a.tables.gsub&&ie.push(q1.make(a.tables.gsub)),G&&ie.push(G);for(var se=G0(ie),Te=se.encode(),_e=Ic(Te),Ae=se.fields,dt=!1,Fe=0;Fe<Ae.length;Fe+=1)if(Ae[Fe].name==="head table"){Ae[Fe].value.checkSumAdjustment=2981146554-_e,dt=!0;break}if(!dt)throw new Error("Could not find head table with checkSum to adjust.");return se}var W1={make:G0,fontToTable:K1,computeCheckSum:Ic};function gc(a,t){for(var r=0,l=a.length-1;r<=l;){var o=r+l>>>1,u=a[o].tag;if(u===t)return o;u<t?r=o+1:l=o-1}return-r-1}function Gp(a,t){for(var r=0,l=a.length-1;r<=l;){var o=r+l>>>1,u=a[o];if(u===t)return o;u<t?r=o+1:l=o-1}return-r-1}function jp(a,t){for(var r,l=0,o=a.length-1;l<=o;){var u=l+o>>>1;r=a[u];var f=r.start;if(f===t)return r;f<t?l=u+1:o=u-1}if(l>0)return r=a[l-1],t>r.end?0:r}function Dl(a,t){this.font=a,this.tableName=t}Dl.prototype={searchTag:gc,binSearch:Gp,getTable:function(a){var t=this.font.tables[this.tableName];return!t&&a&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var a=this.getTable();return a?a.scripts.map(function(t){return t.tag}):[]},getDefaultScriptName:function(){var a=this.getTable();if(a){for(var t=!1,r=0;r<a.scripts.length;r++){var l=a.scripts[r].tag;if(l==="DFLT")return l;l==="latn"&&(t=!0)}if(t)return"latn"}},getScriptTable:function(a,t){var r=this.getTable(t);if(r){a=a||"DFLT";var l=r.scripts,o=gc(r.scripts,a);if(o>=0)return l[o].script;if(t){var u={tag:a,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return l.splice(-1-o,0,u),u.script}}},getLangSysTable:function(a,t,r){var l=this.getScriptTable(a,r);if(l){if(!t||t==="dflt"||t==="DFLT")return l.defaultLangSys;var o=gc(l.langSysRecords,t);if(o>=0)return l.langSysRecords[o].langSys;if(r){var u={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return l.langSysRecords.splice(-1-o,0,u),u.langSys}}},getFeatureTable:function(a,t,r,l){var o=this.getLangSysTable(a,t,l);if(o){for(var u,f=o.featureIndexes,p=this.font.tables[this.tableName].features,h=0;h<f.length;h++)if(u=p[f[h]],u.tag===r)return u.feature;if(l){var m=p.length;return De.assert(m===0||r>=p[m-1].tag,"Features must be added in alphabetical order."),u={tag:r,feature:{params:0,lookupListIndexes:[]}},p.push(u),f.push(m),u.feature}}},getLookupTables:function(a,t,r,l,o){var u=this.getFeatureTable(a,t,r,o),f=[];if(u){for(var p,h=u.lookupListIndexes,m=this.font.tables[this.tableName].lookups,v=0;v<h.length;v++)p=m[h[v]],p.lookupType===l&&f.push(p);if(f.length===0&&o){p={lookupType:l,lookupFlag:0,subtables:[],markFilteringSet:void 0};var x=m.length;return m.push(p),h.push(x),[p]}}return f},getGlyphClass:function(a,t){switch(a.format){case 1:return a.startGlyph<=t&&t<a.startGlyph+a.classes.length?a.classes[t-a.startGlyph]:0;case 2:var r=jp(a.ranges,t);return r?r.classId:0}},getCoverageIndex:function(a,t){switch(a.format){case 1:var r=Gp(a.glyphs,t);return r>=0?r:-1;case 2:var l=jp(a.ranges,t);return l?l.index+t-l.start:-1}},expandCoverage:function(a){if(a.format===1)return a.glyphs;for(var t=[],r=a.ranges,l=0;l<r.length;l++)for(var o=r[l],u=o.start,f=o.end,p=u;p<=f;p++)t.push(p);return t}};function _l(a){Dl.call(this,a,"gpos")}_l.prototype=Dl.prototype;_l.prototype.init=function(){var a=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(a)};_l.prototype.getKerningValue=function(a,t,r){for(var l=0;l<a.length;l++)for(var o=a[l].subtables,u=0;u<o.length;u++){var f=o[u],p=this.getCoverageIndex(f.coverage,t);if(!(p<0))switch(f.posFormat){case 1:for(var h=f.pairSets[p],m=0;m<h.length;m++){var v=h[m];if(v.secondGlyph===r)return v.value1&&v.value1.xAdvance||0}break;case 2:var x=this.getGlyphClass(f.classDef1,t),S=this.getGlyphClass(f.classDef2,r),E=f.classRecords[x][S];return E.value1&&E.value1.xAdvance||0}}return 0};_l.prototype.getKerningTables=function(a,t){if(this.font.tables.gpos)return this.getLookupTables(a,t,"kern",2)};function Sn(a){Dl.call(this,a,"gsub")}function J1(a,t){var r=a.length;if(r!==t.length)return!1;for(var l=0;l<r;l++)if(a[l]!==t[l])return!1;return!0}function Fc(a,t,r){for(var l=a.subtables,o=0;o<l.length;o++){var u=l[o];if(u.substFormat===t)return u}if(r)return l.push(r),r}Sn.prototype=Dl.prototype;Sn.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};Sn.prototype.getSingle=function(a,t,r){for(var l=[],o=this.getLookupTables(t,r,a,1),u=0;u<o.length;u++)for(var f=o[u].subtables,p=0;p<f.length;p++){var h=f[p],m=this.expandCoverage(h.coverage),v=void 0;if(h.substFormat===1){var x=h.deltaGlyphId;for(v=0;v<m.length;v++){var S=m[v];l.push({sub:S,by:S+x})}}else{var E=h.substitute;for(v=0;v<m.length;v++)l.push({sub:m[v],by:E[v]})}}return l};Sn.prototype.getMultiple=function(a,t,r){for(var l=[],o=this.getLookupTables(t,r,a,2),u=0;u<o.length;u++)for(var f=o[u].subtables,p=0;p<f.length;p++){var h=f[p],m=this.expandCoverage(h.coverage),v=void 0;for(v=0;v<m.length;v++){var x=m[v],S=h.sequences[v];l.push({sub:x,by:S})}}return l};Sn.prototype.getAlternates=function(a,t,r){for(var l=[],o=this.getLookupTables(t,r,a,3),u=0;u<o.length;u++)for(var f=o[u].subtables,p=0;p<f.length;p++)for(var h=f[p],m=this.expandCoverage(h.coverage),v=h.alternateSets,x=0;x<m.length;x++)l.push({sub:m[x],by:v[x]});return l};Sn.prototype.getLigatures=function(a,t,r){for(var l=[],o=this.getLookupTables(t,r,a,4),u=0;u<o.length;u++)for(var f=o[u].subtables,p=0;p<f.length;p++)for(var h=f[p],m=this.expandCoverage(h.coverage),v=h.ligatureSets,x=0;x<m.length;x++)for(var S=m[x],E=v[x],C=0;C<E.length;C++){var D=E[C];l.push({sub:[S].concat(D.components),by:D.ligGlyph})}return l};Sn.prototype.addSingle=function(a,t,r,l){var o=this.getLookupTables(r,l,a,1,!0)[0],u=Fc(o,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});De.assert(u.coverage.format===1,"Single: unable to modify coverage table format "+u.coverage.format);var f=t.sub,p=this.binSearch(u.coverage.glyphs,f);p<0&&(p=-1-p,u.coverage.glyphs.splice(p,0,f),u.substitute.splice(p,0,0)),u.substitute[p]=t.by};Sn.prototype.addMultiple=function(a,t,r,l){De.assert(t.by instanceof Array&&t.by.length>1,'Multiple: "by" must be an array of two or more ids');var o=this.getLookupTables(r,l,a,2,!0)[0],u=Fc(o,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});De.assert(u.coverage.format===1,"Multiple: unable to modify coverage table format "+u.coverage.format);var f=t.sub,p=this.binSearch(u.coverage.glyphs,f);p<0&&(p=-1-p,u.coverage.glyphs.splice(p,0,f),u.sequences.splice(p,0,0)),u.sequences[p]=t.by};Sn.prototype.addAlternate=function(a,t,r,l){var o=this.getLookupTables(r,l,a,3,!0)[0],u=Fc(o,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});De.assert(u.coverage.format===1,"Alternate: unable to modify coverage table format "+u.coverage.format);var f=t.sub,p=this.binSearch(u.coverage.glyphs,f);p<0&&(p=-1-p,u.coverage.glyphs.splice(p,0,f),u.alternateSets.splice(p,0,0)),u.alternateSets[p]=t.by};Sn.prototype.addLigature=function(a,t,r,l){var o=this.getLookupTables(r,l,a,4,!0)[0],u=o.subtables[0];u||(u={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},o.subtables[0]=u),De.assert(u.coverage.format===1,"Ligature: unable to modify coverage table format "+u.coverage.format);var f=t.sub[0],p=t.sub.slice(1),h={ligGlyph:t.by,components:p},m=this.binSearch(u.coverage.glyphs,f);if(m>=0){for(var v=u.ligatureSets[m],x=0;x<v.length;x++)if(J1(v[x].components,p))return;v.push(h)}else m=-1-m,u.coverage.glyphs.splice(m,0,f),u.ligatureSets.splice(m,0,[h])};Sn.prototype.getFeature=function(a,t,r){if(/ss\d\d/.test(a))return this.getSingle(a,t,r);switch(a){case"aalt":case"salt":return this.getSingle(a,t,r).concat(this.getAlternates(a,t,r));case"dlig":case"liga":case"rlig":return this.getLigatures(a,t,r);case"ccmp":return this.getMultiple(a,t,r).concat(this.getLigatures(a,t,r));case"stch":return this.getMultiple(a,t,r)}};Sn.prototype.add=function(a,t,r,l){if(/ss\d\d/.test(a))return this.addSingle(a,t,r,l);switch(a){case"aalt":case"salt":return typeof t.by=="number"?this.addSingle(a,t,r,l):this.addAlternate(a,t,r,l);case"dlig":case"liga":case"rlig":return this.addLigature(a,t,r,l);case"ccmp":return t.by instanceof Array?this.addMultiple(a,t,r,l):this.addLigature(a,t,r,l)}};function $1(){return typeof window<"u"}function eb(a){for(var t=new Buffer(a.byteLength),r=new Uint8Array(a),l=0;l<t.length;++l)t[l]=r[l];return t}function Cl(a,t){if(!a)throw t}function zp(a,t,r,l,o){var u;return(t&l)>0?(u=a.parseByte(),(t&o)===0&&(u=-u),u=r+u):(t&o)>0?u=r:u=r+a.parseShort(),u}function j0(a,t,r){var l=new Le.Parser(t,r);a.numberOfContours=l.parseShort(),a._xMin=l.parseShort(),a._yMin=l.parseShort(),a._xMax=l.parseShort(),a._yMax=l.parseShort();var o,u;if(a.numberOfContours>0){for(var f=a.endPointIndices=[],p=0;p<a.numberOfContours;p+=1)f.push(l.parseUShort());a.instructionLength=l.parseUShort(),a.instructions=[];for(var h=0;h<a.instructionLength;h+=1)a.instructions.push(l.parseByte());var m=f[f.length-1]+1;o=[];for(var v=0;v<m;v+=1)if(u=l.parseByte(),o.push(u),(u&8)>0)for(var x=l.parseByte(),S=0;S<x;S+=1)o.push(u),v+=1;if(De.argument(o.length===m,"Bad flags."),f.length>0){var E=[],C;if(m>0){for(var D=0;D<m;D+=1)u=o[D],C={},C.onCurve=!!(u&1),C.lastPointOfContour=f.indexOf(D)>=0,E.push(C);for(var j=0,N=0;N<m;N+=1)u=o[N],C=E[N],C.x=zp(l,u,j,2,16),j=C.x;for(var V=0,U=0;U<m;U+=1)u=o[U],C=E[U],C.y=zp(l,u,V,4,32),V=C.y}a.points=E}else a.points=[]}else if(a.numberOfContours===0)a.points=[];else{a.isComposite=!0,a.points=[],a.components=[];for(var Y=!0;Y;){o=l.parseUShort();var Q={glyphIndex:l.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(o&1)>0?(o&2)>0?(Q.dx=l.parseShort(),Q.dy=l.parseShort()):Q.matchedPoints=[l.parseUShort(),l.parseUShort()]:(o&2)>0?(Q.dx=l.parseChar(),Q.dy=l.parseChar()):Q.matchedPoints=[l.parseByte(),l.parseByte()],(o&8)>0?Q.xScale=Q.yScale=l.parseF2Dot14():(o&64)>0?(Q.xScale=l.parseF2Dot14(),Q.yScale=l.parseF2Dot14()):(o&128)>0&&(Q.xScale=l.parseF2Dot14(),Q.scale01=l.parseF2Dot14(),Q.scale10=l.parseF2Dot14(),Q.yScale=l.parseF2Dot14()),a.components.push(Q),Y=!!(o&32)}if(o&256){a.instructionLength=l.parseUShort(),a.instructions=[];for(var ue=0;ue<a.instructionLength;ue+=1)a.instructions.push(l.parseByte())}}}function yc(a,t){for(var r=[],l=0;l<a.length;l+=1){var o=a[l],u={x:t.xScale*o.x+t.scale01*o.y+t.dx,y:t.scale10*o.x+t.yScale*o.y+t.dy,onCurve:o.onCurve,lastPointOfContour:o.lastPointOfContour};r.push(u)}return r}function tb(a){for(var t=[],r=[],l=0;l<a.length;l+=1){var o=a[l];r.push(o),o.lastPointOfContour&&(t.push(r),r=[])}return De.argument(r.length===0,"There are still points left in the current contour."),t}function z0(a){var t=new Gt;if(!a)return t;for(var r=tb(a),l=0;l<r.length;++l){var o=r[l],u=null,f=o[o.length-1],p=o[0];if(f.onCurve)t.moveTo(f.x,f.y);else if(p.onCurve)t.moveTo(p.x,p.y);else{var h={x:(f.x+p.x)*.5,y:(f.y+p.y)*.5};t.moveTo(h.x,h.y)}for(var m=0;m<o.length;++m)if(u=f,f=p,p=o[(m+1)%o.length],f.onCurve)t.lineTo(f.x,f.y);else{var v=p;u.onCurve||((f.x+u.x)*.5,(f.y+u.y)*.5),p.onCurve||(v={x:(f.x+p.x)*.5,y:(f.y+p.y)*.5}),t.quadraticCurveTo(f.x,f.y,v.x,v.y)}t.closePath()}return t}function H0(a,t){if(t.isComposite)for(var r=0;r<t.components.length;r+=1){var l=t.components[r],o=a.get(l.glyphIndex);if(o.getPath(),o.points){var u=void 0;if(l.matchedPoints===void 0)u=yc(o.points,l);else{if(l.matchedPoints[0]>t.points.length-1||l.matchedPoints[1]>o.points.length-1)throw Error("Matched points out of range in "+t.name);var f=t.points[l.matchedPoints[0]],p=o.points[l.matchedPoints[1]],h={xScale:l.xScale,scale01:l.scale01,scale10:l.scale10,yScale:l.yScale,dx:0,dy:0};p=yc([p],h)[0],h.dx=f.x-p.x,h.dy=f.y-p.y,u=yc(o.points,h)}t.points=t.points.concat(u)}}return z0(t.points)}function nb(a,t,r,l){for(var o=new la.GlyphSet(l),u=0;u<r.length-1;u+=1){var f=r[u],p=r[u+1];f!==p?o.push(u,la.ttfGlyphLoader(l,u,j0,a,t+f,H0)):o.push(u,la.glyphLoader(l,u))}return o}function ab(a,t,r,l){var o=new la.GlyphSet(l);return l._push=function(u){var f=r[u],p=r[u+1];f!==p?o.push(u,la.ttfGlyphLoader(l,u,j0,a,t+f,H0)):o.push(u,la.glyphLoader(l,u))},o}function rb(a,t,r,l,o){return o.lowMemory?ab(a,t,r,l):nb(a,t,r,l)}var ib={getPath:z0,parse:rb},P0,_r,Y0,Dc;function q0(a){this.font=a,this.getCommands=function(t){return ib.getPath(t).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function lb(a){return a}function V0(a){return Math.sign(a)*Math.round(Math.abs(a))}function sb(a){return Math.sign(a)*Math.round(Math.abs(a*2))/2}function ob(a){return Math.sign(a)*(Math.round(Math.abs(a)+.5)-.5)}function ub(a){return Math.sign(a)*Math.ceil(Math.abs(a))}function cb(a){return Math.sign(a)*Math.floor(Math.abs(a))}var X0=function(a){var t=this.srPeriod,r=this.srPhase,l=this.srThreshold,o=1;return a<0&&(a=-a,o=-1),a+=l-r,a=Math.trunc(a/t)*t,a+=r,a<0?r*o:a*o},ia={x:1,y:0,axis:"x",distance:function(a,t,r,l){return(r?a.xo:a.x)-(l?t.xo:t.x)},interpolate:function(a,t,r,l){var o,u,f,p,h,m,v;if(!l||l===this){if(o=a.xo-t.xo,u=a.xo-r.xo,h=t.x-t.xo,m=r.x-r.xo,f=Math.abs(o),p=Math.abs(u),v=f+p,v===0){a.x=a.xo+(h+m)/2;return}a.x=a.xo+(h*p+m*f)/v;return}if(o=l.distance(a,t,!0,!0),u=l.distance(a,r,!0,!0),h=l.distance(t,t,!1,!0),m=l.distance(r,r,!1,!0),f=Math.abs(o),p=Math.abs(u),v=f+p,v===0){ia.setRelative(a,a,(h+m)/2,l,!0);return}ia.setRelative(a,a,(h*p+m*f)/v,l,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(a,t,r,l,o){if(!l||l===this){a.x=(o?t.xo:t.x)+r;return}var u=o?t.xo:t.x,f=o?t.yo:t.y,p=u+r*l.x,h=f+r*l.y;a.x=p+(a.y-h)/l.normalSlope},slope:0,touch:function(a){a.xTouched=!0},touched:function(a){return a.xTouched},untouch:function(a){a.xTouched=!1}},Ca={x:0,y:1,axis:"y",distance:function(a,t,r,l){return(r?a.yo:a.y)-(l?t.yo:t.y)},interpolate:function(a,t,r,l){var o,u,f,p,h,m,v;if(!l||l===this){if(o=a.yo-t.yo,u=a.yo-r.yo,h=t.y-t.yo,m=r.y-r.yo,f=Math.abs(o),p=Math.abs(u),v=f+p,v===0){a.y=a.yo+(h+m)/2;return}a.y=a.yo+(h*p+m*f)/v;return}if(o=l.distance(a,t,!0,!0),u=l.distance(a,r,!0,!0),h=l.distance(t,t,!1,!0),m=l.distance(r,r,!1,!0),f=Math.abs(o),p=Math.abs(u),v=f+p,v===0){Ca.setRelative(a,a,(h+m)/2,l,!0);return}Ca.setRelative(a,a,(h*p+m*f)/v,l,!0)},normalSlope:0,setRelative:function(a,t,r,l,o){if(!l||l===this){a.y=(o?t.yo:t.y)+r;return}var u=o?t.xo:t.x,f=o?t.yo:t.y,p=u+r*l.x,h=f+r*l.y;a.y=h+l.normalSlope*(a.x-p)},slope:Number.POSITIVE_INFINITY,touch:function(a){a.yTouched=!0},touched:function(a){return a.yTouched},untouch:function(a){a.yTouched=!1}};Object.freeze(ia);Object.freeze(Ca);function Ul(a,t){this.x=a,this.y=t,this.axis=void 0,this.slope=t/a,this.normalSlope=-a/t,Object.freeze(this)}Ul.prototype.distance=function(a,t,r,l){return this.x*ia.distance(a,t,r,l)+this.y*Ca.distance(a,t,r,l)};Ul.prototype.interpolate=function(a,t,r,l){var o,u,f,p,h,m,v;if(f=l.distance(a,t,!0,!0),p=l.distance(a,r,!0,!0),o=l.distance(t,t,!1,!0),u=l.distance(r,r,!1,!0),h=Math.abs(f),m=Math.abs(p),v=h+m,v===0){this.setRelative(a,a,(o+u)/2,l,!0);return}this.setRelative(a,a,(o*m+u*h)/v,l,!0)};Ul.prototype.setRelative=function(a,t,r,l,o){l=l||this;var u=o?t.xo:t.x,f=o?t.yo:t.y,p=u+r*l.x,h=f+r*l.y,m=l.normalSlope,v=this.slope,x=a.x,S=a.y;a.x=(v*x-m*p+h-S)/(v-m),a.y=v*(a.x-x)+S};Ul.prototype.touch=function(a){a.xTouched=!0,a.yTouched=!0};function Ll(a,t){var r=Math.sqrt(a*a+t*t);return a/=r,t/=r,a===1&&t===0?ia:a===0&&t===1?Ca:new Ul(a,t)}function Na(a,t,r,l){this.x=this.xo=Math.round(a*64)/64,this.y=this.yo=Math.round(t*64)/64,this.lastPointOfContour=r,this.onCurve=l,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Na.prototype.nextTouched=function(a){for(var t=this.nextPointOnContour;!a.touched(t)&&t!==this;)t=t.nextPointOnContour;return t};Na.prototype.prevTouched=function(a){for(var t=this.prevPointOnContour;!a.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Ol=Object.freeze(new Na(0,0)),fb={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function ar(a,t){switch(this.env=a,this.stack=[],this.prog=t,a){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=ia,this.round=V0}}q0.prototype.exec=function(a,t){if(typeof t!="number")throw new Error("Point size is not a number!");if(!(this._errorState>2)){var r=this.font,l=this._prepState;if(!l||l.ppem!==t){var o=this._fpgmState;if(!o){ar.prototype=fb,o=this._fpgmState=new ar("fpgm",r.tables.fpgm),o.funcs=[],o.font=r,exports.DEBUG&&(console.log("---EXEC FPGM---"),o.step=-1);try{_r(o)}catch(m){console.log("Hinting error in FPGM:"+m),this._errorState=3;return}}ar.prototype=o,l=this._prepState=new ar("prep",r.tables.prep),l.ppem=t;var u=r.tables.cvt;if(u)for(var f=l.cvt=new Array(u.length),p=t/r.unitsPerEm,h=0;h<u.length;h++)f[h]=u[h]*p;else l.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),l.step=-1);try{_r(l)}catch(m){this._errorState<2&&console.log("Hinting error in PREP:"+m),this._errorState=2}}if(!(this._errorState>1))try{return Y0(a,l)}catch(m){this._errorState<1&&(console.log("Hinting error:"+m),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}}};Y0=function(a,t){var r=t.ppem/t.font.unitsPerEm,l=r,o=a.components,u,f,p;if(ar.prototype=t,!o)p=new ar("glyf",a.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),p.step=-1),Dc(a,p,r,l),f=p.gZone;else{var h=t.font;f=[],u=[];for(var m=0;m<o.length;m++){var v=o[m],x=h.glyphs.get(v.glyphIndex);p=new ar("glyf",x.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+m+"---"),p.step=-1),Dc(x,p,r,l);for(var S=Math.round(v.dx*r),E=Math.round(v.dy*l),C=p.gZone,D=p.contours,j=0;j<C.length;j++){var N=C[j];N.xTouched=N.yTouched=!1,N.xo=N.x=N.x+S,N.yo=N.y=N.y+E}var V=f.length;f.push.apply(f,C);for(var U=0;U<D.length;U++)u.push(D[U]+V)}a.instructions&&!p.inhibitGridFit&&(p=new ar("glyf",a.instructions),p.gZone=p.z0=p.z1=p.z2=f,p.contours=u,f.push(new Na(0,0),new Na(Math.round(a.advanceWidth*r),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),p.step=-1),_r(p),f.length-=2)}return f};Dc=function(a,t,r,l){for(var o=a.points||[],u=o.length,f=t.gZone=t.z0=t.z1=t.z2=[],p=t.contours=[],h,m=0;m<u;m++)h=o[m],f[m]=new Na(h.x*r,h.y*l,h.lastPointOfContour,h.onCurve);for(var v,x,S=0;S<u;S++)h=f[S],v||(v=h,p.push(S)),h.lastPointOfContour?(h.nextPointOnContour=v,v.prevPointOnContour=h,v=void 0):(x=f[S+1],h.nextPointOnContour=x,x.prevPointOnContour=h);if(!t.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",t.stack);for(var E=0;E<u;E++)console.log(E,f[E].x,f[E].y)}if(f.push(new Na(0,0),new Na(Math.round(a.advanceWidth*r),0)),_r(t),f.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",t.stack);for(var C=0;C<u;C++)console.log(C,f[C].x,f[C].y)}}};_r=function(a){var t=a.prog;if(t){var r=t.length,l;for(a.ip=0;a.ip<r;a.ip++){if(exports.DEBUG&&a.step++,l=P0[t[a.ip]],!l)throw new Error("unknown instruction: 0x"+Number(t[a.ip]).toString(16));l(a)}}};function so(a){for(var t=a.tZone=new Array(a.gZone.length),r=0;r<t.length;r++)t[r]=new Na(0,0)}function Z0(a,t){var r=a.prog,l=a.ip,o=1,u;do if(u=r[++l],u===88)o++;else if(u===89)o--;else if(u===64)l+=r[l+1]+1;else if(u===65)l+=2*r[l+1]+1;else if(u>=176&&u<=183)l+=u-176+1;else if(u>=184&&u<=191)l+=(u-184+1)*2;else if(t&&o===1&&u===27)break;while(o>0);a.ip=l}function Hp(a,t){exports.DEBUG&&console.log(t.step,"SVTCA["+a.axis+"]"),t.fv=t.pv=t.dpv=a}function Pp(a,t){exports.DEBUG&&console.log(t.step,"SPVTCA["+a.axis+"]"),t.pv=t.dpv=a}function Yp(a,t){exports.DEBUG&&console.log(t.step,"SFVTCA["+a.axis+"]"),t.fv=a}function qp(a,t){var r=t.stack,l=r.pop(),o=r.pop(),u=t.z2[l],f=t.z1[o];exports.DEBUG&&console.log("SPVTL["+a+"]",l,o);var p,h;a?(p=u.y-f.y,h=f.x-u.x):(p=f.x-u.x,h=f.y-u.y),t.pv=t.dpv=Ll(p,h)}function Vp(a,t){var r=t.stack,l=r.pop(),o=r.pop(),u=t.z2[l],f=t.z1[o];exports.DEBUG&&console.log("SFVTL["+a+"]",l,o);var p,h;a?(p=u.y-f.y,h=f.x-u.x):(p=f.x-u.x,h=f.y-u.y),t.fv=Ll(p,h)}function db(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"SPVFS[]",r,l),a.pv=a.dpv=Ll(l,r)}function hb(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"SPVFS[]",r,l),a.fv=Ll(l,r)}function pb(a){var t=a.stack,r=a.pv;exports.DEBUG&&console.log(a.step,"GPV[]"),t.push(r.x*16384),t.push(r.y*16384)}function mb(a){var t=a.stack,r=a.fv;exports.DEBUG&&console.log(a.step,"GFV[]"),t.push(r.x*16384),t.push(r.y*16384)}function vb(a){a.fv=a.pv,exports.DEBUG&&console.log(a.step,"SFVTPV[]")}function gb(a){var t=a.stack,r=t.pop(),l=t.pop(),o=t.pop(),u=t.pop(),f=t.pop(),p=a.z0,h=a.z1,m=p[r],v=p[l],x=h[o],S=h[u],E=a.z2[f];exports.DEBUG&&console.log("ISECT[], ",r,l,o,u,f);var C=m.x,D=m.y,j=v.x,N=v.y,V=x.x,U=x.y,Y=S.x,Q=S.y,ue=(C-j)*(U-Q)-(D-N)*(V-Y),Ee=C*N-D*j,Se=V*Q-U*Y;E.x=(Ee*(V-Y)-Se*(C-j))/ue,E.y=(Ee*(U-Q)-Se*(D-N))/ue}function yb(a){a.rp0=a.stack.pop(),exports.DEBUG&&console.log(a.step,"SRP0[]",a.rp0)}function bb(a){a.rp1=a.stack.pop(),exports.DEBUG&&console.log(a.step,"SRP1[]",a.rp1)}function Sb(a){a.rp2=a.stack.pop(),exports.DEBUG&&console.log(a.step,"SRP2[]",a.rp2)}function xb(a){var t=a.stack.pop();switch(exports.DEBUG&&console.log(a.step,"SZP0[]",t),a.zp0=t,t){case 0:a.tZone||so(a),a.z0=a.tZone;break;case 1:a.z0=a.gZone;break;default:throw new Error("Invalid zone pointer")}}function Eb(a){var t=a.stack.pop();switch(exports.DEBUG&&console.log(a.step,"SZP1[]",t),a.zp1=t,t){case 0:a.tZone||so(a),a.z1=a.tZone;break;case 1:a.z1=a.gZone;break;default:throw new Error("Invalid zone pointer")}}function Tb(a){var t=a.stack.pop();switch(exports.DEBUG&&console.log(a.step,"SZP2[]",t),a.zp2=t,t){case 0:a.tZone||so(a),a.z2=a.tZone;break;case 1:a.z2=a.gZone;break;default:throw new Error("Invalid zone pointer")}}function Ab(a){var t=a.stack.pop();switch(exports.DEBUG&&console.log(a.step,"SZPS[]",t),a.zp0=a.zp1=a.zp2=t,t){case 0:a.tZone||so(a),a.z0=a.z1=a.z2=a.tZone;break;case 1:a.z0=a.z1=a.z2=a.gZone;break;default:throw new Error("Invalid zone pointer")}}function Cb(a){a.loop=a.stack.pop(),exports.DEBUG&&console.log(a.step,"SLOOP[]",a.loop)}function Nb(a){exports.DEBUG&&console.log(a.step,"RTG[]"),a.round=V0}function Mb(a){exports.DEBUG&&console.log(a.step,"RTHG[]"),a.round=ob}function Rb(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"SMD[]",t),a.minDis=t/64}function wb(a){exports.DEBUG&&console.log(a.step,"ELSE[]"),Z0(a,!1)}function Ob(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"JMPR[]",t),a.ip+=t-1}function Db(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"SCVTCI[]",t),a.cvCutIn=t/64}function _b(a){var t=a.stack;exports.DEBUG&&console.log(a.step,"DUP[]"),t.push(t[t.length-1])}function bc(a){exports.DEBUG&&console.log(a.step,"POP[]"),a.stack.pop()}function Ub(a){exports.DEBUG&&console.log(a.step,"CLEAR[]"),a.stack.length=0}function Lb(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"SWAP[]"),t.push(r),t.push(l)}function kb(a){var t=a.stack;exports.DEBUG&&console.log(a.step,"DEPTH[]"),t.push(t.length)}function Bb(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"LOOPCALL[]",r,l);var o=a.ip,u=a.prog;a.prog=a.funcs[r];for(var f=0;f<l;f++)_r(a),exports.DEBUG&&console.log(++a.step,f+1<l?"next loopcall":"done loopcall",f);a.ip=o,a.prog=u}function Ib(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"CALL[]",t);var r=a.ip,l=a.prog;a.prog=a.funcs[t],_r(a),a.ip=r,a.prog=l,exports.DEBUG&&console.log(++a.step,"returning from",t)}function Fb(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"CINDEX[]",r),t.push(t[t.length-r])}function Gb(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"MINDEX[]",r),t.push(t.splice(t.length-r,1)[0])}function jb(a){if(a.env!=="fpgm")throw new Error("FDEF not allowed here");var t=a.stack,r=a.prog,l=a.ip,o=t.pop(),u=l;for(exports.DEBUG&&console.log(a.step,"FDEF[]",o);r[++l]!==45;);a.ip=l,a.funcs[o]=r.slice(u+1,l)}function Xp(a,t){var r=t.stack.pop(),l=t.z0[r],o=t.fv,u=t.pv;exports.DEBUG&&console.log(t.step,"MDAP["+a+"]",r);var f=u.distance(l,Ol);a&&(f=t.round(f)),o.setRelative(l,Ol,f,u),o.touch(l),t.rp0=t.rp1=r}function Zp(a,t){var r=t.z2,l=r.length-2,o,u,f;exports.DEBUG&&console.log(t.step,"IUP["+a.axis+"]");for(var p=0;p<l;p++)o=r[p],!a.touched(o)&&(u=o.prevTouched(a),u!==o&&(f=o.nextTouched(a),u===f&&a.setRelative(o,o,a.distance(u,u,!1,!0),a,!0),a.interpolate(o,u,f,a)))}function Qp(a,t){for(var r=t.stack,l=a?t.rp1:t.rp2,o=(a?t.z0:t.z1)[l],u=t.fv,f=t.pv,p=t.loop,h=t.z2;p--;){var m=r.pop(),v=h[m],x=f.distance(o,o,!1,!0);u.setRelative(v,v,x,f),u.touch(v),exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-p)+": ":"")+"SHP["+(a?"rp1":"rp2")+"]",m)}t.loop=1}function Kp(a,t){var r=t.stack,l=a?t.rp1:t.rp2,o=(a?t.z0:t.z1)[l],u=t.fv,f=t.pv,p=r.pop(),h=t.z2[t.contours[p]],m=h;exports.DEBUG&&console.log(t.step,"SHC["+a+"]",p);var v=f.distance(o,o,!1,!0);do m!==o&&u.setRelative(m,m,v,f),m=m.nextPointOnContour;while(m!==h)}function Wp(a,t){var r=t.stack,l=a?t.rp1:t.rp2,o=(a?t.z0:t.z1)[l],u=t.fv,f=t.pv,p=r.pop();exports.DEBUG&&console.log(t.step,"SHZ["+a+"]",p);var h;switch(p){case 0:h=t.tZone;break;case 1:h=t.gZone;break;default:throw new Error("Invalid zone")}for(var m,v=f.distance(o,o,!1,!0),x=h.length-2,S=0;S<x;S++)m=h[S],u.setRelative(m,m,v,f)}function zb(a){for(var t=a.stack,r=a.loop,l=a.fv,o=t.pop()/64,u=a.z2;r--;){var f=t.pop(),p=u[f];exports.DEBUG&&console.log(a.step,(a.loop>1?"loop "+(a.loop-r)+": ":"")+"SHPIX[]",f,o),l.setRelative(p,p,o),l.touch(p)}a.loop=1}function Hb(a){for(var t=a.stack,r=a.rp1,l=a.rp2,o=a.loop,u=a.z0[r],f=a.z1[l],p=a.fv,h=a.dpv,m=a.z2;o--;){var v=t.pop(),x=m[v];exports.DEBUG&&console.log(a.step,(a.loop>1?"loop "+(a.loop-o)+": ":"")+"IP[]",v,r,"<->",l),p.interpolate(x,u,f,h),p.touch(x)}a.loop=1}function Jp(a,t){var r=t.stack,l=r.pop()/64,o=r.pop(),u=t.z1[o],f=t.z0[t.rp0],p=t.fv,h=t.pv;p.setRelative(u,f,l,h),p.touch(u),exports.DEBUG&&console.log(t.step,"MSIRP["+a+"]",l,o),t.rp1=t.rp0,t.rp2=o,a&&(t.rp0=o)}function Pb(a){for(var t=a.stack,r=a.rp0,l=a.z0[r],o=a.loop,u=a.fv,f=a.pv,p=a.z1;o--;){var h=t.pop(),m=p[h];exports.DEBUG&&console.log(a.step,(a.loop>1?"loop "+(a.loop-o)+": ":"")+"ALIGNRP[]",h),u.setRelative(m,l,0,f),u.touch(m)}a.loop=1}function Yb(a){exports.DEBUG&&console.log(a.step,"RTDG[]"),a.round=sb}function $p(a,t){var r=t.stack,l=r.pop(),o=r.pop(),u=t.z0[o],f=t.fv,p=t.pv,h=t.cvt[l];exports.DEBUG&&console.log(t.step,"MIAP["+a+"]",l,"(",h,")",o);var m=p.distance(u,Ol);a&&(Math.abs(m-h)<t.cvCutIn&&(m=h),m=t.round(m)),f.setRelative(u,Ol,m,p),t.zp0===0&&(u.xo=u.x,u.yo=u.y),f.touch(u),t.rp0=t.rp1=o}function qb(a){var t=a.prog,r=a.ip,l=a.stack,o=t[++r];exports.DEBUG&&console.log(a.step,"NPUSHB[]",o);for(var u=0;u<o;u++)l.push(t[++r]);a.ip=r}function Vb(a){var t=a.ip,r=a.prog,l=a.stack,o=r[++t];exports.DEBUG&&console.log(a.step,"NPUSHW[]",o);for(var u=0;u<o;u++){var f=r[++t]<<8|r[++t];f&32768&&(f=-((f^65535)+1)),l.push(f)}a.ip=t}function Xb(a){var t=a.stack,r=a.store;r||(r=a.store=[]);var l=t.pop(),o=t.pop();exports.DEBUG&&console.log(a.step,"WS",l,o),r[o]=l}function Zb(a){var t=a.stack,r=a.store,l=t.pop();exports.DEBUG&&console.log(a.step,"RS",l);var o=r&&r[l]||0;t.push(o)}function Qb(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"WCVTP",r,l),a.cvt[l]=r/64}function Kb(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"RCVT",r),t.push(a.cvt[r]*64)}function e0(a,t){var r=t.stack,l=r.pop(),o=t.z2[l];exports.DEBUG&&console.log(t.step,"GC["+a+"]",l),r.push(t.dpv.distance(o,Ol,a,!1)*64)}function t0(a,t){var r=t.stack,l=r.pop(),o=r.pop(),u=t.z1[l],f=t.z0[o],p=t.dpv.distance(f,u,a,a);exports.DEBUG&&console.log(t.step,"MD["+a+"]",l,o,"->",p),t.stack.push(Math.round(p*64))}function Wb(a){exports.DEBUG&&console.log(a.step,"MPPEM[]"),a.stack.push(a.ppem)}function Jb(a){exports.DEBUG&&console.log(a.step,"FLIPON[]"),a.autoFlip=!0}function $b(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"LT[]",r,l),t.push(l<r?1:0)}function eS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"LTEQ[]",r,l),t.push(l<=r?1:0)}function tS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"GT[]",r,l),t.push(l>r?1:0)}function nS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"GTEQ[]",r,l),t.push(l>=r?1:0)}function aS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"EQ[]",r,l),t.push(r===l?1:0)}function rS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"NEQ[]",r,l),t.push(r!==l?1:0)}function iS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"ODD[]",r),t.push(Math.trunc(r)%2?1:0)}function lS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"EVEN[]",r),t.push(Math.trunc(r)%2?0:1)}function sS(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"IF[]",t),t||(Z0(a,!0),exports.DEBUG&&console.log(a.step,"EIF[]"))}function oS(a){exports.DEBUG&&console.log(a.step,"EIF[]")}function uS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"AND[]",r,l),t.push(r&&l?1:0)}function cS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"OR[]",r,l),t.push(r||l?1:0)}function fS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"NOT[]",r),t.push(r?0:1)}function Sc(a,t){var r=t.stack,l=r.pop(),o=t.fv,u=t.pv,f=t.ppem,p=t.deltaBase+(a-1)*16,h=t.deltaShift,m=t.z0;exports.DEBUG&&console.log(t.step,"DELTAP["+a+"]",l,r);for(var v=0;v<l;v++){var x=r.pop(),S=r.pop(),E=p+((S&240)>>4);if(E===f){var C=(S&15)-8;C>=0&&C++,exports.DEBUG&&console.log(t.step,"DELTAPFIX",x,"by",C*h);var D=m[x];o.setRelative(D,D,C*h,u)}}}function dS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"SDB[]",r),a.deltaBase=r}function hS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"SDS[]",r),a.deltaShift=Math.pow(.5,r)}function pS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"ADD[]",r,l),t.push(l+r)}function mS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"SUB[]",r,l),t.push(l-r)}function vS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"DIV[]",r,l),t.push(l*64/r)}function gS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"MUL[]",r,l),t.push(l*r/64)}function yS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"ABS[]",r),t.push(Math.abs(r))}function bS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"NEG[]",r),t.push(-r)}function SS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"FLOOR[]",r),t.push(Math.floor(r/64)*64)}function xS(a){var t=a.stack,r=t.pop();exports.DEBUG&&console.log(a.step,"CEILING[]",r),t.push(Math.ceil(r/64)*64)}function Ks(a,t){var r=t.stack,l=r.pop();exports.DEBUG&&console.log(t.step,"ROUND[]"),r.push(t.round(l/64)*64)}function ES(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"WCVTF[]",r,l),a.cvt[l]=r*a.ppem/a.font.unitsPerEm}function xc(a,t){var r=t.stack,l=r.pop(),o=t.ppem,u=t.deltaBase+(a-1)*16,f=t.deltaShift;exports.DEBUG&&console.log(t.step,"DELTAC["+a+"]",l,r);for(var p=0;p<l;p++){var h=r.pop(),m=r.pop(),v=u+((m&240)>>4);if(v===o){var x=(m&15)-8;x>=0&&x++;var S=x*f;exports.DEBUG&&console.log(t.step,"DELTACFIX",h,"by",S),t.cvt[h]+=S}}}function TS(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"SROUND[]",t),a.round=X0;var r;switch(t&192){case 0:r=.5;break;case 64:r=1;break;case 128:r=2;break;default:throw new Error("invalid SROUND value")}switch(a.srPeriod=r,t&48){case 0:a.srPhase=0;break;case 16:a.srPhase=.25*r;break;case 32:a.srPhase=.5*r;break;case 48:a.srPhase=.75*r;break;default:throw new Error("invalid SROUND value")}t&=15,t===0?a.srThreshold=0:a.srThreshold=(t/8-.5)*r}function AS(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"S45ROUND[]",t),a.round=X0;var r;switch(t&192){case 0:r=Math.sqrt(2)/2;break;case 64:r=Math.sqrt(2);break;case 128:r=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(a.srPeriod=r,t&48){case 0:a.srPhase=0;break;case 16:a.srPhase=.25*r;break;case 32:a.srPhase=.5*r;break;case 48:a.srPhase=.75*r;break;default:throw new Error("invalid S45ROUND value")}t&=15,t===0?a.srThreshold=0:a.srThreshold=(t/8-.5)*r}function CS(a){exports.DEBUG&&console.log(a.step,"ROFF[]"),a.round=lb}function NS(a){exports.DEBUG&&console.log(a.step,"RUTG[]"),a.round=ub}function MS(a){exports.DEBUG&&console.log(a.step,"RDTG[]"),a.round=cb}function RS(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"SCANCTRL[]",t)}function n0(a,t){var r=t.stack,l=r.pop(),o=r.pop(),u=t.z2[l],f=t.z1[o];exports.DEBUG&&console.log(t.step,"SDPVTL["+a+"]",l,o);var p,h;a?(p=u.y-f.y,h=f.x-u.x):(p=f.x-u.x,h=f.y-u.y),t.dpv=Ll(p,h)}function wS(a){var t=a.stack,r=t.pop(),l=0;exports.DEBUG&&console.log(a.step,"GETINFO[]",r),r&1&&(l=35),r&32&&(l|=4096),t.push(l)}function OS(a){var t=a.stack,r=t.pop(),l=t.pop(),o=t.pop();exports.DEBUG&&console.log(a.step,"ROLL[]"),t.push(l),t.push(r),t.push(o)}function DS(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"MAX[]",r,l),t.push(Math.max(l,r))}function _S(a){var t=a.stack,r=t.pop(),l=t.pop();exports.DEBUG&&console.log(a.step,"MIN[]",r,l),t.push(Math.min(l,r))}function US(a){var t=a.stack.pop();exports.DEBUG&&console.log(a.step,"SCANTYPE[]",t)}function LS(a){var t=a.stack.pop(),r=a.stack.pop();switch(exports.DEBUG&&console.log(a.step,"INSTCTRL[]",t,r),t){case 1:a.inhibitGridFit=!!r;return;case 2:a.ignoreCvt=!!r;return;default:throw new Error("invalid INSTCTRL[] selector")}}function er(a,t){var r=t.stack,l=t.prog,o=t.ip;exports.DEBUG&&console.log(t.step,"PUSHB["+a+"]");for(var u=0;u<a;u++)r.push(l[++o]);t.ip=o}function tr(a,t){var r=t.ip,l=t.prog,o=t.stack;exports.DEBUG&&console.log(t.ip,"PUSHW["+a+"]");for(var u=0;u<a;u++){var f=l[++r]<<8|l[++r];f&32768&&(f=-((f^65535)+1)),o.push(f)}t.ip=r}function ye(a,t,r,l,o,u){var f=u.stack,p=a&&f.pop(),h=f.pop(),m=u.rp0,v=u.z0[m],x=u.z1[h],S=u.minDis,E=u.fv,C=u.dpv,D,j,N,V;j=D=C.distance(x,v,!0,!0),N=j>=0?1:-1,j=Math.abs(j),a&&(V=u.cvt[p],l&&Math.abs(j-V)<u.cvCutIn&&(j=V)),r&&j<S&&(j=S),l&&(j=u.round(j)),E.setRelative(x,v,N*j,C),E.touch(x),exports.DEBUG&&console.log(u.step,(a?"MIRP[":"MDRP[")+(t?"M":"m")+(r?">":"_")+(l?"R":"_")+(o===0?"Gr":o===1?"Bl":o===2?"Wh":"")+"]",a?p+"("+u.cvt[p]+","+V+")":"",h,"(d =",D,"->",N*j,")"),u.rp1=u.rp0,u.rp2=h,t&&(u.rp0=h)}P0=[Hp.bind(void 0,Ca),Hp.bind(void 0,ia),Pp.bind(void 0,Ca),Pp.bind(void 0,ia),Yp.bind(void 0,Ca),Yp.bind(void 0,ia),qp.bind(void 0,0),qp.bind(void 0,1),Vp.bind(void 0,0),Vp.bind(void 0,1),db,hb,pb,mb,vb,gb,yb,bb,Sb,xb,Eb,Tb,Ab,Cb,Nb,Mb,Rb,wb,Ob,Db,void 0,void 0,_b,bc,Ub,Lb,kb,Fb,Gb,void 0,void 0,void 0,Bb,Ib,jb,void 0,Xp.bind(void 0,0),Xp.bind(void 0,1),Zp.bind(void 0,Ca),Zp.bind(void 0,ia),Qp.bind(void 0,0),Qp.bind(void 0,1),Kp.bind(void 0,0),Kp.bind(void 0,1),Wp.bind(void 0,0),Wp.bind(void 0,1),zb,Hb,Jp.bind(void 0,0),Jp.bind(void 0,1),Pb,Yb,$p.bind(void 0,0),$p.bind(void 0,1),qb,Vb,Xb,Zb,Qb,Kb,e0.bind(void 0,0),e0.bind(void 0,1),void 0,t0.bind(void 0,0),t0.bind(void 0,1),Wb,void 0,Jb,void 0,void 0,$b,eS,tS,nS,aS,rS,iS,lS,sS,oS,uS,cS,fS,Sc.bind(void 0,1),dS,hS,pS,mS,vS,gS,yS,bS,SS,xS,Ks.bind(void 0,0),Ks.bind(void 0,1),Ks.bind(void 0,2),Ks.bind(void 0,3),void 0,void 0,void 0,void 0,ES,Sc.bind(void 0,2),Sc.bind(void 0,3),xc.bind(void 0,1),xc.bind(void 0,2),xc.bind(void 0,3),TS,AS,void 0,void 0,CS,void 0,NS,MS,bc,bc,void 0,void 0,void 0,void 0,void 0,RS,n0.bind(void 0,0),n0.bind(void 0,1),wS,void 0,OS,DS,_S,US,LS,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,er.bind(void 0,1),er.bind(void 0,2),er.bind(void 0,3),er.bind(void 0,4),er.bind(void 0,5),er.bind(void 0,6),er.bind(void 0,7),er.bind(void 0,8),tr.bind(void 0,1),tr.bind(void 0,2),tr.bind(void 0,3),tr.bind(void 0,4),tr.bind(void 0,5),tr.bind(void 0,6),tr.bind(void 0,7),tr.bind(void 0,8),ye.bind(void 0,0,0,0,0,0),ye.bind(void 0,0,0,0,0,1),ye.bind(void 0,0,0,0,0,2),ye.bind(void 0,0,0,0,0,3),ye.bind(void 0,0,0,0,1,0),ye.bind(void 0,0,0,0,1,1),ye.bind(void 0,0,0,0,1,2),ye.bind(void 0,0,0,0,1,3),ye.bind(void 0,0,0,1,0,0),ye.bind(void 0,0,0,1,0,1),ye.bind(void 0,0,0,1,0,2),ye.bind(void 0,0,0,1,0,3),ye.bind(void 0,0,0,1,1,0),ye.bind(void 0,0,0,1,1,1),ye.bind(void 0,0,0,1,1,2),ye.bind(void 0,0,0,1,1,3),ye.bind(void 0,0,1,0,0,0),ye.bind(void 0,0,1,0,0,1),ye.bind(void 0,0,1,0,0,2),ye.bind(void 0,0,1,0,0,3),ye.bind(void 0,0,1,0,1,0),ye.bind(void 0,0,1,0,1,1),ye.bind(void 0,0,1,0,1,2),ye.bind(void 0,0,1,0,1,3),ye.bind(void 0,0,1,1,0,0),ye.bind(void 0,0,1,1,0,1),ye.bind(void 0,0,1,1,0,2),ye.bind(void 0,0,1,1,0,3),ye.bind(void 0,0,1,1,1,0),ye.bind(void 0,0,1,1,1,1),ye.bind(void 0,0,1,1,1,2),ye.bind(void 0,0,1,1,1,3),ye.bind(void 0,1,0,0,0,0),ye.bind(void 0,1,0,0,0,1),ye.bind(void 0,1,0,0,0,2),ye.bind(void 0,1,0,0,0,3),ye.bind(void 0,1,0,0,1,0),ye.bind(void 0,1,0,0,1,1),ye.bind(void 0,1,0,0,1,2),ye.bind(void 0,1,0,0,1,3),ye.bind(void 0,1,0,1,0,0),ye.bind(void 0,1,0,1,0,1),ye.bind(void 0,1,0,1,0,2),ye.bind(void 0,1,0,1,0,3),ye.bind(void 0,1,0,1,1,0),ye.bind(void 0,1,0,1,1,1),ye.bind(void 0,1,0,1,1,2),ye.bind(void 0,1,0,1,1,3),ye.bind(void 0,1,1,0,0,0),ye.bind(void 0,1,1,0,0,1),ye.bind(void 0,1,1,0,0,2),ye.bind(void 0,1,1,0,0,3),ye.bind(void 0,1,1,0,1,0),ye.bind(void 0,1,1,0,1,1),ye.bind(void 0,1,1,0,1,2),ye.bind(void 0,1,1,0,1,3),ye.bind(void 0,1,1,1,0,0),ye.bind(void 0,1,1,1,0,1),ye.bind(void 0,1,1,1,0,2),ye.bind(void 0,1,1,1,0,3),ye.bind(void 0,1,1,1,1,0),ye.bind(void 0,1,1,1,1,1),ye.bind(void 0,1,1,1,1,2),ye.bind(void 0,1,1,1,1,3)];function Si(a){this.char=a,this.state={},this.activeState=null}function Gc(a,t,r){this.contextName=r,this.startIndex=a,this.endOffset=t}function kS(a,t,r){this.contextName=a,this.openRange=null,this.ranges=[],this.checkStart=t,this.checkEnd=r}function Vn(a,t){this.context=a,this.index=t,this.length=a.length,this.current=a[t],this.backtrack=a.slice(0,t),this.lookahead=a.slice(t+1)}function oo(a){this.eventId=a,this.subscribers=[]}function BS(a){var t=this,r=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];r.forEach(function(o){Object.defineProperty(t.events,o,{value:new oo(o)})}),a&&r.forEach(function(o){var u=a[o];typeof u=="function"&&t.events[o].subscribe(u)});var l=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];l.forEach(function(o){t.events[o].subscribe(t.updateContextsRanges)})}function Mt(a){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],BS.call(this,a)}Si.prototype.setState=function(a,t){return this.state[a]=t,this.activeState={key:a,value:this.state[a]},this.activeState};Si.prototype.getState=function(a){return this.state[a]||null};Mt.prototype.inboundIndex=function(a){return a>=0&&a<this.tokens.length};Mt.prototype.composeRUD=function(a){var t=this,r=!0,l=a.map(function(u){return t[u[0]].apply(t,u.slice(1).concat(r))}),o=function(u){return typeof u=="object"&&u.hasOwnProperty("FAIL")};if(l.every(o))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:l.filter(o)};this.dispatch("composeRUD",[l.filter(function(u){return!o(u)})])};Mt.prototype.replaceRange=function(a,t,r,l){t=t!==null?t:this.tokens.length;var o=r.every(function(f){return f instanceof Si});if(!isNaN(a)&&this.inboundIndex(a)&&o){var u=this.tokens.splice.apply(this.tokens,[a,t].concat(r));return l||this.dispatch("replaceToken",[a,t,r]),[u,r]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};Mt.prototype.replaceToken=function(a,t,r){if(!isNaN(a)&&this.inboundIndex(a)&&t instanceof Si){var l=this.tokens.splice(a,1,t);return r||this.dispatch("replaceToken",[a,t]),[l[0],t]}else return{FAIL:"replaceToken: invalid token or index."}};Mt.prototype.removeRange=function(a,t,r){t=isNaN(t)?this.tokens.length:t;var l=this.tokens.splice(a,t);return r||this.dispatch("removeRange",[l,a,t]),l};Mt.prototype.removeToken=function(a,t){if(!isNaN(a)&&this.inboundIndex(a)){var r=this.tokens.splice(a,1);return t||this.dispatch("removeToken",[r,a]),r}else return{FAIL:"removeToken: invalid token index."}};Mt.prototype.insertToken=function(a,t,r){var l=a.every(function(o){return o instanceof Si});return l?(this.tokens.splice.apply(this.tokens,[t,0].concat(a)),r||this.dispatch("insertToken",[a,t]),a):{FAIL:"insertToken: invalid token(s)."}};Mt.prototype.registerModifier=function(a,t,r){this.events.newToken.subscribe(function(l,o){var u=[l,o],f=t===null||t.apply(this,u)===!0,p=[l,o];if(f){var h=r.apply(this,p);l.setState(a,h)}}),this.registeredModifiers.push(a)};oo.prototype.subscribe=function(a){return typeof a=="function"?this.subscribers.push(a)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};oo.prototype.unsubscribe=function(a){this.subscribers.splice(a,1)};Vn.prototype.setCurrentIndex=function(a){this.index=a,this.current=this.context[a],this.backtrack=this.context.slice(0,a),this.lookahead=this.context.slice(a+1)};Vn.prototype.get=function(a){switch(!0){case a===0:return this.current;case(a<0&&Math.abs(a)<=this.backtrack.length):return this.backtrack.slice(a)[0];case(a>0&&a<=this.lookahead.length):return this.lookahead[a-1];default:return null}};Mt.prototype.rangeToText=function(a){if(a instanceof Gc)return this.getRangeTokens(a).map(function(t){return t.char}).join("")};Mt.prototype.getText=function(){return this.tokens.map(function(a){return a.char}).join("")};Mt.prototype.getContext=function(a){var t=this.registeredContexts[a];return t||null};Mt.prototype.on=function(a,t){var r=this.events[a];return r?r.subscribe(t):null};Mt.prototype.dispatch=function(a,t){var r=this,l=this.events[a];l instanceof oo&&l.subscribers.forEach(function(o){o.apply(r,t||[])})};Mt.prototype.registerContextChecker=function(a,t,r){if(this.getContext(a))return{FAIL:"context name '"+a+"' is already registered."};if(typeof t!="function")return{FAIL:"missing context start check."};if(typeof r!="function")return{FAIL:"missing context end check."};var l=new kS(a,t,r);return this.registeredContexts[a]=l,this.contextCheckers.push(l),l};Mt.prototype.getRangeTokens=function(a){var t=a.startIndex+a.endOffset;return[].concat(this.tokens.slice(a.startIndex,t))};Mt.prototype.getContextRanges=function(a){var t=this.getContext(a);return t?t.ranges:{FAIL:"context checker '"+a+"' is not registered."}};Mt.prototype.resetContextsRanges=function(){var a=this.registeredContexts;for(var t in a)if(a.hasOwnProperty(t)){var r=a[t];r.ranges=[]}};Mt.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var a=this.tokens.map(function(l){return l.char}),t=0;t<a.length;t++){var r=new Vn(a,t);this.runContextCheck(r)}this.dispatch("updateContextsRanges",[this.registeredContexts])};Mt.prototype.setEndOffset=function(a,t){var r=this.getContext(t).openRange.startIndex,l=new Gc(r,a,t),o=this.getContext(t).ranges;return l.rangeId=t+"."+o.length,o.push(l),this.getContext(t).openRange=null,l};Mt.prototype.runContextCheck=function(a){var t=this,r=a.index;this.contextCheckers.forEach(function(l){var o=l.contextName,u=t.getContext(o).openRange;if(!u&&l.checkStart(a)&&(u=new Gc(r,null,o),t.getContext(o).openRange=u,t.dispatch("contextStart",[o,r])),u&&l.checkEnd(a)){var f=r-u.startIndex+1,p=t.setEndOffset(f,o);t.dispatch("contextEnd",[o,p])}})};Mt.prototype.tokenize=function(a){this.tokens=[],this.resetContextsRanges();var t=Array.from(a);this.dispatch("start");for(var r=0;r<t.length;r++){var l=t[r],o=new Vn(t,r);this.dispatch("next",[o]),this.runContextCheck(o);var u=new Si(l);this.tokens.push(u),this.dispatch("newToken",[u,o])}return this.dispatch("end",[this.tokens]),this.tokens};function rr(a){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(a)}function Q0(a){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(a)}function lr(a){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(a)}function $s(a){return/[A-z]/.test(a)}function IS(a){return/\s/.test(a)}function xn(a){this.font=a,this.features={}}function Dr(a){this.id=a.id,this.tag=a.tag,this.substitution=a.substitution}function kl(a,t){if(!a)return-1;switch(t.format){case 1:return t.glyphs.indexOf(a);case 2:for(var r=t.ranges,l=0;l<r.length;l++){var o=r[l];if(a>=o.start&&a<=o.end){var u=a-o.start;return o.index+u}}break;default:return-1}return-1}function FS(a,t){var r=kl(a,t.coverage);return r===-1?null:a+t.deltaGlyphId}function GS(a,t){var r=kl(a,t.coverage);return r===-1?null:t.substitute[r]}function Ec(a,t){for(var r=[],l=0;l<a.length;l++){var o=a[l],u=t.current;u=Array.isArray(u)?u[0]:u;var f=kl(u,o);f!==-1&&r.push(f)}return r.length!==a.length?-1:r}function jS(a,t){var r=t.inputCoverage.length+t.lookaheadCoverage.length+t.backtrackCoverage.length;if(a.context.length<r)return[];var l=Ec(t.inputCoverage,a);if(l===-1)return[];var o=t.inputCoverage.length-1;if(a.lookahead.length<t.lookaheadCoverage.length)return[];for(var u=a.lookahead.slice(o);u.length&&lr(u[0].char);)u.shift();var f=new Vn(u,0),p=Ec(t.lookaheadCoverage,f),h=[].concat(a.backtrack);for(h.reverse();h.length&&lr(h[0].char);)h.shift();if(h.length<t.backtrackCoverage.length)return[];var m=new Vn(h,0),v=Ec(t.backtrackCoverage,m),x=l.length===t.inputCoverage.length&&p.length===t.lookaheadCoverage.length&&v.length===t.backtrackCoverage.length,S=[];if(x)for(var E=0;E<t.lookupRecords.length;E++)for(var C=t.lookupRecords[E],D=C.lookupListIndex,j=this.getLookupByIndex(D),N=0;N<j.subtables.length;N++){var V=j.subtables[N],U=this.getLookupMethod(j,V),Y=this.getSubstitutionType(j,V);if(Y==="12")for(var Q=0;Q<l.length;Q++){var ue=a.get(Q),Ee=U(ue);Ee&&S.push(Ee)}}return S}function zS(a,t){var r=a.current,l=kl(r,t.coverage);if(l===-1)return null;for(var o,u=t.ligatureSets[l],f=0;f<u.length;f++){o=u[f];for(var p=0;p<o.components.length;p++){var h=a.lookahead[p],m=o.components[p];if(h!==m)break;if(p===o.components.length-1)return o}}return null}function HS(a,t){var r=kl(a,t.coverage);return r===-1?null:t.sequences[r]}xn.prototype.getDefaultScriptFeaturesIndexes=function(){for(var a=this.font.tables.gsub.scripts,t=0;t<a.length;t++){var r=a[t];if(r.tag==="DFLT")return r.script.defaultLangSys.featureIndexes}return[]};xn.prototype.getScriptFeaturesIndexes=function(a){var t=this.font.tables;if(!t.gsub)return[];if(!a)return this.getDefaultScriptFeaturesIndexes();for(var r=this.font.tables.gsub.scripts,l=0;l<r.length;l++){var o=r[l];if(o.tag===a&&o.script.defaultLangSys)return o.script.defaultLangSys.featureIndexes;var u=o.langSysRecords;if(u)for(var f=0;f<u.length;f++){var p=u[f];if(p.tag===a){var h=p.langSys;return h.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()};xn.prototype.mapTagsToFeatures=function(a,t){for(var r={},l=0;l<a.length;l++){var o=a[l].tag,u=a[l].feature;r[o]=u}this.features[t].tags=r};xn.prototype.getScriptFeatures=function(a){var t=this.features[a];if(this.features.hasOwnProperty(a))return t;var r=this.getScriptFeaturesIndexes(a);if(!r)return null;var l=this.font.tables.gsub;return t=r.map(function(o){return l.features[o]}),this.features[a]=t,this.mapTagsToFeatures(t,a),t};xn.prototype.getSubstitutionType=function(a,t){var r=a.lookupType.toString(),l=t.substFormat.toString();return r+l};xn.prototype.getLookupMethod=function(a,t){var r=this,l=this.getSubstitutionType(a,t);switch(l){case"11":return function(o){return FS.apply(r,[o,t])};case"12":return function(o){return GS.apply(r,[o,t])};case"63":return function(o){return jS.apply(r,[o,t])};case"41":return function(o){return zS.apply(r,[o,t])};case"21":return function(o){return HS.apply(r,[o,t])};default:throw new Error("lookupType: "+a.lookupType+" - substFormat: "+t.substFormat+" is not yet supported")}};xn.prototype.lookupFeature=function(a){var t=a.contextParams,r=t.index,l=this.getFeature({tag:a.tag,script:a.script});if(!l)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+a.tag+"' for script '"+a.script+"'.");for(var o=this.getFeatureLookups(l),u=[].concat(t.context),f=0;f<o.length;f++)for(var p=o[f],h=this.getLookupSubtables(p),m=0;m<h.length;m++){var v=h[m],x=this.getSubstitutionType(p,v),S=this.getLookupMethod(p,v),E=void 0;switch(x){case"11":E=S(t.current),E&&u.splice(r,1,new Dr({id:11,tag:a.tag,substitution:E}));break;case"12":E=S(t.current),E&&u.splice(r,1,new Dr({id:12,tag:a.tag,substitution:E}));break;case"63":E=S(t),Array.isArray(E)&&E.length&&u.splice(r,1,new Dr({id:63,tag:a.tag,substitution:E}));break;case"41":E=S(t),E&&u.splice(r,1,new Dr({id:41,tag:a.tag,substitution:E}));break;case"21":E=S(t.current),E&&u.splice(r,1,new Dr({id:21,tag:a.tag,substitution:E}));break}t=new Vn(u,r),!(Array.isArray(E)&&!E.length)&&(E=null)}return u.length?u:null};xn.prototype.supports=function(a){if(!a.script)return!1;this.getScriptFeatures(a.script);var t=this.features.hasOwnProperty(a.script);if(!a.tag)return t;var r=this.features[a.script].some(function(l){return l.tag===a.tag});return t&&r};xn.prototype.getLookupSubtables=function(a){return a.subtables||null};xn.prototype.getLookupByIndex=function(a){var t=this.font.tables.gsub.lookups;return t[a]||null};xn.prototype.getFeatureLookups=function(a){return a.lookupListIndexes.map(this.getLookupByIndex.bind(this))};xn.prototype.getFeature=function(t){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(t.script)||this.getScriptFeatures(t.script);var r=this.features[t.script];return r?r.tags[t.tag]?this.features[t.script].tags[t.tag]:null:{FAIL:"No feature for script "+t.script}};function PS(a){var t=a.current,r=a.get(-1);return r===null&&rr(t)||!rr(r)&&rr(t)}function YS(a){var t=a.get(1);return t===null||!rr(t)}var qS={startCheck:PS,endCheck:YS};function VS(a){var t=a.current,r=a.get(-1);return(rr(t)||lr(t))&&!rr(r)}function XS(a){var t=a.get(1);switch(!0){case t===null:return!0;case(!rr(t)&&!lr(t)):var r=IS(t);if(!r)return!0;if(r){var l=!1;if(l=a.lookahead.some(function(o){return rr(o)||lr(o)}),!l)return!0}break;default:return!1}}var ZS={startCheck:VS,endCheck:XS};function QS(a,t,r){t[r].setState(a.tag,a.substitution)}function KS(a,t,r){t[r].setState(a.tag,a.substitution)}function WS(a,t,r){a.substitution.forEach(function(l,o){var u=t[r+o];u.setState(a.tag,l)})}function JS(a,t,r){var l=t[r];l.setState(a.tag,a.substitution.ligGlyph);for(var o=a.substitution.components.length,u=0;u<o;u++)l=t[r+u+1],l.setState("deleted",!0)}var a0={11:QS,12:KS,63:WS,41:JS};function jc(a,t,r){a instanceof Dr&&a0[a.id]&&a0[a.id](a,t,r)}function $S(a){for(var t=[].concat(a.backtrack),r=t.length-1;r>=0;r--){var l=t[r],o=Q0(l),u=lr(l);if(!o&&!u)return!0;if(o)return!1}return!1}function ex(a){if(Q0(a.current))return!1;for(var t=0;t<a.lookahead.length;t++){var r=a.lookahead[t],l=lr(r);if(!l)return!0}return!1}function tx(a){var t=this,r="arab",l=this.featuresTags[r],o=this.tokenizer.getRangeTokens(a);if(o.length!==1){var u=new Vn(o.map(function(p){return p.getState("glyphIndex")}),0),f=new Vn(o.map(function(p){return p.char}),0);o.forEach(function(p,h){if(!lr(p.char)){u.setCurrentIndex(h),f.setCurrentIndex(h);var m=0;$S(f)&&(m|=1),ex(f)&&(m|=2);var v;switch(m){case 1:v="fina";break;case 2:v="init";break;case 3:v="medi";break}if(l.indexOf(v)!==-1){var x=t.query.lookupFeature({tag:v,script:r,contextParams:u});if(x instanceof Error)return console.info(x.message);x.forEach(function(S,E){S instanceof Dr&&(jc(S,o,E),u.context[E]=S.substitution)})}}})}}function r0(a,t){var r=a.map(function(l){return l.activeState.value});return new Vn(r,0)}function nx(a){var t=this,r="arab",l=this.tokenizer.getRangeTokens(a),o=r0(l);o.context.forEach(function(u,f){o.setCurrentIndex(f);var p=t.query.lookupFeature({tag:"rlig",script:r,contextParams:o});p.length&&(p.forEach(function(h){return jc(h,l,f)}),o=r0(l))})}function ax(a){var t=a.current,r=a.get(-1);return r===null&&$s(t)||!$s(r)&&$s(t)}function rx(a){var t=a.get(1);return t===null||!$s(t)}var ix={startCheck:ax,endCheck:rx};function i0(a,t){var r=a.map(function(l){return l.activeState.value});return new Vn(r,0)}function lx(a){var t=this,r="latn",l=this.tokenizer.getRangeTokens(a),o=i0(l);o.context.forEach(function(u,f){o.setCurrentIndex(f);var p=t.query.lookupFeature({tag:"liga",script:r,contextParams:o});p.length&&(p.forEach(function(h){return jc(h,l,f)}),o=i0(l))})}function Zn(a){this.baseDir=a||"ltr",this.tokenizer=new Mt,this.featuresTags={}}Zn.prototype.setText=function(a){this.text=a};Zn.prototype.contextChecks={latinWordCheck:ix,arabicWordCheck:qS,arabicSentenceCheck:ZS};function Tc(a){var t=this.contextChecks[a+"Check"];return this.tokenizer.registerContextChecker(a,t.startCheck,t.endCheck)}function sx(){return Tc.call(this,"latinWord"),Tc.call(this,"arabicWord"),Tc.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function ox(){var a=this,t=this.tokenizer.getContextRanges("arabicSentence");t.forEach(function(r){var l=a.tokenizer.getRangeTokens(r);a.tokenizer.replaceRange(r.startIndex,r.endOffset,l.reverse())})}Zn.prototype.registerFeatures=function(a,t){var r=this,l=t.filter(function(o){return r.query.supports({script:a,tag:o})});this.featuresTags.hasOwnProperty(a)?this.featuresTags[a]=this.featuresTags[a].concat(l):this.featuresTags[a]=l};Zn.prototype.applyFeatures=function(a,t){if(!a)throw new Error("No valid font was provided to apply features");this.query||(this.query=new xn(a));for(var r=0;r<t.length;r++){var l=t[r];this.query.supports({script:l.script})&&this.registerFeatures(l.script,l.tags)}};Zn.prototype.registerModifier=function(a,t,r){this.tokenizer.registerModifier(a,t,r)};function zc(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function ux(){var a=this,t="arab";if(this.featuresTags.hasOwnProperty(t)){zc.call(this);var r=this.tokenizer.getContextRanges("arabicWord");r.forEach(function(l){tx.call(a,l)})}}function cx(){var a=this,t="arab";if(this.featuresTags.hasOwnProperty(t)){var r=this.featuresTags[t];if(r.indexOf("rlig")!==-1){zc.call(this);var l=this.tokenizer.getContextRanges("arabicWord");l.forEach(function(o){nx.call(a,o)})}}}function fx(){var a=this,t="latn";if(this.featuresTags.hasOwnProperty(t)){var r=this.featuresTags[t];if(r.indexOf("liga")!==-1){zc.call(this);var l=this.tokenizer.getContextRanges("latinWord");l.forEach(function(o){lx.call(a,o)})}}}Zn.prototype.checkContextReady=function(a){return!!this.tokenizer.getContext(a)};Zn.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(ux.call(this),cx.call(this)),this.checkContextReady("latinWord")&&fx.call(this),this.checkContextReady("arabicSentence")&&ox.call(this)};Zn.prototype.processText=function(a){(!this.text||this.text!==a)&&(this.setText(a),sx.call(this),this.applyFeaturesToContexts())};Zn.prototype.getBidiText=function(a){return this.processText(a),this.tokenizer.getText()};Zn.prototype.getTextGlyphs=function(a){this.processText(a);for(var t=[],r=0;r<this.tokenizer.tokens.length;r++){var l=this.tokenizer.tokens[r];if(!l.state.deleted){var o=l.activeState.value;t.push(Array.isArray(o)?o[0]:o)}}return t};function vt(a){a=a||{},a.tables=a.tables||{},a.empty||(Cl(a.familyName,"When creating a new Font object, familyName is required."),Cl(a.styleName,"When creating a new Font object, styleName is required."),Cl(a.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Cl(a.ascender,"When creating a new Font object, ascender is required."),Cl(a.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:a.familyName||" "},fontSubfamily:{en:a.styleName||" "},fullName:{en:a.fullName||a.familyName+" "+a.styleName},postScriptName:{en:a.postScriptName||(a.familyName+a.styleName).replace(/\s/g,"")},designer:{en:a.designer||" "},designerURL:{en:a.designerURL||" "},manufacturer:{en:a.manufacturer||" "},manufacturerURL:{en:a.manufacturerURL||" "},license:{en:a.license||" "},licenseURL:{en:a.licenseURL||" "},version:{en:a.version||"Version 0.1"},description:{en:a.description||" "},copyright:{en:a.copyright||" "},trademark:{en:a.trademark||" "}},this.unitsPerEm=a.unitsPerEm||1e3,this.ascender=a.ascender,this.descender=a.descender,this.createdTimestamp=a.createdTimestamp,this.tables=Object.assign(a.tables,{os2:Object.assign({usWeightClass:a.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:a.widthClass||this.usWidthClasses.MEDIUM,fsSelection:a.fsSelection||this.fsSelectionValues.REGULAR},a.tables.os2)})),this.supported=!0,this.glyphs=new la.GlyphSet(this,a.glyphs||[]),this.encoding=new N0(this),this.position=new _l(this),this.substitution=new Sn(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new q0(this)}})}vt.prototype.hasChar=function(a){return this.encoding.charToGlyphIndex(a)!==null};vt.prototype.charToGlyphIndex=function(a){return this.encoding.charToGlyphIndex(a)};vt.prototype.charToGlyph=function(a){var t=this.charToGlyphIndex(a),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r};vt.prototype.updateFeatures=function(a){return this.defaultRenderOptions.features.map(function(t){return t.script==="latn"?{script:"latn",tags:t.tags.filter(function(r){return a[r]})}:t})};vt.prototype.stringToGlyphs=function(a,t){var r=this,l=new Zn,o=function(x){return r.charToGlyphIndex(x.char)};l.registerModifier("glyphIndex",null,o);var u=t?this.updateFeatures(t.features):this.defaultRenderOptions.features;l.applyFeatures(this,u);for(var f=l.getTextGlyphs(a),p=f.length,h=new Array(p),m=this.glyphs.get(0),v=0;v<p;v+=1)h[v]=this.glyphs.get(f[v])||m;return h};vt.prototype.nameToGlyphIndex=function(a){return this.glyphNames.nameToGlyphIndex(a)};vt.prototype.nameToGlyph=function(a){var t=this.nameToGlyphIndex(a),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r};vt.prototype.glyphIndexToName=function(a){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(a):""};vt.prototype.getKerningValue=function(a,t){a=a.index||a,t=t.index||t;var r=this.position.defaultKerningTables;return r?this.position.getKerningValue(r,a,t):this.kerningPairs[a+","+t]||0};vt.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};vt.prototype.forEachGlyph=function(a,t,r,l,o,u){t=t!==void 0?t:0,r=r!==void 0?r:0,l=l!==void 0?l:72,o=Object.assign({},this.defaultRenderOptions,o);var f=1/this.unitsPerEm*l,p=this.stringToGlyphs(a,o),h;if(o.kerning){var m=o.script||this.position.getDefaultScriptName();h=this.position.getKerningTables(m,o.language)}for(var v=0;v<p.length;v+=1){var x=p[v];if(u.call(this,x,t,r,l,o),x.advanceWidth&&(t+=x.advanceWidth*f),o.kerning&&v<p.length-1){var S=h?this.position.getKerningValue(h,x.index,p[v+1].index):this.getKerningValue(x,p[v+1]);t+=S*f}o.letterSpacing?t+=o.letterSpacing*l:o.tracking&&(t+=o.tracking/1e3*l)}return t};vt.prototype.getPath=function(a,t,r,l,o){var u=new Gt;return this.forEachGlyph(a,t,r,l,o,function(f,p,h,m){var v=f.getPath(p,h,m,o,this);u.extend(v)}),u};vt.prototype.getPaths=function(a,t,r,l,o){var u=[];return this.forEachGlyph(a,t,r,l,o,function(f,p,h,m){var v=f.getPath(p,h,m,o,this);u.push(v)}),u};vt.prototype.getAdvanceWidth=function(a,t,r){return this.forEachGlyph(a,0,0,t,r,function(){})};vt.prototype.draw=function(a,t,r,l,o,u){this.getPath(t,r,l,o,u).draw(a)};vt.prototype.drawPoints=function(a,t,r,l,o,u){this.forEachGlyph(t,r,l,o,u,function(f,p,h,m){f.drawPoints(a,p,h,m)})};vt.prototype.drawMetrics=function(a,t,r,l,o,u){this.forEachGlyph(t,r,l,o,u,function(f,p,h,m){f.drawMetrics(a,p,h,m)})};vt.prototype.getEnglishName=function(a){var t=this.names[a];if(t)return t.en};vt.prototype.validate=function(){var a=this;function t(l,o){}function r(l){var o=a.getEnglishName(l);o&&o.trim().length>0}r("fontFamily"),r("weightName"),r("manufacturer"),r("copyright"),r("version"),this.unitsPerEm>0};vt.prototype.toTables=function(){return W1.fontToTable(this)};vt.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};vt.prototype.toArrayBuffer=function(){for(var a=this.toTables(),t=a.encode(),r=new ArrayBuffer(t.length),l=new Uint8Array(r),o=0;o<t.length;o++)l[o]=t[o];return r};vt.prototype.download=function(a){var t=this.getEnglishName("fontFamily"),r=this.getEnglishName("fontSubfamily");a=a||t.replace(/\s/g,"")+"-"+r+".otf";var l=this.toArrayBuffer();if($1())if(window.URL=window.URL||window.webkitURL,window.URL){var o=new DataView(l),u=new Blob([o],{type:"font/opentype"}),f=document.createElement("a");f.href=window.URL.createObjectURL(u),f.download=a;var p=document.createEvent("MouseEvents");p.initEvent("click",!0,!1),f.dispatchEvent(p)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var h=require("fs"),m=eb(l);h.writeFileSync(a,m)}};vt.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};vt.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};vt.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Ma=new Array(10);Ma[1]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();if(r===1)return{posFormat:1,coverage:this.parsePointer(q.coverage),value:this.parseValueRecord()};if(r===2)return{posFormat:2,coverage:this.parsePointer(q.coverage),values:this.parseValueRecordList()};De.assert(!1,"0x"+t.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};Ma[2]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();De.assert(r===1||r===2,"0x"+t.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var l=this.parsePointer(q.coverage),o=this.parseUShort(),u=this.parseUShort();if(r===1)return{posFormat:r,coverage:l,valueFormat1:o,valueFormat2:u,pairSets:this.parseList(q.pointer(q.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(o),value2:this.parseValueRecord(u)}})))};if(r===2){var f=this.parsePointer(q.classDef),p=this.parsePointer(q.classDef),h=this.parseUShort(),m=this.parseUShort();return{posFormat:r,coverage:l,valueFormat1:o,valueFormat2:u,classDef1:f,classDef2:p,class1Count:h,class2Count:m,classRecords:this.parseList(h,q.list(m,function(){return{value1:this.parseValueRecord(o),value2:this.parseValueRecord(u)}}))}}};Ma[3]=function(){return{error:"GPOS Lookup 3 not supported"}};Ma[4]=function(){return{error:"GPOS Lookup 4 not supported"}};Ma[5]=function(){return{error:"GPOS Lookup 5 not supported"}};Ma[6]=function(){return{error:"GPOS Lookup 6 not supported"}};Ma[7]=function(){return{error:"GPOS Lookup 7 not supported"}};Ma[8]=function(){return{error:"GPOS Lookup 8 not supported"}};Ma[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);const l0=()=>Math.random().toString(36).substr(2,9),dx=ir.memo(({playbackFps:a,onSpeedChange:t})=>g.jsxs("div",{className:"master-speed-slider",children:[g.jsxs("label",{htmlFor:"masterSpeedRange",children:[a," FPS"]}),g.jsx(Et,{id:"master_speed",children:g.jsx("input",{type:"range",min:"1",max:"120",value:a,className:"slider_hor",id:"masterSpeedRange",onChange:r=>t(parseInt(r.target.value))})})]})),hx=ir.memo(({isWorldOutputActive:a,onToggleWorldOutput:t})=>g.jsx("div",{className:"container",children:g.jsx(Et,{id:"laser_output",children:g.jsx("input",{type:"checkbox",checked:a,onChange:t})})})),Ml=(a,t,r,l)=>!Array.isArray(a)||a.length!==t?Array(t).fill(null).map((o,u)=>Array(r).fill(null).map((f,p)=>l(u,p))):a.map((o,u)=>!Array.isArray(o)||o.length!==r?Array(r).fill(null).map((f,p)=>l(u,p)):o),K0=a=>({columns:Array.from({length:8},(t,r)=>`Col ${r+1}`),layers:Array.from({length:5},(t,r)=>`Layer ${r+1}`),clipContents:Ml(a?.clipContents,5,8,()=>({parsing:!1})),clipNames:Ml(a?.clipNames,5,8,(t,r)=>`Clip ${t+1}-${r+1}`),thumbnailFrameIndexes:Array(5).fill(null).map(()=>Array(8).fill(0)),layerEffects:Array(5).fill([]),layerIntensities:Array(5).fill(1),layerAutopilots:Array(5).fill("off"),layerBlackouts:Array(5).fill(!1),layerSolos:Array(5).fill(!1),masterIntensity:1,globalBlackout:!1,selectedLayerIndex:null,selectedColIndex:null,notification:{message:"",visible:!1},dacs:[],selectedDac:a?.dacAssignment?.selectedDac??a?.selectedDac??null,ildaFrames:[],selectedIldaWorkerId:null,selectedIldaTotalFrames:0,bpm:a?.bpm??120,showBeamEffect:a?.renderSettings?.showBeamEffect??!0,beamAlpha:a?.renderSettings?.beamAlpha??.1,fadeAlpha:a?.renderSettings?.fadeAlpha??.13,playbackFps:a?.renderSettings?.playbackFps??60,previewScanRate:a?.renderSettings?.previewScanRate??1,beamRenderMode:a?.renderSettings?.beamRenderMode??"points",activeClipIndexes:Array(5).fill(null),isPlaying:!1,isStopped:!0,isWorldOutputActive:!1,thumbnailRenderMode:a?.thumbnailRenderMode??"still",theme:a?.theme??"orange",projectLoadTimestamp:null,clipClipboard:null,dacOutputSettings:a?.dacOutputSettings??{},quickAssigns:{knobs:Array(8).fill(null).map(()=>({value:0,label:null,link:null})),buttons:Array(8).fill(null).map(()=>({value:!1,label:null,link:null}))}});function px(a,t){switch(t.type){case"SET_DAC_OUTPUT_SETTINGS":return{...a,dacOutputSettings:{...a.dacOutputSettings,[t.payload.id]:t.payload.settings}};case"SET_COLUMNS":return{...a,columns:t.payload};case"SET_COLUMN_NAME":{const l=[...a.columns];return l[t.payload.index]=t.payload.name,{...a,columns:l}}case"SET_LAYERS":return{...a,layers:t.payload};case"SET_LAYER_NAME":{const l=[...a.layers];return l[t.payload.index]=t.payload.name,{...a,layers:l}}case"SET_CLIP_CONTENT":{const l=[...a.clipContents];if(!l[t.payload.layerIndex])return console.error(`Reducer Error: Layer array at index ${t.payload.layerIndex} is undefined. Action:`,t),a;l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const o=l[t.payload.layerIndex][t.payload.colIndex]||{};return l[t.payload.layerIndex][t.payload.colIndex]={...o,...t.payload.content},{...a,clipContents:l}}case"SET_CLIP_NAME":{const l=[...a.clipNames];return l[t.payload.layerIndex]=[...l[t.payload.layerIndex]],l[t.payload.layerIndex][t.payload.colIndex]=t.payload.name,{...a,clipNames:l}}case"SET_THUMBNAIL_FRAME_INDEX":{const l=[...a.thumbnailFrameIndexes];return l[t.payload.layerIndex][t.payload.colIndex]=t.payload.index,{...a,thumbnailFrameIndexes:l}}case"ADD_LAYER_EFFECT":{const l=[...a.layerEffects],o={...t.payload.effect,instanceId:l0(),params:{...t.payload.effect.defaultParams}};return l[t.payload.layerIndex].push(o),{...a,layerEffects:l}}case"ADD_CLIP_EFFECT":{const l=[...a.clipContents];if(!l[t.payload.layerIndex])return console.error(`Reducer Error: Layer array at index ${t.payload.layerIndex} is undefined. Action:`,t),a;l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const o=l[t.payload.layerIndex][t.payload.colIndex]||{},u={...t.payload.effect,instanceId:l0(),params:{...t.payload.effect.defaultParams}},f={...o,effects:[...o.effects||[],u]};return l[t.payload.layerIndex][t.payload.colIndex]=f,{...a,clipContents:l}}case"SET_SELECTED_CLIP":return{...a,selectedLayerIndex:t.payload.layerIndex,selectedColIndex:t.payload.colIndex};case"SET_NOTIFICATION":return{...a,notification:t.payload};case"SET_ILDA_FRAMES":return{...a,ildaFrames:t.payload};case"SET_SELECTED_ILDA_DATA":return{...a,selectedIldaWorkerId:t.payload.workerId,selectedIldaTotalFrames:t.payload.totalFrames,selectedGeneratorId:t.payload.generatorId,selectedGeneratorParams:t.payload.generatorParams};case"SET_ACTIVE_CLIP":{const l=[...a.activeClipIndexes];return l[t.payload.layerIndex]=t.payload.colIndex,{...a,activeClipIndexes:l}}case"CLEAR_CLIP":{const l=[...a.clipContents];l[t.payload.layerIndex]=[...l[t.payload.layerIndex]],l[t.payload.layerIndex][t.payload.colIndex]=null;const o=[...a.clipNames];o[t.payload.layerIndex][t.payload.colIndex]=`Clip ${t.payload.layerIndex+1}-${t.payload.colIndex+1}`;const u=[...a.thumbnailFrameIndexes];u[t.payload.layerIndex][t.payload.colIndex]=0;const f=[...a.activeClipIndexes];return f[t.payload.layerIndex]===t.payload.colIndex&&(f[t.payload.layerIndex]=null),a.selectedLayerIndex===t.payload.layerIndex&&a.selectedColIndex===t.payload.colIndex?{...a,clipContents:l,clipNames:o,thumbnailFrameIndexes:u,activeClipIndexes:f,selectedLayerIndex:null,selectedColIndex:null,selectedIldaWorkerId:null,selectedIldaTotalFrames:0,selectedGeneratorId:null,selectedGeneratorParams:{}}:{...a,clipContents:l,clipNames:o,thumbnailFrameIndexes:u,activeClipIndexes:f}}case"DEACTIVATE_LAYER_CLIPS":{const l=[...a.activeClipIndexes];return l[t.payload.layerIndex]=null,{...a,activeClipIndexes:l}}case"CLEAR_ALL_ACTIVE_CLIPS":return{...a,activeClipIndexes:Array(a.layers.length).fill(null)};case"SET_LAYER_INTENSITY":{const l=[...a.layerIntensities];return l[t.payload.layerIndex]=t.payload.intensity,{...a,layerIntensities:l}}case"SET_LAYER_AUTOPILOT":{const l=[...a.layerAutopilots];return l[t.payload.layerIndex]=t.payload.mode,{...a,layerAutopilots:l}}case"TOGGLE_LAYER_BLACKOUT":{const l=[...a.layerBlackouts];return l[t.payload.layerIndex]=!l[t.payload.layerIndex],{...a,layerBlackouts:l}}case"TOGGLE_LAYER_SOLO":{const l=[...a.layerSolos],o=l[t.payload.layerIndex];return l.fill(!1),o||(l[t.payload.layerIndex]=!0),{...a,layerSolos:l}}case"SET_MASTER_INTENSITY":return{...a,masterIntensity:t.payload};case"TOGGLE_GLOBAL_BLACKOUT":return{...a,globalBlackout:!a.globalBlackout};case"SET_RENDER_SETTING":return{...a,[t.payload.setting]:t.payload.value};case"REMOVE_CLIP_EFFECT":{const l=[...a.clipContents];l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const o={...l[t.payload.layerIndex][t.payload.colIndex]};if(o&&o.effects){const u=[...o.effects];u.splice(t.payload.effectIndex,1),o.effects=u,l[t.payload.layerIndex][t.payload.colIndex]=o}return{...a,clipContents:l}}case"UPDATE_EFFECT_PARAMETER":{const l=[...a.clipContents];l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const o={...l[t.payload.layerIndex][t.payload.colIndex]};if(o&&o.effects){const u=[...o.effects],f={...u[t.payload.effectIndex]};f.params={...f.params,[t.payload.paramName]:t.payload.newValue},u[t.payload.effectIndex]=f,o.effects=u,l[t.payload.layerIndex][t.payload.colIndex]=o}return{...a,clipContents:l}}case"UPDATE_CLIP_PLAYBACK_SETTINGS":{const l=[...a.clipContents];l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const o={...l[t.payload.layerIndex][t.payload.colIndex]};return o&&(o.playbackSettings={...o.playbackSettings||{mode:"fps",duration:1,beats:8,speedMultiplier:1},...t.payload.settings},l[t.payload.layerIndex][t.payload.colIndex]=o),{...a,clipContents:l}}case"SET_CLIP_PARAM_SYNC":{const{layerIndex:l,colIndex:o,paramId:u,syncMode:f}=t.payload,p=[...a.clipContents];p[l]=[...p[l]];const h={...p[l][o]};if(h){const m=h.syncSettings||{},v=m[u]===f?null:f;h.syncSettings={...m,[u]:v},p[l][o]=h}return{...a,clipContents:p}}case"UPDATE_GENERATOR_PARAM":{const l=[...a.clipContents];l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const o={...l[t.payload.layerIndex][t.payload.colIndex]};return o&&o.type==="generator"&&o.currentParams&&(o.currentParams={...o.currentParams,[t.payload.paramName]:t.payload.newValue},l[t.payload.layerIndex][t.payload.colIndex]=o,a.selectedLayerIndex===t.payload.layerIndex&&a.selectedColIndex===t.payload.colIndex)?{...a,clipContents:l,selectedGeneratorParams:o.currentParams}:{...a,clipContents:l}}case"SET_DACS":return{...a,dacs:t.payload};case"SET_BPM":return{...a,bpm:t.payload};case"SET_SELECTED_DAC":return{...a,selectedDac:t.payload};case"SET_IS_PLAYING":return{...a,isPlaying:t.payload};case"SET_IS_STOPPED":return{...a,isStopped:t.payload};case"SET_WORLD_OUTPUT_ACTIVE":return{...a,isWorldOutputActive:t.payload};case"TOGGLE_WORLD_OUTPUT_ACTIVE":return{...a,isWorldOutputActive:!a.isWorldOutputActive};case"SET_CLIPBOARD":return{...a,clipClipboard:t.payload};case"SET_CLIP_DAC":{console.log("App.jsx Reducer: SET_CLIP_DAC payload.dac:",t.payload.dac);const l=[...a.clipContents];if(!l[t.payload.layerIndex])return console.error(`Reducer Error: Layer array at index ${t.payload.layerIndex} is undefined. Action:`,t),a;l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const o=l[t.payload.layerIndex][t.payload.colIndex]||{},u=o.assignedDacs||[];if(u.some(p=>p.ip===t.payload.dac.ip&&p.channel===t.payload.dac.channel))return a;const f={...o,assignedDacs:[...u,{...t.payload.dac,mirrorX:!1,mirrorY:!1}]};return l[t.payload.layerIndex][t.payload.colIndex]=f,{...a,clipContents:l}}case"TOGGLE_CLIP_DAC_MIRROR":{const{layerIndex:l,colIndex:o,dacIndex:u,axis:f}=t.payload,p=[...a.clipContents];p[l]=[...p[l]];const h={...p[l][o]};if(h&&h.assignedDacs){const m=[...h.assignedDacs],v={...m[u]};return f==="x"&&(v.mirrorX=!v.mirrorX),f==="y"&&(v.mirrorY=!v.mirrorY),m[u]=v,h.assignedDacs=m,p[l][o]=h,{...a,clipContents:p}}return a}case"REMOVE_CLIP_DAC":{const l=[...a.clipContents];l[t.payload.layerIndex]=[...l[t.payload.layerIndex]];const{layerIndex:o,colIndex:u,dacIndex:f}=t.payload,p=l[o][u];if(p&&p.assignedDacs){const h=[...p.assignedDacs];return h.splice(f,1),l[t.payload.layerIndex][t.payload.colIndex]={...p,assignedDacs:h},{...a,clipContents:l}}return a}case"SET_CLIP_AUDIO":{const l=[...a.clipContents],{layerIndex:o,colIndex:u,audioFile:f}=t.payload;l[o]=[...l[o]];const p=l[o][u];return p?(l[o][u]={...p,audioFile:f},{...a,clipContents:l}):a}case"REMOVE_CLIP_AUDIO":{const l=[...a.clipContents],{layerIndex:o,colIndex:u}=t.payload;l[o]=[...l[o]];const f=l[o][u];return f?(l[o][u]={...f,audioFile:null},{...a,clipContents:l}):a}case"SET_CLIP_PARSING_STATUS":{const{layerIndex:l,colIndex:o,status:u}=t.payload,f=[...a.clipContents];f[l]=[...f[l]];const p=f[l][o]||{};return f[l][o]={...p,parsing:u},{...a,clipContents:f}}case"SET_THUMBNAIL_RENDER_MODE":return{...a,thumbnailRenderMode:t.payload};case"SET_CLIP_TRIGGER_STYLE":{const{layerIndex:l,colIndex:o,style:u}=t.payload,f=[...a.clipContents];f[l]=[...f[l]];const p=f[l][o]||{};return f[l][o]={...p,triggerStyle:u},{...a,clipContents:f}}case"SET_THEME":return{...a,theme:t.payload};case"UPDATE_THUMBNAIL":{const{layerIndex:l,colIndex:o,frameIndex:u}=t.payload,f=[...a.thumbnailFrameIndexes];return f[l][o]=u,{...a,thumbnailFrameIndexes:f}}case"RESET_STATE":return K0({});case"LOAD_PROJECT":const r={...a,...t.payload};return r.clipContents=Ml(r.clipContents,5,8,()=>({parsing:!1})),r.clipNames=Ml(r.clipNames,5,8,(l,o)=>`Clip ${l+1}-${o+1}`),r.clipContents=r.clipContents.map(l=>l.map(o=>o&&o.type==="ilda"?{...o,workerId:null}:o)),r.activeClipIndexes=Array(a.layers.length).fill(null),r.selectedLayerIndex=null,r.selectedColIndex=null,r.selectedIldaWorkerId=null,r.selectedIldaTotalFrames=0,r.selectedGeneratorId=null,r.selectedGeneratorParams={},r.projectLoadTimestamp=Date.now(),r;case"LOAD_SETTINGS":return{...a,showBeamEffect:t.payload.renderSettings?.showBeamEffect??a.showBeamEffect,beamAlpha:t.payload.renderSettings?.beamAlpha??a.beamAlpha,fadeAlpha:t.payload.renderSettings?.fadeAlpha??a.fadeAlpha,playbackFps:t.payload.renderSettings?.playbackFps??a.playbackFps,previewScanRate:t.payload.renderSettings?.previewScanRate??a.previewScanRate,beamRenderMode:t.payload.renderSettings?.beamRenderMode??a.beamRenderMode,theme:t.payload.theme??a.theme,thumbnailRenderMode:t.payload.thumbnailRenderMode??a.thumbnailRenderMode,selectedDac:t.payload.selectedDac??a.selectedDac,clipNames:t.payload.clipNames?Ml(t.payload.clipNames,5,8,(l,o)=>`Clip ${l+1}-${o+1}`):a.clipNames,dacOutputSettings:t.payload.dacOutputSettings??a.dacOutputSettings};case"ASSIGN_QUICK_CONTROL":{const{type:l,index:o,link:u}=t.payload,f={...a.quickAssigns};return f[l==="knob"?"knobs":"buttons"][o]={...f[l==="knob"?"knobs":"buttons"][o],label:u.paramName,link:u},{...a,quickAssigns:f}}case"UPDATE_QUICK_CONTROL":{const{type:l,index:o,value:u}=t.payload,f={...a.quickAssigns},p=f[l==="knob"?"knobs":"buttons"][o];p.value=u;let h={...a,quickAssigns:f};if(p.link){const{layerIndex:m,colIndex:v,effectIndex:x,paramName:S,targetType:E}=p.link,C=[...h.clipContents];C[m]=[...C[m]];const D=C[m][v];if(D)if(E==="effect"&&D.effects&&D.effects[x]){const j=[...D.effects],N={...j[x]};N.params={...N.params,[S]:u},j[x]=N,C[m][v]={...D,effects:j}}else E==="generator"&&(C[m][v]={...D,currentParams:{...D.currentParams,[S]:u}});h.clipContents=C}return h}default:return a}}const s0={orange:{full:9,dim:10},yellow:{full:13,dim:14},cyan:{full:36,dim:35},"light-blue":{full:41,dim:43},blue:{full:45,dim:46},magenta:{full:53,dim:54},red:{full:5,dim:6},green:{full:21,dim:22},white:{full:3,dim:1}},mx=({isPlaying:a,globalBlackout:t,layerBlackouts:r,layerSolos:l,isWorldOutputActive:o,clipContents:u,activeClipIndexes:f,theme:p,bpm:h})=>{const{sendFeedback:m,mappings:v,selectedMidiInputId:x,midiInitialized:S}=lo();return O.useEffect(()=>{if(!x||!S||!a){S&&x&&Ws(x,"F#6",0,1);return}let E=!1;const C=6e4/(h||120),D=setInterval(()=>{E=!E,Ws(x,"F#6",E?127:0,1)},C/2);return()=>{clearInterval(D),Ws(x,"F#6",0,1)}},[a,h,x,S]),O.useEffect(()=>{m("transport_play",a),m("transport_stop",!a)},[a,m]),O.useEffect(()=>{m("comp_blackout",t)},[t,m]),O.useEffect(()=>{m("laser_output",o)},[o,m]),O.useEffect(()=>{r.forEach((E,C)=>{m(`layer_${C}_blackout`,E)})},[r,m]),O.useEffect(()=>{l.forEach((E,C)=>{m(`layer_${C}_solo`,E)})},[l,m]),O.useEffect(()=>{if(!u||!f)return;const E=s0[p]||s0.orange;u.forEach((C,D)=>{C.forEach((j,N)=>{const V=`clip_${D}_${N}`;if(v[V]){const U=f[D]===N,Y=j!==null&&(j.type==="ilda"||j.type==="generator"),Q=j?.triggerStyle||"normal";let ue=0,Ee=null;U?(ue=E.full,Q==="toggle"&&(Ee=10)):Y&&(ue=E.dim),m(V,ue,Ee)}})})},[u,f,p,v,m]),null};function vx(){const a=oy(),t=fy(),{playAudio:r,stopAudio:l,pauseAllAudio:o,resumeAllAudio:u,setPlaybackRate:f,resetAllAudio:p,stopAllAudio:h,getAudioInfo:m}=dy();O.useRef(new Set),O.useRef(0);const v=O.useRef({}),x=O.useRef(new Map),S=O.useRef({}),[E,C]=O.useState(0),D=O.useRef({}),j=O.useRef({}),[N,V]=O.useState(null),[U,Y]=O.useState(!1),[Q,ue]=O.useState(!1),[Ee,Se]=O.useState({midi:!1,artnet:!1,osc:!1,keyboard:!1}),[J,ae]=O.useState(!1),[ne,ce]=O.useState(!1),[de,re]=O.useState({title:"",initialValue:"",onSave:()=>{}}),[ee,R]=O.useState("files"),[P,I]=O.useReducer(px,K0(U?N:{})),{columns:fe,layers:T,clipContents:G,clipNames:ie,thumbnailFrameIndexes:se,layerEffects:Te,layerIntensities:_e,layerAutopilots:Ae,layerBlackouts:dt,layerSolos:Fe,masterIntensity:rt,globalBlackout:nn,selectedLayerIndex:tt,selectedColIndex:et,notification:or,dacs:Gn,selectedDac:xi,ildaFrames:Hc,selectedIldaWorkerId:Lt,selectedIldaTotalFrames:Ei,showBeamEffect:Ti,beamAlpha:Ai,fadeAlpha:ur,playbackFps:Ra,previewScanRate:Ci,beamRenderMode:Bl,activeClipIndexes:ln,isPlaying:Kt,isWorldOutputActive:Ot,selectedGeneratorId:sa,selectedGeneratorParams:sn,thumbnailRenderMode:Ni,theme:Ur,dacOutputSettings:cr}=P,En=O.useMemo(()=>T.map((L,w)=>{const Z=ln[w];if(Z!==null){const F=G[w][Z];if(F){let te,me=null;if(F.type==="ilda"&&F.workerId&&F.totalFrames)return te=F.workerId,me=F.stillFrame,{type:"ilda",workerId:te,totalFrames:F.totalFrames,effects:F.effects||[],dac:F.dac||null,assignedDacs:F.assignedDacs||[],ildaFormat:F.ildaFormat||0,stillFrame:me,layerIndex:w};if(F.type==="generator"&&F.frames&&F.generatorDefinition)return te=`generator-${w}-${Z}`,me=F.frames?.[0]||null,{type:"generator",workerId:te,totalFrames:F.frames.length,effects:F.effects||[],dac:F.dac||null,assignedDacs:F.assignedDacs||[],ildaFormat:0,stillFrame:me,layerIndex:w}}}return null}).filter(Boolean),[T,ln,G]),fr=O.useRef(_e),Qn=O.useRef(Ae),dr=O.useRef(rt),wa=O.useRef(dt),Mi=O.useRef(Fe),Ri=O.useRef(nn),Lr=O.useRef(cr),kr=O.useRef(Gn),oa=O.useRef([]),Oa=O.useRef(G),hr=O.useRef(ln),ua=O.useRef(ie),Br=O.useRef(Lt),wi=O.useRef(Ei),Oi=O.useRef({});O.useEffect(()=>{fr.current=_e,Qn.current=Ae,dr.current=rt,wa.current=dt,Mi.current=Fe,Ri.current=nn,Lr.current=cr,kr.current=Gn,oa.current=En,Oa.current=G,hr.current=ln,ua.current=ie,Br.current=Lt,wi.current=Ei},[_e,rt,dt,Fe,nn,cr,Gn,En,G,ln,ie,Lt,Ei]);const uo=O.useCallback(L=>{const w=1-L*2,Z=[],F=100;for(let te=0;te<F;te++){const me=te/(F-1)*2-1;Z.push({x:me,y:w,r:0,g:255,b:0,blanking:!1})}return{points:Z,isTypedArray:!1}},[]),Kn=O.useCallback((L,w)=>{if(!w||!L||!L.points)return L;const{safetyZones:Z,outputArea:F,transformationEnabled:te,transformationMode:me}=w;let ve=L.points;const Ke=L.isTypedArray||ve instanceof Float32Array,Ue=Ke?ve.length/8:ve.length;let Oe;Ke?Oe=new Float32Array(ve):Oe=ve.map(ke=>({...ke}));for(let ke=0;ke<Ue;ke++){let Wt,qt,Nn,Mn,Ce,We;if(Ke?(Wt=Oe[ke*8],qt=Oe[ke*8+1],Nn=Oe[ke*8+3],Mn=Oe[ke*8+4],Ce=Oe[ke*8+5],We=Oe[ke*8+6]):(Wt=Oe[ke].x,qt=Oe[ke].y,Nn=Oe[ke].r,Mn=Oe[ke].g,Ce=Oe[ke].b,We=Oe[ke].blanking?1:0),te&&F){let pe=(Wt+1)/2,Ve=(1-qt)/2;me==="crop"?(pe<F.x||pe>F.x+F.w||Ve<F.y||Ve>F.y+F.h)&&(Nn=0,Mn=0,Ce=0,We=1):me==="scale"&&(pe=F.x+pe*F.w,Ve=F.y+Ve*F.h,Wt=pe*2-1,qt=1-Ve*2)}if(Z&&Z.length>0){let pe=(Wt+1)/2,Ve=(1-qt)/2;for(const Ge of Z)if(pe>=Ge.x&&pe<=Ge.x+Ge.w&&Ve>=Ge.y&&Ve<=Ge.y+Ge.h){Nn=0,Mn=0,Ce=0,We=1;break}}Ke?(Oe[ke*8]=Wt,Oe[ke*8+1]=qt,Oe[ke*8+3]=Nn,Oe[ke*8+4]=Mn,Oe[ke*8+5]=Ce,Oe[ke*8+6]=We):(Oe[ke].x=Wt,Oe[ke].y=qt,Oe[ke].r=Nn,Oe[ke].g=Mn,Oe[ke].b=Ce,Oe[ke].blanking=We>.5)}return{...L,points:Oe,isTypedArray:Ke}},[]),kt=O.useCallback((L,w)=>{I({type:"SET_DAC_OUTPUT_SETTINGS",payload:{id:L,settings:w}})},[]),jt=O.useCallback(L=>{I({type:"SET_RENDER_SETTING",payload:{setting:"playbackFps",value:L}})},[]);O.useEffect(()=>{const L=Ra/60;f(L)},[Ra,f]);const an=L=>{I({type:"SET_NOTIFICATION",payload:{message:L,visible:!0}}),setTimeout(()=>{I({type:"SET_NOTIFICATION",payload:{message:"",visible:!1}})},3e3)};O.useEffect(()=>{const L={orange:"#ff5e00",yellow:"#ffd400",cyan:"#00fff3","light-blue":"#0089ff",blue:"#005aff",magenta:"#fb00ff",red:"#ff0000",green:"#00ff00",white:"#ffffff"},w=L[Ur]||L.orange;document.documentElement.style.setProperty("--theme-color",w);const Z=parseInt(w.slice(1,3),16),F=parseInt(w.slice(3,5),16),te=parseInt(w.slice(5,7),16);document.documentElement.style.setProperty("--theme-color-transparent",`rgba(${Z}, ${F}, ${te}, 0.2)`),window.electronAPI&&window.electronAPI.setTheme&&window.electronAPI.setTheme(Ur)},[Ur]),O.useMemo(()=>{const L=new Set;return Lt&&L.add(Lt),En.forEach(w=>{w&&w.type==="ilda"&&w.workerId&&L.add(w.workerId)}),Array.from(L)},[Lt,En]),O.useEffect(()=>{if(!a)return;const L=Ce=>{if(Ce.data.type==="get-frame"&&Ce.data.success)if(Ce.data.isStillFrame){const{workerId:We,frame:pe,layerIndex:Ve,colIndex:Ge}=Ce.data;I({type:"SET_CLIP_CONTENT",payload:{layerIndex:Ve,colIndex:Ge,content:{stillFrame:pe,parsing:!1}}})}else v.current[Ce.data.workerId]=Ce.data.frame;else if(Ce.data.type==="parse-ilda"&&Ce.data.success){const{workerId:We,totalFrames:pe,ildaFormat:Ve,fileName:Ge,filePath:He,layerIndex:Je,colIndex:Be}=Ce.data,Xe=P.clipContents[Je][Be]||{},it={...Xe,type:"ilda",workerId:We,totalFrames:pe,ildaFormat:Ve,fileName:Ge,filePath:He,stillFrame:null,parsing:!0,playbackSettings:Xe.playbackSettings||{mode:"fps",duration:pe/60,beats:8,speedMultiplier:1}};I({type:"SET_CLIP_CONTENT",payload:{layerIndex:Je,colIndex:Be,content:it}});const je=ua.current[Je][Be],lt=`Clip ${Je+1}-${Be+1}`;je===lt&&I({type:"SET_CLIP_NAME",payload:{layerIndex:Je,colIndex:Be,name:Ge}}),a.postMessage({type:"get-frame",workerId:We,frameIndex:0,isStillFrame:!0,layerIndex:Je,colIndex:Be})}else if(Ce.data.success===!1){an(`Worker error: ${Ce.data.error}`);const{layerIndex:We,colIndex:pe}=Ce.data;We!==void 0&&pe!==void 0&&I({type:"SET_CLIP_PARSING_STATUS",payload:{layerIndex:We,colIndex:pe,status:!1}})}};a.addEventListener("message",L);let w,Z,F,te=0,me=0;const ve=60,Ke=1e3/ve,Oe=1e3/30,ke=Ce=>{if(Ce.length===0)return null;if(Ce.length===1)return Ce[0];let We=0;Ce.forEach((Ge,He)=>{const Be=Ge.points instanceof Float32Array||Ge.isTypedArray?Ge.points.length/8:Ge.points.length;We+=Be,He<Ce.length-1&&(We+=2)});const pe=new Float32Array(We*8);let Ve=0;return Ce.forEach((Ge,He)=>{const Je=Ge.points instanceof Float32Array||Ge.isTypedArray,Be=Je?Ge.points.length/8:Ge.points.length;for(let Xe=0;Xe<Be;Xe++){const it=(Ve+Xe)*8;if(Je){const je=Xe*8;pe.set(Ge.points.subarray(je,je+8),it)}else{const je=Ge.points[Xe];pe[it]=je.x,pe[it+1]=je.y,pe[it+2]=je.z||0,pe[it+3]=je.r,pe[it+4]=je.g,pe[it+5]=je.b,pe[it+6]=je.blanking?1:0,pe[it+7]=je.lastPoint?1:0}pe[it+7]=0}if(Ve+=Be,He<Ce.length-1){const Xe=Ce[He+1],it=Xe.points instanceof Float32Array||Xe.isTypedArray,je=pe[(Ve-1)*8],lt=pe[(Ve-1)*8+1];let yt,Vt;it?(yt=Xe.points[0],Vt=Xe.points[1]):(yt=Xe.points[0].x,Vt=Xe.points[0].y);let Rn=Ve*8;pe[Rn]=je,pe[Rn+1]=lt,pe[Rn+6]=1,pe[Rn+3]=0,pe[Rn+4]=0,pe[Rn+5]=0;let Bt=(Ve+1)*8;pe[Bt]=yt,pe[Bt+1]=Vt,pe[Bt+6]=1,pe[Bt+3]=0,pe[Bt+4]=0,pe[Bt+5]=0,Ve+=2}}),pe[(We-1)*8+7]=1,{points:pe,isTypedArray:!0}},Wt=Ce=>{if(!Ot){cancelAnimationFrame(Z);return}if(Ce-te>Ke){if(window.electronAPI&&Ot){const We=new Map;oa.current.forEach(pe=>{if(pe&&v.current[pe.workerId]){const Ve=pe.assignedDacs&&pe.assignedDacs.length>0?pe.assignedDacs:xi?[xi]:[];if(Ve.length===0)return;const Ge=pe.effects||[],He=v.current[pe.workerId],Je=fr.current[pe.layerIndex],Be=Ri.current,Xe=wa.current[pe.layerIndex],it=Mi.current[pe.layerIndex],je=Mi.current.some(Ze=>Ze);let lt=Je;Be?lt=0:je?it?Xe&&(lt=0):lt=0:Xe&&(lt=0);const yt=lt*dr.current;if(yt<=0)return;const Vt=S.current[pe.workerId]||0,Rn=pe.syncSettings||{},Bt={...He,points:qt(He.points)?He.points:He.points.map(Ze=>({...Ze,r:Math.round(Ze.r*yt),g:Math.round(Ze.g*yt),b:Math.round(Ze.b*yt)}))};if(qt(Bt.points)){const Ze=Bt.points,bt=Ze.length/8,pt=new Float32Array(Ze);for(let Qe=0;Qe<bt;Qe++)pt[Qe*8+3]*=yt,pt[Qe*8+4]*=yt,pt[Qe*8+5]*=yt;Bt.points=pt}const Tt=Ge.map(Ze=>{const bt={...Ze.params},pt=tn.find(Qe=>Qe.id===Ze.id);return pt&&pt.paramControls.forEach(Qe=>{const dn=`${Ze.id}.${Qe.id}`,on=Rn[dn];if(on&&(Qe.type==="range"||Qe.type==="number")){let wn=0;on==="fps"?wn=Ce*.001*(Ra/60)%1:(on==="timeline"||on==="bpm")&&(wn=Vt),bt[Qe.id]=Qe.min+(Qe.max-Qe.min)*wn}}),{...Ze,params:bt}}),Jt=h0(Bt,Tt,{progress:Vt,time:Ce,effectStates:x.current});Ve.forEach(Ze=>{const bt=Ze.ip,pt=Ze.channel||(Ze.channels&&Ze.channels.length>0?Ze.channels[0].serviceID:0);if(pt!==void 0){const Qe=`${bt}:${pt}`;We.has(Qe)||We.set(Qe,{ip:bt,channel:pt,frames:[]});let dn=Jt;if(Ze.mirrorX||Ze.mirrorY){const on=Jt.points,wn=Jt.isTypedArray,Pl=wn?on.length/8:on.length,St=wn?new Float32Array(on):on.map(Dt=>({...Dt}));for(let Dt=0;Dt<Pl;Dt++)wn?(Ze.mirrorX&&(St[Dt*8]=-St[Dt*8]),Ze.mirrorY&&(St[Dt*8+1]=-St[Dt*8+1])):(Ze.mirrorX&&(St[Dt].x=-St[Dt].x),Ze.mirrorY&&(St[Dt].y=-St[Dt].y));dn={...Jt,points:St}}We.get(Qe).frames.push(dn)}})}}),kr.current.forEach(pe=>{(pe.channels&&pe.channels.length>0?pe.channels.map(Ge=>Ge.serviceID):[0]).forEach(Ge=>{const He=`${pe.ip}:${Ge}`,Je=Lr.current[He];if(Je){We.has(He)||We.set(He,{ip:pe.ip,channel:Ge,frames:[]});const Be=We.get(He);if(Je.testLineEnabled){const Xe=uo(Je.testLineY!==void 0?Je.testLineY:.5);Be.frames=[Xe]}}})}),We.forEach(pe=>{let Ve=ke(pe.frames);const Ge=`${pe.ip}:${pe.channel}`,He=Lr.current[Ge];Ve&&He&&(Ve=Kn(Ve,He)),Ve&&window.electronAPI.sendFrame(pe.ip,pe.channel,Ve,ve)})}te=Ce}Z=requestAnimationFrame(Wt)};function qt(Ce){return!!Ce&&(Ce instanceof Float32Array||Ce.buffer instanceof ArrayBuffer)}const Nn=Ce=>{const We=1e3/Ra,pe=P.bpm||120,Ve=(He,Je,Be)=>{D.current[Be]||(D.current[Be]=Ce);const Xe=Ce-D.current[Be],it=hr.current[Je]!==null?m(Je):null;let je=j.current[Be]||0,lt=0;const yt=He.totalFrames||1,Vt=He.playbackSettings||{mode:"fps",duration:yt/60,beats:8,speedMultiplier:1};if(it&&Kt&&!it.paused)lt=it.duration>0?it.currentTime/it.duration:0,je=Math.floor(lt*yt);else if(Vt.mode==="timeline"){const Tt=Vt.duration*1e3/(Vt.speedMultiplier||1);Kt&&Tt>0&&(lt=Xe/Tt%1,je=Math.floor(lt*yt))}else if(Vt.mode==="bpm"){const Tt=6e4/pe,Jt=Vt.beats*Tt/(Vt.speedMultiplier||1);Kt&&Jt>0&&(lt=Xe/Jt%1,je=Math.floor(lt*yt))}else if(Xe>=We){const Tt=Math.floor(Xe/We);D.current[Be]=Ce-Xe%We,Kt&&(je=je+Tt),lt=yt>0?je%yt/yt:0}else return;isNaN(je)&&(je=0),isNaN(lt)&&(lt=0);const Bt=(Oi.current[Be]||0)>.9&&lt<.1;if(Oi.current[Be]=lt,S.current[Be]=lt,yt>0&&(je=je%yt),Bt&&Kt){const Tt=Qn.current[Je];if(Tt&&Tt!=="off"){const Jt=Oa.current[Je],Ze=hr.current[Je];let bt=-1;if(Tt==="forward")for(let pt=1;pt<Jt.length;pt++){const Qe=(Ze+pt)%Jt.length,dn=Jt[Qe];if(dn&&(dn.type==="ilda"||dn.type==="generator")){bt=Qe;break}}else if(Tt==="random"){const pt=Jt.map((Qe,dn)=>Qe&&(Qe.type==="ilda"||Qe.type==="generator")?dn:-1).filter(Qe=>Qe!==-1);if(pt.length>0){const Qe=Math.floor(Math.random()*pt.length);bt=pt[Qe],bt===Ze&&pt.length>1&&(bt=pt[(Qe+1)%pt.length])}}bt!==-1&&bt!==Ze&&setTimeout(()=>{gt(Je,bt)},0)}}(j.current[Be]!==je||!v.current[Be])&&(j.current[Be]=je,He.type==="ilda"?a.postMessage({type:"get-frame",workerId:Be,frameIndex:je}):He.type==="generator"&&He.frames&&He.frames[je%He.frames.length]&&(v.current[Be]=He.frames[je%He.frames.length]))};T.forEach((He,Je)=>{const Be=hr.current[Je];if(Be===null)return;const Xe=Oa.current[Je][Be];if(!Xe)return;let it=Xe.type==="ilda"?Xe.workerId:Xe.type==="generator"?`generator-${Je}-${Be}`:null;it&&Ve(Xe,Je,it)});const Ge=Br.current;if(Ge&&!oa.current.some(He=>He.workerId===Ge)){const He=tt,Je=et;if(He!==null&&Je!==null){const Be=Oa.current[He][Je];Be&&Ve(Be,He,Ge)}}w=requestAnimationFrame(Nn)},Mn=Ce=>{Ce-me>Oe&&(C(We=>We+1),me=Ce),F=requestAnimationFrame(Mn)};return w=requestAnimationFrame(Nn),F=requestAnimationFrame(Mn),Ot?Z=requestAnimationFrame(Wt):cancelAnimationFrame(Z),()=>{a.removeEventListener("message",L),cancelAnimationFrame(w),cancelAnimationFrame(Z),cancelAnimationFrame(F)}},[a,Ra,Kt,Ot,xi,m,P.bpm,tt,et]),O.useEffect(()=>{let L,w,Z;return window.electronAPI&&(L=window.electronAPI.onClipContextMenuCommand((F,te,me)=>{if(console.log(`Clip context menu command received: ${F} for ${te}-${me}`),F==="update-thumbnail"){const ve=G[te][me];if(ve)if(ve.type==="ilda"&&ve.workerId&&a){const Ke=j.current[ve.workerId]||0;a.postMessage({type:"get-frame",workerId:ve.workerId,frameIndex:Ke,isStillFrame:!0,layerIndex:te,colIndex:me})}else ve.type==="generator"&&ve.generatorDefinition&&t&&jn(te,me,ve.generatorDefinition,ve.currentParams)}else if(F==="clear-clip")I({type:"CLEAR_CLIP",payload:{layerIndex:te,colIndex:me}});else if(F==="rename-clip"){const ve=ua.current[te][me];re({title:"Rename Clip",initialValue:ve,onSave:Ke=>I({type:"SET_CLIP_NAME",payload:{layerIndex:te,colIndex:me,name:Ke}})}),ae(!0)}else if(F==="copy-clip"){const ve={content:Oa.current[te][me],name:ua.current[te][me]};I({type:"SET_CLIPBOARD",payload:ve}),an("Clip copied.")}else if(F==="cut-clip"){const ve={content:Oa.current[te][me],name:ua.current[te][me]};I({type:"SET_CLIPBOARD",payload:ve}),I({type:"CLEAR_CLIP",payload:{layerIndex:te,colIndex:me}}),an("Clip cut.")}else if(F==="paste-clip")if(P.clipClipboard){const{content:ve,name:Ke}=P.clipClipboard;let Ue={...ve};Ue.type==="ilda"&&(Ue.workerId=null),I({type:"SET_CLIP_CONTENT",payload:{layerIndex:te,colIndex:me,content:Ue}}),I({type:"SET_CLIP_NAME",payload:{layerIndex:te,colIndex:me,name:Ke}}),an("Clip pasted."),setTimeout(()=>{const Oe=Ue;Oe.type==="generator"&&Oe.generatorDefinition&&jn(te,me,Oe.generatorDefinition,Oe.currentParams)},100)}else an("Clipboard is empty.");else F==="set-trigger-style-normal"?I({type:"SET_CLIP_TRIGGER_STYLE",payload:{layerIndex:te,colIndex:me,style:"normal"}}):F==="set-trigger-style-toggle"?I({type:"SET_CLIP_TRIGGER_STYLE",payload:{layerIndex:te,colIndex:me,style:"toggle"}}):F==="set-trigger-style-flash"&&I({type:"SET_CLIP_TRIGGER_STYLE",payload:{layerIndex:te,colIndex:me,style:"flash"}})}),w=window.electronAPI.onLayerFullContextMenuCommand((F,te)=>{if(console.log(`Layer context menu command received: ${F} for ${te}`),F==="layer-rename"){const me=T[te];re({title:"Rename Layer",initialValue:me,onSave:ve=>I({type:"SET_LAYER_NAME",payload:{index:te,name:ve}})}),ae(!0)}else F==="layer-clear-clips"&&I({type:"DEACTIVATE_LAYER_CLIPS",payload:{layerIndex:te}})}),Z=window.electronAPI.onContextMenuActionFromMain(F=>{if(console.log("General context menu action received:",F),F.type==="rename-column"){const te=fe[F.index];re({title:"Rename Column",initialValue:te,onSave:me=>I({type:"SET_COLUMN_NAME",payload:{index:F.index,name:me}})}),ae(!0)}else if(F.type==="rename-layer"){const te=T[F.index];re({title:"Rename Layer",initialValue:te,onSave:me=>I({type:"SET_LAYER_NAME",payload:{index:F.index,name:me}})}),ae(!0)}})),()=>{L&&L(),w&&w(),Z&&Z()}},[G,ie,T,fe,a,t,P.clipClipboard]);const Ir=O.useRef(se);O.useEffect(()=>{for(let L=0;L<T.length;L++)for(let w=0;w<fe.length;w++){const Z=se[L][w],F=Ir.current[L][w];if(Z!==F){const te=G[L][w];te&&te.type==="ilda"&&te.workerId&&(console.log(`[App.jsx] Fetching new still frame for ${L}-${w} at index ${Z}`),a.postMessage({type:"get-frame",workerId:te.workerId,frameIndex:Z,isStillFrame:!0,layerIndex:L,colIndex:w}))}}Ir.current=se},[se,G,T.length,fe.length,a]),O.useEffect(()=>{!P.projectLoadTimestamp||!a||!t||(console.log("Project loaded, regenerating content..."),G.forEach((L,w)=>{L.forEach((Z,F)=>{Z&&(Z.type==="ilda"&&Z.filePath&&!Z.workerId?(console.log(`Reparsing ILDA file for clip ${w}-${F}: ${Z.filePath}`),a.postMessage({type:"load-and-parse-ilda",fileName:Z.fileName,filePath:Z.filePath,layerIndex:w,colIndex:F})):Z.type==="generator"&&Z.generatorDefinition&&(console.log(`Regenerating generator clip ${w}-${F} on project load`),jn(w,F,Z.generatorDefinition,Z.currentParams)))})}))},[P.projectLoadTimestamp,a,t]),O.useEffect(()=>{let L,w,Z,F,te;return window.electronAPI&&(L=window.electronAPI.on("new-project",()=>I({type:"RESET_STATE"})),w=window.electronAPI.on("open-project",()=>{}),Z=window.electronAPI.on("save-project",()=>window.electronAPI.send("save-project",P)),F=window.electronAPI.on("save-project-as",()=>window.electronAPI.send("save-project-as",P)),te=window.electronAPI.on("load-project-data",me=>{I({type:"LOAD_PROJECT",payload:me})})),()=>{L&&L(),w&&w(),Z&&Z(),F&&F(),te&&te()}},[P]),O.useEffect(()=>{let L,w;return(async()=>{if(window.electronAPI&&window.electronAPI.getAllSettings){const F=await window.electronAPI.getAllSettings();F&&(F.shortcutsState&&Se(F.shortcutsState),I({type:"LOAD_SETTINGS",payload:F}))}})(),window.electronAPI&&(L=window.electronAPI.onMenuAction(F=>{if(console.log("Menu action received:",F),F==="output-settings")ce(!0);else if(F.startsWith("set-theme-")){const te=F.split("set-theme-")[1];I({type:"SET_THEME",payload:te})}else if(F==="shortcuts-window"||F.startsWith("open-")&&F.endsWith("-settings"))ue(!0);else if(F.startsWith("toggle-")){const te=F.split("-");if(te.length===3){const me=te[1],ve=te[2]==="true";Se(Ke=>({...Ke,[me]:ve}))}}}),w=window.electronAPI.onRenderSettingsCommand(F=>{console.log("Render settings command received:",F),I({type:"SET_RENDER_SETTING",payload:{setting:F.setting,value:F.value}})})),()=>{L&&L(),w&&w()}},[]),O.useEffect(()=>{if(!a)return;const L=async w=>{if(w.data.type==="request-file-content"){const{filePath:Z,requestId:F}=w.data;try{const te=await window.electronAPI.readFileForWorker(Z);a.postMessage({type:"file-content-response",requestId:F,arrayBuffer:te},[te])}catch(te){console.error(`Renderer: Failed to read file for worker: ${Z}`,te),a.postMessage({type:"file-content-response",requestId:F,error:te.message})}}else if(w.data.type==="parsing-status"){const{layerIndex:Z,colIndex:F,status:te}=w.data;I({type:"SET_CLIP_PARSING_STATUS",payload:{layerIndex:Z,colIndex:F,status:te}})}};return a.addEventListener("message",L),()=>{a.removeEventListener("message",L)}},[a]);const co=O.useMemo(()=>tt!==null&&et!==null?G[tt][et]?.effects||[]:[],[tt,et,G]),fo=O.useCallback((L,w,Z,F,te)=>{I({type:"UPDATE_EFFECT_PARAMETER",payload:{layerIndex:L,colIndex:w,effectIndex:Z,paramName:F,newValue:te}})},[]);O.useEffect(()=>{if(!t)return;const L=w=>{if(w.data.success){const{layerIndex:Z,colIndex:F,frames:te,generatorDefinition:me,currentParams:ve}=w.data,Ke=P.clipContents[Z][F]||{},Ue={...Ke,type:"generator",generatorDefinition:me,frames:te,currentParams:ve,playbackSettings:Ke.playbackSettings||{mode:"fps",duration:te.length/60,beats:8,speedMultiplier:1}};I({type:"SET_CLIP_CONTENT",payload:{layerIndex:Z,colIndex:F,content:Ue}});const Oe=ua.current[Z][F],ke=`Clip ${Z+1}-${F+1}`;Oe===ke&&I({type:"SET_CLIP_NAME",payload:{layerIndex:Z,colIndex:F,name:me.name}});const Wt=`generator-${Z}-${F}`;v.current[Wt]=te[0]}else an(`Error generating frames: ${w.data.error}`)};return t.addEventListener("message",L),()=>{t.removeEventListener("message",L)}},[t,P.clipContents]);const Il=O.useCallback((L,w,Z)=>{console.log("[App.jsx] handleDropGenerator - Received generatorDefinition:",Z),t&&(console.log("[App.jsx] handleDropGenerator - Using new regenerateGeneratorClip function"),jn(L,w,Z,Z.defaultParams))},[t]),jn=async(L,w,Z,F)=>{const te={...Z.defaultParams,...F};let me=null;if(Z.id==="text"){const Ke="src/fonts/arial.ttf";let Ue=te.fontUrl;["https://raw.githubusercontent.com/google/fonts/main/ofl/roboto/Roboto-Regular.ttf","https://raw.githubusercontent.com/googlefonts/roboto-2/main/src/hinted/Roboto-Regular.ttf"].includes(Ue)&&(Ue=Ke);try{if(Ue.startsWith("http"))if(window.electronAPI&&window.electronAPI.fetchUrlAsArrayBuffer)me=await window.electronAPI.fetchUrlAsArrayBuffer(Ue);else throw new Error("URL fetching API is not available.");else if(window.electronAPI&&window.electronAPI.readFileForWorker)me=await window.electronAPI.readFileForWorker(Ue);else throw new Error("File reading API is not available.")}catch(ke){console.error(`Failed to load font for text generator at ${L}-${w}:`,ke),an(`Font error: ${ke.message}`);return}}const ve={type:"generate",layerIndex:L,colIndex:w,generator:Z,params:te,fontBuffer:me};me?t.postMessage(ve,[me]):t.postMessage(ve)},Tn=O.useCallback(L=>{l(L),I({type:"DEACTIVATE_LAYER_CLIPS",payload:{layerIndex:L}})},[l]),Wn=O.useCallback(()=>{h(),I({type:"CLEAR_ALL_ACTIVE_CLIPS"})},[h]),Jn=O.useCallback(()=>{u(),T.forEach((L,w)=>{const Z=ln[w];if(Z!==null){const F=G[w][Z];F&&F.audioFile&&!m(w)&&r(w,F.audioFile.path,!0)}}),I({type:"SET_IS_PLAYING",payload:!0}),I({type:"SET_IS_STOPPED",payload:!1})},[u,T,ln,G,m,r]),ca=O.useCallback(()=>{o(),I({type:"SET_IS_PLAYING",payload:!1}),I({type:"SET_IS_STOPPED",payload:!1})},[o]),$n=O.useCallback(()=>{p(),o(),I({type:"SET_IS_PLAYING",payload:!1}),I({type:"SET_IS_STOPPED",payload:!0}),j.current={}},[p,o]),gt=O.useCallback((L,w,Z=!0)=>{const F=G[L][w];if(!F){Z&&(An(L,w),Tn(L));return}const te=F.triggerStyle||"normal",me=ln[L];if(te==="normal"){if(!Z)return}else if(te==="toggle"){if(!Z)return;if(me===w){Tn(L);return}}else if(te==="flash"&&!Z){me===w&&Tn(L);return}if(F&&F.type==="generator"&&F.frames&&F.frames.length>0){const ve=`generator-${L}-${w}`;v.current[ve]=F.frames[0],D.current[ve]=performance.now(),j.current[ve]=0}else F&&F.type==="ilda"&&F.workerId&&(D.current[F.workerId]=performance.now(),j.current[F.workerId]=0);F&&F.audioFile?r(L,F.audioFile.path,Kt):l(L),I({type:"SET_ACTIVE_CLIP",payload:{layerIndex:L,colIndex:w}})},[G,ln,Tn,r,Kt,l]),Fl=O.useCallback((L,w,Z)=>{I({type:"ADD_CLIP_EFFECT",payload:{layerIndex:L,colIndex:w,effect:Z}})},[]),Gl=O.useCallback((L,w,Z)=>{console.trace("App.jsx: handleDropDac received dacData:",Z),I({type:"SET_CLIP_DAC",payload:{layerIndex:L,colIndex:w,dac:Z}})},[]),An=O.useCallback((L,w)=>{I({type:"SET_SELECTED_CLIP",payload:{layerIndex:L,colIndex:w}});const Z=G[L][w];if(Z&&Z.type==="ilda")I({type:"SET_SELECTED_ILDA_DATA",payload:{workerId:Z.workerId,totalFrames:Z.totalFrames,generatorId:null,generatorParams:{}}});else if(Z&&Z.type==="generator"){const F=`generator-${L}-${w}`;I({type:"SET_SELECTED_ILDA_DATA",payload:{workerId:F,generatorId:Z.generatorDefinition.id,generatorParams:Z.currentParams,totalFrames:Z.frames.length}}),console.log(`[App.jsx] handleClipPreview - Dispatched SET_SELECTED_ILDA_DATA for generator. workerId: ${F}`)}else I({type:"SET_SELECTED_ILDA_DATA",payload:{workerId:null,totalFrames:0,generatorId:null,generatorParams:{}}})},[G]),Da=L=>{window.electronAPI&&window.electronAPI.showLayerFullContextMenu&&window.electronAPI.showLayerFullContextMenu(L)},ho=L=>{window.electronAPI&&window.electronAPI.showColumnContextMenu&&window.electronAPI.showColumnContextMenu(L)},Fr=L=>{T.forEach((w,Z)=>{const F=G[Z][L];F&&(F.type==="ilda"||F.type==="generator")?gt(Z,L):Tn(Z)})},jl=O.useCallback(L=>{I({type:"SET_SELECTED_DAC",payload:L})},[]),po=O.useCallback(L=>{I({type:"SET_DACS",payload:L})},[]),Gr=(L,w)=>{if(tt!==null&&et!==null){const Z=G[tt][et];if(!Z||!Z.generatorDefinition)return;const F={...Z.currentParams,[L]:w};I({type:"UPDATE_GENERATOR_PARAM",payload:{layerIndex:tt,colIndex:et,paramName:L,newValue:w}}),jn(tt,et,Z.generatorDefinition,F)}},pr=tt!==null&&et!==null?G[tt][et]:null,Cn=pr?tt:null,fa=(Cn!==null?_e[Cn]:1)*rt,_a=O.useMemo(()=>{const L=v.current[Lt]||null;return L&&fa!==1?{...L,points:L.points.map(w=>({...w,r:Math.round(w.r*fa),g:Math.round(w.g*fa),b:Math.round(w.b*fa)}))}:L},[E,Lt,fa]),Di=O.useMemo(()=>{const L={};return En.forEach(w=>{w&&w.workerId&&v.current[w.workerId]&&(L[w.workerId]={frame:v.current[w.workerId],effects:w.effects||[],layerIndex:w.layerIndex})}),L},[En,E]),_i=O.useMemo(()=>{const L=Fe.some(w=>w);return _e.map((w,Z)=>{if(nn)return 0;if(L){if(!Fe[Z]||dt[Z])return 0}else if(dt[Z])return 0;return w})},[_e,dt,Fe,nn]),Hl=O.useCallback((L,w,Z=127,F="noteon")=>{if(w===0&&!L.endsWith("_intensity")&&L!=="master_intensity"&&L!=="master_speed"&&!L.startsWith("clip_")&&L!=="bpm_value"&&L!=="bpm_fine_up"&&L!=="bpm_fine_down")return;const te=w/Z;switch(L){case"transport_play":w>0&&Jn();break;case"transport_pause":w>0&&ca();break;case"transport_stop":w>0&&$n();break;case"comp_blackout":w>0&&I({type:"TOGGLE_GLOBAL_BLACKOUT"});break;case"comp_clear":w>0&&Wn();break;case"master_intensity":I({type:"SET_MASTER_INTENSITY",payload:te});break;case"master_speed":const me=Math.max(1,Math.round(te*120));jt(me);break;case"laser_output":w>0&&I({type:"TOGGLE_WORLD_OUTPUT_ACTIVE"});break;case"bpm_value":if(F==="controlchange"){let ve=0;w<=10?ve=w:w>=118&&(ve=w-128),ve!==0&&I({type:"SET_BPM",payload:Math.max(1,Math.min(999,(P.bpm||120)+ve))})}break;case"bpm_fine_up":w>0&&I({type:"SET_BPM",payload:Math.min(999,(P.bpm||120)+.1)});break;case"bpm_fine_down":w>0&&I({type:"SET_BPM",payload:Math.max(1,(P.bpm||120)-.1)});break;case"bpm_tap":break;default:if(L.startsWith("layer_")){const ve=L.split("_"),Ke=parseInt(ve[1]),Ue=ve[2];Ue==="blackout"&&w>0?I({type:"TOGGLE_LAYER_BLACKOUT",payload:{layerIndex:Ke}}):Ue==="solo"&&w>0?I({type:"TOGGLE_LAYER_SOLO",payload:{layerIndex:Ke}}):Ue==="intensity"?I({type:"SET_LAYER_INTENSITY",payload:{layerIndex:Ke,intensity:te}}):Ue==="clear"&&w>0&&Tn(Ke)}else if(L.startsWith("clip_")){const ve=L.split("_"),Ke=parseInt(ve[1]),Ue=parseInt(ve[2]);ve[3]==="preview"?w>0&&An(Ke,Ue):gt(Ke,Ue,w>0)}else if(L.startsWith("column_")){const ve=L.split("_"),Ke=parseInt(ve[1]);w>0&&Fr(Ke)}}},[Jn,ca,$n,Wn,Tn,jt,P.bpm,An,gt,Fr]);return g.jsx(mg,{onMidiCommand:Hl,children:g.jsxs(vg,{onArtnetCommand:(L,w)=>Hl(L,w,255),children:[g.jsx(mx,{isPlaying:Kt,globalBlackout:nn,layerBlackouts:dt,layerSolos:Fe,isWorldOutputActive:Ot,clipContents:G,activeClipIndexes:ln,theme:Ur,bpm:P.bpm}),g.jsx(my,{}),g.jsx("div",{className:"app",children:g.jsxs(sy,{children:[g.jsx(Zg,{message:or.message,visible:or.visible}),g.jsx(ly,{show:ne,onClose:()=>ce(!1),dacs:Gn,dacSettings:cr,onUpdateDacSettings:kt}),g.jsx(ry,{show:J,title:de.title,initialValue:de.initialValue,onSave:de.onSave,onClose:()=>ue(!1)||ae(!1)}),g.jsxs("div",{className:"main-content",children:[g.jsxs("div",{className:"top-bar-left-area",children:[g.jsx(yg,{masterIntensity:P.masterIntensity,onMasterIntensityChange:L=>I({type:"SET_MASTER_INTENSITY",payload:L}),onClearAllActive:Wn,isGlobalBlackout:nn,onToggleGlobalBlackout:()=>I({type:"TOGGLE_GLOBAL_BLACKOUT"})}),g.jsx(hx,{isWorldOutputActive:Ot,onToggleWorldOutput:()=>I({type:"TOGGLE_WORLD_OUTPUT_ACTIVE"})})]}),g.jsxs("div",{className:"layer-controls-container",children:[T.map((L,w)=>{const Z=En.find(te=>{const me=ln[w];if(me===null)return!1;const ve=G[w][me];return ve?ve.type==="ilda"?te.workerId===ve.workerId:ve.type==="generator"?te.workerId===`generator-${w}-${me}`:!1:!1})||null,F=Z?v.current[Z.workerId]:null;return g.jsx(Sg,{layerName:L,index:w,layerEffects:Te[w],activeClipData:Z,liveFrame:F,thumbnailRenderMode:Ni,intensity:P.layerIntensities[w],onIntensityChange:te=>I({type:"SET_LAYER_INTENSITY",payload:{layerIndex:w,intensity:te}}),onDeactivateLayerClips:()=>Tn(w),onShowLayerFullContextMenu:()=>Da(w),isBlackout:dt[w],isSolo:Fe[w],onToggleBlackout:()=>I({type:"TOGGLE_LAYER_BLACKOUT",payload:{layerIndex:w}}),onToggleSolo:()=>I({type:"TOGGLE_LAYER_SOLO",payload:{layerIndex:w}})},w)}),"          "]}),g.jsx("div",{className:"clip-deck-container",children:g.jsxs("div",{className:"clip-deck",children:[g.jsx("div",{className:"column-headers-container",children:fe.map((L,w)=>g.jsx(bg,{name:L,index:w,onTrigger:()=>Fr(w),onShowColumnHeaderContextMenu:()=>ho(w)},w))}),T.map((L,w)=>g.jsx("div",{className:"layer-row",children:fe.map((Z,F)=>{const te=G?.[w]?.[F];let me=null;te&&te.type==="ilda"?me=te.workerId:te&&te.type==="generator"&&(me=`generator-${w}-${F}`);const ve=me?v.current[me]:null,Ke=te&&te.type==="ilda"?te.stillFrame:te&&te.type==="generator"?te.frames?.[0]:null;return g.jsx(kg,{layerIndex:w,colIndex:F,clipName:ie?.[w]?.[F]||`Clip ${w+1}-${F+1}`,clipContent:te,thumbnailFrameIndex:se[w][F],thumbnailRenderMode:Ni,liveFrame:ve,stillFrame:Ke,onActivateClick:Ue=>gt(w,F,Ue),isActive:ln[w]===F,onUnsupportedFile:an,onDropEffect:Ue=>Fl(w,F,Ue),onDropGenerator:Il,onDropDac:(Ue,Oe,ke)=>{console.log("App.jsx: Lambda dacData from Clip:",ke),Gl(Ue,Oe,ke)},onLabelClick:()=>An(w,F),isSelected:tt===w&&et===F,ildaParserWorker:a},F)})},w))]})}),g.jsxs("div",{className:"side-panel",children:[g.jsxs("div",{className:"thumbnail-render-mode-selector",children:[g.jsx("label",{htmlFor:"thumbnailRenderMode",children:"Thumbnail Mode:"}),g.jsxs("select",{id:"thumbnailRenderMode",value:Ni,onChange:L=>I({type:"SET_THUMBNAIL_RENDER_MODE",payload:L.target.value}),children:[g.jsx("option",{value:"still",children:"Still Frame"}),g.jsx("option",{value:"active",children:"Live Render"})]})]}),g.jsx(Wg,{frame:_a,effects:co,showBeamEffect:Ti,beamAlpha:Ai,fadeAlpha:ur,previewScanRate:Ci,beamRenderMode:Bl,intensity:fa}),g.jsx(Jg,{activeFrames:Di,showBeamEffect:Ti,beamAlpha:Ai,fadeAlpha:ur,previewScanRate:Ci,beamRenderMode:Bl,layerIntensities:_i,masterIntensity:rt})]}),g.jsxs("div",{className:"middle-bar",children:[g.jsx("div",{className:"middle-bar-left-area",children:g.jsx($g,{bpm:P.bpm,onBpmChange:L=>I({type:"SET_BPM",payload:L})})}),g.jsxs("div",{className:"middle-bar-mid-area",children:[g.jsx(ey,{onPlay:Jn,onPause:ca,onStop:$n,isPlaying:Kt,isStopped:P.isStopped}),g.jsx(dx,{playbackFps:Ra,onSpeedChange:jt})]}),"          			",g.jsx("div",{className:"middle-bar-right-area",children:g.jsx("p",{children:" Right Section of Middle-Bar"})})]}),"          ",g.jsxs("div",{className:"bottom-panel",children:[g.jsxs("div",{className:"bottom-panel-tabs-container",children:[g.jsxs("div",{className:"bottom-panel-tabs",children:[g.jsx("button",{className:`tab-button ${ee==="files"?"active":""}`,onClick:()=>R("files"),children:"Files"}),g.jsx("button",{className:`tab-button ${ee==="generators"?"active":""}`,onClick:()=>R("generators"),children:"Generators"}),g.jsx("button",{className:`tab-button ${ee==="effects"?"active":""}`,onClick:()=>R("effects"),children:"Effects"})]}),g.jsxs("div",{className:"bottom-panel-tab-content",children:[ee==="files"&&g.jsx(Bg,{onDropIld:(L,w,Z)=>a.postMessage({type:"parse-ilda",file:Z,layerIndex:L,colIndex:w})}),ee==="generators"&&g.jsx(Ig,{}),ee==="effects"&&g.jsx(Fg,{})]})]}),g.jsx(Gg,{dacs:Gn,onDacSelected:jl,onDacsDiscovered:po,dacSettings:cr,onUpdateDacSettings:kt}),g.jsx(Xg,{selectedLayerIndex:tt,autopilotMode:tt!==null?P.layerAutopilots[tt]:"off",onAutopilotChange:L=>I({type:"SET_LAYER_AUTOPILOT",payload:{layerIndex:tt,mode:L}})}),g.jsx(Vg,{selectedLayerIndex:tt,selectedColIndex:et,clip:pr,audioInfo:m(tt),onAssignAudio:async()=>{const L=await window.electronAPI.showAudioFileDialog();if(L){const w=L.split(/[\\/]/).pop();I({type:"SET_CLIP_AUDIO",payload:{layerIndex:tt,colIndex:et,audioFile:{path:L,name:w}}})}},onRemoveAudio:()=>I({type:"REMOVE_CLIP_AUDIO",payload:{layerIndex:tt,colIndex:et}}),onUpdatePlaybackSettings:(L,w,Z)=>I({type:"UPDATE_CLIP_PLAYBACK_SETTINGS",payload:{layerIndex:L,colIndex:w,settings:Z}}),onSetParamSync:(L,w)=>I({type:"SET_CLIP_PARAM_SYNC",payload:{layerIndex:tt,colIndex:et,paramId:L,syncMode:w}}),onToggleDacMirror:(L,w,Z,F)=>I({type:"TOGGLE_CLIP_DAC_MIRROR",payload:{layerIndex:L,colIndex:w,dacIndex:Z,axis:F}}),onRemoveDac:L=>I({type:"REMOVE_CLIP_DAC",payload:{layerIndex:tt,colIndex:et,dacIndex:L}}),onRemoveEffect:(L,w,Z)=>I({type:"REMOVE_CLIP_EFFECT",payload:{layerIndex:L,colIndex:w,effectIndex:Z}}),onParameterChange:fo,onGeneratorParameterChange:Gr}),g.jsx(ay,{enabledShortcuts:Ee,onOpenOutputSettings:()=>ce(!0),quickAssigns:P.quickAssigns,onUpdateKnob:(L,w)=>I({type:"UPDATE_QUICK_CONTROL",payload:{type:"knob",index:L,value:w}}),onToggleButton:L=>I({type:"UPDATE_QUICK_CONTROL",payload:{type:"button",index:L,value:!P.quickAssigns.buttons[L].value}}),onAssign:(L,w,Z)=>I({type:"ASSIGN_QUICK_CONTROL",payload:{type:L,index:w,link:Z}})})]})]})]})})]})})}lg.createRoot(document.getElementById("root")).render(g.jsx(Qg,{children:g.jsx(uy,{children:g.jsxs(cy,{children:[" ",g.jsx(vx,{})]})})}));
